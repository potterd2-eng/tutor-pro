var cb=r=>{throw TypeError(r)};var qg=(r,t,e)=>t.has(r)||cb("Cannot "+e);var si=(r,t,e)=>(qg(r,t,"read from private field"),e?e.call(r):t.get(r)),fo=(r,t,e)=>t.has(r)?cb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),dr=(r,t,e,n)=>(qg(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),po=(r,t,e)=>(qg(r,t,"access private method"),e);var ub=(r,t,e,n)=>({set _(s){dr(r,t,s,e)},get _(){return si(r,t,n)}});function bA(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var UT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Gg={exports:{}},$h={};var hb;function yA(){if(hb)return $h;hb=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:r,type:n,key:l,ref:s!==void 0?s:null,props:a}}return $h.Fragment=t,$h.jsx=e,$h.jsxs=e,$h}var fb;function vA(){return fb||(fb=1,Gg.exports=yA()),Gg.exports}var ot=vA(),Vg={exports:{}},He={};var db;function wA(){if(db)return He;db=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function b(Y){return Y===null||typeof Y!="object"?null:(Y=v&&Y[v]||Y["@@iterator"],typeof Y=="function"?Y:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function S(Y,k,U){this.props=Y,this.context=k,this.refs=T,this.updater=U||C}S.prototype.isReactComponent={},S.prototype.setState=function(Y,k){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,k,"setState")},S.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function R(){}R.prototype=S.prototype;function M(Y,k,U){this.props=Y,this.context=k,this.refs=T,this.updater=U||C}var D=M.prototype=new R;D.constructor=M,A(D,S.prototype),D.isPureReactComponent=!0;var z=Array.isArray;function K(){}var Z={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function H(Y,k,U){var W=U.ref;return{$$typeof:r,type:Y,key:k,ref:W!==void 0?W:null,props:U}}function lt(Y,k){return H(Y.type,k,Y.props)}function P(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===r}function G(Y){var k={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(U){return k[U]})}var rt=/\/+/g;function Q(Y,k){return typeof Y=="object"&&Y!==null&&Y.key!=null?G(""+Y.key):k.toString(36)}function gt(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(K,K):(Y.status="pending",Y.then(function(k){Y.status==="pending"&&(Y.status="fulfilled",Y.value=k)},function(k){Y.status==="pending"&&(Y.status="rejected",Y.reason=k)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function V(Y,k,U,W,st){var ct=typeof Y;(ct==="undefined"||ct==="boolean")&&(Y=null);var ht=!1;if(Y===null)ht=!0;else switch(ct){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(Y.$$typeof){case r:case t:ht=!0;break;case p:return ht=Y._init,V(ht(Y._payload),k,U,W,st)}}if(ht)return st=st(Y),ht=W===""?"."+Q(Y,0):W,z(st)?(U="",ht!=null&&(U=ht.replace(rt,"$&/")+"/"),V(st,k,U,"",function(Dt){return Dt})):st!=null&&(P(st)&&(st=lt(st,U+(st.key==null||Y&&Y.key===st.key?"":(""+st.key).replace(rt,"$&/")+"/")+ht)),k.push(st)),1;ht=0;var Ct=W===""?".":W+":";if(z(Y))for(var _t=0;_t<Y.length;_t++)W=Y[_t],ct=Ct+Q(W,_t),ht+=V(W,k,U,ct,st);else if(_t=b(Y),typeof _t=="function")for(Y=_t.call(Y),_t=0;!(W=Y.next()).done;)W=W.value,ct=Ct+Q(W,_t++),ht+=V(W,k,U,ct,st);else if(ct==="object"){if(typeof Y.then=="function")return V(gt(Y),k,U,W,st);throw k=String(Y),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return ht}function et(Y,k,U){if(Y==null)return Y;var W=[],st=0;return V(Y,W,"","",function(ct){return k.call(U,ct,st++)}),W}function at(Y){if(Y._status===-1){var k=Y._result;k=k(),k.then(function(U){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=U)},function(U){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=U)}),Y._status===-1&&(Y._status=0,Y._result=k)}if(Y._status===1)return Y._result.default;throw Y._result}var wt=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},Rt={map:et,forEach:function(Y,k,U){et(Y,function(){k.apply(this,arguments)},U)},count:function(Y){var k=0;return et(Y,function(){k++}),k},toArray:function(Y){return et(Y,function(k){return k})||[]},only:function(Y){if(!P(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return He.Activity=g,He.Children=Rt,He.Component=S,He.Fragment=e,He.Profiler=s,He.PureComponent=M,He.StrictMode=n,He.Suspense=h,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,He.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return Z.H.useMemoCache(Y)}},He.cache=function(Y){return function(){return Y.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(Y,k,U){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var W=A({},Y.props),st=Y.key;if(k!=null)for(ct in k.key!==void 0&&(st=""+k.key),k)!J.call(k,ct)||ct==="key"||ct==="__self"||ct==="__source"||ct==="ref"&&k.ref===void 0||(W[ct]=k[ct]);var ct=arguments.length-2;if(ct===1)W.children=U;else if(1<ct){for(var ht=Array(ct),Ct=0;Ct<ct;Ct++)ht[Ct]=arguments[Ct+2];W.children=ht}return H(Y.type,st,W)},He.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},He.createElement=function(Y,k,U){var W,st={},ct=null;if(k!=null)for(W in k.key!==void 0&&(ct=""+k.key),k)J.call(k,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(st[W]=k[W]);var ht=arguments.length-2;if(ht===1)st.children=U;else if(1<ht){for(var Ct=Array(ht),_t=0;_t<ht;_t++)Ct[_t]=arguments[_t+2];st.children=Ct}if(Y&&Y.defaultProps)for(W in ht=Y.defaultProps,ht)st[W]===void 0&&(st[W]=ht[W]);return H(Y,ct,st)},He.createRef=function(){return{current:null}},He.forwardRef=function(Y){return{$$typeof:c,render:Y}},He.isValidElement=P,He.lazy=function(Y){return{$$typeof:p,_payload:{_status:-1,_result:Y},_init:at}},He.memo=function(Y,k){return{$$typeof:f,type:Y,compare:k===void 0?null:k}},He.startTransition=function(Y){var k=Z.T,U={};Z.T=U;try{var W=Y(),st=Z.S;st!==null&&st(U,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(K,wt)}catch(ct){wt(ct)}finally{k!==null&&U.types!==null&&(k.types=U.types),Z.T=k}},He.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},He.use=function(Y){return Z.H.use(Y)},He.useActionState=function(Y,k,U){return Z.H.useActionState(Y,k,U)},He.useCallback=function(Y,k){return Z.H.useCallback(Y,k)},He.useContext=function(Y){return Z.H.useContext(Y)},He.useDebugValue=function(){},He.useDeferredValue=function(Y,k){return Z.H.useDeferredValue(Y,k)},He.useEffect=function(Y,k){return Z.H.useEffect(Y,k)},He.useEffectEvent=function(Y){return Z.H.useEffectEvent(Y)},He.useId=function(){return Z.H.useId()},He.useImperativeHandle=function(Y,k,U){return Z.H.useImperativeHandle(Y,k,U)},He.useInsertionEffect=function(Y,k){return Z.H.useInsertionEffect(Y,k)},He.useLayoutEffect=function(Y,k){return Z.H.useLayoutEffect(Y,k)},He.useMemo=function(Y,k){return Z.H.useMemo(Y,k)},He.useOptimistic=function(Y,k){return Z.H.useOptimistic(Y,k)},He.useReducer=function(Y,k,U){return Z.H.useReducer(Y,k,U)},He.useRef=function(Y){return Z.H.useRef(Y)},He.useState=function(Y){return Z.H.useState(Y)},He.useSyncExternalStore=function(Y,k,U){return Z.H.useSyncExternalStore(Y,k,U)},He.useTransition=function(){return Z.H.useTransition()},He.version="19.2.4",He}var pb;function b0(){return pb||(pb=1,Vg.exports=wA()),Vg.exports}var bt=b0();const Nv=m0(bt);var $g={exports:{}},Yh={},Yg={exports:{}},Xg={};var gb;function xA(){return gb||(gb=1,(function(r){function t(V,et){var at=V.length;V.push(et);t:for(;0<at;){var wt=at-1>>>1,Rt=V[wt];if(0<s(Rt,et))V[wt]=et,V[at]=Rt,at=wt;else break t}}function e(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var et=V[0],at=V.pop();if(at!==et){V[0]=at;t:for(var wt=0,Rt=V.length,Y=Rt>>>1;wt<Y;){var k=2*(wt+1)-1,U=V[k],W=k+1,st=V[W];if(0>s(U,at))W<Rt&&0>s(st,U)?(V[wt]=st,V[W]=at,wt=W):(V[wt]=U,V[k]=at,wt=k);else if(W<Rt&&0>s(st,at))V[wt]=st,V[W]=at,wt=W;else break t}}return et}function s(V,et){var at=V.sortIndex-et.sortIndex;return at!==0?at:V.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var h=[],f=[],p=1,g=null,v=3,b=!1,C=!1,A=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function D(V){for(var et=e(f);et!==null;){if(et.callback===null)n(f);else if(et.startTime<=V)n(f),et.sortIndex=et.expirationTime,t(h,et);else break;et=e(f)}}function z(V){if(A=!1,D(V),!C)if(e(h)!==null)C=!0,K||(K=!0,G());else{var et=e(f);et!==null&&gt(z,et.startTime-V)}}var K=!1,Z=-1,J=5,H=-1;function lt(){return T?!0:!(r.unstable_now()-H<J)}function P(){if(T=!1,K){var V=r.unstable_now();H=V;var et=!0;try{t:{C=!1,A&&(A=!1,R(Z),Z=-1),b=!0;var at=v;try{e:{for(D(V),g=e(h);g!==null&&!(g.expirationTime>V&&lt());){var wt=g.callback;if(typeof wt=="function"){g.callback=null,v=g.priorityLevel;var Rt=wt(g.expirationTime<=V);if(V=r.unstable_now(),typeof Rt=="function"){g.callback=Rt,D(V),et=!0;break e}g===e(h)&&n(h),D(V)}else n(h);g=e(h)}if(g!==null)et=!0;else{var Y=e(f);Y!==null&&gt(z,Y.startTime-V),et=!1}}break t}finally{g=null,v=at,b=!1}et=void 0}}finally{et?G():K=!1}}}var G;if(typeof M=="function")G=function(){M(P)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,Q=rt.port2;rt.port1.onmessage=P,G=function(){Q.postMessage(null)}}else G=function(){S(P,0)};function gt(V,et){Z=S(function(){V(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(V){switch(v){case 1:case 2:case 3:var et=3;break;default:et=v}var at=v;v=et;try{return V()}finally{v=at}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(V,et){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var at=v;v=V;try{return et()}finally{v=at}},r.unstable_scheduleCallback=function(V,et,at){var wt=r.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?wt+at:wt):at=wt,V){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=at+Rt,V={id:p++,callback:et,priorityLevel:V,startTime:at,expirationTime:Rt,sortIndex:-1},at>wt?(V.sortIndex=at,t(f,V),e(h)===null&&V===e(f)&&(A?(R(Z),Z=-1):A=!0,gt(z,at-wt))):(V.sortIndex=Rt,t(h,V),C||b||(C=!0,K||(K=!0,G()))),V},r.unstable_shouldYield=lt,r.unstable_wrapCallback=function(V){var et=v;return function(){var at=v;v=et;try{return V.apply(this,arguments)}finally{v=at}}}})(Xg)),Xg}var mb;function AA(){return mb||(mb=1,Yg.exports=xA()),Yg.exports}var Wg={exports:{}},Ts={};var bb;function _A(){if(bb)return Ts;bb=1;var r=b0();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:h,containerInfo:f,implementation:p}}var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ts.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(h,f,null,p)},Ts.flushSync=function(h){var f=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=f,n.p=p,n.d.f()}},Ts.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},Ts.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Ts.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,g=c(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):p==="script"&&n.d.X(h,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ts.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},Ts.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=c(p,f.crossOrigin);n.d.L(h,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ts.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=c(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},Ts.requestFormReset=function(h){n.d.r(h)},Ts.unstable_batchedUpdates=function(h,f){return h(f)},Ts.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},Ts.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ts.version="19.2.4",Ts}var yb;function SA(){if(yb)return Wg.exports;yb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Wg.exports=_A(),Wg.exports}var vb;function CA(){if(vb)return Yh;vb=1;var r=AA(),t=b0(),e=SA();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function c(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(n(188))}function f(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,d=o;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){u=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return h(y),i;if(x===d)return h(y),o;x=x.sibling}throw Error(n(188))}if(u.return!==d.return)u=y,d=x;else{for(var L=!1,q=y.child;q;){if(q===u){L=!0,u=y,d=x;break}if(q===d){L=!0,d=y,u=x;break}q=q.sibling}if(!L){for(q=x.child;q;){if(q===u){L=!0,u=x,d=y;break}if(q===d){L=!0,d=x,u=y;break}q=q.sibling}if(!L)throw Error(n(189))}}if(u.alternate!==d)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function p(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=p(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),M=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var rt=Symbol.for("react.client.reference");function Q(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===rt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case S:return"Profiler";case T:return"StrictMode";case z:return"Suspense";case K:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case M:return i.displayName||"Context";case R:return(i._context.displayName||"Context")+".Consumer";case D:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Z:return o=i.displayName||null,o!==null?o:Q(i.type)||"Memo";case J:o=i._payload,i=i._init;try{return Q(i(o))}catch{}}return null}var gt=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},wt=[],Rt=-1;function Y(i){return{current:i}}function k(i){0>Rt||(i.current=wt[Rt],wt[Rt]=null,Rt--)}function U(i,o){Rt++,wt[Rt]=i.current,i.current=o}var W=Y(null),st=Y(null),ct=Y(null),ht=Y(null);function Ct(i,o){switch(U(ct,o),U(st,i),U(W,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?M2(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=M2(o),i=D2(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}k(W),U(W,i)}function _t(){k(W),k(st),k(ct)}function Dt(i){i.memoizedState!==null&&U(ht,i);var o=W.current,u=D2(o,i.type);o!==u&&(U(st,i),U(W,u))}function Vt(i){st.current===i&&(k(W),k(st)),ht.current===i&&(k(ht),Hh._currentValue=at)}var Wt,Kt;function St(i){if(Wt===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Wt=o&&o[1]||"",Kt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+i+Kt}var I=!1;function jt(i,o){if(!i||I)return"";I=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(kt){var Lt=kt}Reflect.construct(i,[],zt)}else{try{zt.call()}catch(kt){Lt=kt}i.call(zt.prototype)}}else{try{throw Error()}catch(kt){Lt=kt}(zt=i())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(kt){if(kt&&Lt&&typeof kt.stack=="string")return[kt.stack,Lt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),L=x[0],q=x[1];if(L&&q){var ut=L.split(`
`),Nt=q.split(`
`);for(y=d=0;d<ut.length&&!ut[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Nt.length&&!Nt[y].includes("DetermineComponentFrameRoot");)y++;if(d===ut.length||y===Nt.length)for(d=ut.length-1,y=Nt.length-1;1<=d&&0<=y&&ut[d]!==Nt[y];)y--;for(;1<=d&&0<=y;d--,y--)if(ut[d]!==Nt[y]){if(d!==1||y!==1)do if(d--,y--,0>y||ut[d]!==Nt[y]){var Bt=`
`+ut[d].replace(" at new "," at ");return i.displayName&&Bt.includes("<anonymous>")&&(Bt=Bt.replace("<anonymous>",i.displayName)),Bt}while(1<=d&&0<=y);break}}}finally{I=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?St(u):""}function qt(i,o){switch(i.tag){case 26:case 27:case 5:return St(i.type);case 16:return St("Lazy");case 13:return i.child!==o&&o!==null?St("Suspense Fallback"):St("Suspense");case 19:return St("SuspenseList");case 0:case 15:return jt(i.type,!1);case 11:return jt(i.type.render,!1);case 1:return jt(i.type,!0);case 31:return St("Activity");default:return""}}function Yt(i){try{var o="",u=null;do o+=qt(i,u),u=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ot=Object.prototype.hasOwnProperty,Jt=r.unstable_scheduleCallback,Xt=r.unstable_cancelCallback,Qt=r.unstable_shouldYield,ie=r.unstable_requestPaint,Se=r.unstable_now,Xe=r.unstable_getCurrentPriorityLevel,Pe=r.unstable_ImmediatePriority,We=r.unstable_UserBlockingPriority,je=r.unstable_NormalPriority,ue=r.unstable_LowPriority,ke=r.unstable_IdlePriority,he=r.log,Tn=r.unstable_setDisableYieldValue,Re=null,ve=null;function Me(i){if(typeof he=="function"&&Tn(i),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Re,i)}catch{}}var Ze=Math.clz32?Math.clz32:Te,we=Math.log,Pn=Math.LN2;function Te(i){return i>>>=0,i===0?32:31-(we(i)/Pn|0)|0}var De=256,Nn=262144,Ge=4194304;function ge(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function rn(i,o,u){var d=i.pendingLanes;if(d===0)return 0;var y=0,x=i.suspendedLanes,L=i.pingedLanes;i=i.warmLanes;var q=d&134217727;return q!==0?(d=q&~x,d!==0?y=ge(d):(L&=q,L!==0?y=ge(L):u||(u=q&~i,u!==0&&(y=ge(u))))):(q=d&~x,q!==0?y=ge(q):L!==0?y=ge(L):u||(u=d&~i,u!==0&&(y=ge(u)))),y===0?0:o!==0&&o!==y&&(o&x)===0&&(x=y&-y,u=o&-o,x>=u||x===32&&(u&4194048)!==0)?o:y}function yr(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function es(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(){var i=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),i}function Xs(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function be(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function fa(i,o,u,d,y,x){var L=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var q=i.entanglements,ut=i.expirationTimes,Nt=i.hiddenUpdates;for(u=L&~u;0<u;){var Bt=31-Ze(u),zt=1<<Bt;q[Bt]=0,ut[Bt]=-1;var Lt=Nt[Bt];if(Lt!==null)for(Nt[Bt]=null,Bt=0;Bt<Lt.length;Bt++){var kt=Lt[Bt];kt!==null&&(kt.lane&=-536870913)}u&=~zt}d!==0&&Hr(i,d,0),x!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=x&~(L&~o))}function Hr(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-Ze(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|u&261930}function Ps(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-Ze(u),y=1<<d;y&o|i[d]&o&&(i[d]|=o),u&=~y}}function Os(i,o){var u=o&-o;return u=(u&42)!==0?1:$n(u),(u&(i.suspendedLanes|o))!==0?0:u}function $n(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function mi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Oi(){var i=et.p;return i!==0?i:(i=window.event,i===void 0?32:nb(i.type))}function $a(i,o){var u=et.p;try{return et.p=i,o()}finally{et.p=u}}var fs=Math.random().toString(36).slice(2),Ln="__reactFiber$"+fs,Yn="__reactProps$"+fs,ns="__reactContainer$"+fs,Bs="__reactEvents$"+fs,Ws="__reactListeners$"+fs,Co="__reactHandles$"+fs,vr="__reactResources$"+fs,wr="__reactMarker$"+fs;function Ya(i){delete i[Ln],delete i[Yn],delete i[Bs],delete i[Ws],delete i[Co]}function xr(i){var o=i[Ln];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ns]||u[Ln]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=U2(i);i!==null;){if(u=i[Ln])return u;i=U2(i)}return o}i=u,u=i.parentNode}return null}function Ar(i){if(i=i[Ln]||i[ns]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function Eo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function qr(i){var o=i[vr];return o||(o=i[vr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function oi(i){i[wr]=!0}var Jl=new Set,Is={};function _r(i,o){da(i,o),da(i+"Capture",o)}function da(i,o){for(Is[i]=o,i=0;i<o.length;i++)Jl.add(o[i])}var Ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tc={},ec={};function Xc(i){return Ot.call(ec,i)?!0:Ot.call(tc,i)?!1:Ql.test(i)?ec[i]=!0:(tc[i]=!0,!1)}function Fs(i,o,u){if(Xc(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function pa(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Sr(i,o,u,d){if(d===null)i.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+d)}}function dn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function nc(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gr(i,o,u){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(L){u=""+L,x.call(this,L)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(L){u=""+L},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Xa(i){if(!i._valueTracker){var o=nc(i)?"checked":"value";i._valueTracker=Gr(i,o,""+i[o])}}function ic(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=nc(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function ds(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ti=/[\n"\\]/g;function bi(i){return i.replace(Ti,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ol(i,o,u,d,y,x,L,q){i.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.type=L:i.removeAttribute("type"),o!=null?L==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+dn(o)):i.value!==""+dn(o)&&(i.value=""+dn(o)):L!=="submit"&&L!=="reset"||i.removeAttribute("value"),o!=null?sc(i,L,dn(o)):u!=null?sc(i,L,dn(u)):d!=null&&i.removeAttribute("value"),y==null&&x!=null&&(i.defaultChecked=!!x),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?i.name=""+dn(q):i.removeAttribute("name")}function Wc(i,o,u,d,y,x,L,q){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),o!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||o!=null)){Xa(i);return}u=u!=null?""+dn(u):"",o=o!=null?""+dn(o):u,q||o===i.value||(i.value=o),i.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=q?i.checked:!!d,i.defaultChecked=!!d,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(i.name=L),Xa(i)}function sc(i,o,u){o==="number"&&ds(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ps(i,o,u,d){if(i=i.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=o.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&d&&(i[u].defaultSelected=!0)}else{for(u=""+dn(u),o=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function rc(i,o,u){if(o!=null&&(o=""+dn(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+dn(u):""}function ac(i,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(n(92));if(gt(d)){if(1<d.length)throw Error(n(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=dn(o),i.defaultValue=u,d=i.textContent,d===u&&d!==""&&d!==null&&(i.value=d),Xa(i)}function Cr(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var To=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kc(i,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,u):typeof u!="number"||u===0||To.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function Zc(i,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&u[y]!==d&&Kc(i,y,d)}else for(var x in o)o.hasOwnProperty(x)&&Kc(i,x,o[x])}function oc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ss(i){return Jc.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Er(){}var ga=null;function No(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wa=null,Ce=null;function Qc(i){var o=Ar(i);if(o&&(i=o.stateNode)){var u=i[Yn]||null;t:switch(i=o.stateNode,o.type){case"input":if(ol(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+bi(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var y=d[Yn]||null;if(!y)throw Error(n(90));ol(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===i.form&&ic(d)}break t;case"textarea":rc(i,u.value,u.defaultValue);break t;case"select":o=u.value,o!=null&&ps(i,!!u.multiple,o,!1)}}}var cc=!1;function tu(i,o,u){if(cc)return i(o,u);cc=!0;try{var d=i(o);return d}finally{if(cc=!1,(Wa!==null||Ce!==null)&&(Qf(),Wa&&(o=Wa,i=Ce,Ce=Wa=null,Qc(o),i)))for(o=0;o<i.length;o++)Qc(i[o])}}function js(i,o){var u=i.stateNode;if(u===null)return null;var d=u[Yn]||null;if(d===null)return null;u=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=!1;if(Gi)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){uc=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{uc=!1}var Us=null,ko=null,Vr=null;function eu(){if(Vr)return Vr;var i,o=ko,u=o.length,d,y="value"in Us?Us.value:Us.textContent,x=y.length;for(i=0;i<u&&o[i]===y[i];i++);var L=u-i;for(d=1;d<=L&&o[u-d]===y[x-d];d++);return Vr=y.slice(i,1<d?1-d:void 0)}function Ks(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ll(){return!0}function cl(){return!1}function Bi(i){function o(u,d,y,x,L){this._reactName=u,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=L,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(u=i[q],this[q]=u?u(x):x[q]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ll:cl,this.isPropagationStopped=cl,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),o}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Bi($r),ma=g({},$r,{view:0,detail:0}),ul=Bi(ma),Ro,ba,ya,Mo=g({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Le,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ya&&(ya&&i.type==="mousemove"?(Ro=i.screenX-ya.screenX,ba=i.screenY-ya.screenY):ba=Ro=0,ya=i),Ro)},movementY:function(i){return"movementY"in i?i.movementY:ba}}),hc=Bi(Mo),va=g({},Mo,{dataTransfer:0}),wa=Bi(va),nu=g({},ma,{relatedTarget:0}),xa=Bi(nu),iu=g({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),_=Bi(iu),O=g({},$r,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),it=Bi(O),ft=g({},$r,{data:0}),yt=Bi(ft),It={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function de(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ae[i])?!!o[i]:!1}function Le(){return de}var Ue=g({},ma,{key:function(i){if(i.key){var o=It[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ks(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Gt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Le,charCode:function(i){return i.type==="keypress"?Ks(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ks(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),an=Bi(Ue),Xn=g({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),li=Bi(Xn),On=g({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Le}),Ni=Bi(On),yi=g({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vi=Bi(yi),Aa=g({},Mo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=Bi(Aa),_a=g({},$r,{newState:0,oldState:0}),fc=Bi(_a),hl=[9,13,27,32],Yr=Gi&&"CompositionEvent"in window,Nr=null;Gi&&"documentMode"in document&&(Nr=document.documentMode);var Do=Gi&&"TextEvent"in window&&!Nr,Sa=Gi&&(!Yr||Nr&&8<Nr&&11>=Nr),Ii=" ",Ka=!1;function Za(i,o){switch(i){case"keyup":return hl.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Xr=!1;function gs(i,o){switch(i){case"compositionend":return fl(o);case"keypress":return o.which!==32?null:(Ka=!0,Ii);case"textInput":return i=o.data,i===Ii&&Ka?null:i;default:return null}}function Ca(i,o){if(Xr)return i==="compositionend"||!Yr&&Za(i,o)?(i=eu(),Vr=ko=Us=null,Xr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Sa&&o.locale!=="ko"?null:o.data;default:return null}}var dl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!dl[i.type]:o==="textarea"}function zs(i,o,u,d){Wa?Ce?Ce.push(d):Ce=[d]:Wa=d,o=ad(o,"onChange"),0<o.length&&(u=new Zs("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var Lr=null,Ea=null;function pc(i){E2(i,0)}function kr(i){var o=Eo(i);if(ic(o))return i}function Ja(i,o){if(i==="change")return o}var Cs=!1;if(Gi){var ms;if(Gi){var Wr="oninput"in document;if(!Wr){var Kr=document.createElement("div");Kr.setAttribute("oninput","return;"),Wr=typeof Kr.oninput=="function"}ms=Wr}else ms=!1;Cs=ms&&(!document.documentMode||9<document.documentMode)}function Ta(){Lr&&(Lr.detachEvent("onpropertychange",pl),Ea=Lr=null)}function pl(i){if(i.propertyName==="value"&&kr(Ea)){var o=[];zs(o,Ea,i,No(i)),tu(pc,o)}}function gl(i,o,u){i==="focusin"?(Ta(),Lr=o,Ea=u,Lr.attachEvent("onpropertychange",pl)):i==="focusout"&&Ta()}function ci(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return kr(Ea)}function su(i,o){if(i==="click")return kr(o)}function Zr(i,o){if(i==="input"||i==="change")return kr(o)}function Jr(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var $i=typeof Object.is=="function"?Object.is:Jr;function Na(i,o){if($i(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var y=u[d];if(!Ot.call(o,y)||!$i(i[y],o[y]))return!1}return!0}function ml(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bl(i,o){var u=ml(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=ml(u)}}function La(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?La(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ka(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=ds(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=ds(i.document)}return o}function Qr(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var Po=Gi&&"documentMode"in document&&11>=document.documentMode,Hs=null,Ra=null,is=null,Js=!1;function pn(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Js||Hs==null||Hs!==ds(d)||(d=Hs,"selectionStart"in d&&Qr(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),is&&Na(is,d)||(is=d,d=ad(Ra,"onSelect"),0<d.length&&(o=new Zs("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=Hs)))}function on(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Bn={animationend:on("Animation","AnimationEnd"),animationiteration:on("Animation","AnimationIteration"),animationstart:on("Animation","AnimationStart"),transitionrun:on("Transition","TransitionRun"),transitionstart:on("Transition","TransitionStart"),transitioncancel:on("Transition","TransitionCancel"),transitionend:on("Transition","TransitionEnd")},ui={},ta={};Gi&&(ta=document.createElement("div").style,"AnimationEvent"in window||(delete Bn.animationend.animation,delete Bn.animationiteration.animation,delete Bn.animationstart.animation),"TransitionEvent"in window||delete Bn.transitionend.transition);function Rr(i){if(ui[i])return ui[i];if(!Bn[i])return i;var o=Bn[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in ta)return ui[i]=o[u];return i}var Oo=Rr("animationend"),gc=Rr("animationiteration"),hh=Rr("animationstart"),Lf=Rr("transitionrun"),kf=Rr("transitionstart"),Rf=Rr("transitioncancel"),fh=Rr("transitionend"),dh=new Map,Bo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bo.push("scrollEnd");function Qs(i,o){dh.set(i,o),_r(o,[i])}var mc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qs=[],Io=0,ru=0;function bc(){for(var i=Io,o=ru=Io=0;o<i;){var u=qs[o];qs[o++]=null;var d=qs[o];qs[o++]=null;var y=qs[o];qs[o++]=null;var x=qs[o];if(qs[o++]=null,d!==null&&y!==null){var L=d.pending;L===null?y.next=y:(y.next=L.next,L.next=y),d.pending=y}x!==0&&vc(u,y,x)}}function yc(i,o,u,d){qs[Io++]=i,qs[Io++]=o,qs[Io++]=u,qs[Io++]=d,ru|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function au(i,o,u,d){return yc(i,o,u,d),ss(i)}function Ma(i,o){return yc(i,null,null,o),ss(i)}function vc(i,o,u){i.lanes|=u;var d=i.alternate;d!==null&&(d.lanes|=u);for(var y=!1,x=i.return;x!==null;)x.childLanes|=u,d=x.alternate,d!==null&&(d.childLanes|=u),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(y=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,y&&o!==null&&(y=31-Ze(u),i=x.hiddenUpdates,d=i[y],d===null?i[y]=[o]:d.push(o),o.lane=u|536870912),x):null}function ss(i){if(50<Oh)throw Oh=0,dg=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Yi={};function ou(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(i,o,u,d){return new ou(i,o,u,d)}function lu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function tr(i,o){var u=i.alternate;return u===null?(u=rs(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function wc(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function yl(i,o,u,d,y,x){var L=0;if(d=i,typeof i=="function")lu(i)&&(L=1);else if(typeof i=="string")L=rA(i,u,W.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case H:return i=rs(31,u,o,y),i.elementType=H,i.lanes=x,i;case A:return Qa(u.children,y,x,o);case T:L=8,y|=24;break;case S:return i=rs(12,u,o,y|2),i.elementType=S,i.lanes=x,i;case z:return i=rs(13,u,o,y),i.elementType=z,i.lanes=x,i;case K:return i=rs(19,u,o,y),i.elementType=K,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:L=10;break t;case R:L=9;break t;case D:L=11;break t;case Z:L=14;break t;case J:L=16,d=null;break t}L=29,u=Error(n(130,i===null?"null":typeof i,"")),d=null}return o=rs(L,u,o,y),o.elementType=i,o.type=d,o.lanes=x,o}function Qa(i,o,u,d){return i=rs(7,i,d,o),i.lanes=u,i}function xc(i,o,u){return i=rs(6,i,null,o),i.lanes=u,i}function cu(i){var o=rs(18,null,null,0);return o.stateNode=i,o}function vl(i,o,u){return o=rs(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var uu=new WeakMap;function er(i,o){if(typeof i=="object"&&i!==null){var u=uu.get(i);return u!==void 0?u:(o={value:i,source:o,stack:Yt(o)},uu.set(i,o),o)}return{value:i,source:o,stack:Yt(o)}}var wl=[],Fo=0,hu=null,Ac=0,nr=[],ir=0,to=null,sr=1,rr="";function Gs(i,o){wl[Fo++]=Ac,wl[Fo++]=hu,hu=i,Ac=o}function Mf(i,o,u){nr[ir++]=sr,nr[ir++]=rr,nr[ir++]=to,to=i;var d=sr;i=rr;var y=32-Ze(d)-1;d&=~(1<<y),u+=1;var x=32-Ze(o)+y;if(30<x){var L=y-y%5;x=(d&(1<<L)-1).toString(32),d>>=L,y-=L,sr=1<<32-Ze(o)+y|u<<y|d,rr=x+i}else sr=1<<x|u<<y|d,rr=i}function ph(i){i.return!==null&&(Gs(i,1),Mf(i,1,0))}function fu(i){for(;i===hu;)hu=wl[--Fo],wl[Fo]=null,Ac=wl[--Fo],wl[Fo]=null;for(;i===to;)to=nr[--ir],nr[ir]=null,rr=nr[--ir],nr[ir]=null,sr=nr[--ir],nr[ir]=null}function Df(i,o){nr[ir++]=sr,nr[ir++]=rr,nr[ir++]=to,sr=o.id,rr=o.overflow,to=i}var Xi=null,Hn=null,Qe=!1,bs=null,ti=!1,Mr=Error(n(519));function eo(i){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(er(o,i)),Mr}function gh(i){var o=i.stateNode,u=i.type,d=i.memoizedProps;switch(o[Ln]=i,o[Yn]=d,u){case"dialog":en("cancel",o),en("close",o);break;case"iframe":case"object":case"embed":en("load",o);break;case"video":case"audio":for(u=0;u<Ih.length;u++)en(Ih[u],o);break;case"source":en("error",o);break;case"img":case"image":case"link":en("error",o),en("load",o);break;case"details":en("toggle",o);break;case"input":en("invalid",o),Wc(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":en("invalid",o);break;case"textarea":en("invalid",o),ac(o,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||k2(o.textContent,u)?(d.popover!=null&&(en("beforetoggle",o),en("toggle",o)),d.onScroll!=null&&en("scroll",o),d.onScrollEnd!=null&&en("scrollend",o),d.onClick!=null&&(o.onclick=Er),o=!0):o=!1,o||eo(i,!0)}function Da(i){for(Xi=i.return;Xi;)switch(Xi.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Xi=Xi.return}}function Wi(i){if(i!==Xi)return!1;if(!Qe)return Da(i),Qe=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Ng(i.type,i.memoizedProps)),u=!u),u&&Hn&&eo(i),Da(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Hn=j2(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Hn=j2(i)}else o===27?(o=Hn,Ol(i.type)?(i=Dg,Dg=null,Hn=i):Hn=o):Hn=Xi?sa(i.stateNode.nextSibling):null;return!0}function jo(){Hn=Xi=null,Qe=!1}function mh(){var i=bs;return i!==null&&(hr===null?hr=i:hr.push.apply(hr,i),bs=null),i}function xl(i){bs===null?bs=[i]:bs.push(i)}var du=Y(null),no=null,ea=null;function io(i,o,u){U(du,o._currentValue),o._currentValue=u}function ar(i){i._currentValue=du.current,k(du)}function Al(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function Uo(i,o,u,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var x=y.dependencies;if(x!==null){var L=y.child;x=x.firstContext;t:for(;x!==null;){var q=x;x=y;for(var ut=0;ut<o.length;ut++)if(q.context===o[ut]){x.lanes|=u,q=x.alternate,q!==null&&(q.lanes|=u),Al(x.return,u,i),d||(L=null);break t}x=q.next}}else if(y.tag===18){if(L=y.return,L===null)throw Error(n(341));L.lanes|=u,x=L.alternate,x!==null&&(x.lanes|=u),Al(L,u,i),L=null}else L=y.child;if(L!==null)L.return=y;else for(L=y;L!==null;){if(L===i){L=null;break}if(y=L.sibling,y!==null){y.return=L.return,L=y;break}L=L.return}y=L}}function so(i,o,u,d){i=null;for(var y=o,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var L=y.alternate;if(L===null)throw Error(n(387));if(L=L.memoizedProps,L!==null){var q=y.type;$i(y.pendingProps.value,L.value)||(i!==null?i.push(q):i=[q])}}else if(y===ht.current){if(L=y.alternate,L===null)throw Error(n(387));L.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Hh):i=[Hh])}y=y.return}i!==null&&Uo(o,i,u,d),o.flags|=262144}function pu(i){for(i=i.firstContext;i!==null;){if(!$i(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ro(i){no=i,ea=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ki(i){return Pf(no,i)}function gu(i,o){return no===null&&ro(i),Pf(i,o)}function Pf(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ea===null){if(i===null)throw Error(n(308));ea=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ea=ea.next=o;return u}var Mp=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},Dp=r.unstable_scheduleCallback,Pp=r.unstable_NormalPriority,hi={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _l(){return{controller:new Mp,data:new Map,refCount:0}}function _c(i){i.refCount--,i.refCount===0&&Dp(Pp,function(){i.controller.abort()})}var Sc=null,mu=0,m=0,w=null;function E(i,o){if(Sc===null){var u=Sc=[];mu=0,m=vg(),w={status:"pending",value:void 0,then:function(d){u.push(d)}}}return mu++,o.then(N,N),o}function N(){if(--mu===0&&Sc!==null){w!==null&&(w.status="fulfilled");var i=Sc;Sc=null,m=0,w=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function B(i,o){var u=[],d={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),d}var F=V.S;V.S=function(i,o){t2=Se(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&E(i,o),F!==null&&F(i,o)};var j=Y(null);function $(){var i=j.current;return i!==null?i:Gn.pooledCache}function X(i,o){o===null?U(j,j.current):U(j,o.pool)}function nt(){var i=$();return i===null?null:{parent:hi._currentValue,pool:i}}var dt=Error(n(460)),Et=Error(n(474)),tt=Error(n(542)),mt={then:function(){}};function xt(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Pt(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Er,Er),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,$t(i),i;default:if(typeof o.status=="string")o.then(Er,Er);else{if(i=Gn,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,$t(i),i}throw Mt=o,dt}}function At(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Mt=u,dt):u}}var Mt=null;function Ft(){if(Mt===null)throw Error(n(459));var i=Mt;return Mt=null,i}function $t(i){if(i===dt||i===tt)throw Error(n(483))}var Ht=null,le=0;function te(i){var o=le;return le+=1,Ht===null&&(Ht=[]),Pt(Ht,i,o)}function Oe(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function se(i,o){throw o.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Je(i){function o(vt,pt){if(i){var Tt=vt.deletions;Tt===null?(vt.deletions=[pt],vt.flags|=16):Tt.push(pt)}}function u(vt,pt){if(!i)return null;for(;pt!==null;)o(vt,pt),pt=pt.sibling;return null}function d(vt){for(var pt=new Map;vt!==null;)vt.key!==null?pt.set(vt.key,vt):pt.set(vt.index,vt),vt=vt.sibling;return pt}function y(vt,pt){return vt=tr(vt,pt),vt.index=0,vt.sibling=null,vt}function x(vt,pt,Tt){return vt.index=Tt,i?(Tt=vt.alternate,Tt!==null?(Tt=Tt.index,Tt<pt?(vt.flags|=67108866,pt):Tt):(vt.flags|=67108866,pt)):(vt.flags|=1048576,pt)}function L(vt){return i&&vt.alternate===null&&(vt.flags|=67108866),vt}function q(vt,pt,Tt,Ut){return pt===null||pt.tag!==6?(pt=xc(Tt,vt.mode,Ut),pt.return=vt,pt):(pt=y(pt,Tt),pt.return=vt,pt)}function ut(vt,pt,Tt,Ut){var Ae=Tt.type;return Ae===A?Bt(vt,pt,Tt.props.children,Ut,Tt.key):pt!==null&&(pt.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===J&&At(Ae)===pt.type)?(pt=y(pt,Tt.props),Oe(pt,Tt),pt.return=vt,pt):(pt=yl(Tt.type,Tt.key,Tt.props,null,vt.mode,Ut),Oe(pt,Tt),pt.return=vt,pt)}function Nt(vt,pt,Tt,Ut){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==Tt.containerInfo||pt.stateNode.implementation!==Tt.implementation?(pt=vl(Tt,vt.mode,Ut),pt.return=vt,pt):(pt=y(pt,Tt.children||[]),pt.return=vt,pt)}function Bt(vt,pt,Tt,Ut,Ae){return pt===null||pt.tag!==7?(pt=Qa(Tt,vt.mode,Ut,Ae),pt.return=vt,pt):(pt=y(pt,Tt),pt.return=vt,pt)}function zt(vt,pt,Tt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return pt=xc(""+pt,vt.mode,Tt),pt.return=vt,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case b:return Tt=yl(pt.type,pt.key,pt.props,null,vt.mode,Tt),Oe(Tt,pt),Tt.return=vt,Tt;case C:return pt=vl(pt,vt.mode,Tt),pt.return=vt,pt;case J:return pt=At(pt),zt(vt,pt,Tt)}if(gt(pt)||G(pt))return pt=Qa(pt,vt.mode,Tt,null),pt.return=vt,pt;if(typeof pt.then=="function")return zt(vt,te(pt),Tt);if(pt.$$typeof===M)return zt(vt,gu(vt,pt),Tt);se(vt,pt)}return null}function Lt(vt,pt,Tt,Ut){var Ae=pt!==null?pt.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return Ae!==null?null:q(vt,pt,""+Tt,Ut);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case b:return Tt.key===Ae?ut(vt,pt,Tt,Ut):null;case C:return Tt.key===Ae?Nt(vt,pt,Tt,Ut):null;case J:return Tt=At(Tt),Lt(vt,pt,Tt,Ut)}if(gt(Tt)||G(Tt))return Ae!==null?null:Bt(vt,pt,Tt,Ut,null);if(typeof Tt.then=="function")return Lt(vt,pt,te(Tt),Ut);if(Tt.$$typeof===M)return Lt(vt,pt,gu(vt,Tt),Ut);se(vt,Tt)}return null}function kt(vt,pt,Tt,Ut,Ae){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return vt=vt.get(Tt)||null,q(pt,vt,""+Ut,Ae);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case b:return vt=vt.get(Ut.key===null?Tt:Ut.key)||null,ut(pt,vt,Ut,Ae);case C:return vt=vt.get(Ut.key===null?Tt:Ut.key)||null,Nt(pt,vt,Ut,Ae);case J:return Ut=At(Ut),kt(vt,pt,Tt,Ut,Ae)}if(gt(Ut)||G(Ut))return vt=vt.get(Tt)||null,Bt(pt,vt,Ut,Ae,null);if(typeof Ut.then=="function")return kt(vt,pt,Tt,te(Ut),Ae);if(Ut.$$typeof===M)return kt(vt,pt,Tt,gu(pt,Ut),Ae);se(pt,Ut)}return null}function oe(vt,pt,Tt,Ut){for(var Ae=null,mn=null,pe=pt,Ye=pt=0,sn=null;pe!==null&&Ye<Tt.length;Ye++){pe.index>Ye?(sn=pe,pe=null):sn=pe.sibling;var bn=Lt(vt,pe,Tt[Ye],Ut);if(bn===null){pe===null&&(pe=sn);break}i&&pe&&bn.alternate===null&&o(vt,pe),pt=x(bn,pt,Ye),mn===null?Ae=bn:mn.sibling=bn,mn=bn,pe=sn}if(Ye===Tt.length)return u(vt,pe),Qe&&Gs(vt,Ye),Ae;if(pe===null){for(;Ye<Tt.length;Ye++)pe=zt(vt,Tt[Ye],Ut),pe!==null&&(pt=x(pe,pt,Ye),mn===null?Ae=pe:mn.sibling=pe,mn=pe);return Qe&&Gs(vt,Ye),Ae}for(pe=d(pe);Ye<Tt.length;Ye++)sn=kt(pe,vt,Ye,Tt[Ye],Ut),sn!==null&&(i&&sn.alternate!==null&&pe.delete(sn.key===null?Ye:sn.key),pt=x(sn,pt,Ye),mn===null?Ae=sn:mn.sibling=sn,mn=sn);return i&&pe.forEach(function(Ul){return o(vt,Ul)}),Qe&&Gs(vt,Ye),Ae}function Ne(vt,pt,Tt,Ut){if(Tt==null)throw Error(n(151));for(var Ae=null,mn=null,pe=pt,Ye=pt=0,sn=null,bn=Tt.next();pe!==null&&!bn.done;Ye++,bn=Tt.next()){pe.index>Ye?(sn=pe,pe=null):sn=pe.sibling;var Ul=Lt(vt,pe,bn.value,Ut);if(Ul===null){pe===null&&(pe=sn);break}i&&pe&&Ul.alternate===null&&o(vt,pe),pt=x(Ul,pt,Ye),mn===null?Ae=Ul:mn.sibling=Ul,mn=Ul,pe=sn}if(bn.done)return u(vt,pe),Qe&&Gs(vt,Ye),Ae;if(pe===null){for(;!bn.done;Ye++,bn=Tt.next())bn=zt(vt,bn.value,Ut),bn!==null&&(pt=x(bn,pt,Ye),mn===null?Ae=bn:mn.sibling=bn,mn=bn);return Qe&&Gs(vt,Ye),Ae}for(pe=d(pe);!bn.done;Ye++,bn=Tt.next())bn=kt(pe,vt,Ye,bn.value,Ut),bn!==null&&(i&&bn.alternate!==null&&pe.delete(bn.key===null?Ye:bn.key),pt=x(bn,pt,Ye),mn===null?Ae=bn:mn.sibling=bn,mn=bn);return i&&pe.forEach(function(mA){return o(vt,mA)}),Qe&&Gs(vt,Ye),Ae}function Un(vt,pt,Tt,Ut){if(typeof Tt=="object"&&Tt!==null&&Tt.type===A&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case b:t:{for(var Ae=Tt.key;pt!==null;){if(pt.key===Ae){if(Ae=Tt.type,Ae===A){if(pt.tag===7){u(vt,pt.sibling),Ut=y(pt,Tt.props.children),Ut.return=vt,vt=Ut;break t}}else if(pt.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===J&&At(Ae)===pt.type){u(vt,pt.sibling),Ut=y(pt,Tt.props),Oe(Ut,Tt),Ut.return=vt,vt=Ut;break t}u(vt,pt);break}else o(vt,pt);pt=pt.sibling}Tt.type===A?(Ut=Qa(Tt.props.children,vt.mode,Ut,Tt.key),Ut.return=vt,vt=Ut):(Ut=yl(Tt.type,Tt.key,Tt.props,null,vt.mode,Ut),Oe(Ut,Tt),Ut.return=vt,vt=Ut)}return L(vt);case C:t:{for(Ae=Tt.key;pt!==null;){if(pt.key===Ae)if(pt.tag===4&&pt.stateNode.containerInfo===Tt.containerInfo&&pt.stateNode.implementation===Tt.implementation){u(vt,pt.sibling),Ut=y(pt,Tt.children||[]),Ut.return=vt,vt=Ut;break t}else{u(vt,pt);break}else o(vt,pt);pt=pt.sibling}Ut=vl(Tt,vt.mode,Ut),Ut.return=vt,vt=Ut}return L(vt);case J:return Tt=At(Tt),Un(vt,pt,Tt,Ut)}if(gt(Tt))return oe(vt,pt,Tt,Ut);if(G(Tt)){if(Ae=G(Tt),typeof Ae!="function")throw Error(n(150));return Tt=Ae.call(Tt),Ne(vt,pt,Tt,Ut)}if(typeof Tt.then=="function")return Un(vt,pt,te(Tt),Ut);if(Tt.$$typeof===M)return Un(vt,pt,gu(vt,Tt),Ut);se(vt,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint"?(Tt=""+Tt,pt!==null&&pt.tag===6?(u(vt,pt.sibling),Ut=y(pt,Tt),Ut.return=vt,vt=Ut):(u(vt,pt),Ut=xc(Tt,vt.mode,Ut),Ut.return=vt,vt=Ut),L(vt)):u(vt,pt)}return function(vt,pt,Tt,Ut){try{le=0;var Ae=Un(vt,pt,Tt,Ut);return Ht=null,Ae}catch(pe){if(pe===dt||pe===tt)throw pe;var mn=rs(29,pe,null,vt.mode);return mn.lanes=Ut,mn.return=vt,mn}}}var qn=Je(!0),ze=Je(!1),ee=!1;function Zt(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wn(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ee(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ve(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(wn&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=ss(i),vc(i,null,u),o}return yc(i,d,o,u),ss(i)}function yn(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Ps(i,u)}}function Li(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var L={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?y=x=L:x=x.next=L,u=u.next}while(u!==null);x===null?y=x=o:x=x.next=o}else y=x=o;u={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var Zi=!1;function In(){if(Zi){var i=w;if(i!==null)throw i}}function vi(i,o,u,d){Zi=!1;var y=i.updateQueue;ee=!1;var x=y.firstBaseUpdate,L=y.lastBaseUpdate,q=y.shared.pending;if(q!==null){y.shared.pending=null;var ut=q,Nt=ut.next;ut.next=null,L===null?x=Nt:L.next=Nt,L=ut;var Bt=i.alternate;Bt!==null&&(Bt=Bt.updateQueue,q=Bt.lastBaseUpdate,q!==L&&(q===null?Bt.firstBaseUpdate=Nt:q.next=Nt,Bt.lastBaseUpdate=ut))}if(x!==null){var zt=y.baseState;L=0,Bt=Nt=ut=null,q=x;do{var Lt=q.lane&-536870913,kt=Lt!==q.lane;if(kt?(nn&Lt)===Lt:(d&Lt)===Lt){Lt!==0&&Lt===m&&(Zi=!0),Bt!==null&&(Bt=Bt.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});t:{var oe=i,Ne=q;Lt=o;var Un=u;switch(Ne.tag){case 1:if(oe=Ne.payload,typeof oe=="function"){zt=oe.call(Un,zt,Lt);break t}zt=oe;break t;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=Ne.payload,Lt=typeof oe=="function"?oe.call(Un,zt,Lt):oe,Lt==null)break t;zt=g({},zt,Lt);break t;case 2:ee=!0}}Lt=q.callback,Lt!==null&&(i.flags|=64,kt&&(i.flags|=8192),kt=y.callbacks,kt===null?y.callbacks=[Lt]:kt.push(Lt))}else kt={lane:Lt,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Bt===null?(Nt=Bt=kt,ut=zt):Bt=Bt.next=kt,L|=Lt;if(q=q.next,q===null){if(q=y.shared.pending,q===null)break;kt=q,q=kt.next,kt.next=null,y.lastBaseUpdate=kt,y.shared.pending=null}}while(!0);Bt===null&&(ut=zt),y.baseState=ut,y.firstBaseUpdate=Nt,y.lastBaseUpdate=Bt,x===null&&(y.shared.lanes=0),kl|=L,i.lanes=L,i.memoizedState=zt}}function as(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function wi(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)as(u[i],o)}var Ke=Y(null),un=Y(0);function Kn(i,o){i=Ko,U(un,i),U(Ke,o),Ko=i|o.baseLanes}function gn(){U(un,Ko),U(Ke,Ke.current)}function ki(){Ko=un.current,k(Ke),k(un)}var Zn=Y(null),hn=null;function fi(i){var o=i.alternate;U(ln,ln.current&1),U(Zn,i),hn===null&&(o===null||Ke.current!==null||o.memoizedState!==null)&&(hn=i)}function vn(i){U(ln,ln.current),U(Zn,i),hn===null&&(hn=i)}function xi(i){i.tag===22?(U(ln,ln.current),U(Zn,i),hn===null&&(hn=i)):Ai()}function Ai(){U(ln,ln.current),U(Zn,Zn.current)}function kn(i){k(Zn),hn===i&&(hn=null),k(ln)}var ln=Y(0);function os(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Rg(u)||Mg(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ei=0,ye=null,xe=null,fn=null,Es=!1,or=!1,ys=!1,_i=0,ao=0,oo=null,bu=0;function Fn(){throw Error(n(321))}function bh(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!$i(i[u],o[u]))return!1;return!0}function yh(i,o,u,d,y,x){return ei=x,ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,V.H=i===null||i.memoizedState===null?h1:Hp,ys=!1,x=u(d,y),ys=!1,or&&(x=Pa(o,u,d,y)),yu(i),x}function yu(i){V.H=Eh;var o=xe!==null&&xe.next!==null;if(ei=0,fn=xe=ye=null,Es=!1,ao=0,oo=null,o)throw Error(n(300));i===null||ji||(i=i.dependencies,i!==null&&pu(i)&&(ji=!0))}function Pa(i,o,u,d){ye=i;var y=0;do{if(or&&(oo=null),ao=0,or=!1,25<=y)throw Error(n(301));if(y+=1,fn=xe=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}V.H=f1,x=o(u,d)}while(or);return x}function Op(){var i=V.H,o=i.useState()[0];return o=typeof o.then=="function"?lo(o):o,i=i.useState()[0],(xe!==null?xe.memoizedState:null)!==i&&(ye.flags|=1024),o}function vh(){var i=_i!==0;return _i=0,i}function wh(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function vu(i){if(Es){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Es=!1}ei=0,fn=xe=ye=null,or=!1,ao=_i=0,oo=null}function Fi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?ye.memoizedState=fn=i:fn=fn.next=i,fn}function ni(){if(xe===null){var i=ye.alternate;i=i!==null?i.memoizedState:null}else i=xe.next;var o=fn===null?ye.memoizedState:fn.next;if(o!==null)fn=o,xe=i;else{if(i===null)throw ye.alternate===null?Error(n(467)):Error(n(310));xe=i,i={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},fn===null?ye.memoizedState=fn=i:fn=fn.next=i}return fn}function Cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lo(i){var o=ao;return ao+=1,oo===null&&(oo=[]),i=Pt(oo,i,o),o=ye,(fn===null?o.memoizedState:fn.next)===null&&(o=o.alternate,V.H=o===null||o.memoizedState===null?h1:Hp),i}function Sl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return lo(i);if(i.$$typeof===M)return Ki(i)}throw Error(n(438,String(i)))}function zo(i){var o=null,u=ye.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=ye.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Cc(),ye.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),d=0;d<i;d++)u[d]=lt;return o.index++,u}function na(i,o){return typeof o=="function"?o(i):o}function wu(i){var o=ni();return Cl(o,xe,i)}function Cl(i,o,u){var d=i.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=u;var y=i.baseQueue,x=d.pending;if(x!==null){if(y!==null){var L=y.next;y.next=x.next,x.next=L}o.baseQueue=y=x,d.pending=null}if(x=i.baseState,y===null)i.memoizedState=x;else{o=y.next;var q=L=null,ut=null,Nt=o,Bt=!1;do{var zt=Nt.lane&-536870913;if(zt!==Nt.lane?(nn&zt)===zt:(ei&zt)===zt){var Lt=Nt.revertLane;if(Lt===0)ut!==null&&(ut=ut.next={lane:0,revertLane:0,gesture:null,action:Nt.action,hasEagerState:Nt.hasEagerState,eagerState:Nt.eagerState,next:null}),zt===m&&(Bt=!0);else if((ei&Lt)===Lt){Nt=Nt.next,Lt===m&&(Bt=!0);continue}else zt={lane:0,revertLane:Nt.revertLane,gesture:null,action:Nt.action,hasEagerState:Nt.hasEagerState,eagerState:Nt.eagerState,next:null},ut===null?(q=ut=zt,L=x):ut=ut.next=zt,ye.lanes|=Lt,kl|=Lt;zt=Nt.action,ys&&u(x,zt),x=Nt.hasEagerState?Nt.eagerState:u(x,zt)}else Lt={lane:zt,revertLane:Nt.revertLane,gesture:Nt.gesture,action:Nt.action,hasEagerState:Nt.hasEagerState,eagerState:Nt.eagerState,next:null},ut===null?(q=ut=Lt,L=x):ut=ut.next=Lt,ye.lanes|=zt,kl|=zt;Nt=Nt.next}while(Nt!==null&&Nt!==o);if(ut===null?L=x:ut.next=q,!$i(x,i.memoizedState)&&(ji=!0,Bt&&(u=w,u!==null)))throw u;i.memoizedState=x,i.baseState=L,i.baseQueue=ut,d.lastRenderedState=x}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function xu(i){var o=ni(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var d=u.dispatch,y=u.pending,x=o.memoizedState;if(y!==null){u.pending=null;var L=y=y.next;do x=i(x,L.action),L=L.next;while(L!==y);$i(x,o.memoizedState)||(ji=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,d]}function Au(i,o,u){var d=ye,y=ni(),x=Qe;if(x){if(u===void 0)throw Error(n(407));u=u()}else u=o();var L=!$i((xe||y).memoizedState,u);if(L&&(y.memoizedState=u,ji=!0),y=y.queue,Bp(Ah.bind(null,d,y,i),[i]),y.getSnapshot!==o||L||fn!==null&&fn.memoizedState.tag&1){if(d.flags|=2048,qo(9,{destroy:void 0},xh.bind(null,d,y,u,o),null),Gn===null)throw Error(n(349));x||(ei&127)!==0||Oa(d,o,u)}return u}function Oa(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ye.updateQueue,o===null?(o=Cc(),ye.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function xh(i,o,u,d){o.value=u,o.getSnapshot=d,Of(o)&&_h(i)}function Ah(i,o,u){return u(function(){Of(o)&&_h(i)})}function Of(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!$i(i,u)}catch{return!0}}function _h(i){var o=Ma(i,2);o!==null&&fr(o,i,2)}function co(i){var o=Fi();if(typeof i=="function"){var u=i;if(i=u(),ys){Me(!0);try{u()}finally{Me(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:i},o}function Bf(i,o,u,d){return i.baseState=u,Cl(i,xe,typeof d=="function"?d:na)}function If(i,o,u,d,y){if(zf(i))throw Error(n(485));if(i=o.action,i!==null){var x={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){x.listeners.push(L)}};V.T!==null?u(!0):x.isTransition=!1,d(x),u=o.pending,u===null?(x.next=o.pending=x,Ff(o,x)):(x.next=u.next,o.pending=u.next=x)}}function Ff(i,o){var u=o.action,d=o.payload,y=i.state;if(o.isTransition){var x=V.T,L={};V.T=L;try{var q=u(y,d),ut=V.S;ut!==null&&ut(L,q),Sh(i,o,q)}catch(Nt){Ho(i,o,Nt)}finally{x!==null&&L.types!==null&&(x.types=L.types),V.T=x}}else try{x=u(y,d),Sh(i,o,x)}catch(Nt){Ho(i,o,Nt)}}function Sh(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){jf(i,o,d)},function(d){return Ho(i,o,d)}):jf(i,o,u)}function jf(i,o,u){o.status="fulfilled",o.value=u,_u(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,Ff(i,u)))}function Ho(i,o,u){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,_u(o),o=o.next;while(o!==d)}i.action=null}function _u(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Ec(i,o){return o}function ia(i,o){if(Qe){var u=Gn.formState;if(u!==null){t:{var d=ye;if(Qe){if(Hn){e:{for(var y=Hn,x=ti;y.nodeType!==8;){if(!x){y=null;break e}if(y=sa(y.nextSibling),y===null){y=null;break e}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Hn=sa(y.nextSibling),d=y.data==="F!";break t}}eo(d)}d=!1}d&&(o=u[0])}}return u=Fi(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:o},u.queue=d,u=l1.bind(null,ye,d),d.dispatch=u,d=co(!1),x=zp.bind(null,ye,!1,d.queue),d=Fi(),y={state:o,dispatch:null,action:i,pending:null},d.queue=y,u=If.bind(null,ye,y,x,u),y.dispatch=u,d.memoizedState=i,[o,u,!1]}function Ba(i){var o=ni();return Ia(o,xe,i)}function Ia(i,o,u){if(o=Cl(i,o,Ec)[0],i=wu(na)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=lo(o)}catch(L){throw L===dt?tt:L}else d=o;o=ni();var y=o.queue,x=y.dispatch;return u!==o.memoizedState&&(ye.flags|=2048,qo(9,{destroy:void 0},Su.bind(null,y,u),null)),[d,x,i]}function Su(i,o){i.action=o}function Cu(i){var o=ni(),u=xe;if(u!==null)return Ia(o,u,i);ni(),o=o.memoizedState,u=ni();var d=u.queue.dispatch;return u.memoizedState=i,[o,d,!1]}function qo(i,o,u,d){return i={tag:i,create:u,deps:d,inst:o,next:null},o=ye.updateQueue,o===null&&(o=Cc(),ye.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i),i}function Uf(){return ni().memoizedState}function El(i,o,u,d){var y=Fi();ye.flags|=i,y.memoizedState=qo(1|o,{destroy:void 0},u,d===void 0?null:d)}function Tl(i,o,u,d){var y=ni();d=d===void 0?null:d;var x=y.memoizedState.inst;xe!==null&&d!==null&&bh(d,xe.memoizedState.deps)?y.memoizedState=qo(o,x,u,d):(ye.flags|=i,y.memoizedState=qo(1|o,x,u,d))}function X0(i,o){El(8390656,8,i,o)}function Bp(i,o){Tl(2048,8,i,o)}function ux(i){ye.flags|=4;var o=ye.updateQueue;if(o===null)o=Cc(),ye.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function W0(i){var o=ni().memoizedState;return ux({ref:o,nextImpl:i}),function(){if((wn&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function K0(i,o){return Tl(4,2,i,o)}function Z0(i,o){return Tl(4,4,i,o)}function J0(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Q0(i,o,u){u=u!=null?u.concat([i]):null,Tl(4,4,J0.bind(null,o,i),u)}function Ip(){}function t1(i,o){var u=ni();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&bh(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function e1(i,o){var u=ni();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&bh(o,d[1]))return d[0];if(d=i(),ys){Me(!0);try{i()}finally{Me(!1)}}return u.memoizedState=[d,o],d}function Fp(i,o,u){return u===void 0||(ei&1073741824)!==0&&(nn&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=n2(),ye.lanes|=i,kl|=i,u)}function n1(i,o,u,d){return $i(u,o)?u:Ke.current!==null?(i=Fp(i,u,d),$i(i,o)||(ji=!0),i):(ei&42)===0||(ei&1073741824)!==0&&(nn&261930)===0?(ji=!0,i.memoizedState=u):(i=n2(),ye.lanes|=i,kl|=i,o)}function i1(i,o,u,d,y){var x=et.p;et.p=x!==0&&8>x?x:8;var L=V.T,q={};V.T=q,zp(i,!1,o,u);try{var ut=y(),Nt=V.S;if(Nt!==null&&Nt(q,ut),ut!==null&&typeof ut=="object"&&typeof ut.then=="function"){var Bt=B(ut,d);Ch(i,o,Bt,Or(i))}else Ch(i,o,d,Or(i))}catch(zt){Ch(i,o,{then:function(){},status:"rejected",reason:zt},Or())}finally{et.p=x,L!==null&&q.types!==null&&(L.types=q.types),V.T=L}}function hx(){}function jp(i,o,u,d){if(i.tag!==5)throw Error(n(476));var y=s1(i).queue;i1(i,y,o,at,u===null?hx:function(){return r1(i),u(d)})}function s1(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:at},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function r1(i){var o=s1(i);o.next===null&&(o=i.alternate.memoizedState),Ch(i,o.next.queue,{},Or())}function Up(){return Ki(Hh)}function a1(){return ni().memoizedState}function o1(){return ni().memoizedState}function fx(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Or();i=Ee(u);var d=Ve(o,i,u);d!==null&&(fr(d,o,u),yn(d,o,u)),o={cache:_l()},i.payload=o;return}o=o.return}}function dx(i,o,u){var d=Or();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},zf(i)?c1(o,u):(u=au(i,o,u,d),u!==null&&(fr(u,i,d),u1(u,o,d)))}function l1(i,o,u){var d=Or();Ch(i,o,u,d)}function Ch(i,o,u,d){var y={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(zf(i))c1(o,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var L=o.lastRenderedState,q=x(L,u);if(y.hasEagerState=!0,y.eagerState=q,$i(q,L))return yc(i,o,y,0),Gn===null&&bc(),!1}catch{}if(u=au(i,o,y,d),u!==null)return fr(u,i,d),u1(u,o,d),!0}return!1}function zp(i,o,u,d){if(d={lane:2,revertLane:vg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},zf(i)){if(o)throw Error(n(479))}else o=au(i,u,d,2),o!==null&&fr(o,i,2)}function zf(i){var o=i.alternate;return i===ye||o!==null&&o===ye}function c1(i,o){or=Es=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function u1(i,o,u){if((u&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Ps(i,u)}}var Eh={readContext:Ki,use:Sl,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useLayoutEffect:Fn,useInsertionEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useSyncExternalStore:Fn,useId:Fn,useHostTransitionStatus:Fn,useFormState:Fn,useActionState:Fn,useOptimistic:Fn,useMemoCache:Fn,useCacheRefresh:Fn};Eh.useEffectEvent=Fn;var h1={readContext:Ki,use:Sl,useCallback:function(i,o){return Fi().memoizedState=[i,o===void 0?null:o],i},useContext:Ki,useEffect:X0,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,El(4194308,4,J0.bind(null,o,i),u)},useLayoutEffect:function(i,o){return El(4194308,4,i,o)},useInsertionEffect:function(i,o){El(4,2,i,o)},useMemo:function(i,o){var u=Fi();o=o===void 0?null:o;var d=i();if(ys){Me(!0);try{i()}finally{Me(!1)}}return u.memoizedState=[d,o],d},useReducer:function(i,o,u){var d=Fi();if(u!==void 0){var y=u(o);if(ys){Me(!0);try{u(o)}finally{Me(!1)}}}else y=o;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=dx.bind(null,ye,i),[d.memoizedState,i]},useRef:function(i){var o=Fi();return i={current:i},o.memoizedState=i},useState:function(i){i=co(i);var o=i.queue,u=l1.bind(null,ye,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:Ip,useDeferredValue:function(i,o){var u=Fi();return Fp(u,i,o)},useTransition:function(){var i=co(!1);return i=i1.bind(null,ye,i.queue,!0,!1),Fi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var d=ye,y=Fi();if(Qe){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Gn===null)throw Error(n(349));(nn&127)!==0||Oa(d,o,u)}y.memoizedState=u;var x={value:u,getSnapshot:o};return y.queue=x,X0(Ah.bind(null,d,x,i),[i]),d.flags|=2048,qo(9,{destroy:void 0},xh.bind(null,d,x,u,o),null),u},useId:function(){var i=Fi(),o=Gn.identifierPrefix;if(Qe){var u=rr,d=sr;u=(d&~(1<<32-Ze(d)-1)).toString(32)+u,o="_"+o+"R_"+u,u=_i++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=bu++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Up,useFormState:ia,useActionState:ia,useOptimistic:function(i){var o=Fi();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=zp.bind(null,ye,!0,u),u.dispatch=o,[i,o]},useMemoCache:zo,useCacheRefresh:function(){return Fi().memoizedState=fx.bind(null,ye)},useEffectEvent:function(i){var o=Fi(),u={impl:i};return o.memoizedState=u,function(){if((wn&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Hp={readContext:Ki,use:Sl,useCallback:t1,useContext:Ki,useEffect:Bp,useImperativeHandle:Q0,useInsertionEffect:K0,useLayoutEffect:Z0,useMemo:e1,useReducer:wu,useRef:Uf,useState:function(){return wu(na)},useDebugValue:Ip,useDeferredValue:function(i,o){var u=ni();return n1(u,xe.memoizedState,i,o)},useTransition:function(){var i=wu(na)[0],o=ni().memoizedState;return[typeof i=="boolean"?i:lo(i),o]},useSyncExternalStore:Au,useId:a1,useHostTransitionStatus:Up,useFormState:Ba,useActionState:Ba,useOptimistic:function(i,o){var u=ni();return Bf(u,xe,i,o)},useMemoCache:zo,useCacheRefresh:o1};Hp.useEffectEvent=W0;var f1={readContext:Ki,use:Sl,useCallback:t1,useContext:Ki,useEffect:Bp,useImperativeHandle:Q0,useInsertionEffect:K0,useLayoutEffect:Z0,useMemo:e1,useReducer:xu,useRef:Uf,useState:function(){return xu(na)},useDebugValue:Ip,useDeferredValue:function(i,o){var u=ni();return xe===null?Fp(u,i,o):n1(u,xe.memoizedState,i,o)},useTransition:function(){var i=xu(na)[0],o=ni().memoizedState;return[typeof i=="boolean"?i:lo(i),o]},useSyncExternalStore:Au,useId:a1,useHostTransitionStatus:Up,useFormState:Cu,useActionState:Cu,useOptimistic:function(i,o){var u=ni();return xe!==null?Bf(u,xe,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:zo,useCacheRefresh:o1};f1.useEffectEvent=W0;function qp(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:g({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Gp={enqueueSetState:function(i,o,u){i=i._reactInternals;var d=Or(),y=Ee(d);y.payload=o,u!=null&&(y.callback=u),o=Ve(i,y,d),o!==null&&(fr(o,i,d),yn(o,i,d))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=Or(),y=Ee(d);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Ve(i,y,d),o!==null&&(fr(o,i,d),yn(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Or(),d=Ee(u);d.tag=2,o!=null&&(d.callback=o),o=Ve(i,d,u),o!==null&&(fr(o,i,u),yn(o,i,u))}};function d1(i,o,u,d,y,x,L){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,x,L):o.prototype&&o.prototype.isPureReactComponent?!Na(u,d)||!Na(y,x):!0}function p1(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&Gp.enqueueReplaceState(o,o.state,null)}function Tc(i,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(i=i.defaultProps){u===o&&(u=g({},u));for(var y in i)u[y]===void 0&&(u[y]=i[y])}return u}function g1(i){mc(i)}function m1(i){console.error(i)}function b1(i){mc(i)}function Hf(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function y1(i,o,u){try{var d=i.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Vp(i,o,u){return u=Ee(u),u.tag=3,u.payload={element:null},u.callback=function(){Hf(i,o)},u}function v1(i){return i=Ee(i),i.tag=3,i}function w1(i,o,u,d){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;i.payload=function(){return y(x)},i.callback=function(){y1(o,u,d)}}var L=u.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(i.callback=function(){y1(o,u,d),typeof y!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var q=d.stack;this.componentDidCatch(d.value,{componentStack:q!==null?q:""})})}function px(i,o,u,d,y){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&so(o,u,y,!0),u=Zn.current,u!==null){switch(u.tag){case 31:case 13:return hn===null?td():u.alternate===null&&Si===0&&(Si=3),u.flags&=-257,u.flags|=65536,u.lanes=y,d===mt?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),mg(i,d,y)),!1;case 22:return u.flags|=65536,d===mt?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),mg(i,d,y)),!1}throw Error(n(435,u.tag))}return mg(i,d,y),td(),!1}if(Qe)return o=Zn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==Mr&&(i=Error(n(422),{cause:d}),xl(er(i,u)))):(d!==Mr&&(o=Error(n(423),{cause:d}),xl(er(o,u))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=er(d,u),y=Vp(i.stateNode,d,y),Li(i,y),Si!==4&&(Si=2)),!1;var x=Error(n(520),{cause:d});if(x=er(x,u),Ph===null?Ph=[x]:Ph.push(x),Si!==4&&(Si=2),o===null)return!0;d=er(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=y&-y,u.lanes|=i,i=Vp(u.stateNode,d,i),Li(u,i),!1;case 1:if(o=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Rl===null||!Rl.has(x))))return u.flags|=65536,y&=-y,u.lanes|=y,y=v1(y),w1(y,i,u,d),Li(u,y),!1}u=u.return}while(u!==null);return!1}var $p=Error(n(461)),ji=!1;function vs(i,o,u,d){o.child=i===null?ze(o,null,u,d):qn(o,i.child,u,d)}function x1(i,o,u,d,y){u=u.render;var x=o.ref;if("ref"in d){var L={};for(var q in d)q!=="ref"&&(L[q]=d[q])}else L=d;return ro(o),d=yh(i,o,u,L,x,y),q=vh(),i!==null&&!ji?(wh(i,o,y),Go(i,o,y)):(Qe&&q&&ph(o),o.flags|=1,vs(i,o,d,y),o.child)}function A1(i,o,u,d,y){if(i===null){var x=u.type;return typeof x=="function"&&!lu(x)&&x.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=x,_1(i,o,x,d,y)):(i=yl(u.type,null,d,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,!tg(i,y)){var L=x.memoizedProps;if(u=u.compare,u=u!==null?u:Na,u(L,d)&&i.ref===o.ref)return Go(i,o,y)}return o.flags|=1,i=tr(x,d),i.ref=o.ref,i.return=o,o.child=i}function _1(i,o,u,d,y){if(i!==null){var x=i.memoizedProps;if(Na(x,d)&&i.ref===o.ref)if(ji=!1,o.pendingProps=d=x,tg(i,y))(i.flags&131072)!==0&&(ji=!0);else return o.lanes=i.lanes,Go(i,o,y)}return Yp(i,o,u,d,y)}function S1(i,o,u,d){var y=d.children,x=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,i!==null){for(d=o.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~x}else d=0,o.child=null;return C1(i,o,x,u,d)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&X(o,x!==null?x.cachePool:null),x!==null?Kn(o,x):gn(),xi(o);else return d=o.lanes=536870912,C1(i,o,x!==null?x.baseLanes|u:u,u,d)}else x!==null?(X(o,x.cachePool),Kn(o,x),Ai(),o.memoizedState=null):(i!==null&&X(o,null),gn(),Ai());return vs(i,o,y,u),o.child}function Th(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function C1(i,o,u,d,y){var x=$();return x=x===null?null:{parent:hi._currentValue,pool:x},o.memoizedState={baseLanes:u,cachePool:x},i!==null&&X(o,null),gn(),xi(o),i!==null&&so(i,o,d,!0),o.childLanes=y,null}function qf(i,o){return o=Vf({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function E1(i,o,u){return qn(o,i.child,null,u),i=qf(o,o.pendingProps),i.flags|=2,kn(o),o.memoizedState=null,i}function gx(i,o,u){var d=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Qe){if(d.mode==="hidden")return i=qf(o,d),o.lanes=536870912,Th(null,i);if(vn(o),(i=Hn)?(i=F2(i,ti),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:to!==null?{id:sr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},u=cu(i),u.return=o,o.child=u,Xi=o,Hn=null)):i=null,i===null)throw eo(o);return o.lanes=536870912,null}return qf(o,d)}var x=i.memoizedState;if(x!==null){var L=x.dehydrated;if(vn(o),y)if(o.flags&256)o.flags&=-257,o=E1(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(n(558));else if(ji||so(i,o,u,!1),y=(u&i.childLanes)!==0,ji||y){if(d=Gn,d!==null&&(L=Os(d,u),L!==0&&L!==x.retryLane))throw x.retryLane=L,Ma(i,L),fr(d,i,L),$p;td(),o=E1(i,o,u)}else i=x.treeContext,Hn=sa(L.nextSibling),Xi=o,Qe=!0,bs=null,ti=!1,i!==null&&Df(o,i),o=qf(o,d),o.flags|=4096;return o}return i=tr(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Gf(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Yp(i,o,u,d,y){return ro(o),u=yh(i,o,u,d,void 0,y),d=vh(),i!==null&&!ji?(wh(i,o,y),Go(i,o,y)):(Qe&&d&&ph(o),o.flags|=1,vs(i,o,u,y),o.child)}function T1(i,o,u,d,y,x){return ro(o),o.updateQueue=null,u=Pa(o,d,u,y),yu(i),d=vh(),i!==null&&!ji?(wh(i,o,x),Go(i,o,x)):(Qe&&d&&ph(o),o.flags|=1,vs(i,o,u,x),o.child)}function N1(i,o,u,d,y){if(ro(o),o.stateNode===null){var x=Yi,L=u.contextType;typeof L=="object"&&L!==null&&(x=Ki(L)),x=new u(d,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Gp,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=d,x.state=o.memoizedState,x.refs={},Zt(o),L=u.contextType,x.context=typeof L=="object"&&L!==null?Ki(L):Yi,x.state=o.memoizedState,L=u.getDerivedStateFromProps,typeof L=="function"&&(qp(o,u,L,d),x.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(L=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),L!==x.state&&Gp.enqueueReplaceState(x,x.state,null),vi(o,d,x,y),In(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){x=o.stateNode;var q=o.memoizedProps,ut=Tc(u,q);x.props=ut;var Nt=x.context,Bt=u.contextType;L=Yi,typeof Bt=="object"&&Bt!==null&&(L=Ki(Bt));var zt=u.getDerivedStateFromProps;Bt=typeof zt=="function"||typeof x.getSnapshotBeforeUpdate=="function",q=o.pendingProps!==q,Bt||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(q||Nt!==L)&&p1(o,x,d,L),ee=!1;var Lt=o.memoizedState;x.state=Lt,vi(o,d,x,y),In(),Nt=o.memoizedState,q||Lt!==Nt||ee?(typeof zt=="function"&&(qp(o,u,zt,d),Nt=o.memoizedState),(ut=ee||d1(o,u,ut,d,Lt,Nt,L))?(Bt||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Nt),x.props=d,x.state=Nt,x.context=L,d=ut):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{x=o.stateNode,Wn(i,o),L=o.memoizedProps,Bt=Tc(u,L),x.props=Bt,zt=o.pendingProps,Lt=x.context,Nt=u.contextType,ut=Yi,typeof Nt=="object"&&Nt!==null&&(ut=Ki(Nt)),q=u.getDerivedStateFromProps,(Nt=typeof q=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(L!==zt||Lt!==ut)&&p1(o,x,d,ut),ee=!1,Lt=o.memoizedState,x.state=Lt,vi(o,d,x,y),In();var kt=o.memoizedState;L!==zt||Lt!==kt||ee||i!==null&&i.dependencies!==null&&pu(i.dependencies)?(typeof q=="function"&&(qp(o,u,q,d),kt=o.memoizedState),(Bt=ee||d1(o,u,Bt,d,Lt,kt,ut)||i!==null&&i.dependencies!==null&&pu(i.dependencies))?(Nt||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,kt,ut),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,kt,ut)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||L===i.memoizedProps&&Lt===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&Lt===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=kt),x.props=d,x.state=kt,x.context=ut,d=Bt):(typeof x.componentDidUpdate!="function"||L===i.memoizedProps&&Lt===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&Lt===i.memoizedState||(o.flags|=1024),d=!1)}return x=d,Gf(i,o),d=(o.flags&128)!==0,x||d?(x=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,i!==null&&d?(o.child=qn(o,i.child,null,y),o.child=qn(o,null,u,y)):vs(i,o,u,y),o.memoizedState=x.state,i=o.child):i=Go(i,o,y),i}function L1(i,o,u,d){return jo(),o.flags|=256,vs(i,o,u,d),o.child}var Xp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wp(i){return{baseLanes:i,cachePool:nt()}}function Kp(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=Pr),i}function k1(i,o,u){var d=o.pendingProps,y=!1,x=(o.flags&128)!==0,L;if((L=x)||(L=i!==null&&i.memoizedState===null?!1:(ln.current&2)!==0),L&&(y=!0,o.flags&=-129),L=(o.flags&32)!==0,o.flags&=-33,i===null){if(Qe){if(y?fi(o):Ai(),(i=Hn)?(i=F2(i,ti),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:to!==null?{id:sr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},u=cu(i),u.return=o,o.child=u,Xi=o,Hn=null)):i=null,i===null)throw eo(o);return Mg(i)?o.lanes=32:o.lanes=536870912,null}var q=d.children;return d=d.fallback,y?(Ai(),y=o.mode,q=Vf({mode:"hidden",children:q},y),d=Qa(d,y,u,null),q.return=o,d.return=o,q.sibling=d,o.child=q,d=o.child,d.memoizedState=Wp(u),d.childLanes=Kp(i,L,u),o.memoizedState=Xp,Th(null,d)):(fi(o),Zp(o,q))}var ut=i.memoizedState;if(ut!==null&&(q=ut.dehydrated,q!==null)){if(x)o.flags&256?(fi(o),o.flags&=-257,o=Jp(i,o,u)):o.memoizedState!==null?(Ai(),o.child=i.child,o.flags|=128,o=null):(Ai(),q=d.fallback,y=o.mode,d=Vf({mode:"visible",children:d.children},y),q=Qa(q,y,u,null),q.flags|=2,d.return=o,q.return=o,d.sibling=q,o.child=d,qn(o,i.child,null,u),d=o.child,d.memoizedState=Wp(u),d.childLanes=Kp(i,L,u),o.memoizedState=Xp,o=Th(null,d));else if(fi(o),Mg(q)){if(L=q.nextSibling&&q.nextSibling.dataset,L)var Nt=L.dgst;L=Nt,d=Error(n(419)),d.stack="",d.digest=L,xl({value:d,source:null,stack:null}),o=Jp(i,o,u)}else if(ji||so(i,o,u,!1),L=(u&i.childLanes)!==0,ji||L){if(L=Gn,L!==null&&(d=Os(L,u),d!==0&&d!==ut.retryLane))throw ut.retryLane=d,Ma(i,d),fr(L,i,d),$p;Rg(q)||td(),o=Jp(i,o,u)}else Rg(q)?(o.flags|=192,o.child=i.child,o=null):(i=ut.treeContext,Hn=sa(q.nextSibling),Xi=o,Qe=!0,bs=null,ti=!1,i!==null&&Df(o,i),o=Zp(o,d.children),o.flags|=4096);return o}return y?(Ai(),q=d.fallback,y=o.mode,ut=i.child,Nt=ut.sibling,d=tr(ut,{mode:"hidden",children:d.children}),d.subtreeFlags=ut.subtreeFlags&65011712,Nt!==null?q=tr(Nt,q):(q=Qa(q,y,u,null),q.flags|=2),q.return=o,d.return=o,d.sibling=q,o.child=d,Th(null,d),d=o.child,q=i.child.memoizedState,q===null?q=Wp(u):(y=q.cachePool,y!==null?(ut=hi._currentValue,y=y.parent!==ut?{parent:ut,pool:ut}:y):y=nt(),q={baseLanes:q.baseLanes|u,cachePool:y}),d.memoizedState=q,d.childLanes=Kp(i,L,u),o.memoizedState=Xp,Th(i.child,d)):(fi(o),u=i.child,i=u.sibling,u=tr(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,i!==null&&(L=o.deletions,L===null?(o.deletions=[i],o.flags|=16):L.push(i)),o.child=u,o.memoizedState=null,u)}function Zp(i,o){return o=Vf({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Vf(i,o){return i=rs(22,i,null,o),i.lanes=0,i}function Jp(i,o,u){return qn(o,i.child,null,u),i=Zp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function R1(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Al(i.return,o,u)}function Qp(i,o,u,d,y,x){var L=i.memoizedState;L===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:y,treeForkCount:x}:(L.isBackwards=o,L.rendering=null,L.renderingStartTime=0,L.last=d,L.tail=u,L.tailMode=y,L.treeForkCount=x)}function M1(i,o,u){var d=o.pendingProps,y=d.revealOrder,x=d.tail;d=d.children;var L=ln.current,q=(L&2)!==0;if(q?(L=L&1|2,o.flags|=128):L&=1,U(ln,L),vs(i,o,d,u),d=Qe?Ac:0,!q&&i!==null&&(i.flags&128)!==0)t:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&R1(i,u,o);else if(i.tag===19)R1(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break t;for(;i.sibling===null;){if(i.return===null||i.return===o)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)i=u.alternate,i!==null&&os(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),Qp(o,!1,y,u,x,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&os(i)===null){o.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}Qp(o,!0,u,null,x,d);break;case"together":Qp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Go(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),kl|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(so(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=tr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=tr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function tg(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&pu(i)))}function mx(i,o,u){switch(o.tag){case 3:Ct(o,o.stateNode.containerInfo),io(o,hi,i.memoizedState.cache),jo();break;case 27:case 5:Dt(o);break;case 4:Ct(o,o.stateNode.containerInfo);break;case 10:io(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,vn(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(fi(o),o.flags|=128,null):(u&o.child.childLanes)!==0?k1(i,o,u):(fi(o),i=Go(i,o,u),i!==null?i.sibling:null);fi(o);break;case 19:var y=(i.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||(so(i,o,u,!1),d=(u&o.childLanes)!==0),y){if(d)return M1(i,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),U(ln,ln.current),d)break;return null;case 22:return o.lanes=0,S1(i,o,u,o.pendingProps);case 24:io(o,hi,i.memoizedState.cache)}return Go(i,o,u)}function D1(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)ji=!0;else{if(!tg(i,u)&&(o.flags&128)===0)return ji=!1,mx(i,o,u);ji=(i.flags&131072)!==0}else ji=!1,Qe&&(o.flags&1048576)!==0&&Mf(o,Ac,o.index);switch(o.lanes=0,o.tag){case 16:t:{var d=o.pendingProps;if(i=At(o.elementType),o.type=i,typeof i=="function")lu(i)?(d=Tc(i,d),o.tag=1,o=N1(null,o,i,d,u)):(o.tag=0,o=Yp(null,o,i,d,u));else{if(i!=null){var y=i.$$typeof;if(y===D){o.tag=11,o=x1(null,o,i,d,u);break t}else if(y===Z){o.tag=14,o=A1(null,o,i,d,u);break t}}throw o=Q(i)||i,Error(n(306,o,""))}}return o;case 0:return Yp(i,o,o.type,o.pendingProps,u);case 1:return d=o.type,y=Tc(d,o.pendingProps),N1(i,o,d,y,u);case 3:t:{if(Ct(o,o.stateNode.containerInfo),i===null)throw Error(n(387));d=o.pendingProps;var x=o.memoizedState;y=x.element,Wn(i,o),vi(o,d,null,u);var L=o.memoizedState;if(d=L.cache,io(o,hi,d),d!==x.cache&&Uo(o,[hi],u,!0),In(),d=L.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:L.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=L1(i,o,d,u);break t}else if(d!==y){y=er(Error(n(424)),o),xl(y),o=L1(i,o,d,u);break t}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Hn=sa(i.firstChild),Xi=o,Qe=!0,bs=null,ti=!0,u=ze(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(jo(),d===y){o=Go(i,o,u);break t}vs(i,o,d,u)}o=o.child}return o;case 26:return Gf(i,o),i===null?(u=G2(o.type,null,o.pendingProps,null))?o.memoizedState=u:Qe||(u=o.type,i=o.pendingProps,d=od(ct.current).createElement(u),d[Ln]=o,d[Yn]=i,ws(d,u,i),oi(d),o.stateNode=d):o.memoizedState=G2(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Dt(o),i===null&&Qe&&(d=o.stateNode=z2(o.type,o.pendingProps,ct.current),Xi=o,ti=!0,y=Hn,Ol(o.type)?(Dg=y,Hn=sa(d.firstChild)):Hn=y),vs(i,o,o.pendingProps.children,u),Gf(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Qe&&((y=d=Hn)&&(d=$x(d,o.type,o.pendingProps,ti),d!==null?(o.stateNode=d,Xi=o,Hn=sa(d.firstChild),ti=!1,y=!0):y=!1),y||eo(o)),Dt(o),y=o.type,x=o.pendingProps,L=i!==null?i.memoizedProps:null,d=x.children,Ng(y,x)?d=null:L!==null&&Ng(y,L)&&(o.flags|=32),o.memoizedState!==null&&(y=yh(i,o,Op,null,null,u),Hh._currentValue=y),Gf(i,o),vs(i,o,d,u),o.child;case 6:return i===null&&Qe&&((i=u=Hn)&&(u=Yx(u,o.pendingProps,ti),u!==null?(o.stateNode=u,Xi=o,Hn=null,i=!0):i=!1),i||eo(o)),null;case 13:return k1(i,o,u);case 4:return Ct(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=qn(o,null,d,u):vs(i,o,d,u),o.child;case 11:return x1(i,o,o.type,o.pendingProps,u);case 7:return vs(i,o,o.pendingProps,u),o.child;case 8:return vs(i,o,o.pendingProps.children,u),o.child;case 12:return vs(i,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,io(o,o.type,d.value),vs(i,o,d.children,u),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,ro(o),y=Ki(y),d=d(y),o.flags|=1,vs(i,o,d,u),o.child;case 14:return A1(i,o,o.type,o.pendingProps,u);case 15:return _1(i,o,o.type,o.pendingProps,u);case 19:return M1(i,o,u);case 31:return gx(i,o,u);case 22:return S1(i,o,u,o.pendingProps);case 24:return ro(o),d=Ki(hi),i===null?(y=$(),y===null&&(y=Gn,x=_l(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=u),y=x),o.memoizedState={parent:d,cache:y},Zt(o),io(o,hi,y)):((i.lanes&u)!==0&&(Wn(i,o),vi(o,null,null,u),In()),y=i.memoizedState,x=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),io(o,hi,d)):(d=x.cache,io(o,hi,d),d!==y.cache&&Uo(o,[hi],u,!0))),vs(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Vo(i){i.flags|=4}function eg(i,o,u,d,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(a2())i.flags|=8192;else throw Mt=mt,Et}else i.flags&=-16777217}function P1(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!W2(o))if(a2())i.flags|=8192;else throw Mt=mt,Et}function $f(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?zr():536870912,i.lanes|=o,Lu|=o)}function Nh(i,o){if(!Qe)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Jn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function bx(i,o,u){var d=o.pendingProps;switch(fu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(o),null;case 1:return Jn(o),null;case 3:return u=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ar(hi),_t(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Wi(o)?Vo(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,mh())),Jn(o),null;case 26:var y=o.type,x=o.memoizedState;return i===null?(Vo(o),x!==null?(Jn(o),P1(o,x)):(Jn(o),eg(o,y,null,d,u))):x?x!==i.memoizedState?(Vo(o),Jn(o),P1(o,x)):(Jn(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&Vo(o),Jn(o),eg(o,y,i,d,u)),null;case 27:if(Vt(o),u=ct.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&Vo(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Jn(o),null}i=W.current,Wi(o)?gh(o):(i=z2(y,d,u),o.stateNode=i,Vo(o))}return Jn(o),null;case 5:if(Vt(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&Vo(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Jn(o),null}if(x=W.current,Wi(o))gh(o);else{var L=od(ct.current);switch(x){case 1:x=L.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=L.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=L.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=L.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=L.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?L.createElement("select",{is:d.is}):L.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?L.createElement(y,{is:d.is}):L.createElement(y)}}x[Ln]=o,x[Yn]=d;t:for(L=o.child;L!==null;){if(L.tag===5||L.tag===6)x.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===o)break t;for(;L.sibling===null;){if(L.return===null||L.return===o)break t;L=L.return}L.sibling.return=L.return,L=L.sibling}o.stateNode=x;t:switch(ws(x,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Vo(o)}}return Jn(o),eg(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&Vo(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(i=ct.current,Wi(o)){if(i=o.stateNode,u=o.memoizedProps,d=null,y=Xi,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[Ln]=o,i=!!(i.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||k2(i.nodeValue,u)),i||eo(o,!0)}else i=od(i).createTextNode(d),i[Ln]=o,o.stateNode=i}return Jn(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(d=Wi(o),u!==null){if(i===null){if(!d)throw Error(n(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Ln]=o}else jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Jn(o),i=!1}else u=mh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(kn(o),o):(kn(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Jn(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Wi(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Ln]=o}else jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Jn(o),y=!1}else y=mh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(kn(o),o):(kn(o),null)}return kn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=d!==null,i=i!==null&&i.memoizedState!==null,u&&(d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),$f(o,o.updateQueue),Jn(o),null);case 4:return _t(),i===null&&_g(o.stateNode.containerInfo),Jn(o),null;case 10:return ar(o.type),Jn(o),null;case 19:if(k(ln),d=o.memoizedState,d===null)return Jn(o),null;if(y=(o.flags&128)!==0,x=d.rendering,x===null)if(y)Nh(d,!1);else{if(Si!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(x=os(i),x!==null){for(o.flags|=128,Nh(d,!1),i=x.updateQueue,o.updateQueue=i,$f(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)wc(u,i),u=u.sibling;return U(ln,ln.current&1|2),Qe&&Gs(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&Se()>Zf&&(o.flags|=128,y=!0,Nh(d,!1),o.lanes=4194304)}else{if(!y)if(i=os(x),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,$f(o,i),Nh(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!Qe)return Jn(o),null}else 2*Se()-d.renderingStartTime>Zf&&u!==536870912&&(o.flags|=128,y=!0,Nh(d,!1),o.lanes=4194304);d.isBackwards?(x.sibling=o.child,o.child=x):(i=d.last,i!==null?i.sibling=x:o.child=x,d.last=x)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Se(),i.sibling=null,u=ln.current,U(ln,y?u&1|2:u&1),Qe&&Gs(o,d.treeForkCount),i):(Jn(o),null);case 22:case 23:return kn(o),ki(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(Jn(o),o.subtreeFlags&6&&(o.flags|=8192)):Jn(o),u=o.updateQueue,u!==null&&$f(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),i!==null&&k(j),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ar(hi),Jn(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function yx(i,o){switch(fu(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ar(hi),_t(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Vt(o),null;case 31:if(o.memoizedState!==null){if(kn(o),o.alternate===null)throw Error(n(340));jo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(kn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));jo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return k(ln),null;case 4:return _t(),null;case 10:return ar(o.type),null;case 22:case 23:return kn(o),ki(),i!==null&&k(j),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ar(hi),null;case 25:return null;default:return null}}function O1(i,o){switch(fu(o),o.tag){case 3:ar(hi),_t();break;case 26:case 27:case 5:Vt(o);break;case 4:_t();break;case 31:o.memoizedState!==null&&kn(o);break;case 13:kn(o);break;case 19:k(ln);break;case 10:ar(o.type);break;case 22:case 23:kn(o),ki(),i!==null&&k(j);break;case 24:ar(hi)}}function Lh(i,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var y=d.next;u=y;do{if((u.tag&i)===i){d=void 0;var x=u.create,L=u.inst;d=x(),L.destroy=d}u=u.next}while(u!==y)}}catch(q){Mn(o,o.return,q)}}function Nl(i,o,u){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&i)===i){var L=d.inst,q=L.destroy;if(q!==void 0){L.destroy=void 0,y=o;var ut=u,Nt=q;try{Nt()}catch(Bt){Mn(y,ut,Bt)}}}d=d.next}while(d!==x)}}catch(Bt){Mn(o,o.return,Bt)}}function B1(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{wi(o,u)}catch(d){Mn(i,i.return,d)}}}function I1(i,o,u){u.props=Tc(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(d){Mn(i,o,d)}}function kh(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof u=="function"?i.refCleanup=u(d):u.current=d}}catch(y){Mn(i,o,y)}}function uo(i,o){var u=i.ref,d=i.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(y){Mn(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Mn(i,o,y)}else u.current=null}function F1(i){var o=i.type,u=i.memoizedProps,d=i.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(y){Mn(i,i.return,y)}}function ng(i,o,u){try{var d=i.stateNode;Ux(d,i.type,u,o),d[Yn]=o}catch(y){Mn(i,i.return,y)}}function j1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ol(i.type)||i.tag===4}function ig(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||j1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ol(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function sg(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Er));else if(d!==4&&(d===27&&Ol(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(sg(i,o,u),i=i.sibling;i!==null;)sg(i,o,u),i=i.sibling}function Yf(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(d===27&&Ol(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Yf(i,o,u),i=i.sibling;i!==null;)Yf(i,o,u),i=i.sibling}function U1(i){var o=i.stateNode,u=i.memoizedProps;try{for(var d=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);ws(o,d,u),o[Ln]=i,o[Yn]=u}catch(x){Mn(i,i.return,x)}}var $o=!1,Ui=!1,rg=!1,z1=typeof WeakSet=="function"?WeakSet:Set,ls=null;function vx(i,o){if(i=i.containerInfo,Eg=pd,i=ka(i),Qr(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else t:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break t}var L=0,q=-1,ut=-1,Nt=0,Bt=0,zt=i,Lt=null;e:for(;;){for(var kt;zt!==u||y!==0&&zt.nodeType!==3||(q=L+y),zt!==x||d!==0&&zt.nodeType!==3||(ut=L+d),zt.nodeType===3&&(L+=zt.nodeValue.length),(kt=zt.firstChild)!==null;)Lt=zt,zt=kt;for(;;){if(zt===i)break e;if(Lt===u&&++Nt===y&&(q=L),Lt===x&&++Bt===d&&(ut=L),(kt=zt.nextSibling)!==null)break;zt=Lt,Lt=zt.parentNode}zt=kt}u=q===-1||ut===-1?null:{start:q,end:ut}}else u=null}u=u||{start:0,end:0}}else u=null;for(Tg={focusedElem:i,selectionRange:u},pd=!1,ls=o;ls!==null;)if(o=ls,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ls=i;else for(;ls!==null;){switch(o=ls,x=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)y=i[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,u=o,y=x.memoizedProps,x=x.memoizedState,d=u.stateNode;try{var oe=Tc(u.type,y);i=d.getSnapshotBeforeUpdate(oe,x),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){Mn(u,u.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)kg(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":kg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,ls=i;break}ls=o.return}}function H1(i,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Xo(i,u),d&4&&Lh(5,u);break;case 1:if(Xo(i,u),d&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(L){Mn(u,u.return,L)}else{var y=Tc(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(L){Mn(u,u.return,L)}}d&64&&B1(u),d&512&&kh(u,u.return);break;case 3:if(Xo(i,u),d&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{wi(i,o)}catch(L){Mn(u,u.return,L)}}break;case 27:o===null&&d&4&&U1(u);case 26:case 5:Xo(i,u),o===null&&d&4&&F1(u),d&512&&kh(u,u.return);break;case 12:Xo(i,u);break;case 31:Xo(i,u),d&4&&V1(i,u);break;case 13:Xo(i,u),d&4&&$1(i,u),d&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=Nx.bind(null,u),Xx(i,u))));break;case 22:if(d=u.memoizedState!==null||$o,!d){o=o!==null&&o.memoizedState!==null||Ui,y=$o;var x=Ui;$o=d,(Ui=o)&&!x?Wo(i,u,(u.subtreeFlags&8772)!==0):Xo(i,u),$o=y,Ui=x}break;case 30:break;default:Xo(i,u)}}function q1(i){var o=i.alternate;o!==null&&(i.alternate=null,q1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ya(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ii=null,lr=!1;function Yo(i,o,u){for(u=u.child;u!==null;)G1(i,o,u),u=u.sibling}function G1(i,o,u){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Re,u)}catch{}switch(u.tag){case 26:Ui||uo(u,o),Yo(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ui||uo(u,o);var d=ii,y=lr;Ol(u.type)&&(ii=u.stateNode,lr=!1),Yo(i,o,u),jh(u.stateNode),ii=d,lr=y;break;case 5:Ui||uo(u,o);case 6:if(d=ii,y=lr,ii=null,Yo(i,o,u),ii=d,lr=y,ii!==null)if(lr)try{(ii.nodeType===9?ii.body:ii.nodeName==="HTML"?ii.ownerDocument.body:ii).removeChild(u.stateNode)}catch(x){Mn(u,o,x)}else try{ii.removeChild(u.stateNode)}catch(x){Mn(u,o,x)}break;case 18:ii!==null&&(lr?(i=ii,B2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Iu(i)):B2(ii,u.stateNode));break;case 4:d=ii,y=lr,ii=u.stateNode.containerInfo,lr=!0,Yo(i,o,u),ii=d,lr=y;break;case 0:case 11:case 14:case 15:Nl(2,u,o),Ui||Nl(4,u,o),Yo(i,o,u);break;case 1:Ui||(uo(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&I1(u,o,d)),Yo(i,o,u);break;case 21:Yo(i,o,u);break;case 22:Ui=(d=Ui)||u.memoizedState!==null,Yo(i,o,u),Ui=d;break;default:Yo(i,o,u)}}function V1(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Iu(i)}catch(u){Mn(o,o.return,u)}}}function $1(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Iu(i)}catch(u){Mn(o,o.return,u)}}function wx(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new z1),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new z1),o;default:throw Error(n(435,i.tag))}}function Xf(i,o){var u=wx(i);o.forEach(function(d){if(!u.has(d)){u.add(d);var y=Lx.bind(null,i,d);d.then(y,y)}})}function cr(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var y=u[d],x=i,L=o,q=L;t:for(;q!==null;){switch(q.tag){case 27:if(Ol(q.type)){ii=q.stateNode,lr=!1;break t}break;case 5:ii=q.stateNode,lr=!1;break t;case 3:case 4:ii=q.stateNode.containerInfo,lr=!0;break t}q=q.return}if(ii===null)throw Error(n(160));G1(x,L,y),ii=null,lr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Y1(o,i),o=o.sibling}var Fa=null;function Y1(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:cr(o,i),ur(i),d&4&&(Nl(3,i,i.return),Lh(3,i),Nl(5,i,i.return));break;case 1:cr(o,i),ur(i),d&512&&(Ui||u===null||uo(u,u.return)),d&64&&$o&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var y=Fa;if(cr(o,i),ur(i),d&512&&(Ui||u===null||uo(u,u.return)),d&4){var x=u!==null?u.memoizedState:null;if(d=i.memoizedState,u===null)if(d===null)if(i.stateNode===null){t:{d=i.type,u=i.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[wr]||x[Ln]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),ws(x,d,u),x[Ln]=i,oi(x),d=x;break t;case"link":var L=Y2("link","href",y).get(d+(u.href||""));if(L){for(var q=0;q<L.length;q++)if(x=L[q],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){L.splice(q,1);break e}}x=y.createElement(d),ws(x,d,u),y.head.appendChild(x);break;case"meta":if(L=Y2("meta","content",y).get(d+(u.content||""))){for(q=0;q<L.length;q++)if(x=L[q],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){L.splice(q,1);break e}}x=y.createElement(d),ws(x,d,u),y.head.appendChild(x);break;default:throw Error(n(468,d))}x[Ln]=i,oi(x),d=x}i.stateNode=d}else X2(y,i.type,i.stateNode);else i.stateNode=$2(y,d,i.memoizedProps);else x!==d?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,d===null?X2(y,i.type,i.stateNode):$2(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&ng(i,i.memoizedProps,u.memoizedProps)}break;case 27:cr(o,i),ur(i),d&512&&(Ui||u===null||uo(u,u.return)),u!==null&&d&4&&ng(i,i.memoizedProps,u.memoizedProps);break;case 5:if(cr(o,i),ur(i),d&512&&(Ui||u===null||uo(u,u.return)),i.flags&32){y=i.stateNode;try{Cr(y,"")}catch(oe){Mn(i,i.return,oe)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,ng(i,y,u!==null?u.memoizedProps:y)),d&1024&&(rg=!0);break;case 6:if(cr(o,i),ur(i),d&4){if(i.stateNode===null)throw Error(n(162));d=i.memoizedProps,u=i.stateNode;try{u.nodeValue=d}catch(oe){Mn(i,i.return,oe)}}break;case 3:if(ud=null,y=Fa,Fa=ld(o.containerInfo),cr(o,i),Fa=y,ur(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Iu(o.containerInfo)}catch(oe){Mn(i,i.return,oe)}rg&&(rg=!1,X1(i));break;case 4:d=Fa,Fa=ld(i.stateNode.containerInfo),cr(o,i),ur(i),Fa=d;break;case 12:cr(o,i),ur(i);break;case 31:cr(o,i),ur(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Xf(i,d)));break;case 13:cr(o,i),ur(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Kf=Se()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Xf(i,d)));break;case 22:y=i.memoizedState!==null;var ut=u!==null&&u.memoizedState!==null,Nt=$o,Bt=Ui;if($o=Nt||y,Ui=Bt||ut,cr(o,i),Ui=Bt,$o=Nt,ur(i),d&8192)t:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||ut||$o||Ui||Nc(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){ut=u=o;try{if(x=ut.stateNode,y)L=x.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{q=ut.stateNode;var zt=ut.memoizedProps.style,Lt=zt!=null&&zt.hasOwnProperty("display")?zt.display:null;q.style.display=Lt==null||typeof Lt=="boolean"?"":(""+Lt).trim()}}catch(oe){Mn(ut,ut.return,oe)}}}else if(o.tag===6){if(u===null){ut=o;try{ut.stateNode.nodeValue=y?"":ut.memoizedProps}catch(oe){Mn(ut,ut.return,oe)}}}else if(o.tag===18){if(u===null){ut=o;try{var kt=ut.stateNode;y?I2(kt,!0):I2(ut.stateNode,!1)}catch(oe){Mn(ut,ut.return,oe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break t;for(;o.sibling===null;){if(o.return===null||o.return===i)break t;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Xf(i,u))));break;case 19:cr(o,i),ur(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Xf(i,d)));break;case 30:break;case 21:break;default:cr(o,i),ur(i)}}function ur(i){var o=i.flags;if(o&2){try{for(var u,d=i.return;d!==null;){if(j1(d)){u=d;break}d=d.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var y=u.stateNode,x=ig(i);Yf(i,x,y);break;case 5:var L=u.stateNode;u.flags&32&&(Cr(L,""),u.flags&=-33);var q=ig(i);Yf(i,q,L);break;case 3:case 4:var ut=u.stateNode.containerInfo,Nt=ig(i);sg(i,Nt,ut);break;default:throw Error(n(161))}}catch(Bt){Mn(i,i.return,Bt)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function X1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;X1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Xo(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)H1(i,o.alternate,o),o=o.sibling}function Nc(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Nl(4,o,o.return),Nc(o);break;case 1:uo(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&I1(o,o.return,u),Nc(o);break;case 27:jh(o.stateNode);case 26:case 5:uo(o,o.return),Nc(o);break;case 22:o.memoizedState===null&&Nc(o);break;case 30:Nc(o);break;default:Nc(o)}i=i.sibling}}function Wo(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=i,x=o,L=x.flags;switch(x.tag){case 0:case 11:case 15:Wo(y,x,u),Lh(4,x);break;case 1:if(Wo(y,x,u),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Nt){Mn(d,d.return,Nt)}if(d=x,y=d.updateQueue,y!==null){var q=d.stateNode;try{var ut=y.shared.hiddenCallbacks;if(ut!==null)for(y.shared.hiddenCallbacks=null,y=0;y<ut.length;y++)as(ut[y],q)}catch(Nt){Mn(d,d.return,Nt)}}u&&L&64&&B1(x),kh(x,x.return);break;case 27:U1(x);case 26:case 5:Wo(y,x,u),u&&d===null&&L&4&&F1(x),kh(x,x.return);break;case 12:Wo(y,x,u);break;case 31:Wo(y,x,u),u&&L&4&&V1(y,x);break;case 13:Wo(y,x,u),u&&L&4&&$1(y,x);break;case 22:x.memoizedState===null&&Wo(y,x,u),kh(x,x.return);break;case 30:break;default:Wo(y,x,u)}o=o.sibling}}function ag(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&_c(u))}function og(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_c(i))}function ja(i,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)W1(i,o,u,d),o=o.sibling}function W1(i,o,u,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:ja(i,o,u,d),y&2048&&Lh(9,o);break;case 1:ja(i,o,u,d);break;case 3:ja(i,o,u,d),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_c(i)));break;case 12:if(y&2048){ja(i,o,u,d),i=o.stateNode;try{var x=o.memoizedProps,L=x.id,q=x.onPostCommit;typeof q=="function"&&q(L,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ut){Mn(o,o.return,ut)}}else ja(i,o,u,d);break;case 31:ja(i,o,u,d);break;case 13:ja(i,o,u,d);break;case 23:break;case 22:x=o.stateNode,L=o.alternate,o.memoizedState!==null?x._visibility&2?ja(i,o,u,d):Rh(i,o):x._visibility&2?ja(i,o,u,d):(x._visibility|=2,Eu(i,o,u,d,(o.subtreeFlags&10256)!==0||!1)),y&2048&&ag(L,o);break;case 24:ja(i,o,u,d),y&2048&&og(o.alternate,o);break;default:ja(i,o,u,d)}}function Eu(i,o,u,d,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var x=i,L=o,q=u,ut=d,Nt=L.flags;switch(L.tag){case 0:case 11:case 15:Eu(x,L,q,ut,y),Lh(8,L);break;case 23:break;case 22:var Bt=L.stateNode;L.memoizedState!==null?Bt._visibility&2?Eu(x,L,q,ut,y):Rh(x,L):(Bt._visibility|=2,Eu(x,L,q,ut,y)),y&&Nt&2048&&ag(L.alternate,L);break;case 24:Eu(x,L,q,ut,y),y&&Nt&2048&&og(L.alternate,L);break;default:Eu(x,L,q,ut,y)}o=o.sibling}}function Rh(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,d=o,y=d.flags;switch(d.tag){case 22:Rh(u,d),y&2048&&ag(d.alternate,d);break;case 24:Rh(u,d),y&2048&&og(d.alternate,d);break;default:Rh(u,d)}o=o.sibling}}var Mh=8192;function Tu(i,o,u){if(i.subtreeFlags&Mh)for(i=i.child;i!==null;)K1(i,o,u),i=i.sibling}function K1(i,o,u){switch(i.tag){case 26:Tu(i,o,u),i.flags&Mh&&i.memoizedState!==null&&aA(u,Fa,i.memoizedState,i.memoizedProps);break;case 5:Tu(i,o,u);break;case 3:case 4:var d=Fa;Fa=ld(i.stateNode.containerInfo),Tu(i,o,u),Fa=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Mh,Mh=16777216,Tu(i,o,u),Mh=d):Tu(i,o,u));break;default:Tu(i,o,u)}}function Z1(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Dh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];ls=d,Q1(d,i)}Z1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)J1(i),i=i.sibling}function J1(i){switch(i.tag){case 0:case 11:case 15:Dh(i),i.flags&2048&&Nl(9,i,i.return);break;case 3:Dh(i);break;case 12:Dh(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Wf(i)):Dh(i);break;default:Dh(i)}}function Wf(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];ls=d,Q1(d,i)}Z1(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Nl(8,o,o.return),Wf(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Wf(o));break;default:Wf(o)}i=i.sibling}}function Q1(i,o){for(;ls!==null;){var u=ls;switch(u.tag){case 0:case 11:case 15:Nl(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:_c(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,ls=d;else t:for(u=i;ls!==null;){d=ls;var y=d.sibling,x=d.return;if(q1(d),d===u){ls=null;break t}if(y!==null){y.return=x,ls=y;break t}ls=x}}}var xx={getCacheForType:function(i){var o=Ki(hi),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return Ki(hi).controller.signal}},Ax=typeof WeakMap=="function"?WeakMap:Map,wn=0,Gn=null,tn=null,nn=0,Rn=0,Dr=null,Ll=!1,Nu=!1,lg=!1,Ko=0,Si=0,kl=0,Lc=0,cg=0,Pr=0,Lu=0,Ph=null,hr=null,ug=!1,Kf=0,t2=0,Zf=1/0,Jf=null,Rl=null,Ji=0,Ml=null,ku=null,Zo=0,hg=0,fg=null,e2=null,Oh=0,dg=null;function Or(){return(wn&2)!==0&&nn!==0?nn&-nn:V.T!==null?vg():Oi()}function n2(){if(Pr===0)if((nn&536870912)===0||Qe){var i=Nn;Nn<<=1,(Nn&3932160)===0&&(Nn=262144),Pr=i}else Pr=536870912;return i=Zn.current,i!==null&&(i.flags|=32),Pr}function fr(i,o,u){(i===Gn&&(Rn===2||Rn===9)||i.cancelPendingCommit!==null)&&(Ru(i,0),Dl(i,nn,Pr,!1)),be(i,u),((wn&2)===0||i!==Gn)&&(i===Gn&&((wn&2)===0&&(Lc|=u),Si===4&&Dl(i,nn,Pr,!1)),ho(i))}function i2(i,o,u){if((wn&6)!==0)throw Error(n(327));var d=!u&&(o&127)===0&&(o&i.expiredLanes)===0||yr(i,o),y=d?Cx(i,o):gg(i,o,!0),x=d;do{if(y===0){Nu&&!d&&Dl(i,o,0,!1);break}else{if(u=i.current.alternate,x&&!_x(u)){y=gg(i,o,!1),x=!1;continue}if(y===2){if(x=o,i.errorRecoveryDisabledLanes&x)var L=0;else L=i.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){o=L;t:{var q=i;y=Ph;var ut=q.current.memoizedState.isDehydrated;if(ut&&(Ru(q,L).flags|=256),L=gg(q,L,!1),L!==2){if(lg&&!ut){q.errorRecoveryDisabledLanes|=x,Lc|=x,y=4;break t}x=hr,hr=y,x!==null&&(hr===null?hr=x:hr.push.apply(hr,x))}y=L}if(x=!1,y!==2)continue}}if(y===1){Ru(i,0),Dl(i,o,0,!0);break}t:{switch(d=i,x=y,x){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Dl(d,o,Pr,!Ll);break t;case 2:hr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(y=Kf+300-Se(),10<y)){if(Dl(d,o,Pr,!Ll),rn(d,0,!0)!==0)break t;Zo=o,d.timeoutHandle=P2(s2.bind(null,d,u,hr,Jf,ug,o,Pr,Lc,Lu,Ll,x,"Throttled",-0,0),y);break t}s2(d,u,hr,Jf,ug,o,Pr,Lc,Lu,Ll,x,null,-0,0)}}break}while(!0);ho(i)}function s2(i,o,u,d,y,x,L,q,ut,Nt,Bt,zt,Lt,kt){if(i.timeoutHandle=-1,zt=o.subtreeFlags,zt&8192||(zt&16785408)===16785408){zt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Er},K1(o,x,zt);var oe=(x&62914560)===x?Kf-Se():(x&4194048)===x?t2-Se():0;if(oe=oA(zt,oe),oe!==null){Zo=x,i.cancelPendingCommit=oe(f2.bind(null,i,o,x,u,d,y,L,q,ut,Bt,zt,null,Lt,kt)),Dl(i,x,L,!Nt);return}}f2(i,o,x,u,d,y,L,q,ut)}function _x(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var y=u[d],x=y.getSnapshot;y=y.value;try{if(!$i(x(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dl(i,o,u,d){o&=~cg,o&=~Lc,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var y=o;0<y;){var x=31-Ze(y),L=1<<x;d[x]=-1,y&=~L}u!==0&&Hr(i,u,o)}function Qf(){return(wn&6)===0?(Bh(0),!1):!0}function pg(){if(tn!==null){if(Rn===0)var i=tn.return;else i=tn,ea=no=null,vu(i),Ht=null,le=0,i=tn;for(;i!==null;)O1(i.alternate,i),i=i.return;tn=null}}function Ru(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,qx(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Zo=0,pg(),Gn=i,tn=u=tr(i.current,null),nn=o,Rn=0,Dr=null,Ll=!1,Nu=yr(i,o),lg=!1,Lu=Pr=cg=Lc=kl=Si=0,hr=Ph=null,ug=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var y=31-Ze(d),x=1<<y;o|=i[y],d&=~x}return Ko=o,bc(),u}function r2(i,o){ye=null,V.H=Eh,o===dt||o===tt?(o=Ft(),Rn=3):o===Et?(o=Ft(),Rn=4):Rn=o===$p?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Dr=o,tn===null&&(Si=1,Hf(i,er(o,i.current)))}function a2(){var i=Zn.current;return i===null?!0:(nn&4194048)===nn?hn===null:(nn&62914560)===nn||(nn&536870912)!==0?i===hn:!1}function o2(){var i=V.H;return V.H=Eh,i===null?Eh:i}function l2(){var i=V.A;return V.A=xx,i}function td(){Si=4,Ll||(nn&4194048)!==nn&&Zn.current!==null||(Nu=!0),(kl&134217727)===0&&(Lc&134217727)===0||Gn===null||Dl(Gn,nn,Pr,!1)}function gg(i,o,u){var d=wn;wn|=2;var y=o2(),x=l2();(Gn!==i||nn!==o)&&(Jf=null,Ru(i,o)),o=!1;var L=Si;t:do try{if(Rn!==0&&tn!==null){var q=tn,ut=Dr;switch(Rn){case 8:pg(),L=6;break t;case 3:case 2:case 9:case 6:Zn.current===null&&(o=!0);var Nt=Rn;if(Rn=0,Dr=null,Mu(i,q,ut,Nt),u&&Nu){L=0;break t}break;default:Nt=Rn,Rn=0,Dr=null,Mu(i,q,ut,Nt)}}Sx(),L=Si;break}catch(Bt){r2(i,Bt)}while(!0);return o&&i.shellSuspendCounter++,ea=no=null,wn=d,V.H=y,V.A=x,tn===null&&(Gn=null,nn=0,bc()),L}function Sx(){for(;tn!==null;)c2(tn)}function Cx(i,o){var u=wn;wn|=2;var d=o2(),y=l2();Gn!==i||nn!==o?(Jf=null,Zf=Se()+500,Ru(i,o)):Nu=yr(i,o);t:do try{if(Rn!==0&&tn!==null){o=tn;var x=Dr;e:switch(Rn){case 1:Rn=0,Dr=null,Mu(i,o,x,1);break;case 2:case 9:if(xt(x)){Rn=0,Dr=null,u2(o);break}o=function(){Rn!==2&&Rn!==9||Gn!==i||(Rn=7),ho(i)},x.then(o,o);break t;case 3:Rn=7;break t;case 4:Rn=5;break t;case 7:xt(x)?(Rn=0,Dr=null,u2(o)):(Rn=0,Dr=null,Mu(i,o,x,7));break;case 5:var L=null;switch(tn.tag){case 26:L=tn.memoizedState;case 5:case 27:var q=tn;if(L?W2(L):q.stateNode.complete){Rn=0,Dr=null;var ut=q.sibling;if(ut!==null)tn=ut;else{var Nt=q.return;Nt!==null?(tn=Nt,ed(Nt)):tn=null}break e}}Rn=0,Dr=null,Mu(i,o,x,5);break;case 6:Rn=0,Dr=null,Mu(i,o,x,6);break;case 8:pg(),Si=6;break t;default:throw Error(n(462))}}Ex();break}catch(Bt){r2(i,Bt)}while(!0);return ea=no=null,V.H=d,V.A=y,wn=u,tn!==null?0:(Gn=null,nn=0,bc(),Si)}function Ex(){for(;tn!==null&&!Qt();)c2(tn)}function c2(i){var o=D1(i.alternate,i,Ko);i.memoizedProps=i.pendingProps,o===null?ed(i):tn=o}function u2(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=T1(u,o,o.pendingProps,o.type,void 0,nn);break;case 11:o=T1(u,o,o.pendingProps,o.type.render,o.ref,nn);break;case 5:vu(o);default:O1(u,o),o=tn=wc(o,Ko),o=D1(u,o,Ko)}i.memoizedProps=i.pendingProps,o===null?ed(i):tn=o}function Mu(i,o,u,d){ea=no=null,vu(o),Ht=null,le=0;var y=o.return;try{if(px(i,y,o,u,nn)){Si=1,Hf(i,er(u,i.current)),tn=null;return}}catch(x){if(y!==null)throw tn=y,x;Si=1,Hf(i,er(u,i.current)),tn=null;return}o.flags&32768?(Qe||d===1?i=!0:Nu||(nn&536870912)!==0?i=!1:(Ll=i=!0,(d===2||d===9||d===3||d===6)&&(d=Zn.current,d!==null&&d.tag===13&&(d.flags|=16384))),h2(o,i)):ed(o)}function ed(i){var o=i;do{if((o.flags&32768)!==0){h2(o,Ll);return}i=o.return;var u=bx(o.alternate,o,Ko);if(u!==null){tn=u;return}if(o=o.sibling,o!==null){tn=o;return}tn=o=i}while(o!==null);Si===0&&(Si=5)}function h2(i,o){do{var u=yx(i.alternate,i);if(u!==null){u.flags&=32767,tn=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){tn=i;return}tn=i=u}while(i!==null);Si=6,tn=null}function f2(i,o,u,d,y,x,L,q,ut){i.cancelPendingCommit=null;do nd();while(Ji!==0);if((wn&6)!==0)throw Error(n(327));if(o!==null){if(o===i.current)throw Error(n(177));if(x=o.lanes|o.childLanes,x|=ru,fa(i,u,x,L,q,ut),i===Gn&&(tn=Gn=null,nn=0),ku=o,Ml=i,Zo=u,hg=x,fg=y,e2=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,kx(je,function(){return b2(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=V.T,V.T=null,y=et.p,et.p=2,L=wn,wn|=4;try{vx(i,o,u)}finally{wn=L,et.p=y,V.T=d}}Ji=1,d2(),p2(),g2()}}function d2(){if(Ji===1){Ji=0;var i=Ml,o=ku,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=V.T,V.T=null;var d=et.p;et.p=2;var y=wn;wn|=4;try{Y1(o,i);var x=Tg,L=ka(i.containerInfo),q=x.focusedElem,ut=x.selectionRange;if(L!==q&&q&&q.ownerDocument&&La(q.ownerDocument.documentElement,q)){if(ut!==null&&Qr(q)){var Nt=ut.start,Bt=ut.end;if(Bt===void 0&&(Bt=Nt),"selectionStart"in q)q.selectionStart=Nt,q.selectionEnd=Math.min(Bt,q.value.length);else{var zt=q.ownerDocument||document,Lt=zt&&zt.defaultView||window;if(Lt.getSelection){var kt=Lt.getSelection(),oe=q.textContent.length,Ne=Math.min(ut.start,oe),Un=ut.end===void 0?Ne:Math.min(ut.end,oe);!kt.extend&&Ne>Un&&(L=Un,Un=Ne,Ne=L);var vt=bl(q,Ne),pt=bl(q,Un);if(vt&&pt&&(kt.rangeCount!==1||kt.anchorNode!==vt.node||kt.anchorOffset!==vt.offset||kt.focusNode!==pt.node||kt.focusOffset!==pt.offset)){var Tt=zt.createRange();Tt.setStart(vt.node,vt.offset),kt.removeAllRanges(),Ne>Un?(kt.addRange(Tt),kt.extend(pt.node,pt.offset)):(Tt.setEnd(pt.node,pt.offset),kt.addRange(Tt))}}}}for(zt=[],kt=q;kt=kt.parentNode;)kt.nodeType===1&&zt.push({element:kt,left:kt.scrollLeft,top:kt.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<zt.length;q++){var Ut=zt[q];Ut.element.scrollLeft=Ut.left,Ut.element.scrollTop=Ut.top}}pd=!!Eg,Tg=Eg=null}finally{wn=y,et.p=d,V.T=u}}i.current=o,Ji=2}}function p2(){if(Ji===2){Ji=0;var i=Ml,o=ku,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=V.T,V.T=null;var d=et.p;et.p=2;var y=wn;wn|=4;try{H1(i,o.alternate,o)}finally{wn=y,et.p=d,V.T=u}}Ji=3}}function g2(){if(Ji===4||Ji===3){Ji=0,ie();var i=Ml,o=ku,u=Zo,d=e2;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ji=5:(Ji=0,ku=Ml=null,m2(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Rl=null),mi(u),o=o.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Re,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=V.T,y=et.p,et.p=2,V.T=null;try{for(var x=i.onRecoverableError,L=0;L<d.length;L++){var q=d[L];x(q.value,{componentStack:q.stack})}}finally{V.T=o,et.p=y}}(Zo&3)!==0&&nd(),ho(i),y=i.pendingLanes,(u&261930)!==0&&(y&42)!==0?i===dg?Oh++:(Oh=0,dg=i):Oh=0,Bh(0)}}function m2(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,_c(o)))}function nd(){return d2(),p2(),g2(),b2()}function b2(){if(Ji!==5)return!1;var i=Ml,o=hg;hg=0;var u=mi(Zo),d=V.T,y=et.p;try{et.p=32>u?32:u,V.T=null,u=fg,fg=null;var x=Ml,L=Zo;if(Ji=0,ku=Ml=null,Zo=0,(wn&6)!==0)throw Error(n(331));var q=wn;if(wn|=4,J1(x.current),W1(x,x.current,L,u),wn=q,Bh(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Re,x)}catch{}return!0}finally{et.p=y,V.T=d,m2(i,o)}}function y2(i,o,u){o=er(u,o),o=Vp(i.stateNode,o,2),i=Ve(i,o,2),i!==null&&(be(i,2),ho(i))}function Mn(i,o,u){if(i.tag===3)y2(i,i,u);else for(;o!==null;){if(o.tag===3){y2(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Rl===null||!Rl.has(d))){i=er(u,i),u=v1(2),d=Ve(o,u,2),d!==null&&(w1(u,d,o,i),be(d,2),ho(d));break}}o=o.return}}function mg(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new Ax;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(u)||(lg=!0,y.add(u),i=Tx.bind(null,i,o,u),o.then(i,i))}function Tx(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Gn===i&&(nn&u)===u&&(Si===4||Si===3&&(nn&62914560)===nn&&300>Se()-Kf?(wn&2)===0&&Ru(i,0):cg|=u,Lu===nn&&(Lu=0)),ho(i)}function v2(i,o){o===0&&(o=zr()),i=Ma(i,o),i!==null&&(be(i,o),ho(i))}function Nx(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),v2(i,u)}function Lx(i,o){var u=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(o),v2(i,u)}function kx(i,o){return Jt(i,o)}var id=null,Du=null,bg=!1,sd=!1,yg=!1,Pl=0;function ho(i){i!==Du&&i.next===null&&(Du===null?id=Du=i:Du=Du.next=i),sd=!0,bg||(bg=!0,Mx())}function Bh(i,o){if(!yg&&sd){yg=!0;do for(var u=!1,d=id;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var L=d.suspendedLanes,q=d.pingedLanes;x=(1<<31-Ze(42|i)+1)-1,x&=y&~(L&~q),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,_2(d,x))}else x=nn,x=rn(d,d===Gn?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||yr(d,x)||(u=!0,_2(d,x));d=d.next}while(u);yg=!1}}function Rx(){w2()}function w2(){sd=bg=!1;var i=0;Pl!==0&&Hx()&&(i=Pl);for(var o=Se(),u=null,d=id;d!==null;){var y=d.next,x=x2(d,o);x===0?(d.next=null,u===null?id=y:u.next=y,y===null&&(Du=u)):(u=d,(i!==0||(x&3)!==0)&&(sd=!0)),d=y}Ji!==0&&Ji!==5||Bh(i),Pl!==0&&(Pl=0)}function x2(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var L=31-Ze(x),q=1<<L,ut=y[L];ut===-1?((q&u)===0||(q&d)!==0)&&(y[L]=es(q,o)):ut<=o&&(i.expiredLanes|=q),x&=~q}if(o=Gn,u=nn,u=rn(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,u===0||i===o&&(Rn===2||Rn===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Xt(d),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||yr(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(d!==null&&Xt(d),mi(u)){case 2:case 8:u=We;break;case 32:u=je;break;case 268435456:u=ke;break;default:u=je}return d=A2.bind(null,i),u=Jt(u,d),i.callbackPriority=o,i.callbackNode=u,o}return d!==null&&d!==null&&Xt(d),i.callbackPriority=2,i.callbackNode=null,2}function A2(i,o){if(Ji!==0&&Ji!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(nd()&&i.callbackNode!==u)return null;var d=nn;return d=rn(i,i===Gn?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(i2(i,d,o),x2(i,Se()),i.callbackNode!=null&&i.callbackNode===u?A2.bind(null,i):null)}function _2(i,o){if(nd())return null;i2(i,o,!0)}function Mx(){Gx(function(){(wn&6)!==0?Jt(Pe,Rx):w2()})}function vg(){if(Pl===0){var i=m;i===0&&(i=De,De<<=1,(De&261888)===0&&(De=256)),Pl=i}return Pl}function S2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ss(""+i)}function C2(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function Dx(i,o,u,d,y){if(o==="submit"&&u&&u.stateNode===y){var x=S2((y[Yn]||null).action),L=d.submitter;L&&(o=(o=L[Yn]||null)?S2(o.formAction):L.getAttribute("formAction"),o!==null&&(x=o,L=null));var q=new Zs("action","action",null,d,y);i.push({event:q,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Pl!==0){var ut=L?C2(y,L):new FormData(y);jp(u,{pending:!0,data:ut,method:y.method,action:x},null,ut)}}else typeof x=="function"&&(q.preventDefault(),ut=L?C2(y,L):new FormData(y),jp(u,{pending:!0,data:ut,method:y.method,action:x},x,ut))},currentTarget:y}]})}}for(var wg=0;wg<Bo.length;wg++){var xg=Bo[wg],Px=xg.toLowerCase(),Ox=xg[0].toUpperCase()+xg.slice(1);Qs(Px,"on"+Ox)}Qs(Oo,"onAnimationEnd"),Qs(gc,"onAnimationIteration"),Qs(hh,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(Lf,"onTransitionRun"),Qs(kf,"onTransitionStart"),Qs(Rf,"onTransitionCancel"),Qs(fh,"onTransitionEnd"),da("onMouseEnter",["mouseout","mouseover"]),da("onMouseLeave",["mouseout","mouseover"]),da("onPointerEnter",["pointerout","pointerover"]),da("onPointerLeave",["pointerout","pointerover"]),_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_r("onBeforeInput",["compositionend","keypress","textInput","paste"]),_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ih));function E2(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],y=d.event;d=d.listeners;t:{var x=void 0;if(o)for(var L=d.length-1;0<=L;L--){var q=d[L],ut=q.instance,Nt=q.currentTarget;if(q=q.listener,ut!==x&&y.isPropagationStopped())break t;x=q,y.currentTarget=Nt;try{x(y)}catch(Bt){mc(Bt)}y.currentTarget=null,x=ut}else for(L=0;L<d.length;L++){if(q=d[L],ut=q.instance,Nt=q.currentTarget,q=q.listener,ut!==x&&y.isPropagationStopped())break t;x=q,y.currentTarget=Nt;try{x(y)}catch(Bt){mc(Bt)}y.currentTarget=null,x=ut}}}}function en(i,o){var u=o[Bs];u===void 0&&(u=o[Bs]=new Set);var d=i+"__bubble";u.has(d)||(T2(o,i,2,!1),u.add(d))}function Ag(i,o,u){var d=0;o&&(d|=4),T2(u,i,d,o)}var rd="_reactListening"+Math.random().toString(36).slice(2);function _g(i){if(!i[rd]){i[rd]=!0,Jl.forEach(function(u){u!=="selectionchange"&&(Bx.has(u)||Ag(u,!1,i),Ag(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rd]||(o[rd]=!0,Ag("selectionchange",!1,o))}}function T2(i,o,u,d){switch(nb(o)){case 2:var y=uA;break;case 8:y=hA;break;default:y=Fg}u=y.bind(null,o,u,i),y=void 0,!uc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(o,u,{capture:!0,passive:y}):i.addEventListener(o,u,!0):y!==void 0?i.addEventListener(o,u,{passive:y}):i.addEventListener(o,u,!1)}function Sg(i,o,u,d,y){var x=d;if((o&1)===0&&(o&2)===0&&d!==null)t:for(;;){if(d===null)return;var L=d.tag;if(L===3||L===4){var q=d.stateNode.containerInfo;if(q===y)break;if(L===4)for(L=d.return;L!==null;){var ut=L.tag;if((ut===3||ut===4)&&L.stateNode.containerInfo===y)return;L=L.return}for(;q!==null;){if(L=xr(q),L===null)return;if(ut=L.tag,ut===5||ut===6||ut===26||ut===27){d=x=L;continue t}q=q.parentNode}}d=d.return}tu(function(){var Nt=x,Bt=No(u),zt=[];t:{var Lt=dh.get(i);if(Lt!==void 0){var kt=Zs,oe=i;switch(i){case"keypress":if(Ks(u)===0)break t;case"keydown":case"keyup":kt=an;break;case"focusin":oe="focus",kt=xa;break;case"focusout":oe="blur",kt=xa;break;case"beforeblur":case"afterblur":kt=xa;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=wa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=Ni;break;case Oo:case gc:case hh:kt=_;break;case fh:kt=Vi;break;case"scroll":case"scrollend":kt=ul;break;case"wheel":kt=Tr;break;case"copy":case"cut":case"paste":kt=it;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=li;break;case"toggle":case"beforetoggle":kt=fc}var Ne=(o&4)!==0,Un=!Ne&&(i==="scroll"||i==="scrollend"),vt=Ne?Lt!==null?Lt+"Capture":null:Lt;Ne=[];for(var pt=Nt,Tt;pt!==null;){var Ut=pt;if(Tt=Ut.stateNode,Ut=Ut.tag,Ut!==5&&Ut!==26&&Ut!==27||Tt===null||vt===null||(Ut=js(pt,vt),Ut!=null&&Ne.push(Fh(pt,Ut,Tt))),Un)break;pt=pt.return}0<Ne.length&&(Lt=new kt(Lt,oe,null,u,Bt),zt.push({event:Lt,listeners:Ne}))}}if((o&7)===0){t:{if(Lt=i==="mouseover"||i==="pointerover",kt=i==="mouseout"||i==="pointerout",Lt&&u!==ga&&(oe=u.relatedTarget||u.fromElement)&&(xr(oe)||oe[ns]))break t;if((kt||Lt)&&(Lt=Bt.window===Bt?Bt:(Lt=Bt.ownerDocument)?Lt.defaultView||Lt.parentWindow:window,kt?(oe=u.relatedTarget||u.toElement,kt=Nt,oe=oe?xr(oe):null,oe!==null&&(Un=a(oe),Ne=oe.tag,oe!==Un||Ne!==5&&Ne!==27&&Ne!==6)&&(oe=null)):(kt=null,oe=Nt),kt!==oe)){if(Ne=hc,Ut="onMouseLeave",vt="onMouseEnter",pt="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=li,Ut="onPointerLeave",vt="onPointerEnter",pt="pointer"),Un=kt==null?Lt:Eo(kt),Tt=oe==null?Lt:Eo(oe),Lt=new Ne(Ut,pt+"leave",kt,u,Bt),Lt.target=Un,Lt.relatedTarget=Tt,Ut=null,xr(Bt)===Nt&&(Ne=new Ne(vt,pt+"enter",oe,u,Bt),Ne.target=Tt,Ne.relatedTarget=Un,Ut=Ne),Un=Ut,kt&&oe)e:{for(Ne=Ix,vt=kt,pt=oe,Tt=0,Ut=vt;Ut;Ut=Ne(Ut))Tt++;Ut=0;for(var Ae=pt;Ae;Ae=Ne(Ae))Ut++;for(;0<Tt-Ut;)vt=Ne(vt),Tt--;for(;0<Ut-Tt;)pt=Ne(pt),Ut--;for(;Tt--;){if(vt===pt||pt!==null&&vt===pt.alternate){Ne=vt;break e}vt=Ne(vt),pt=Ne(pt)}Ne=null}else Ne=null;kt!==null&&N2(zt,Lt,kt,Ne,!1),oe!==null&&Un!==null&&N2(zt,Un,oe,Ne,!0)}}t:{if(Lt=Nt?Eo(Nt):window,kt=Lt.nodeName&&Lt.nodeName.toLowerCase(),kt==="select"||kt==="input"&&Lt.type==="file")var mn=Ja;else if(dc(Lt))if(Cs)mn=Zr;else{mn=ci;var pe=gl}else kt=Lt.nodeName,!kt||kt.toLowerCase()!=="input"||Lt.type!=="checkbox"&&Lt.type!=="radio"?Nt&&oc(Nt.elementType)&&(mn=Ja):mn=su;if(mn&&(mn=mn(i,Nt))){zs(zt,mn,u,Bt);break t}pe&&pe(i,Lt,Nt),i==="focusout"&&Nt&&Lt.type==="number"&&Nt.memoizedProps.value!=null&&sc(Lt,"number",Lt.value)}switch(pe=Nt?Eo(Nt):window,i){case"focusin":(dc(pe)||pe.contentEditable==="true")&&(Hs=pe,Ra=Nt,is=null);break;case"focusout":is=Ra=Hs=null;break;case"mousedown":Js=!0;break;case"contextmenu":case"mouseup":case"dragend":Js=!1,pn(zt,u,Bt);break;case"selectionchange":if(Po)break;case"keydown":case"keyup":pn(zt,u,Bt)}var Ye;if(Yr)t:{switch(i){case"compositionstart":var sn="onCompositionStart";break t;case"compositionend":sn="onCompositionEnd";break t;case"compositionupdate":sn="onCompositionUpdate";break t}sn=void 0}else Xr?Za(i,u)&&(sn="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(sn="onCompositionStart");sn&&(Sa&&u.locale!=="ko"&&(Xr||sn!=="onCompositionStart"?sn==="onCompositionEnd"&&Xr&&(Ye=eu()):(Us=Bt,ko="value"in Us?Us.value:Us.textContent,Xr=!0)),pe=ad(Nt,sn),0<pe.length&&(sn=new yt(sn,i,null,u,Bt),zt.push({event:sn,listeners:pe}),Ye?sn.data=Ye:(Ye=fl(u),Ye!==null&&(sn.data=Ye)))),(Ye=Do?gs(i,u):Ca(i,u))&&(sn=ad(Nt,"onBeforeInput"),0<sn.length&&(pe=new yt("onBeforeInput","beforeinput",null,u,Bt),zt.push({event:pe,listeners:sn}),pe.data=Ye)),Dx(zt,i,Nt,u,Bt)}E2(zt,o)})}function Fh(i,o,u){return{instance:i,listener:o,currentTarget:u}}function ad(i,o){for(var u=o+"Capture",d=[];i!==null;){var y=i,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=js(i,u),y!=null&&d.unshift(Fh(i,y,x)),y=js(i,o),y!=null&&d.push(Fh(i,y,x))),i.tag===3)return d;i=i.return}return[]}function Ix(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function N2(i,o,u,d,y){for(var x=o._reactName,L=[];u!==null&&u!==d;){var q=u,ut=q.alternate,Nt=q.stateNode;if(q=q.tag,ut!==null&&ut===d)break;q!==5&&q!==26&&q!==27||Nt===null||(ut=Nt,y?(Nt=js(u,x),Nt!=null&&L.unshift(Fh(u,Nt,ut))):y||(Nt=js(u,x),Nt!=null&&L.push(Fh(u,Nt,ut)))),u=u.return}L.length!==0&&i.push({event:o,listeners:L})}var Fx=/\r\n?/g,jx=/\u0000|\uFFFD/g;function L2(i){return(typeof i=="string"?i:""+i).replace(Fx,`
`).replace(jx,"")}function k2(i,o){return o=L2(o),L2(i)===o}function jn(i,o,u,d,y,x){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Cr(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Cr(i,""+d);break;case"className":pa(i,"class",d);break;case"tabIndex":pa(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":pa(i,u,d);break;case"style":Zc(i,d,x);break;case"data":if(o!=="object"){pa(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=Ss(""+d),i.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(o!=="input"&&jn(i,o,"name",y.name,y,null),jn(i,o,"formEncType",y.formEncType,y,null),jn(i,o,"formMethod",y.formMethod,y,null),jn(i,o,"formTarget",y.formTarget,y,null)):(jn(i,o,"encType",y.encType,y,null),jn(i,o,"method",y.method,y,null),jn(i,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=Ss(""+d),i.setAttribute(u,d);break;case"onClick":d!=null&&(i.onclick=Er);break;case"onScroll":d!=null&&en("scroll",i);break;case"onScrollEnd":d!=null&&en("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}u=Ss(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""+d):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":d===!0?i.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,d):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(u,d):i.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(u):i.setAttribute(u,d);break;case"popover":en("beforetoggle",i),en("toggle",i),Fs(i,"popover",d);break;case"xlinkActuate":Sr(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Sr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Sr(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Sr(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Sr(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Sr(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Sr(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Sr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Sr(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Fs(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=lc.get(u)||u,Fs(i,u,d))}}function Cg(i,o,u,d,y,x){switch(u){case"style":Zc(i,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof d=="string"?Cr(i,d):(typeof d=="number"||typeof d=="bigint")&&Cr(i,""+d);break;case"onScroll":d!=null&&en("scroll",i);break;case"onScrollEnd":d!=null&&en("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Is.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),x=i[Yn]||null,x=x!=null?x[u]:null,typeof x=="function"&&i.removeEventListener(o,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,d,y);break t}u in i?i[u]=d:d===!0?i.setAttribute(u,""):Fs(i,u,d)}}}function ws(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":en("error",i),en("load",i);var d=!1,y=!1,x;for(x in u)if(u.hasOwnProperty(x)){var L=u[x];if(L!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:jn(i,o,x,L,u,null)}}y&&jn(i,o,"srcSet",u.srcSet,u,null),d&&jn(i,o,"src",u.src,u,null);return;case"input":en("invalid",i);var q=x=L=y=null,ut=null,Nt=null;for(d in u)if(u.hasOwnProperty(d)){var Bt=u[d];if(Bt!=null)switch(d){case"name":y=Bt;break;case"type":L=Bt;break;case"checked":ut=Bt;break;case"defaultChecked":Nt=Bt;break;case"value":x=Bt;break;case"defaultValue":q=Bt;break;case"children":case"dangerouslySetInnerHTML":if(Bt!=null)throw Error(n(137,o));break;default:jn(i,o,d,Bt,u,null)}}Wc(i,x,q,ut,Nt,L,y,!1);return;case"select":en("invalid",i),d=L=x=null;for(y in u)if(u.hasOwnProperty(y)&&(q=u[y],q!=null))switch(y){case"value":x=q;break;case"defaultValue":L=q;break;case"multiple":d=q;default:jn(i,o,y,q,u,null)}o=x,u=L,i.multiple=!!d,o!=null?ps(i,!!d,o,!1):u!=null&&ps(i,!!d,u,!0);return;case"textarea":en("invalid",i),x=y=d=null;for(L in u)if(u.hasOwnProperty(L)&&(q=u[L],q!=null))switch(L){case"value":d=q;break;case"defaultValue":y=q;break;case"children":x=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:jn(i,o,L,q,u,null)}ac(i,d,y,x);return;case"option":for(ut in u)u.hasOwnProperty(ut)&&(d=u[ut],d!=null)&&(ut==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":jn(i,o,ut,d,u,null));return;case"dialog":en("beforetoggle",i),en("toggle",i),en("cancel",i),en("close",i);break;case"iframe":case"object":en("load",i);break;case"video":case"audio":for(d=0;d<Ih.length;d++)en(Ih[d],i);break;case"image":en("error",i),en("load",i);break;case"details":en("toggle",i);break;case"embed":case"source":case"link":en("error",i),en("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Nt in u)if(u.hasOwnProperty(Nt)&&(d=u[Nt],d!=null))switch(Nt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:jn(i,o,Nt,d,u,null)}return;default:if(oc(o)){for(Bt in u)u.hasOwnProperty(Bt)&&(d=u[Bt],d!==void 0&&Cg(i,o,Bt,d,u,void 0));return}}for(q in u)u.hasOwnProperty(q)&&(d=u[q],d!=null&&jn(i,o,q,d,u,null))}function Ux(i,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,L=null,q=null,ut=null,Nt=null,Bt=null;for(kt in u){var zt=u[kt];if(u.hasOwnProperty(kt)&&zt!=null)switch(kt){case"checked":break;case"value":break;case"defaultValue":ut=zt;default:d.hasOwnProperty(kt)||jn(i,o,kt,null,d,zt)}}for(var Lt in d){var kt=d[Lt];if(zt=u[Lt],d.hasOwnProperty(Lt)&&(kt!=null||zt!=null))switch(Lt){case"type":x=kt;break;case"name":y=kt;break;case"checked":Nt=kt;break;case"defaultChecked":Bt=kt;break;case"value":L=kt;break;case"defaultValue":q=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(n(137,o));break;default:kt!==zt&&jn(i,o,Lt,kt,d,zt)}}ol(i,L,q,ut,Nt,Bt,x,y);return;case"select":kt=L=q=Lt=null;for(x in u)if(ut=u[x],u.hasOwnProperty(x)&&ut!=null)switch(x){case"value":break;case"multiple":kt=ut;default:d.hasOwnProperty(x)||jn(i,o,x,null,d,ut)}for(y in d)if(x=d[y],ut=u[y],d.hasOwnProperty(y)&&(x!=null||ut!=null))switch(y){case"value":Lt=x;break;case"defaultValue":q=x;break;case"multiple":L=x;default:x!==ut&&jn(i,o,y,x,d,ut)}o=q,u=L,d=kt,Lt!=null?ps(i,!!u,Lt,!1):!!d!=!!u&&(o!=null?ps(i,!!u,o,!0):ps(i,!!u,u?[]:"",!1));return;case"textarea":kt=Lt=null;for(q in u)if(y=u[q],u.hasOwnProperty(q)&&y!=null&&!d.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:jn(i,o,q,null,d,y)}for(L in d)if(y=d[L],x=u[L],d.hasOwnProperty(L)&&(y!=null||x!=null))switch(L){case"value":Lt=y;break;case"defaultValue":kt=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==x&&jn(i,o,L,y,d,x)}rc(i,Lt,kt);return;case"option":for(var oe in u)Lt=u[oe],u.hasOwnProperty(oe)&&Lt!=null&&!d.hasOwnProperty(oe)&&(oe==="selected"?i.selected=!1:jn(i,o,oe,null,d,Lt));for(ut in d)Lt=d[ut],kt=u[ut],d.hasOwnProperty(ut)&&Lt!==kt&&(Lt!=null||kt!=null)&&(ut==="selected"?i.selected=Lt&&typeof Lt!="function"&&typeof Lt!="symbol":jn(i,o,ut,Lt,d,kt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in u)Lt=u[Ne],u.hasOwnProperty(Ne)&&Lt!=null&&!d.hasOwnProperty(Ne)&&jn(i,o,Ne,null,d,Lt);for(Nt in d)if(Lt=d[Nt],kt=u[Nt],d.hasOwnProperty(Nt)&&Lt!==kt&&(Lt!=null||kt!=null))switch(Nt){case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(n(137,o));break;default:jn(i,o,Nt,Lt,d,kt)}return;default:if(oc(o)){for(var Un in u)Lt=u[Un],u.hasOwnProperty(Un)&&Lt!==void 0&&!d.hasOwnProperty(Un)&&Cg(i,o,Un,void 0,d,Lt);for(Bt in d)Lt=d[Bt],kt=u[Bt],!d.hasOwnProperty(Bt)||Lt===kt||Lt===void 0&&kt===void 0||Cg(i,o,Bt,Lt,d,kt);return}}for(var vt in u)Lt=u[vt],u.hasOwnProperty(vt)&&Lt!=null&&!d.hasOwnProperty(vt)&&jn(i,o,vt,null,d,Lt);for(zt in d)Lt=d[zt],kt=u[zt],!d.hasOwnProperty(zt)||Lt===kt||Lt==null&&kt==null||jn(i,o,zt,Lt,d,kt)}function R2(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zx(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var y=u[d],x=y.transferSize,L=y.initiatorType,q=y.duration;if(x&&q&&R2(L)){for(L=0,q=y.responseEnd,d+=1;d<u.length;d++){var ut=u[d],Nt=ut.startTime;if(Nt>q)break;var Bt=ut.transferSize,zt=ut.initiatorType;Bt&&R2(zt)&&(ut=ut.responseEnd,L+=Bt*(ut<q?1:(q-Nt)/(ut-Nt)))}if(--d,o+=8*(x+L)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Eg=null,Tg=null;function od(i){return i.nodeType===9?i:i.ownerDocument}function M2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D2(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Ng(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Lg=null;function Hx(){var i=window.event;return i&&i.type==="popstate"?i===Lg?!1:(Lg=i,!0):(Lg=null,!1)}var P2=typeof setTimeout=="function"?setTimeout:void 0,qx=typeof clearTimeout=="function"?clearTimeout:void 0,O2=typeof Promise=="function"?Promise:void 0,Gx=typeof queueMicrotask=="function"?queueMicrotask:typeof O2<"u"?function(i){return O2.resolve(null).then(i).catch(Vx)}:P2;function Vx(i){setTimeout(function(){throw i})}function Ol(i){return i==="head"}function B2(i,o){var u=o,d=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(d===0){i.removeChild(y),Iu(o);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")jh(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,jh(u);for(var x=u.firstChild;x;){var L=x.nextSibling,q=x.nodeName;x[wr]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=L}}else u==="body"&&jh(i.ownerDocument.body);u=y}while(u);Iu(o)}function I2(i,o){var u=i;i=0;do{var d=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=d}while(u)}function kg(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":kg(u),Ya(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function $x(i,o,u,d){for(;i.nodeType===1;){var y=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[wr])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=sa(i.nextSibling),i===null)break}return null}function Yx(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=sa(i.nextSibling),i===null))return null;return i}function F2(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=sa(i.nextSibling),i===null))return null;return i}function Rg(i){return i.data==="$?"||i.data==="$~"}function Mg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Xx(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var d=function(){o(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function sa(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Dg=null;function j2(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return sa(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function U2(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function z2(i,o,u){switch(o=od(u),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function jh(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ya(i)}var ra=new Map,H2=new Set;function ld(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Jo=et.d;et.d={f:Wx,r:Kx,D:Zx,C:Jx,L:Qx,m:tA,X:nA,S:eA,M:iA};function Wx(){var i=Jo.f(),o=Qf();return i||o}function Kx(i){var o=Ar(i);o!==null&&o.tag===5&&o.type==="form"?r1(o):Jo.r(i)}var Pu=typeof document>"u"?null:document;function q2(i,o,u){var d=Pu;if(d&&typeof o=="string"&&o){var y=bi(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),H2.has(y)||(H2.add(y),i={rel:i,crossOrigin:u,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),ws(o,"link",i),oi(o),d.head.appendChild(o)))}}function Zx(i){Jo.D(i),q2("dns-prefetch",i,null)}function Jx(i,o){Jo.C(i,o),q2("preconnect",i,o)}function Qx(i,o,u){Jo.L(i,o,u);var d=Pu;if(d&&i&&o){var y='link[rel="preload"][as="'+bi(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+bi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+bi(u.imageSizes)+'"]')):y+='[href="'+bi(i)+'"]';var x=y;switch(o){case"style":x=Ou(i);break;case"script":x=Bu(i)}ra.has(x)||(i=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),ra.set(x,i),d.querySelector(y)!==null||o==="style"&&d.querySelector(Uh(x))||o==="script"&&d.querySelector(zh(x))||(o=d.createElement("link"),ws(o,"link",i),oi(o),d.head.appendChild(o)))}}function tA(i,o){Jo.m(i,o);var u=Pu;if(u&&i){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+bi(d)+'"][href="'+bi(i)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Bu(i)}if(!ra.has(x)&&(i=g({rel:"modulepreload",href:i},o),ra.set(x,i),u.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(zh(x)))return}d=u.createElement("link"),ws(d,"link",i),oi(d),u.head.appendChild(d)}}}function eA(i,o,u){Jo.S(i,o,u);var d=Pu;if(d&&i){var y=qr(d).hoistableStyles,x=Ou(i);o=o||"default";var L=y.get(x);if(!L){var q={loading:0,preload:null};if(L=d.querySelector(Uh(x)))q.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},u),(u=ra.get(x))&&Pg(i,u);var ut=L=d.createElement("link");oi(ut),ws(ut,"link",i),ut._p=new Promise(function(Nt,Bt){ut.onload=Nt,ut.onerror=Bt}),ut.addEventListener("load",function(){q.loading|=1}),ut.addEventListener("error",function(){q.loading|=2}),q.loading|=4,cd(L,o,d)}L={type:"stylesheet",instance:L,count:1,state:q},y.set(x,L)}}}function nA(i,o){Jo.X(i,o);var u=Pu;if(u&&i){var d=qr(u).hoistableScripts,y=Bu(i),x=d.get(y);x||(x=u.querySelector(zh(y)),x||(i=g({src:i,async:!0},o),(o=ra.get(y))&&Og(i,o),x=u.createElement("script"),oi(x),ws(x,"link",i),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function iA(i,o){Jo.M(i,o);var u=Pu;if(u&&i){var d=qr(u).hoistableScripts,y=Bu(i),x=d.get(y);x||(x=u.querySelector(zh(y)),x||(i=g({src:i,async:!0,type:"module"},o),(o=ra.get(y))&&Og(i,o),x=u.createElement("script"),oi(x),ws(x,"link",i),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function G2(i,o,u,d){var y=(y=ct.current)?ld(y):null;if(!y)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Ou(u.href),u=qr(y).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Ou(u.href);var x=qr(y).hoistableStyles,L=x.get(i);if(L||(y=y.ownerDocument||y,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,L),(x=y.querySelector(Uh(i)))&&!x._p&&(L.instance=x,L.state.loading=5),ra.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ra.set(i,u),x||sA(y,i,u,L.state))),o&&d===null)throw Error(n(528,""));return L}if(o&&d!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Bu(u),u=qr(y).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Ou(i){return'href="'+bi(i)+'"'}function Uh(i){return'link[rel="stylesheet"]['+i+"]"}function V2(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function sA(i,o,u,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),ws(o,"link",u),oi(o),i.head.appendChild(o))}function Bu(i){return'[src="'+bi(i)+'"]'}function zh(i){return"script[async]"+i}function $2(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+bi(u.href)+'"]');if(d)return o.instance=d,oi(d),d;var y=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),oi(d),ws(d,"style",y),cd(d,u.precedence,i),o.instance=d;case"stylesheet":y=Ou(u.href);var x=i.querySelector(Uh(y));if(x)return o.state.loading|=4,o.instance=x,oi(x),x;d=V2(u),(y=ra.get(y))&&Pg(d,y),x=(i.ownerDocument||i).createElement("link"),oi(x);var L=x;return L._p=new Promise(function(q,ut){L.onload=q,L.onerror=ut}),ws(x,"link",d),o.state.loading|=4,cd(x,u.precedence,i),o.instance=x;case"script":return x=Bu(u.src),(y=i.querySelector(zh(x)))?(o.instance=y,oi(y),y):(d=u,(y=ra.get(x))&&(d=g({},u),Og(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),oi(y),ws(y,"link",d),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,cd(d,u.precedence,i));return o.instance}function cd(i,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,L=0;L<d.length;L++){var q=d[L];if(q.dataset.precedence===o)x=q;else if(x!==y)break}x?x.parentNode.insertBefore(i,x.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function Pg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Og(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var ud=null;function Y2(i,o,u){if(ud===null){var d=new Map,y=ud=new Map;y.set(u,d)}else y=ud,d=y.get(u),d||(d=new Map,y.set(u,d));if(d.has(i))return d;for(d.set(i,null),u=u.getElementsByTagName(i),y=0;y<u.length;y++){var x=u[y];if(!(x[wr]||x[Ln]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var L=x.getAttribute(o)||"";L=i+L;var q=d.get(L);q?q.push(x):d.set(L,[x])}}return d}function X2(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function rA(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function W2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function aA(i,o,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Ou(d.href),x=o.querySelector(Uh(y));if(x){o=x._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=hd.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=x,oi(x);return}x=o.ownerDocument||o,d=V2(d),(y=ra.get(y))&&Pg(d,y),x=x.createElement("link"),oi(x);var L=x;L._p=new Promise(function(q,ut){L.onload=q,L.onerror=ut}),ws(x,"link",d),u.instance=x}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=hd.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var Bg=0;function oA(i,o){return i.stylesheets&&i.count===0&&dd(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var d=setTimeout(function(){if(i.stylesheets&&dd(i,i.stylesheets),i.unsuspend){var x=i.unsuspend;i.unsuspend=null,x()}},6e4+o);0<i.imgBytes&&Bg===0&&(Bg=62500*zx());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&dd(i,i.stylesheets),i.unsuspend)){var x=i.unsuspend;i.unsuspend=null,x()}},(i.imgBytes>Bg?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function hd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var fd=null;function dd(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,fd=new Map,o.forEach(lA,i),fd=null,hd.call(i))}function lA(i,o){if(!(o.state.loading&4)){var u=fd.get(i);if(u)var d=u.get(null);else{u=new Map,fd.set(i,u);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var L=y[x];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(u.set(L.dataset.precedence,L),d=L)}d&&u.set(null,d)}y=o.instance,L=y.getAttribute("data-precedence"),x=u.get(L)||d,x===d&&u.set(null,y),u.set(L,y),this.count++,d=hd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var Hh={$$typeof:M,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function cA(i,o,u,d,y,x,L,q,ut){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.hiddenUpdates=Xs(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ut,this.incompleteTransitions=new Map}function K2(i,o,u,d,y,x,L,q,ut,Nt,Bt,zt){return i=new cA(i,o,u,L,ut,Nt,Bt,zt,q),o=1,x===!0&&(o|=24),x=rs(3,null,null,o),i.current=x,x.stateNode=i,o=_l(),o.refCount++,i.pooledCache=o,o.refCount++,x.memoizedState={element:d,isDehydrated:u,cache:o},Zt(x),i}function Z2(i){return i?(i=Yi,i):Yi}function J2(i,o,u,d,y,x){y=Z2(y),d.context===null?d.context=y:d.pendingContext=y,d=Ee(o),d.payload={element:u},x=x===void 0?null:x,x!==null&&(d.callback=x),u=Ve(i,d,o),u!==null&&(fr(u,i,o),yn(u,i,o))}function Q2(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Ig(i,o){Q2(i,o),(i=i.alternate)&&Q2(i,o)}function tb(i){if(i.tag===13||i.tag===31){var o=Ma(i,67108864);o!==null&&fr(o,i,67108864),Ig(i,67108864)}}function eb(i){if(i.tag===13||i.tag===31){var o=Or();o=$n(o);var u=Ma(i,o);u!==null&&fr(u,i,o),Ig(i,o)}}var pd=!0;function uA(i,o,u,d){var y=V.T;V.T=null;var x=et.p;try{et.p=2,Fg(i,o,u,d)}finally{et.p=x,V.T=y}}function hA(i,o,u,d){var y=V.T;V.T=null;var x=et.p;try{et.p=8,Fg(i,o,u,d)}finally{et.p=x,V.T=y}}function Fg(i,o,u,d){if(pd){var y=jg(d);if(y===null)Sg(i,o,d,gd,u),ib(i,d);else if(dA(y,i,o,u,d))d.stopPropagation();else if(ib(i,d),o&4&&-1<fA.indexOf(i)){for(;y!==null;){var x=Ar(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var L=ge(x.pendingLanes);if(L!==0){var q=x;for(q.pendingLanes|=2,q.entangledLanes|=2;L;){var ut=1<<31-Ze(L);q.entanglements[1]|=ut,L&=~ut}ho(x),(wn&6)===0&&(Zf=Se()+500,Bh(0))}}break;case 31:case 13:q=Ma(x,2),q!==null&&fr(q,x,2),Qf(),Ig(x,2)}if(x=jg(d),x===null&&Sg(i,o,d,gd,u),x===y)break;y=x}y!==null&&d.stopPropagation()}else Sg(i,o,d,null,u)}}function jg(i){return i=No(i),Ug(i)}var gd=null;function Ug(i){if(gd=null,i=xr(i),i!==null){var o=a(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===31){if(i=c(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return gd=i,null}function nb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case Pe:return 2;case We:return 8;case je:case ue:return 32;case ke:return 268435456;default:return 32}default:return 32}}var zg=!1,Bl=null,Il=null,Fl=null,qh=new Map,Gh=new Map,jl=[],fA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ib(i,o){switch(i){case"focusin":case"focusout":Bl=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":Fl=null;break;case"pointerover":case"pointerout":qh.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(o.pointerId)}}function Vh(i,o,u,d,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},o!==null&&(o=Ar(o),o!==null&&tb(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function dA(i,o,u,d,y){switch(o){case"focusin":return Bl=Vh(Bl,i,o,u,d,y),!0;case"dragenter":return Il=Vh(Il,i,o,u,d,y),!0;case"mouseover":return Fl=Vh(Fl,i,o,u,d,y),!0;case"pointerover":var x=y.pointerId;return qh.set(x,Vh(qh.get(x)||null,i,o,u,d,y)),!0;case"gotpointercapture":return x=y.pointerId,Gh.set(x,Vh(Gh.get(x)||null,i,o,u,d,y)),!0}return!1}function sb(i){var o=xr(i.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,$a(i.priority,function(){eb(u)});return}}else if(o===31){if(o=c(u),o!==null){i.blockedOn=o,$a(i.priority,function(){eb(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function md(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=jg(i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);ga=d,u.target.dispatchEvent(d),ga=null}else return o=Ar(u),o!==null&&tb(o),i.blockedOn=u,!1;o.shift()}return!0}function rb(i,o,u){md(i)&&u.delete(o)}function pA(){zg=!1,Bl!==null&&md(Bl)&&(Bl=null),Il!==null&&md(Il)&&(Il=null),Fl!==null&&md(Fl)&&(Fl=null),qh.forEach(rb),Gh.forEach(rb)}function bd(i,o){i.blockedOn===o&&(i.blockedOn=null,zg||(zg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pA)))}var yd=null;function ab(i){yd!==i&&(yd=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yd===i&&(yd=null);for(var o=0;o<i.length;o+=3){var u=i[o],d=i[o+1],y=i[o+2];if(typeof d!="function"){if(Ug(d||u)===null)continue;break}var x=Ar(u);x!==null&&(i.splice(o,3),o-=3,jp(x,{pending:!0,data:y,method:u.method,action:d},d,y))}}))}function Iu(i){function o(ut){return bd(ut,i)}Bl!==null&&bd(Bl,i),Il!==null&&bd(Il,i),Fl!==null&&bd(Fl,i),qh.forEach(o),Gh.forEach(o);for(var u=0;u<jl.length;u++){var d=jl[u];d.blockedOn===i&&(d.blockedOn=null)}for(;0<jl.length&&(u=jl[0],u.blockedOn===null);)sb(u),u.blockedOn===null&&jl.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var y=u[d],x=u[d+1],L=y[Yn]||null;if(typeof x=="function")L||ab(u);else if(L){var q=null;if(x&&x.hasAttribute("formAction")){if(y=x,L=x[Yn]||null)q=L.formAction;else if(Ug(y)!==null)continue}else q=L.action;typeof q=="function"?u[d+1]=q:(u.splice(d,3),d-=3),ab(u)}}}function ob(){function i(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(L){return y=L})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Hg(i){this._internalRoot=i}vd.prototype.render=Hg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,d=Or();J2(u,d,i,o,null,null)},vd.prototype.unmount=Hg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;J2(i.current,2,null,i,null,null),Qf(),o[ns]=null}};function vd(i){this._internalRoot=i}vd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Oi();i={blockedOn:null,target:i,priority:o};for(var u=0;u<jl.length&&o!==0&&o<jl[u].priority;u++);jl.splice(u,0,i),u===0&&sb(i)}};var lb=t.version;if(lb!=="19.2.4")throw Error(n(527,lb,"19.2.4"));et.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(o),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var gA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Re=wd.inject(gA),ve=wd}catch{}}return Yh.createRoot=function(i,o){if(!s(i))throw Error(n(299));var u=!1,d="",y=g1,x=m1,L=b1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(L=o.onRecoverableError)),o=K2(i,1,!1,null,null,u,d,null,y,x,L,ob),i[ns]=o.current,_g(i),new Hg(o)},Yh.hydrateRoot=function(i,o,u){if(!s(i))throw Error(n(299));var d=!1,y="",x=g1,L=m1,q=b1,ut=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(L=u.onCaughtError),u.onRecoverableError!==void 0&&(q=u.onRecoverableError),u.formState!==void 0&&(ut=u.formState)),o=K2(i,1,!0,o,u??null,d,y,ut,x,L,q,ob),o.context=Z2(null),u=o.current,d=Or(),d=$n(d),y=Ee(d),y.callback=null,Ve(u,y,d),u=d,o.current.lanes=u,be(o,u),ho(o),i[ns]=o.current,_g(i),new vd(o)},Yh.version="19.2.4",Yh}var wb;function EA(){if(wb)return $g.exports;wb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),$g.exports=CA(),$g.exports}var TA=EA();const NA=m0(TA);var xb="popstate";function LA(r={}){function t(n,s){let{pathname:a,search:l,hash:c}=n.location;return Mm("",{pathname:a,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(n,s){return typeof s=="string"?s:hf(s)}return RA(t,e,null,r)}function pi(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Ha(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kA(){return Math.random().toString(36).substring(2,10)}function Ab(r,t){return{usr:r.state,key:r.key,idx:t}}function Mm(r,t,e=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?lh(t):t,state:e,key:t&&t.key||n||kA()}}function hf({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function lh(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substring(n),r=r.substring(0,n)),r&&(t.pathname=r)}return t}function RA(r,t,e,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,c="POP",h=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function g(){c="POP";let T=p(),S=T==null?null:T-f;f=T,h&&h({action:c,location:A.location,delta:S})}function v(T,S){c="PUSH";let R=Mm(A.location,T,S);f=p()+1;let M=Ab(R,f),D=A.createHref(R);try{l.pushState(M,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(D)}a&&h&&h({action:c,location:A.location,delta:1})}function b(T,S){c="REPLACE";let R=Mm(A.location,T,S);f=p();let M=Ab(R,f),D=A.createHref(R);l.replaceState(M,"",D),a&&h&&h({action:c,location:A.location,delta:0})}function C(T){return MA(T)}let A={get action(){return c},get location(){return r(s,l)},listen(T){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(xb,g),h=T,()=>{s.removeEventListener(xb,g),h=null}},createHref(T){return t(s,T)},createURL:C,encodeLocation(T){let S=C(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:b,go(T){return l.go(T)}};return A}function MA(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),pi(e,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:hf(r);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function Lv(r,t,e="/"){return DA(r,t,e,!1)}function DA(r,t,e,n){let s=typeof t=="string"?lh(t):t,a=al(s.pathname||"/",e);if(a==null)return null;let l=kv(r);PA(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=VA(a);c=qA(l[h],f,n)}return c}function kv(r,t=[],e=[],n="",s=!1){let a=(l,c,h=s,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&h)return;pi(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=rl([n,p.relativePath]),v=e.concat(p);l.children&&l.children.length>0&&(pi(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),kv(l.children,t,v,g,h)),!(l.path==null&&!l.index)&&t.push({path:g,score:zA(g,l.index),routesMeta:v})};return r.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let h of Rv(l.path))a(l,c,!0,h)}),t}function Rv(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),a=e.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=Rv(n.join("/")),c=[];return c.push(...l.map(h=>h===""?a:[a,h].join("/"))),s&&c.push(...l),c.map(h=>r.startsWith("/")&&h===""?"/":h)}function PA(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:HA(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var OA=/^:[\w-]+$/,BA=3,IA=2,FA=1,jA=10,UA=-2,_b=r=>r==="*";function zA(r,t){let e=r.split("/"),n=e.length;return e.some(_b)&&(n+=UA),t&&(n+=IA),e.filter(s=>!_b(s)).reduce((s,a)=>s+(OA.test(a)?BA:a===""?FA:jA),n)}function HA(r,t){return r.length===t.length&&r.slice(0,-1).every((n,s)=>n===t[s])?r[r.length-1]-t[t.length-1]:0}function qA(r,t,e=!1){let{routesMeta:n}=r,s={},a="/",l=[];for(let c=0;c<n.length;++c){let h=n[c],f=c===n.length-1,p=a==="/"?t:t.slice(a.length)||"/",g=np({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!g&&f&&e&&!n[n.length-1].route.index&&(g=np({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:rl([a,g.pathname]),pathnameBase:WA(rl([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=rl([a,g.pathnameBase]))}return l}function np(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=GA(r.path,r.caseSensitive,r.end),s=t.match(e);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let C=c[v]||"";l=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const b=c[v];return g&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:r}}function GA(r,t=!1,e=!0){Ha(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(n.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function VA(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ha(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function al(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}var $A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function YA(r,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof r=="string"?lh(r):r,a;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?a=Sb(e.substring(1),"/"):a=Sb(e,t)):a=t,{pathname:a,search:KA(n),hash:ZA(s)}}function Sb(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Kg(r,t,e,n){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XA(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Mv(r){let t=XA(r);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Dv(r,t,e,n=!1){let s;typeof r=="string"?s=lh(r):(s={...r},pi(!s.pathname||!s.pathname.includes("?"),Kg("?","pathname","search",s)),pi(!s.pathname||!s.pathname.includes("#"),Kg("#","pathname","hash",s)),pi(!s.search||!s.search.includes("#"),Kg("#","search","hash",s)));let a=r===""||s.pathname==="",l=a?"/":s.pathname,c;if(l==null)c=e;else{let g=t.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}c=g>=0?t[g]:"/"}let h=YA(s,c),f=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var rl=r=>r.join("/").replace(/\/\/+/g,"/"),WA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),KA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ZA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,JA=class{constructor(r,t,e,n=!1){this.status=r,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function QA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function t_(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ov(r,t){let e=r;if(typeof e!="string"||!$A.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let n=e,s=!1;if(Pv)try{let a=new URL(window.location.href),l=e.startsWith("//")?new URL(a.protocol+e):new URL(e),c=al(l.pathname,t);l.origin===a.origin&&c!=null?e=c+l.search+l.hash:s=!0}catch{Ha(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:s,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Bv=["POST","PUT","PATCH","DELETE"];new Set(Bv);var e_=["GET",...Bv];new Set(e_);var ch=bt.createContext(null);ch.displayName="DataRouter";var pp=bt.createContext(null);pp.displayName="DataRouterState";var n_=bt.createContext(!1),Iv=bt.createContext({isTransitioning:!1});Iv.displayName="ViewTransition";var i_=bt.createContext(new Map);i_.displayName="Fetchers";var s_=bt.createContext(null);s_.displayName="Await";var ha=bt.createContext(null);ha.displayName="Navigation";var wf=bt.createContext(null);wf.displayName="Location";var _o=bt.createContext({outlet:null,matches:[],isDataRoute:!1});_o.displayName="Route";var y0=bt.createContext(null);y0.displayName="RouteError";var Fv="REACT_ROUTER_ERROR",r_="REDIRECT",a_="ROUTE_ERROR_RESPONSE";function o_(r){if(r.startsWith(`${Fv}:${r_}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function l_(r){if(r.startsWith(`${Fv}:${a_}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new JA(t.status,t.statusText,t.data)}catch{}}function c_(r,{relative:t}={}){pi(xf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=bt.useContext(ha),{hash:s,pathname:a,search:l}=Af(r,{relative:t}),c=a;return e!=="/"&&(c=a==="/"?e:rl([e,a])),n.createHref({pathname:c,search:l,hash:s})}function xf(){return bt.useContext(wf)!=null}function Zl(){return pi(xf(),"useLocation() may be used only in the context of a <Router> component."),bt.useContext(wf).location}var jv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uv(r){bt.useContext(ha).static||bt.useLayoutEffect(r)}function gp(){let{isDataRoute:r}=bt.useContext(_o);return r?__():u_()}function u_(){pi(xf(),"useNavigate() may be used only in the context of a <Router> component.");let r=bt.useContext(ch),{basename:t,navigator:e}=bt.useContext(ha),{matches:n}=bt.useContext(_o),{pathname:s}=Zl(),a=JSON.stringify(Mv(n)),l=bt.useRef(!1);return Uv(()=>{l.current=!0}),bt.useCallback((h,f={})=>{if(Ha(l.current,jv),!l.current)return;if(typeof h=="number"){e.go(h);return}let p=Dv(h,JSON.parse(a),s,f.relative==="path");r==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:rl([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,a,s,r])}bt.createContext(null);function h_(){let{matches:r}=bt.useContext(_o),t=r[r.length-1];return t?t.params:{}}function Af(r,{relative:t}={}){let{matches:e}=bt.useContext(_o),{pathname:n}=Zl(),s=JSON.stringify(Mv(e));return bt.useMemo(()=>Dv(r,JSON.parse(s),n,t==="path"),[r,s,n,t])}function f_(r,t){return zv(r,t)}function zv(r,t,e,n,s){pi(xf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=bt.useContext(ha),{matches:l}=bt.useContext(_o),c=l[l.length-1],h=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let R=g&&g.path||"";qv(f,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=Zl(),b;if(t){let R=typeof t=="string"?lh(t):t;pi(p==="/"||R.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),b=R}else b=v;let C=b.pathname||"/",A=C;if(p!=="/"){let R=p.replace(/^\//,"").split("/");A="/"+C.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=Lv(r,{pathname:A});Ha(g||T!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ha(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=b_(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:rl([p,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:rl([p,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),l,e,n,s);return t&&S?bt.createElement(wf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},S):S}function d_(){let r=A_(),t=QA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=bt.createElement(bt.Fragment,null,bt.createElement("p",null," Hey developer "),bt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",bt.createElement("code",{style:a},"ErrorBoundary")," or"," ",bt.createElement("code",{style:a},"errorElement")," prop on your route.")),bt.createElement(bt.Fragment,null,bt.createElement("h2",null,"Unexpected Application Error!"),bt.createElement("h3",{style:{fontStyle:"italic"}},t),e?bt.createElement("pre",{style:s},e):null,l)}var p_=bt.createElement(d_,null),Hv=class extends bt.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const e=l_(r.digest);e&&(r=e)}let t=r!==void 0?bt.createElement(_o.Provider,{value:this.props.routeContext},bt.createElement(y0.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?bt.createElement(g_,{error:r},t):t}};Hv.contextType=n_;var Zg=new WeakMap;function g_({children:r,error:t}){let{basename:e}=bt.useContext(ha);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=o_(t.digest);if(n){let s=Zg.get(t);if(s)throw s;let a=Ov(n.location,e);if(Pv&&!Zg.get(t))if(a.isExternal||n.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:n.replace}));throw Zg.set(t,l),l}return bt.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return r}function m_({routeContext:r,match:t,children:e}){let n=bt.useContext(ch);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),bt.createElement(_o.Provider,{value:r},e)}function b_(r,t=[],e=null,n=null,s=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let a=r,l=e?.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);pi(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,h=-1;if(e)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:v,errors:b}=e,C=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||C){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let f=e&&n?(p,g)=>{n(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:t_(e.matches),errorInfo:g})}:void 0;return a.reduceRight((p,g,v)=>{let b,C=!1,A=null,T=null;e&&(b=l&&g.route.id?l[g.route.id]:void 0,A=g.route.errorElement||p_,c&&(h<0&&v===0?(qv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,T=null):h===v&&(C=!0,T=g.route.hydrateFallbackElement||null)));let S=t.concat(a.slice(0,v+1)),R=()=>{let M;return b?M=A:C?M=T:g.route.Component?M=bt.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=p,bt.createElement(m_,{match:g,routeContext:{outlet:p,matches:S,isDataRoute:e!=null},children:M})};return e&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?bt.createElement(Hv,{location:e.location,revalidation:e.revalidation,component:A,error:b,children:R(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:f}):R()},null)}function v0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y_(r){let t=bt.useContext(ch);return pi(t,v0(r)),t}function v_(r){let t=bt.useContext(pp);return pi(t,v0(r)),t}function w_(r){let t=bt.useContext(_o);return pi(t,v0(r)),t}function w0(r){let t=w_(r),e=t.matches[t.matches.length-1];return pi(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function x_(){return w0("useRouteId")}function A_(){let r=bt.useContext(y0),t=v_("useRouteError"),e=w0("useRouteError");return r!==void 0?r:t.errors?.[e]}function __(){let{router:r}=y_("useNavigate"),t=w0("useNavigate"),e=bt.useRef(!1);return Uv(()=>{e.current=!0}),bt.useCallback(async(s,a={})=>{Ha(e.current,jv),e.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:t,...a}))},[r,t])}var Cb={};function qv(r,t,e){!t&&!Cb[r]&&(Cb[r]=!0,Ha(!1,e))}bt.memo(S_);function S_({routes:r,future:t,state:e,onError:n}){return zv(r,void 0,e,n,t)}function Dm(r){pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function C_({basename:r="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){pi(!xf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),h=bt.useMemo(()=>({basename:c,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[c,s,a,l]);typeof e=="string"&&(e=lh(e));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:b="default"}=e,C=bt.useMemo(()=>{let A=al(f,c);return A==null?null:{location:{pathname:A,search:p,hash:g,state:v,key:b},navigationType:n}},[c,f,p,g,v,b,n]);return Ha(C!=null,`<Router basename="${c}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:bt.createElement(ha.Provider,{value:h},bt.createElement(wf.Provider,{children:t,value:C}))}function E_({children:r,location:t}){return f_(Pm(r),t)}function Pm(r,t=[]){let e=[];return bt.Children.forEach(r,(n,s)=>{if(!bt.isValidElement(n))return;let a=[...t,s];if(n.type===bt.Fragment){e.push.apply(e,Pm(n.props.children,a));return}pi(n.type===Dm,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Pm(n.props.children,a)),e.push(l)}),e}var jd="get",Ud="application/x-www-form-urlencoded";function mp(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function T_(r){return mp(r)&&r.tagName.toLowerCase()==="button"}function N_(r){return mp(r)&&r.tagName.toLowerCase()==="form"}function L_(r){return mp(r)&&r.tagName.toLowerCase()==="input"}function k_(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function R_(r,t){return r.button===0&&(!t||t==="_self")&&!k_(r)}function Om(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,e)=>{let n=r[e];return t.concat(Array.isArray(n)?n.map(s=>[e,s]):[[e,n]])},[]))}function M_(r,t){let e=Om(r);return t&&t.forEach((n,s)=>{e.has(s)||t.getAll(s).forEach(a=>{e.append(s,a)})}),e}var xd=null;function D_(){if(xd===null)try{new FormData(document.createElement("form"),0),xd=!1}catch{xd=!0}return xd}var P_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jg(r){return r!=null&&!P_.has(r)?(Ha(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ud}"`),null):r}function O_(r,t){let e,n,s,a,l;if(N_(r)){let c=r.getAttribute("action");n=c?al(c,t):null,e=r.getAttribute("method")||jd,s=Jg(r.getAttribute("enctype"))||Ud,a=new FormData(r)}else if(T_(r)||L_(r)&&(r.type==="submit"||r.type==="image")){let c=r.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||c.getAttribute("action");if(n=h?al(h,t):null,e=r.getAttribute("formmethod")||c.getAttribute("method")||jd,s=Jg(r.getAttribute("formenctype"))||Jg(c.getAttribute("enctype"))||Ud,a=new FormData(c,r),!D_()){let{name:f,type:p,value:g}=r;if(p==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,g)}}else{if(mp(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=jd,n=null,s=Ud,l=r}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function x0(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function B_(r,t,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${n}`:s.pathname=`${s.pathname}.${n}`:s.pathname==="/"?s.pathname=`_root.${n}`:t&&al(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function I_(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function F_(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function j_(r,t,e){let n=await Promise.all(r.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await I_(a,e);return l.links?l.links():[]}return[]}));return q_(n.flat(1).filter(F_).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Eb(r,t,e,n,s,a){let l=(h,f)=>e[f]?h.route.id!==e[f].route.id:!0,c=(h,f)=>e[f].pathname!==h.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==h.params["*"];return a==="assets"?t.filter((h,f)=>l(h,f)||c(h,f)):a==="data"?t.filter((h,f)=>{let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,f)||c(h,f))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function U_(r,t,{includeHydrateFallback:e}={}){return z_(r.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function z_(r){return[...new Set(r)]}function H_(r){let t={},e=Object.keys(r).sort();for(let n of e)t[n]=r[n];return t}function q_(r,t){let e=new Set;return new Set(t),r.reduce((n,s)=>{let a=JSON.stringify(H_(s));return e.has(a)||(e.add(a),n.push({key:a,link:s})),n},[])}function Gv(){let r=bt.useContext(ch);return x0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function G_(){let r=bt.useContext(pp);return x0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var A0=bt.createContext(void 0);A0.displayName="FrameworkContext";function Vv(){let r=bt.useContext(A0);return x0(r,"You must render this element inside a <HydratedRouter> element"),r}function V_(r,t){let e=bt.useContext(A0),[n,s]=bt.useState(!1),[a,l]=bt.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=t,v=bt.useRef(null);bt.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let A=S=>{S.forEach(R=>{l(R.isIntersecting)})},T=new IntersectionObserver(A,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[r]),bt.useEffect(()=>{if(n){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[n]);let b=()=>{s(!0)},C=()=>{s(!1),l(!1)};return e?r!=="intent"?[a,v,{}]:[a,v,{onFocus:Xh(c,b),onBlur:Xh(h,C),onMouseEnter:Xh(f,b),onMouseLeave:Xh(p,C),onTouchStart:Xh(g,b)}]:[!1,v,{}]}function Xh(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function $_({page:r,...t}){let{router:e}=Gv(),n=bt.useMemo(()=>Lv(e.routes,r,e.basename),[e.routes,r,e.basename]);return n?bt.createElement(X_,{page:r,matches:n,...t}):null}function Y_(r){let{manifest:t,routeModules:e}=Vv(),[n,s]=bt.useState([]);return bt.useEffect(()=>{let a=!1;return j_(r,t,e).then(l=>{a||s(l)}),()=>{a=!0}},[r,t,e]),n}function X_({page:r,matches:t,...e}){let n=Zl(),{future:s,manifest:a,routeModules:l}=Vv(),{basename:c}=Gv(),{loaderData:h,matches:f}=G_(),p=bt.useMemo(()=>Eb(r,t,f,a,n,"data"),[r,t,f,a,n]),g=bt.useMemo(()=>Eb(r,t,f,a,n,"assets"),[r,t,f,a,n]),v=bt.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let A=new Set,T=!1;if(t.forEach(R=>{let M=a.routes[R.route.id];!M||!M.hasLoader||(!p.some(D=>D.route.id===R.route.id)&&R.route.id in h&&l[R.route.id]?.shouldRevalidate||M.hasClientLoader?T=!0:A.add(R.route.id))}),A.size===0)return[];let S=B_(r,c,s.unstable_trailingSlashAwareDataRequests,"data");return T&&A.size>0&&S.searchParams.set("_routes",t.filter(R=>A.has(R.route.id)).map(R=>R.route.id).join(",")),[S.pathname+S.search]},[c,s.unstable_trailingSlashAwareDataRequests,h,n,a,p,t,r,l]),b=bt.useMemo(()=>U_(g,a),[g,a]),C=Y_(g);return bt.createElement(bt.Fragment,null,v.map(A=>bt.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...e})),b.map(A=>bt.createElement("link",{key:A,rel:"modulepreload",href:A,...e})),C.map(({key:A,link:T})=>bt.createElement("link",{key:A,nonce:e.nonce,...T,crossOrigin:T.crossOrigin??e.crossOrigin})))}function W_(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var K_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{K_&&(window.__reactRouterVersion="7.13.0")}catch{}function Z_({basename:r,children:t,unstable_useTransitions:e,window:n}){let s=bt.useRef();s.current==null&&(s.current=LA({window:n,v5Compat:!0}));let a=s.current,[l,c]=bt.useState({action:a.action,location:a.location}),h=bt.useCallback(f=>{e===!1?c(f):bt.startTransition(()=>c(f))},[e]);return bt.useLayoutEffect(()=>a.listen(h),[a,h]),bt.createElement(C_,{basename:r,children:t,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:e})}var $v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yv=bt.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:c,target:h,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...b},C){let{basename:A,unstable_useTransitions:T}=bt.useContext(ha),S=typeof f=="string"&&$v.test(f),R=Ov(f,A);f=R.to;let M=c_(f,{relative:s}),[D,z,K]=V_(n,b),Z=eS(f,{replace:l,state:c,target:h,preventScrollReset:p,relative:s,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:T});function J(lt){t&&t(lt),lt.defaultPrevented||Z(lt)}let H=bt.createElement("a",{...b,...K,href:R.absoluteURL||M,onClick:R.isExternal||a?t:J,ref:W_(C,z),target:h,"data-discover":!S&&e==="render"?"true":void 0});return D&&!S?bt.createElement(bt.Fragment,null,H,bt.createElement($_,{page:M})):H});Yv.displayName="Link";var J_=bt.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:c,children:h,...f},p){let g=Af(l,{relative:f.relative}),v=Zl(),b=bt.useContext(pp),{navigator:C,basename:A}=bt.useContext(ha),T=b!=null&&oS(g)&&c===!0,S=C.encodeLocation?C.encodeLocation(g).pathname:g.pathname,R=v.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;e||(R=R.toLowerCase(),M=M?M.toLowerCase():null,S=S.toLowerCase()),M&&A&&(M=al(M,A)||M);const D=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let z=R===S||!s&&R.startsWith(S)&&R.charAt(D)==="/",K=M!=null&&(M===S||!s&&M.startsWith(S)&&M.charAt(S.length)==="/"),Z={isActive:z,isPending:K,isTransitioning:T},J=z?t:void 0,H;typeof n=="function"?H=n(Z):H=[n,z?"active":null,K?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let lt=typeof a=="function"?a(Z):a;return bt.createElement(Yv,{...f,"aria-current":J,className:H,ref:p,style:lt,to:l,viewTransition:c},typeof h=="function"?h(Z):h)});J_.displayName="NavLink";var Q_=bt.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:a,method:l=jd,action:c,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...b},C)=>{let{unstable_useTransitions:A}=bt.useContext(ha),T=rS(),S=aS(c,{relative:f}),R=l.toLowerCase()==="get"?"get":"post",M=typeof c=="string"&&$v.test(c),D=z=>{if(h&&h(z),z.defaultPrevented)return;z.preventDefault();let K=z.nativeEvent.submitter,Z=K?.getAttribute("formmethod")||l,J=()=>T(K||z.currentTarget,{fetcherKey:t,method:Z,navigate:e,replace:s,state:a,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v});A&&e!==!1?bt.startTransition(()=>J()):J()};return bt.createElement("form",{ref:C,method:R,action:S,onSubmit:n?h:D,...b,"data-discover":!M&&r==="render"?"true":void 0})});Q_.displayName="Form";function tS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xv(r){let t=bt.useContext(ch);return pi(t,tS(r)),t}function eS(r,{target:t,replace:e,state:n,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:h}={}){let f=gp(),p=Zl(),g=Af(r,{relative:a});return bt.useCallback(v=>{if(R_(v,t)){v.preventDefault();let b=e!==void 0?e:hf(p)===hf(g),C=()=>f(r,{replace:b,state:n,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c});h?bt.startTransition(()=>C()):C()}},[p,f,g,e,n,t,r,s,a,l,c,h])}function nS(r){Ha(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=bt.useRef(Om(r)),e=bt.useRef(!1),n=Zl(),s=bt.useMemo(()=>M_(n.search,e.current?null:t.current),[n.search]),a=gp(),l=bt.useCallback((c,h)=>{const f=Om(typeof c=="function"?c(new URLSearchParams(s)):c);e.current=!0,a("?"+f,h)},[a,s]);return[s,l]}var iS=0,sS=()=>`__${String(++iS)}__`;function rS(){let{router:r}=Xv("useSubmit"),{basename:t}=bt.useContext(ha),e=x_(),n=r.fetch,s=r.navigate;return bt.useCallback(async(a,l={})=>{let{action:c,method:h,encType:f,formData:p,body:g}=O_(a,t);if(l.navigate===!1){let v=l.fetcherKey||sS();await n(v,e,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:g,formMethod:l.method||h,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:e,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,s,t,e])}function aS(r,{relative:t}={}){let{basename:e}=bt.useContext(ha),n=bt.useContext(_o);pi(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Af(r||".",{relative:t})},l=Zl();if(r==null){a.search=l.search;let c=new URLSearchParams(a.search),h=c.getAll("index");if(h.some(p=>p==="")){c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!r||r===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:rl([e,a.pathname])),hf(a)}function oS(r,{relative:t}={}){let e=bt.useContext(Iv);pi(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Xv("useViewTransitionState"),s=Af(r,{relative:t});if(!e.isTransitioning)return!1;let a=al(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=al(e.nextLocation.pathname,n)||e.nextLocation.pathname;return np(s.pathname,l)!=null||np(s.pathname,a)!=null}const Wv=(...r)=>r.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();const lS=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const cS=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase());const Tb=r=>{const t=cS(r);return t.charAt(0).toUpperCase()+t.slice(1)};var uS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hS=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const fS=bt.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...c},h)=>bt.createElement("svg",{ref:h,...uS,width:t,height:t,stroke:r,strokeWidth:n?Number(e)*24/Number(t):e,className:Wv("lucide",s),...!a&&!hS(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,p])=>bt.createElement(f,p)),...Array.isArray(a)?a:[a]]));const En=(r,t)=>{const e=bt.forwardRef(({className:n,...s},a)=>bt.createElement(fS,{ref:a,iconNode:t,className:Wv(`lucide-${lS(Tb(r))}`,`lucide-${r}`,n),...s}));return e.displayName=Tb(r),e};const dS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pS=En("arrow-right",dS);const gS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mS=En("chevron-left",gS);const bS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yS=En("chevron-right",bS);const vS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bm=En("clock",vS);const wS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Nb=En("copy",wS);const xS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],AS=En("download",xS);const _S=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],SS=En("eraser",_S);const CS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Lb=En("file-text",CS);const ES=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Im=En("graduation-cap",ES);const TS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],NS=En("grid-3x3",TS);const LS=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],kS=En("hand",LS);const RS=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],MS=En("highlighter",RS);const DS=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kb=En("message-square",DS);const PS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],OS=En("mic-off",PS);const BS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],IS=En("mic",BS);const FS=[["path",{d:"M5 12h14",key:"1ays0h"}]],jS=En("minus",FS);const US=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zS=En("pen",US);const HS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qS=En("plus",HS);const GS=[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]],Rb=En("pound-sterling",GS);const VS=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],$S=En("redo",VS);const YS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],XS=En("send",YS);const WS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],KS=En("trash-2",WS);const ZS=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],JS=En("type",ZS);const QS=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],t3=En("undo",QS);const e3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],n3=En("upload",e3);const i3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],s3=En("users",i3);const r3=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],a3=En("video-off",r3);const o3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],l3=En("video",o3);const c3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kv=En("x",c3);const u3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],h3=En("zoom-in",u3);const f3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],d3=En("zoom-out",f3),p3=()=>{const r=gp(),[t,e]=bt.useState(""),[n,s]=bt.useState(""),[a,l]=bt.useState([]);bt.useEffect(()=>{const f=localStorage.getItem("tutor_sessions_log");f&&l(JSON.parse(f))},[]);const c=f=>{if(f.preventDefault(),!n.trim()){alert("Please enter a Student Name");return}const p=Math.random().toString(36).substring(2,8).toUpperCase(),v=[{id:p,student:n,date:new Date().toISOString(),role:"Teacher"},...a].slice(0,50);l(v),localStorage.setItem("tutor_sessions_log",JSON.stringify(v)),r(`/session/${p}?host=true&student=${encodeURIComponent(n)}`)},h=f=>{if(f.preventDefault(),!t.trim())return;const p=t.split("/").pop().replace("?host=true","");r(`/session/${p}`)};return ot.jsxs("div",{className:"min-h-screen bg-brand-light flex flex-col items-center justify-center p-6 text-brand-navy font-sans",children:[ot.jsxs("div",{className:"max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[ot.jsxs("div",{className:"space-y-8 animate-in slide-in-from-left-10 duration-500",children:[ot.jsxs("div",{className:"space-y-2",children:[ot.jsxs("div",{className:"flex items-center gap-3 text-purple-600 mb-2",children:[ot.jsx(Im,{size:48}),ot.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Tutor Pro"})]}),ot.jsx("p",{className:"text-xl text-gray-500",children:"Premium interactive tutoring space."})]}),ot.jsx("div",{className:"space-y-4",children:ot.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-purple-100",children:[ot.jsxs("h2",{className:"text-xl font-bold text-brand-navy mb-4 flex items-center gap-2",children:[ot.jsx(Im,{size:24,className:"text-purple-600"}),"Tutor Login"]}),ot.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Start New Session"}),ot.jsx("input",{type:"text",placeholder:"Student Name (e.g. Alice)",value:n,onChange:f=>s(f.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-purple-600 focus:outline-none mb-3"}),ot.jsxs("button",{onClick:c,disabled:!n.trim(),className:"w-full py-3 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl shadow-md transition-all flex items-center justify-center gap-2 font-bold",children:[ot.jsx(qS,{size:20}),"Start Session"]})]})}),ot.jsxs("div",{className:"relative flex py-2 items-center",children:[ot.jsx("div",{className:"flex-grow border-t border-gray-300"}),ot.jsx("span",{className:"flex-shrink mx-4 text-gray-400 text-sm",children:"OR"}),ot.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),ot.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-brand-navy/10 mt-6",children:[ot.jsxs("h2",{className:"text-xl font-bold text-brand-navy mb-4 flex items-center gap-2",children:[ot.jsx(s3,{size:24,className:"text-teal-500"}),"Student Login"]}),ot.jsxs("form",{onSubmit:h,className:"flex gap-2",children:[ot.jsx("input",{type:"text",placeholder:"Enter Session ID",value:t,onChange:f=>e(f.target.value),className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-teal-500 focus:outline-none transition-colors"}),ot.jsx("button",{type:"submit",disabled:!t.trim(),className:"px-6 py-3 bg-teal-500 text-white rounded-xl font-bold hover:bg-teal-600 transition-all disabled:opacity-50",children:"Join"})]})]})]}),ot.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-gray-100 animate-in slide-in-from-right-10 duration-500 delay-100 h-[500px] flex flex-col",children:[ot.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 mb-6 text-gray-700",children:[ot.jsx(Bm,{size:20,className:"text-teal-500"}),"Session History"]}),ot.jsx("div",{className:"space-y-3 overflow-y-auto pr-2 custom-scrollbar flex-1",children:a.length===0?ot.jsx("p",{className:"text-gray-400 italic text-center py-8",children:"No past sessions yet."}):a.map(f=>ot.jsxs("div",{onClick:()=>r(`/session/${f.id}?host=true&student=${encodeURIComponent(f.student||"")}`),className:"group flex items-center justify-between p-4 rounded-xl bg-gray-50 hover:bg-purple-50 cursor-pointer transition-colors border border-transparent hover:border-purple-100",children:[ot.jsxs("div",{children:[ot.jsxs("div",{className:"flex items-center gap-2",children:[ot.jsx("span",{className:"font-bold text-gray-800",children:f.student||"Unknown Student"}),ot.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full font-mono",children:f.id})]}),ot.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(f.date).toLocaleDateString()," at ",new Date(f.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),ot.jsx(pS,{size:20,className:"text-gray-300 group-hover:text-purple-600 transition-colors"})]},f.id))})]})]}),ot.jsx("div",{className:"absolute bottom-6 text-gray-400 text-xs",children:" 2024 Davina's Tutoring Service"})]})},Vs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Fm=[.001,0,0,.001,0,0],Qg=1.35,Ir={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ql={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ff="pdfjs_internal_editor_",$e={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},cn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},g3={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},jm={TRIANGLES:1,LATTICE:2},Qi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},zd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Hi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Hu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bp={ERRORS:0,WARNINGS:1,INFOS:5},df={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Wh={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},m3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let yp=bp.WARNINGS;function b3(r){Number.isInteger(r)&&(yp=r)}function y3(){return yp}function vp(r){yp>=bp.INFOS&&console.info(`Info: ${r}`)}function Ie(r){yp>=bp.WARNINGS&&console.warn(`Warning: ${r}`)}function Cn(r){throw new Error(r)}function Sn(r,t){r||Cn(t)}function v3(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Zv(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=C3(r)}catch{}const n=t?URL.parse(r,t):URL.parse(r);return v3(n)?n:null}function Jv(r,t,e=!1){const n=URL.parse(r);return n?(n.hash=t,n.href):e&&Zv(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Fe(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const zc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class Mb extends zc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class tm extends zc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Um extends zc{constructor(t){super(t,"InvalidPDFException")}}class ip extends zc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class w3 extends zc{constructor(t){super(t,"FormatError")}}class Xl extends zc{constructor(t){super(t,"AbortException")}}function x3(r){(typeof r!="object"||r?.length===void 0)&&Cn("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<t;s+=e){const a=Math.min(s+e,t),l=r.subarray(s,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function wp(r){typeof r!="string"&&Cn("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function A3(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function _3(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function S3(){try{return new Function(""),!0}catch{return!1}}class ts{static get isLittleEndian(){return Fe(this,"isLittleEndian",_3())}static get isEvalSupported(){return Fe(this,"isEvalSupported",S3())}static get isOffscreenCanvasSupported(){return Fe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Fe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Fe(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Fe(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Fe(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Fe(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const em=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class ne{static makeHexColor(t,e,n){return`#${em[t]}${em[e]}${em[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const s=t[n],a=t[n+1];t[n]=s*e[0]+a*e[2]+e[4],t[n+1]=s*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],a=e[1],l=e[2],c=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const g=t[n+p],v=t[n+p+1];t[n+p]=g*s+v*l+h,t[n+p+1]=g*a+v*c+f}}static applyInverseTransform(t,e){const n=t[0],s=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,n){const s=e[0],a=e[1],l=e[2],c=e[3],h=e[4],f=e[5],p=t[0],g=t[1],v=t[2],b=t[3];let C=s*p+h,A=C,T=s*v+h,S=T,R=c*g+f,M=R,D=c*b+f,z=D;if(a!==0||l!==0){const K=a*p,Z=a*v,J=l*g,H=l*b;C+=J,S+=J,T+=H,A+=H,R+=K,z+=K,D+=Z,M+=Z}n[0]=Math.min(n[0],C,T,A,S),n[1]=Math.min(n[1],R,D,M,z),n[2]=Math.max(n[2],C,T,A,S),n[3]=Math.max(n[3],R,D,M,z)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],a=t[2],l=t[3],c=n**2+s**2,h=n*a+s*l,f=a**2+l**2,p=(c+f)/2,g=Math.sqrt(p**2-(c*f-h**2));e[0]=Math.sqrt(p+g||1),e[1]=Math.sqrt(p-g||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,s,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,a){a[0]=Math.min(a[0],t,n),a[1]=Math.min(a[1],e,s),a[2]=Math.max(a[2],t,n),a[3]=Math.max(a[3],e,s)}static#t(t,e,n,s,a,l,c,h,f,p){if(f<=0||f>=1)return;const g=1-f,v=f*f,b=v*f,C=g*(g*(g*t+3*f*e)+3*v*n)+b*s,A=g*(g*(g*a+3*f*l)+3*v*c)+b*h;p[0]=Math.min(p[0],C),p[1]=Math.min(p[1],A),p[2]=Math.max(p[2],C),p[3]=Math.max(p[3],A)}static#e(t,e,n,s,a,l,c,h,f,p,g,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,s,a,l,c,h,-g/p,v);return}const b=p**2-4*g*f;if(b<0)return;const C=Math.sqrt(b),A=2*f;this.#t(t,e,n,s,a,l,c,h,(-p+C)/A,v),this.#t(t,e,n,s,a,l,c,h,(-p-C)/A,v)}static bezierBoundingBox(t,e,n,s,a,l,c,h,f){f[0]=Math.min(f[0],t,c),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,c),f[3]=Math.max(f[3],e,h),this.#e(t,n,a,c,e,s,l,h,3*(-t+3*(n-a)+c),6*(t-2*n+a),3*(n-t),f),this.#e(t,n,a,c,e,s,l,h,3*(-e+3*(s-l)+h),6*(e-2*s+l),3*(s-e),f)}}function C3(r){return decodeURIComponent(escape(r))}let nm=null,Db=null;function E3(r){return nm||(nm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Db=new Map([["","t"]])),r.replaceAll(nm,(t,e,n)=>e?e.normalize("NFKC"):Db.get(n))}function Qv(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),x3(r)}const Yu="pdfjs_internal_id_";function T3(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...a]=e;if(!r(n)&&!Number.isInteger(n)||!t(s))return!1;const l=a.length;let c=!0;switch(s.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||c&&h===null))return!1;return!0}function As(r,t,e){return Math.min(Math.max(r,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class pf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(a){if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(pf.shouldBuildText(c))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const h of a.children)s(h)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class t5{static setupStorage(t,e,n,s,a){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",c=>{s.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",c=>{s.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",c=>{s.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:a}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}c&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:a,linkService:n});const c=a!=="richText",h=t.div;if(h.append(l),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=g}c&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);l.append(g),c&&pf.shouldBuildText(s.name)&&f.push(g)}return{textDivs:f}}const p=[[s,-1,l]];for(;p.length>0;){const[g,v,b]=p.at(-1);if(v+1===g.children.length){p.pop();continue}const C=g.children[++p.at(-1)[1]];if(C===null)continue;const{name:A}=C;if(A==="#text"){const S=document.createTextNode(C.value);f.push(S),b.append(S);continue}const T=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,A):document.createElement(A);if(b.append(T),C.attributes&&this.setAttributes({html:T,element:C,storage:e,intent:a,linkService:n}),C.children?.length>0)p.push([C,-1,T]);else if(C.value){const S=document.createTextNode(C.value);c&&pf.shouldBuildText(A)&&f.push(S),T.append(S)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const el="http://www.w3.org/2000/svg";class oh{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function _f(r,t="text"){if(sf(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Sf{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,g,v,b;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,g=0,v=0,b=1;break;case 90:p=0,g=1,v=1,b=0;break;case 270:p=0,g=-1,v=-1,b=0;break;case 0:p=1,g=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,b=-b);let C,A,T,S;p===0?(C=Math.abs(f-t[1])*n+a,A=Math.abs(h-t[0])*n+l,T=(t[3]-t[1])*n,S=(t[2]-t[0])*n):(C=Math.abs(h-t[0])*n+a,A=Math.abs(f-t[1])*n+l,T=(t[2]-t[0])*n,S=(t[3]-t[1])*n),this.transform=[p*n,g*n,v*n,b*n,C-p*n*h-v*n*f,A-g*n*h-b*n*f],this.width=T,this.height=S}get rawDims(){const t=this.viewBox;return Fe(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new Sf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){const n=[t,e];return ne.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ne.applyTransform(e,this.transform);const n=[t[2],t[3]];return ne.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ne.applyInverseTransform(n,this.transform),n}}class _0 extends zc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function xp(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function S0(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function N3(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function L3(r,t="document.pdf"){if(typeof r!="string")return t;if(xp(r))return Ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return t;const s=c=>{try{let h=decodeURIComponent(c);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:c):h}catch{return c}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return s(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const f of c)if(a.test(f))return s(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(a.test(f))return s(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return s(h[0])}return t}class Pb{started=Object.create(null);times=[];time(t){t in this.started&&Ie(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ie(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-s}ms
`);return t.join("")}}function sf(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function ca(r){r.preventDefault()}function Ei(r){r.preventDefault(),r.stopPropagation()}function k3(r){console.log("Deprecated API usage: "+r)}class zm{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=p,c+=g):f==="+"&&(l-=p,c-=g),new Date(Date.UTC(n,s,a,l,c,h))}}function R3(r,{scale:t=1,rotation:e=0}){const{width:n,height:s}=r.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new Sf({viewBox:a,userUnit:1,scale:t,rotation:e})}function Cf(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ie(`Not a valid color format: "${r}"`),[0,0,0])}function M3(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,Cf(n))}t.remove()}function di(r){const{a:t,b:e,c:n,d:s,e:a,f:l}=r.getTransform();return[t,e,n,s,a,l]}function go(r){const{a:t,b:e,c:n,d:s,e:a,f:l}=r.getTransform().invertSelf();return[t,e,n,s,a,l]}function Ic(r,t,e=!1,n=!0){if(t instanceof Sf){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:l}=r,c=ts.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,f=`var(--total-scale-factor) * ${a}px`,p=c?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=c?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=g):(l.width=g,l.height=p)}n&&r.setAttribute("data-main-rotation",t.rotation)}class Ao{constructor(){const{pixelRatio:t}=Ao;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,a=-1){let l=1/0,c=1/0,h=1/0;n=Ao.capPixels(n,a),n>0&&(l=Math.sqrt(n/(t*e))),s!==-1&&(c=s/t,h=s/e);const f=Math.min(l,c,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Hm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class D3{static get isDarkMode(){return Fe(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class P3{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Fe(this,"commentForegroundColor",Cf(n))}}function O3(r,t,e,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return r=Math.round(r*n+s),t=Math.round(t*n+s),e=Math.round(e*n+s),[r,t,e]}function Ob(r,t){const e=r[0]/255,n=r[1]/255,s=r[2]/255,a=Math.max(e,n,s),l=Math.min(e,n,s),c=(a+l)/2;if(a===l)t[0]=t[1]=0;else{const h=a-l;switch(t[1]=c<.5?h/(a+l):h/(2-a-l),a){case e:t[0]=((n-s)/h+(n<s?6:0))*60;break;case n:t[0]=((s-e)/h+2)*60;break;case s:t[0]=((e-n)/h+4)*60;break}}t[2]=c}function qm(r,t){const e=r[0],n=r[1],s=r[2],a=(1-Math.abs(2*s-1))*n,l=a*(1-Math.abs(e/60%2-1)),c=s-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+c,t[1]=l+c,t[2]=c;break;case 1:t[0]=l+c,t[1]=a+c,t[2]=c;break;case 2:t[0]=c,t[1]=a+c,t[2]=l+c;break;case 3:t[0]=c,t[1]=l+c,t[2]=a+c;break;case 4:t[0]=l+c,t[1]=c,t[2]=a+c;break;case 5:case 6:t[0]=a+c,t[1]=c,t[2]=l+c;break}}function Bb(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function Ib(r,t,e){qm(r,e),e.map(Bb);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];qm(t,e),e.map(Bb);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const Fb=new Map;function B3(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=Fb.get(e);if(n)return n;const s=new Float32Array(9),a=s.subarray(0,3),l=s.subarray(3,6);Ob(r,l);const c=s.subarray(6,9);Ob(t,c);const h=c[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Ib(l,c,a)<f){let p,g;h?(p=l[2],g=1):(p=0,g=l[2]);const v=.005;for(;g-p>v;){const b=l[2]=(p+g)/2;h===Ib(l,c,a)<f?p=b:g=b}l[2]=h?g:p}return qm(l,a),n=ne.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),Fb.set(e,n),n}function e5({html:r,dir:t,className:e},n){const s=document.createDocumentFragment();if(typeof r=="string"){const a=document.createElement("p");a.dir=t||"auto";const l=r.split(/(?:\r\n?|\n)/);for(let c=0,h=l.length;c<h;++c){const f=l[c];a.append(document.createTextNode(f)),c<h-1&&a.append(document.createElement("br"))}s.append(a)}else t5.render({xfaHtml:r,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",e),n.append(s)}function n5(r){const t=new Path2D;if(!r)return t;for(let e=0,n=r.length;e<n;)switch(r[e++]){case Wh.moveTo:t.moveTo(r[e++],r[e++]);break;case Wh.lineTo:t.lineTo(r[e++],r[e++]);break;case Wh.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Wh.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case Wh.closePath:t.closePath();break;default:Ie(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}class An{static#t=null;static#e=null;static#i=null;static#n=0;static#r=[];get pagesNumber(){return An.#n}set pagesNumber(t){An.#n!==t&&(An.#n=t,t===0&&(An.#e=null,An.#t=null))}addListener(t){An.#r.push(t)}removeListener(t){const e=An.#r.indexOf(t);e>=0&&An.#r.splice(e,1)}#a(){for(const t of An.#r)t()}#s(t){if(An.#e)return;const e=An.#n,n=new Uint32Array(3*e),s=An.#e=n.subarray(0,e),a=An.#t=n.subarray(e,2*e);if(t)for(let l=0;l<e;l++)s[l]=a[l]=l+1;An.#i=n.subarray(2*e)}movePages(t,e,n){this.#s(!0);const s=An.#e,a=An.#t;An.#i.set(a);const l=e.length,c=new Uint32Array(l);let h=0;for(let b=0;b<l;b++){const C=e[b]-1;c[b]=s[C],C<n&&(h+=1)}const f=An.#n;let p=n-h;const g=f-l;p=As(p,0,g);for(let b=0,C=0;b<f;b++)t.has(b+1)||(s[C++]=s[b]);s.copyWithin(p+l,p,g),s.set(c,p);let v=!1;for(let b=0,C=f;b<C;b++){const A=s[b];v||=A!==b+1,a[A-1]=b+1}this.#a(),v||(this.pagesNumber=0)}hasBeenAltered(){return An.#e!==null}getPageMappingForSaving(){return{pageIndices:An.#t?An.#t.map(t=>t-1):null}}getPrevPageNumber(t){return An.#i[An.#e[t-1]-1]}getPageNumber(t){return An.#t?.[t-1]??t}getPageId(t){return An.#e?.[t-1]??t}static get instance(){return Fe(this,"instance",new An)}getMapping(){return An.#e.subarray(0,this.pagesNumber)}}class lf{#t=null;#e=null;#i;#n=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#i=t,lf.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ca,{signal:e}),t.addEventListener("pointerdown",lf.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const s=this.#i.toolbarPosition;if(s){const{style:a}=t,l=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#f(t){this.#i._focusEventsAllowed=!1,Ei(t)}#h(t){this.#i._focusEventsAllowed=!0,Ei(t)}#d(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#f.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ca,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",lf.#c[t]),this.#d(n)&&n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#d(e),this.#n.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#a)return;const n=t.renderForToolbar();if(!n)return;this.#d(n);const s=this.#s=this.#m;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(s,e)):this.#n.append(n,s),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#d(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#d(e),this.#n.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const s=this.#n.querySelector(n);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class I3{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ca,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let n=0,s=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const c=a.x+(e?a.width:0);if(l>n){s=c,n=l;continue}e?c>s&&(s=c):c<s&&(s=c)}return[e?1-s:s,n]}show(t,e,n){const[s,a]=this.#r(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,n,s){const a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);const l=document.createElement("span");a.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#i._signal;c instanceof AbortSignal&&!c.aborted&&(a.addEventListener("contextmenu",ca,{signal:c}),a.addEventListener("click",s,{signal:c})),this.#t.append(a)}}function i5(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}class _n{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(_n.#e||=new Set).add(t)}static setPointer(t,e){_n.#t||=e,_n.#n??=t}static setTimeStamp(t){_n.#i=t}static isSamePointerId(t){return _n.#t===t}static isSamePointerIdOrRemove(t){return _n.#t===t?!0:(_n.#e?.delete(t),!1)}static isSamePointerType(t){return _n.#n===t}static isInitializedAndDifferentPointerType(t){return _n.#n!==null&&!_n.isSamePointerType(t)}static isSameTimeStamp(t){return _n.#i===t}static isUsingMultiplePointers(){return _n.#e?.size>=1}static clearPointerType(){_n.#n=null}static clearPointerIds(){_n.#t=NaN,_n.#e=null}static clearTimeStamp(){_n.#i=NaN}}class F3{#t=0;get id(){return`${ff}${this.#t++}`}}class C0{#t=Qv();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Fe(this,"_isSVGFittingCanvas",a)}async#n(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(n.url=e,s=await _f(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const a=C0._isSVGFittingCanvas,l=new FileReader,c=new Image,h=new Promise((f,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;c.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},c.onerror=l.onerror=p});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Ie(s),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:s,type:a}=t;return this.#n(`${e}_${n}_${s}_${a}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=s.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class j3{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(s&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:a};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(h);return}if(l&&this.#t[this.#n].type===a){c&&(h.undo=this.#t[this.#n].undo),this.#t[this.#n]=h;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Ef{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ts.platform;for(const[n,s,a={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(s.bind(t,...l,e)(),a||Ei(e))}}class E0{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return M3(t),Fe(this,"_colors",t)}convert(t){const e=Cf(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((a,l)=>a===e[l]))return E0._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ne.makeHexColor(...e):t}}class Wl{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new j3;#l=null;#f=null;#h=null;#d=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#C=null;#_=null;#x=null;#T=null;#w=!1;#S=null;#k=new F3;#N=!1;#L=!1;#I=!1;#M=null;#P=null;#F=null;#O=null;#G=null;#E=$e.NONE;#A=new Set;#D=null;#j=null;#z=null;#Y=null;#$=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#B=null;#V=null;#J=null;#Q=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Wl.prototype,e=l=>l.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Ef([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#V.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,n,s,a,l,c,h,f,p,g,v,b,C,A,T){const S=this._signal=this.#t.signal;this.#V=t,this.#J=e,this.#Q=n,this.#a=s,this.#l=a,this.#j=l,this.#$=h,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:S}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),c._on("setpreference",this.onSetPreference.bind(this),{signal:S}),c._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:S}),c._on("pagesedited",this.onPagesEdited.bind(this),{signal:S}),window.addEventListener("pointerdown",()=>{this.#L=!0},{capture:!0,signal:S}),window.addEventListener("pointerup",()=>{this.#L=!1},{capture:!0,signal:S}),this.#at(),this.#ft(),this.#et(),this.#s=h.annotationStorage,this.#C=h.filterFactory,this.#z=f,this.#T=p||null,this.#b=g,this.#v=v,this.#y=b,this.#G=C||null,this.viewParameters={realScale:oh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=T!==!1,a?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#O?.clear(),this.#e=null,this.#A.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#j?.destroy(),this.#S?.hide(),this.#S=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Fe(this,"hcmFilter",this.#z?this.#C.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Fe(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Fe(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Fe(this,"highlightColors",null);const e=new Map,n=!!this.#z;for(const[s,a]of t){const l=s.endsWith("_HCM");if(n&&l){e.set(s.replace("_HCM",""),a);continue}!n&&!l&&e.set(s,a)}return Fe(this,"highlightColors",e)}get highlightColorNames(){return Fe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,s){this.#l?.showDialog(this,t,e,n,s)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},s=()=>{this._editorUndoBar?.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:s,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),s=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await n}getSignature(t){this.#j?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#j}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=e)}onPagesEdited({pagesMapper:t}){for(const s of this.#n.values())s.updatePageIndex(t.getPrevPageNumber(s.pageIndex+1)-1);const e=this.#r,n=this.#r=new Map;for(const[s,a]of e){const l=t.getPrevPageNumber(s+1)-1;if(l===-1){a.destroy();continue}n.set(l,a),a.updatePageIndex(l)}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const n of this.#r.values()){const{x:s,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=a&&e<=a+c)return n}return null}disableUserSelect(t=!1){this.#J.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*oh.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#r.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:c}=n,h=n.toString(),p=this.#Z(n).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;n.empty();const v=this.#tt(p),b=this.#E===$e.NONE,C=()=>{const A=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:c,text:h});b&&this.showAllEditors("highlight",!0,!0),e&&A?.editComment()};if(b){this.switchToMode($e.HIGHLIGHT,C);return}C()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Z(t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#S||=new I3(this),this.#S.show(n,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${ff}${t}`,n=this.#s.getRawValue(e);return n&&this.#s.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#Q;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#rt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#D&&(this.#S?.hide(),this.#D=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#D)return;const s=this.#Z(t).closest(".textLayer");if(!s){this.#D&&(this.#S?.hide(),this.#D=null,this.#R({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#D=e,this.#R({hasSelectedText:!0}),!(this.#E!==$e.HIGHLIGHT&&this.#E!==$e.NONE)&&(this.#E===$e.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#E===$e.HIGHLIGHT?this.#tt(s):null;if(a?.toggleDrawing(),this.#L){const l=new AbortController,c=this.combinedSignal(l),h=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),a?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}else a?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#E===$e.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#st()}#at(){document.addEventListener("selectionchange",this.#rt.bind(this),{signal:this._signal})}#ot(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#A)if(e.div.contains(t)){this.#P=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[t,e]=this.#P;this.#P=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#M)return;this.#M=new AbortController;const t=this.combinedSignal(this.#M);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#M?.abort(),this.#M=null}#ut(){if(this.#f)return;this.#f=new AbortController;const t=this.combinedSignal(this.#f);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#f?.abort(),this.#f=null}#ft(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#A){const s=n.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Ie(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const h of n){const f=await s.deserialize(h);if(!f)return;a.push(f)}const l=()=>{for(const h of a)this.#nt(h);this.#it(a)},c=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){Ie(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==$e.NONE&&!this.isEditorHandlingKeyboard&&Wl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(t){Object.entries(t).some(([n,s])=>this.#X[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#E===$e.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#q([[cn.HIGHLIGHT_FREE,!0]]))}#q(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#R({isEditing:this.#E!==$e.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#q(e.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#r.get(this.#d)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#r.set(t.pageIndex,t),this.#N?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,a=!1,l=!1){if(this.#E!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#E===$e.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#E=t,t===$e.NONE){this.setEditingState(!1),this.#pt();for(const c of this.#n.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const c of this.#n.values())c.addStandaloneCommentButton();t===$e.SIGNATURE&&await this.#j?.loadSignatures(),n&&_n.clearPointerType(),this.setEditingState(!0),await this.#dt(),this.unselectAll();for(const c of this.#r.values())c.updateMode(t);if(t===$e.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const c=new Set,h=[];for(const f of this.#n.values()){const{annotationElementId:p,hasComment:g,deleted:v}=f;p&&c.add(p),g&&!v&&h.push(f.getData())}for(const f of this.#i){const{id:p,popupRef:g,contentsObj:v}=f;g&&v?.str&&!c.has(p)&&!this.#m.has(p)&&h.push(f)}this.#l?.showSidebar(h)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const c of this.#n.values())c.uid===e?(this.setSelected(c),l?c.editComment():a?c.enterInEditMode():c.focus()):c.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case cn.CREATE:this.currentLayer.addNewEditor(e);return;case cn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#A)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const a of this.#n.values())a.editorType===t&&a.show(e);(this.#Y?.get(cn.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#q([[cn.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#dt(){if(!this.#N){this.#N=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#N){this.#N=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#O?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#q(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#A);return t}updateUI(t){this.#gt===t&&this.#q(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#q(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#A)e!==t&&e.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#A],n=()=>{this._editorUndoBar?.show(s,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},s=()=>{for(const a of e)this.#nt(a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#A)e.unselect();this.#A.clear();for(const e of t)e.isEmpty()||(this.#A.add(e),e.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==$e.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[s,a]=this.#H,l=[...this.#A],c=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(s,a),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-s,-a),h.translationDone())},mustExec:!1})},c);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#A)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:s,y:a,pageIndex:l},c]of t)c.newX=s,c.newY=a,c.newPageIndex=l,e||=s!==c.savedX||a!==c.savedY||l!==c.savedPageIndex;if(!e)return!1;const n=(s,a,l,c)=>{if(this.#n.has(s.id)){const h=this.#r.get(c);h?s._setParentAndPosition(h,a,l):(s.pageIndex=c,s.x=a,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:l,newPageIndex:c}]of t)n(s,a,l,c)},undo:()=>{for(const[s,{savedX:a,savedY:l,savedPageIndex:c}]of t)n(s,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const n of this.#g.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}isEditingMode(){return this.#E!==$e.NONE}get imageManager(){return Fe(this,"imageManager",new C0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(f,p,g,v)=>({x:(p-s)/l,y:1-(f+g-n)/a,width:v/l,height:g/a});break;case"180":c=(f,p,g,v)=>({x:1-(f+g-n)/a,y:1-(p+v-s)/l,width:g/a,height:v/l});break;case"270":c=(f,p,g,v)=>({x:1-(p+v-s)/l,y:(f-n)/a,width:v/l,height:g/a});break;default:c=(f,p,g,v)=>({x:(f-n)/a,y:(p-s)/l,width:g/a,height:v/l});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:b,width:C,height:A}of g.getClientRects())C===0||A===0||h.push(c(v,b,C,A))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#E===$e.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const s=this.#O?.get(t);s&&(s.setCanvas(e,n),this.#O.delete(t))}addMissingCanvas(t,e){(this.#O||=new Map).set(t,e)}}class wo{#t=null;#e=!1;#i=null;#n=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#f=null;#h=!1;static#d=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,wo.#d||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){wo._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",wo.#d.missing),e.setAttribute("data-l10n-id",wo.#d["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",ca,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#s=!0,s(a))},{signal:n}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#f=await wo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#f),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#f}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(this.#l=n,this.#f=s),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#i&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",wo.#d[this.#m]),this.#n?.setAttribute("data-l10n-id",wo.#d[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const s=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ad{#t=null;#e=null;#i=!1;#n=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#f(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=this.#n.commentButtonColor;s&&(n.backgroundColor=s)}return this.#f(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:s,y:a,width:l,height:c}=this.#n.parent.boundingClientRect;return[(t-s)/l,(e+n-a)/c]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#f(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",ca,{signal:n}),e&&(t.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,Ei(a)},{capture:!0,signal:n}),t.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,Ei(a)},{capture:!0,signal:n})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#i=!0,s(a))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,s;if(e)[n,s]=e;else{[n,s]=this.#n.commentButtonPosition;const{width:p,height:g,x:v,y:b}=this.#n;n=v+n*p,s=b+s*g}const a=this.#n.parent.boundingClientRect,{x:l,y:c,width:h,height:f}=a;this.#n._uiManager.editComment(this.#n,l+n*h,c+s*f,{...t,parentDimensions:a})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:e,date:n}){this.#s=t,this.#a=e,this.#o=n,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Ap{#t;#e=!1;#i=null;#n;#r;#a;#s;#o=null;#c;#l=null;#f;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#i=n,this.#n=e,this.#r=s,this.#a=a,this.#s=l,this.#f=new AbortController,this.#c=AbortSignal.any([c,this.#f.signal]),t.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ao.pixelRatio}#d(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,a=AbortSignal.any([this.#c,s.signal]),l=this.#t,c={capture:!0,signal:a,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Ei(f),h(f))},c),l.addEventListener("pointerup",h,c),l.addEventListener("pointercancel",h,c);return}if(!this.#h){this.#h=new AbortController;const s=AbortSignal.any([this.#c,this.#h.signal]),a=this.#t,l={signal:s,capture:!1,passive:!1};a.addEventListener("touchmove",this.#m.bind(this),l);const c=this.#g.bind(this);a.addEventListener("touchend",c,l),a.addEventListener("touchcancel",c,l),l.capture=!0,a.addEventListener("pointerdown",Ei,l),a.addEventListener("pointermove",Ei,l),a.addEventListener("pointercancel",Ei,l),a.addEventListener("pointerup",Ei,l),this.#r?.()}if(Ei(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;Ei(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:a}=e,{screenX:l,screenY:c}=n,h=this.#l,{touch0X:f,touch0Y:p,touch1X:g,touch1Y:v}=h,b=g-f,C=v-p,A=l-s,T=c-a,S=Math.hypot(A,T)||1,R=Math.hypot(b,C)||1;if(!this.#e&&Math.abs(R-S)<=Ap.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=a,h.touch1X=l,h.touch1Y=c,!this.#e){this.#e=!0;return}const M=[(s+l)/2,(a+c)/2];this.#a?.(M,R,S)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(Ei(t),this.#l=null,this.#e=!1))}destroy(){this.#f?.abort(),this.#f=null,this.#o?.abort(),this.#o=null}}class _e{#t=null;#e=null;#i=null;#n=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#f=null;#h=null;#d=null;#m="";#g=!1;#u=null;#p=!1;#b=!1;#v=!1;#y=null;#C=0;#_=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#S=_e._zIndex++;static _borderLineWidth=-1;static _colorManager=new E0;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=_e.prototype._resizeWithKeyboard,e=Wl.TRANSLATE_SMALL,n=Wl.TRANSLATE_BIG;return Fe(this,"_resizerKeyboardManager",new Ef([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],_e.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,l];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Fe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new U3({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(_e._l10n??=t,_e._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),_e._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);_e._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Cn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[a,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(e+s)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}#k([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#k(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[h,f]=this.getBaseTranslation();l+=h,c+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=_e,s=n/t,a=n/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:a,y:l,width:c,height:h}=this;if(c*=n,h*=s,a*=n,l*=s,this._mustFixPosition)switch(t){case 0:a=As(a,0,n-c),l=As(l,0,s-h);break;case 90:a=As(a,0,n-h),l=As(l,c,s);break;case 180:a=As(a,c,n),l=As(l,h,s);break;case 270:a=As(a,h,n),l=As(l,0,s-c);break}this.x=a/=n,this.y=l/=s;const[f,p]=this.getBaseTranslation();a+=f,l+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#N(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return _e.#N(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return _e.#N(t,e,360-this.parentRotation)}#L(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");this.#c.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#M.bind(this,n),{signal:e}),s.addEventListener("contextmenu",ca,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#c)}#M(t,e){e.preventDefault();const{isMac:n}=ts.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#i?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ei,{passive:!1,signal:l}),window.addEventListener("contextmenu",ca,{signal:l}),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=c,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#P(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#f)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=this.#f;this.#f=null;const a=this.x,l=this.y,c=this.width,h=this.height;a===t&&l===e&&c===n&&h===s||this.addCommands({cmd:this.#P.bind(this,a,l,c,h),undo:this.#P.bind(this,t,e,n,s),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#O(t,e){const[n,s]=this.parentDimensions,a=this.x,l=this.y,c=this.width,h=this.height,f=_e.MIN_SIZE/n,p=_e.MIN_SIZE/s,g=this.#L(this.rotation),v=(V,et)=>[g[0]*V+g[2]*et,g[1]*V+g[3]*et],b=this.#L(360-this.rotation),C=(V,et)=>[b[0]*V+b[2]*et,b[1]*V+b[3]*et];let A,T,S=!1,R=!1;switch(t){case"topLeft":S=!0,A=(V,et)=>[0,0],T=(V,et)=>[V,et];break;case"topMiddle":A=(V,et)=>[V/2,0],T=(V,et)=>[V/2,et];break;case"topRight":S=!0,A=(V,et)=>[V,0],T=(V,et)=>[0,et];break;case"middleRight":R=!0,A=(V,et)=>[V,et/2],T=(V,et)=>[0,et/2];break;case"bottomRight":S=!0,A=(V,et)=>[V,et],T=(V,et)=>[0,0];break;case"bottomMiddle":A=(V,et)=>[V/2,et],T=(V,et)=>[V/2,0];break;case"bottomLeft":S=!0,A=(V,et)=>[0,et],T=(V,et)=>[V,0];break;case"middleLeft":R=!0,A=(V,et)=>[0,et/2],T=(V,et)=>[V,et/2];break}const M=A(c,h),D=T(c,h);let z=v(...D);const K=_e._round(a+z[0]),Z=_e._round(l+z[1]);let J=1,H=1,lt,P;if(e.fromKeyboard)({deltaX:lt,deltaY:P}=e);else{const{screenX:V,screenY:et}=e,[at,wt]=this.#l;[lt,P]=this.screenToPageTranslation(V-at,et-wt),this.#l[0]=V,this.#l[1]=et}if([lt,P]=C(lt/n,P/s),S){const V=Math.hypot(c,h);J=H=Math.max(Math.min(Math.hypot(D[0]-M[0]-lt,D[1]-M[1]-P)/V,1/c,1/h),f/c,p/h)}else R?J=As(Math.abs(D[0]-M[0]-lt),f,1)/c:H=As(Math.abs(D[1]-M[1]-P),p,1)/h;const G=_e._round(c*J),rt=_e._round(h*H);z=v(...T(G,rt));const Q=K-z[0],gt=Z-z[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=G,this.height=rt,this.x=Q,this.y=gt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new lf(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(wo.initialize(_e._l10n),this.#i=new wo(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Ad(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:t,text:e,date:n,deleted:s}}=this.#n;return{text:e,richText:t,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Ad(this),typeof t=="object"&&t!==null?this.#n.restoreData(t):this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new Ad(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Ad(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[a]=this.pageDimensions,[l]=this.pageTranslation,c=l+a+1,h=s-100,f=c+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,h,f,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),i5(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Ap({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#E.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#E(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=this.#L(this.rotation),c=(K,Z)=>[l[0]*K+l[2]*Z,l[1]*K+l[3]*Z],[h,f]=this.parentDimensions,p=this.x,g=this.y,v=this.width,b=this.height,C=_e.MIN_SIZE/h,A=_e.MIN_SIZE/f;a=Math.max(Math.min(a,1/v,1/b),C/v,A/b);const T=_e._round(v*a),S=_e._round(b*a);if(T===v&&S===b)return;this.#u||=[p,g,v,b];const R=c(v/2,b/2),M=_e._round(p+R[0]),D=_e._round(g+R[1]),z=c(T/2,S/2);this.x=M-z[0],this.y=D-z[1],this.width=T,this.height=S,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=ts.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#j(t);return}this.#D(t)}#D(t){const{isMac:e}=ts.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#j(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:a},c=f=>{s.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#D(f),n&&this._onStopDragging()};e&&(this.#C=t.clientX,this.#_=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:v}=f;if(v!==this.#s){Ei(f);return}const[b,C]=this.screenToPageTranslation(p-this.#C,g-this.#_);this.#C=p,this.#_=g,this._uiManager.dragSelectedEditors(b,C)},l),window.addEventListener("touchmove",Ei,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&c(f),Ei(f)},l));const h=f=>{if(!this.#s||this.#s===f.pointerId){c(f);return}Ei(f)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[a,l]=this.pageDimensions,[c,h]=this.pageTranslation,f=t/s,p=e/s,g=this.x*a,v=this.y*l,b=this.width*a,C=this.height*l;switch(n){case 0:return[g+f+c,l-v-p-C+h,g+f+b+c,l-v-p+h];case 90:return[g+p+c,l-v+f+h,g+p+C+c,l-v+f+b+h];case 180:return[g-f-b+c,l-v+p+h,g-f+c,l-v+p+C+h];case 270:return[g-p-C+c,l-v-f-b+h,g-p+c,l-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,a,l]=t,c=a-n,h=l-s;switch(this.rotation){case 0:return[n,e-l,c,h];case 90:return[n,e-s,h,c];case 180:return[a,e-s,c,h];case 270:return[a,e-l,h,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&_e._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:s,deleted:a,richText:l},uid:c,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:c,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!a,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&s>0&&t<a&&n>0}#z(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,s.#t=t.accessibilityData,s._isCopy=t.isCopy||!1;const[a,l]=s.pageDimensions,[c,h,f,p]=s.getRectInCurrentCoords(t.rect,l);return s.x=c/a,s.y=h/l,s.width=f/a,s.height=p/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#B(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,s,a,l]=this.getPDFRect();return[_e._round(n+(a-n)*t),_e._round(s+(l-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#Y.bind(this),c=this.#$.bind(this),h=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",c,{signal:h}),f.addEventListener("focus",this.#X.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",_e._l10nResizer[p])}}const n=this.#e[0];let s=0;for(const l of e){if(l===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==s){if(a<s)for(let c=0;c<s-a;c++)this.#c.append(this.#c.firstElementChild);else if(a>s)for(let c=0;c<a-s;c++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const c of e){const f=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",_e._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){_e._resizerKeyboardManager.exec(this,t)}#$(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#X(t){this.#m=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#O(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#v=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:n}=t;let s=this.#x.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},_e._telemetryTimeout),this.#x.set(n,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class U3 extends _e{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const jb=3285377520,aa=4294901760,mo=65535;class s5{constructor(t){this.h1=t?t&4294967295:jb,this.h2=t?t&4294967295:jb}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let A=0,T=t.length;A<T;A++){const S=t.charCodeAt(A);S<=255?e[n++]=S:(e[n++]=S>>>8,e[n++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,l=new Uint32Array(e.buffer,0,s);let c=0,h=0,f=this.h1,p=this.h2;const g=3432918353,v=461845907,b=g&mo,C=v&mo;for(let A=0;A<s;A++)A&1?(c=l[A],c=c*g&aa|c*b&mo,c=c<<15|c>>>17,c=c*v&aa|c*C&mo,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[A],h=h*g&aa|h*b&mo,h=h<<15|h>>>17,h=h*v&aa|h*C&mo,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,a){case 3:c^=e[s*4+2]<<16;case 2:c^=e[s*4+1]<<8;case 1:c^=e[s*4],c=c*g&aa|c*b&mo,c=c<<15|c>>>17,c=c*v&aa|c*C&mo,s&1?f^=c:p^=c}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&aa|t*36045&mo,e=e*4283543511&aa|((e<<16|t>>>16)*2950163797&aa)>>>16,t^=e>>>1,t=t*444984403&aa|t*60499&mo,e=e*3301882366&aa|((e<<16|t>>>16)*3120437893&aa)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Gm=Object.freeze({map:null,hash:"",transfer:void 0});class T0{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof _e&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof _e)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let s=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(s=!0,n[a]=l);else s=!0,this.#n.set(t,e);s&&this.#r(),e instanceof _e&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new r5(this)}get serializable(){if(this.#n.size===0)return Gm;const t=new Map,e=new s5,n=[],s=Object.create(null);let a=!1;for(const[l,c]of this.#n){const h=c instanceof _e?c.serialize(!1,s):c;c.page&&(c.pageIndex=c.page._pageIndex,delete c.page),h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Gm}get editorStats(){let t=null;const e=new Map;let n=0,s=0;for(const a of this.#n.values()){if(!(a instanceof _e)){a.popup&&(a.popup.deleted?s+=1:n+=1);continue}a.isCommentDeleted?s+=1:a.hasEditedComment&&(n+=1);const l=a.telemetryFinalData;if(!l)continue;const{type:c}=l;e.has(c)||e.set(c,Object.getPrototypeOf(a).constructor),t||=Object.create(null);const h=t[c]||=new Map;for(const[f,p]of Object.entries(l)){if(f==="type")continue;let g=h.get(f);g||(g=new Map,h.set(f,g));const v=g.get(p)??0;g.set(p,v+1)}}if((s>0||n>0)&&(t||=Object.create(null),t.comments={deleted:s,edited:n}),!t)return null;for(const[a,l]of e)t[a]=l.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#i?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class r5 extends T0{#t;constructor(t){super();const{map:e,hash:n,transfer:s}=t.serializable,a=structuredClone(e,s?{transfer:s}:null);this.#t={map:a,hash:n,transfer:s}}get print(){Cn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Fe(this,"modifiedIds",{ids:new Set,hash:""})}}class z3{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(Sn(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:a,style:l}=t,c=new FontFace(s,a,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(s),n?.(t)}catch{Ie(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Cn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Ie(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Fe(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Fe(this,"isSyncFontLoadingSupported",Vs||ts.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Sn(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fe(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(D,z){return D.charCodeAt(z)<<24|D.charCodeAt(z+1)<<16|D.charCodeAt(z+2)<<8|D.charCodeAt(z+3)&255}function s(D,z,K,Z){const J=D.substring(0,z),H=D.substring(z+K);return J+Z+H}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let f=0;function p(D,z){if(++f>30){Ie("Load test font never loaded."),z();return}if(h.font="30px "+D,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(p.bind(null,D,z))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const C=16,A=1482184792;let T=n(v,C);for(a=0,l=g.length-3;a<l;a+=4)T=T-A+n(g,a)|0;a<g.length&&(T=T-A+n(g+"XXX",a)|0),v=s(v,C,4,A3(T));const S=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${g}";src:${S}}`;this.insertRule(R);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const D of[t.loadedName,g]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=D,M.append(z)}this._document.body.append(M),p(g,()=>{M.remove(),e.complete()})}}class H3{#t;constructor(t,e=null,n,s){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){Ie(`getPathGenerator - ignoring character: "${l}".`)}const a=n5(s?.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){Fe(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){Fe(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Zu{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let s=0;for(const f of Zu.strings){const p=e.encode(t[f]);n[f]=p,s+=4+p.length}const a=new ArrayBuffer(s),l=new Uint8Array(a),c=new DataView(a);let h=0;for(const f of Zu.strings){const p=n[f],g=p.length;c.setUint32(h,g),l.set(p,h+4),h+=4+g}return Sn(h===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Sn(t<Zu.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Ju{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let s=0;for(const v of Ju.strings){const b=e.encode(t[v]);n[v]=b,s+=4+b.length}s+=4;let a,l,c=1+s;t.style&&(a=e.encode(t.style.style),l=e.encode(t.style.weight),c+=4+a.length+4+l.length);const h=new ArrayBuffer(c),f=new Uint8Array(h),p=new DataView(h);let g=0;p.setUint8(g++,t.guessFallback?1:0),p.setUint32(g,0),g+=4,s=0;for(const v of Ju.strings){const b=n[v],C=b.length;s+=4+C,p.setUint32(g,C),f.set(b,g+4),g+=4+C}return p.setUint32(g-s-4,s),t.style&&(p.setUint32(g,a.length),f.set(a,g+4),g+=4+a.length,p.setUint32(g,l.length),f.set(l,g+4),g+=4+l.length),Sn(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Sn(t<Ju.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const s=this.#e.getUint32(t),a=this.#i.decode(new Uint8Array(this.#t,t+4,s));return{style:n,weight:a}}}class zn{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){Sn(t<zn.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,s=this.#o.getUint8(e)>>n&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Sn(t<zn.numbers.length,"Invalid number index"),this.#o.getFloat64(zn.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=zn.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<4;s++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=zn.#i;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<6;s++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=zn.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<3;s++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#f(t){Sn(t<zn.strings.length,"Invalid string index");let e=zn.#r+4;for(let a=0;a<t;a++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),s=new Uint8Array(n);return s.set(new Uint8Array(this.#a,e+4,n)),this.#s.decode(s)}get fallbackName(){return this.#f(0)}get loadedName(){return this.#f(1)}get mimetype(){return this.#f(2)}get name(){return this.#f(3)}get data(){let t=zn.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a!==0)return new Uint8Array(this.#a,t+4,a)}clearData(){let t=zn.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,a).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=zn.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#a,t+4,s)),new Zu(a.buffer)}get systemFontInfo(){let t=zn.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(this.#a,t+4,n)),new Ju(s.buffer)}static write(t){const e=t.systemFontInfo?Ju.write(t.systemFontInfo):null,n=t.cssFontInfo?Zu.write(t.cssFontInfo):null,s=new TextEncoder,a={};let l=0;for(const A of zn.strings)a[A]=s.encode(t[A]),l+=4+a[A].length;const c=zn.#r+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(c),f=new Uint8Array(h),p=new DataView(h);let g=0;const v=zn.bools.length;let b=0,C=0;for(let A=0;A<v;A++){const T=t[zn.bools[A]];b|=(T===void 0?0:T?2:1)<<C,C+=2,(C===8||A===v-1)&&(p.setUint8(g++,b),b=0,C=0)}Sn(g===zn.#t,"FontInfo.write: Boolean properties offset mismatch");for(const A of zn.numbers)p.setFloat64(g,t[A]),g+=8;if(Sn(g===zn.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(g++,4);for(const A of t.bbox)p.setInt16(g,A,!0),g+=2}else p.setUint8(g++,0),g+=8;if(Sn(g===zn.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(g++,6);for(const A of t.fontMatrix)p.setFloat64(g,A,!0),g+=8}else p.setUint8(g++,0),g+=48;if(Sn(g===zn.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(g++,1);for(const A of t.defaultVMetrics)p.setInt16(g,A,!0),g+=2}else p.setUint8(g++,0),g+=6;Sn(g===zn.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(zn.#r,0),g+=4;for(const A of zn.strings){const T=a[A],S=T.length;p.setUint32(g,S),f.set(T,g+4),g+=4+S}if(p.setUint32(zn.#r,g-zn.#r-4),!e)p.setUint32(g,0),g+=4;else{const A=e.byteLength;p.setUint32(g,A),Sn(g+4+A<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),g+4),g+=4+A}if(!n)p.setUint32(g,0),g+=4;else{const A=n.byteLength;p.setUint32(g,A),Sn(g+4+A<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),g+4),g+=4+A}return t.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,t.data.length),f.set(t.data,g+4),g+=4+t.data.length),Sn(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}}class cs{static#t=0;static#e=1;static#i=2;static#n=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,s=[],a=[],l=[],c=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],s=t[2],a=t[3],c=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(s.length/2),g=Math.floor(a.length/3),v=l.length,b=c.length;let C=0;for(const z of c)C+=1,C=Math.ceil(C/4)*4,C+=4+z.coords.length*4,C+=4+z.colors.length*4,z.verticesPerRow!==void 0&&(C+=4);const A=20+p*8+g*3+v*8+(n?16:0)+(f?3:0)+C,T=new ArrayBuffer(A),S=new DataView(T),R=new Uint8Array(T);S.setUint8(cs.#t,e),S.setUint8(cs.#e,n?1:0),S.setUint8(cs.#i,f?1:0),S.setUint8(cs.#n,h),S.setUint32(cs.#r,p,!0),S.setUint32(cs.#a,g,!0),S.setUint32(cs.#s,v,!0),S.setUint32(cs.#o,b,!0);let M=20;new Float32Array(T,M,p*2).set(s),M+=p*8,R.set(a,M),M+=g*3;for(const[z,K]of l)S.setFloat32(M,z,!0),M+=4,S.setUint32(M,parseInt(K.slice(1),16),!0),M+=4;if(n)for(const z of n)S.setFloat32(M,z,!0),M+=4;f&&(R.set(f,M),M+=3);for(let z=0;z<c.length;z++){const K=c[z];S.setUint8(M,K.type),M+=1,M=Math.ceil(M/4)*4,S.setUint32(M,K.coords.length,!0),M+=4,new Int32Array(T,M,K.coords.length).set(K.coords),M+=K.coords.length*4,S.setUint32(M,K.colors.length,!0),M+=4,new Int32Array(T,M,K.colors.length).set(K.colors),M+=K.colors.length*4,K.verticesPerRow!==void 0&&(S.setUint32(M,K.verticesPerRow,!0),M+=4)}return T}getIR(){const t=this.view,e=this.data[cs.#t],n=!!this.data[cs.#e],s=!!this.data[cs.#i],a=t.getUint32(cs.#r,!0),l=t.getUint32(cs.#a,!0),c=t.getUint32(cs.#s,!0),h=t.getUint32(cs.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,a*2);f+=a*8;const g=new Uint8Array(this.buffer,f,l*3);f+=l*3;const v=[];for(let T=0;T<c;++T){const S=t.getFloat32(f,!0);f+=4;const R=t.getUint32(f,!0);f+=4,v.push([S,`#${R.toString(16).padStart(6,"0")}`])}let b=null;if(n){b=[];for(let T=0;T<4;++T)b.push(t.getFloat32(f,!0)),f+=4}let C=null;s&&(C=new Uint8Array(this.buffer,f,3),f+=3);const A=[];for(let T=0;T<h;++T){const S=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const R=t.getUint32(f,!0);f+=4;const M=new Int32Array(this.buffer,f,R);f+=R*4;const D=t.getUint32(f,!0);f+=4;const z=new Int32Array(this.buffer,f,D);f+=D*4;const K={type:S,coords:M,colors:z};S===jm.LATTICE&&(K.verticesPerRow=t.getUint32(f,!0),f+=4),A.push(K)}if(e===1)return["RadialAxial","axial",b,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",b,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const T=this.data[cs.#n];let S=null;if(p.length>0){let R=p[0],M=p[0],D=p[1],z=p[1];for(let K=0;K<p.length;K+=2){const Z=p[K],J=p[K+1];R=R>Z?Z:R,D=D>J?J:D,M=M<Z?Z:M,z=z<J?J:z}S=[R,D,M,z]}return["Mesh",T,p,g,A,S,b,C]}throw new Error(`Unsupported pattern kind: ${e}`)}}class q3{static write(t){let e,n;return ts.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}#t;constructor(t){this.#t=t}get path(){return ts.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function G3(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Vs)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function V3(r){if(Vs&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return wp(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function _d(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const Vm=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,$3=r=>typeof r=="object"&&typeof r?.name=="string",Y3=T3.bind(null,Vm,$3);class X3{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Ie("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#t.set(e,s)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Sd={DATA:1,ERROR:2},zi={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ub(){}function pr(r){if(r instanceof Xl||r instanceof Um||r instanceof Mb||r instanceof ip||r instanceof tm)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Cn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Xl(r.message);case"InvalidPDFException":return new Um(r.message);case"PasswordException":return new Mb(r.message,r.code);case"ResponseException":return new ip(r.message,r.status,r.missing);case"UnknownErrorException":return new tm(r.message,r.details)}return new tm(r.message,r.toString())}class rf{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Sd.DATA)s.resolve(t.data);else if(t.callback===Sd.ERROR)s.reject(pr(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:s,callback:Sd.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:s,callback:Sd.ERROR,callbackId:t.callbackId,reason:pr(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,s){const a=this.streamId++,l=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:c,action:t,streamId:a,data:e,desiredSize:f.desiredSize},s),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,h.postMessage({sourceName:l,targetName:c,stream:zi.PULL,streamId:a,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Sn(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:c,stream:zi.CANCEL,streamId:a,reason:pr(f)}),p.promise}},n)}#i(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this,c=this.actionHandler[t.action],h={enqueue(f,p=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:zi.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:zi.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){Sn(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:zi.ERROR,streamId:e,reason:pr(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(c,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:zi.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:zi.START_COMPLETE,streamId:e,reason:pr(f)})})}#n(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case zi.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(pr(t.reason));break;case zi.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(pr(t.reason));break;case zi.PULL:if(!c){a.postMessage({sourceName:n,targetName:s,stream:zi.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||Ub).then(function(){a.postMessage({sourceName:n,targetName:s,stream:zi.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:zi.PULL_COMPLETE,streamId:e,reason:pr(f)})});break;case zi.ENQUEUE:if(Sn(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case zi.CLOSE:if(Sn(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case zi.ERROR:Sn(l,"error should have stream controller"),l.controller.error(pr(t.reason)),this.#r(l,e);break;case zi.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(pr(t.reason)),this.#r(l,e);break;case zi.CANCEL:if(!c)break;const h=pr(t.reason);Promise.try(c.onCancel||Ub,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:zi.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:zi.CANCEL_COMPLETE,streamId:e,reason:pr(f)})}),c.sinkCapability.reject(h),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class a5{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Cn("Abstract method `_createCanvas` called.")}}class W3 extends a5{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class o5{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Cn("Abstract method `_fetch` called.")}}class zb extends o5{async _fetch(t){const e=await _f(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):wp(e)}}class l5{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,a){return"none"}destroy(t=!1){}}class K3 extends l5{#t;#e;#i;#n;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(el,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#r.createElementNS(el,"defs"),t.append(n),n.append(this.#i),this.#r.body.append(t)}return this.#i}#f(t){if(t.length===1){const h=t[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=h[g]/255;const p=f.join(",");return[p,p,p]}const[e,n,s]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,l[h]=n[h]/255,c[h]=s[h]/255;return[a.join(","),l.join(","),c.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(xp(e)?Ie('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Jv(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,s,a]=this.#f(t),l=t.length===1?n:`${n}${s}${a}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const c=`g_${this.#n}_transfer_map_${this.#s++}`,h=this.#h(c);this.#o.set(t,h),this.#o.set(l,h);const f=this.#g(c);return this.#p(n,s,a,f),h}addHCMFilter(t,e){const n=`${t}-${e}`,s="base";let a=this.#c.get(s);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#c.set(s,a)),!t||!e))return a.url;const l=this.#v(t);t=ne.makeHexColor(...l);const c=this.#v(e);if(e=ne.makeHexColor(...c),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let b=0;b<=255;b++){const C=b/255;h[b]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#n}_hcm_filter`,g=a.filter=this.#g(p);this.#p(f,f,f,g),this.#m(g);const v=(b,C)=>{const A=l[b]/255,T=c[b]/255,S=new Array(C+1);for(let R=0;R<=C;R++)S[R]=A+R/C*(T-A);return S.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),g),a.url=this.#h(p),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#f([t]),s=`alpha_${n}`;if(e=this.#o.get(s),e)return this.#o.set(t,e),e;const a=`g_${this.#n}_alpha_map_${this.#s++}`,l=this.#h(a);this.#o.set(t,l),this.#o.set(s,l);const c=this.#g(a);return this.#b(n,c),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,s;if(t?([n]=this.#f([t]),s=`luminosity_${n}`):s="luminosity",e=this.#o.get(s),e)return this.#o.set(t,e),e;const a=`g_${this.#n}_luminosity_map_${this.#s++}`,l=this.#h(a);this.#o.set(t,l),this.#o.set(s,l);const c=this.#g(a);return this.#d(c),t&&this.#b(n,c),l}addHighlightHCMFilter(t,e,n,s,a){const l=`${e}-${n}-${s}-${a}`;let c=this.#c.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(t,c)),!e||!n))return c.url;const[h,f]=[e,n].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,b]=[s,a].map(this.#v.bind(this));g<p&&([p,g,v,b]=[g,p,b,v]),this.#l.style.color="";const C=(S,R,M)=>{const D=new Array(256),z=(g-p)/M,K=S/255,Z=(R-S)/(255*M);let J=0;for(let H=0;H<=M;H++){const lt=Math.round(p+H*z),P=K+H*Z;for(let G=J;G<=lt;G++)D[G]=P;J=lt+1}for(let H=J;H<256;H++)D[H]=D[J-1];return D.join(",")},A=`g_${this.#n}_hcm_${t}_filter`,T=c.filter=this.#g(A);return this.#m(T),this.#p(C(v[0],b[0],5),C(v[1],b[1],5),C(v[2],b[2],5),T),c.url=this.#h(A),c.url}destroy(t=!1){t&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#d(t){const e=this.#r.createElementNS(el,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(el,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(el,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const s=this.#r.createElementNS(el,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)}#p(t,e,n,s){const a=this.#r.createElementNS(el,"feComponentTransfer");s.append(a),this.#u(a,"feFuncR",t),this.#u(a,"feFuncG",e),this.#u(a,"feFuncB",n)}#b(t,e){const n=this.#r.createElementNS(el,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#v(t){return this.#l.style.color=t,Cf(getComputedStyle(this.#l).getPropertyValue("color"))}}class c5{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Cn("Abstract method `_fetch` called.")}}class Hb extends c5{async _fetch(t){const e=await _f(t,"arraybuffer");return new Uint8Array(e)}}class u5{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Cn("Abstract method `_fetch` called.")}}class qb extends u5{async _fetch(t){const e=await _f(t,"arraybuffer");return new Uint8Array(e)}}Vs&&Ie("Please use the `legacy` build in Node.js environments.");async function N0(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class Z3 extends l5{}class J3 extends a5{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Q3 extends o5{async _fetch(t){return N0(t)}}class t4 extends c5{async _fetch(t){return N0(t)}}class e4 extends u5{async _fetch(t){return N0(t)}}const Fu="__forcedDependency",{floor:Gb,ceil:Vb}=Math;function Cd(r,t,e,n,s,a){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],n),r[t*4+2]=Math.max(r[t*4+2],s),r[t*4+3]=Math.max(r[t*4+3],a)}const $m=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class n4{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===$m}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Ed=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};class i4{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Fu]:[]};#i=new Map;#n=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#f=new Map;#h=new Map;#d;#m;#g;#u;#p;constructor(t,e,n=!1){this.#d=t.width,this.#m=t.height,this.#b(e),n&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const n=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill($m,e.length)):this.#u.fill($m)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Fu]:{__proto__:this.#e[Fu]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const n=this.#n.pop();return n!==void 0&&(Ed(this.#p,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Ed(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Ed(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(ne.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#i.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Fu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Fu,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,s,a,l){const c=ne.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];ne.axialAlignedBoundingBox([n,a,s,l],c,h);const f=ne.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,n,s,a,l){const c=this.#s;if(c[0]===1/0)return this;const h=ne.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(c[0]===-1/0)return ne.axialAlignedBoundingBox([n,a,s,l],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return ne.axialAlignedBoundingBox([n,a,s,l],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],c[3])),this}recordCharacterBBox(t,e,n,s=1,a=0,l=0,c){const h=n.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(n),f!==!1&&(p=[0,0,0,0],ne.axialAlignedBoundingBox(h,n.fontMatrix,p),(s!==1||a!==0||l!==0)&&ne.scaleMinMax([s,0,0,-s,a,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!c)return this.recordFullPageBBox(t);const g=c();return h&&p&&f===void 0&&(f=p[0]<=a-g.actualBoundingBoxLeft&&p[2]>=a+g.actualBoundingBoxRight&&p[1]<=l-g.actualBoundingBoxAscent&&p[3]>=l+g.actualBoundingBoxDescent,this.#h.set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,a-g.actualBoundingBoxLeft,a+g.actualBoundingBoxRight,l-g.actualBoundingBoxAscent,l+g.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#d,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,s=this.#t,a=this.#e;for(const l of e)l in this.#t?n.add(s[l]):l in a&&a[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Fu]),this.#p){const n=Ed(this.#p,t),{dependencies:s}=n;this.#l.forEach(s.add,s),this.#n.forEach(s.add,s),this.#r.forEach(s.add,s),s.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=Gb(this.#o[0]*256/this.#d),s=Gb(this.#o[1]*256/this.#m),a=Vb(this.#o[2]*256/this.#d),l=Vb(this.#o[3]*256/this.#m);Cd(this.#g,t,n,s,a,l);for(const c of this.#l)c!==t&&Cd(this.#g,c,n,s,a,l);for(const c of this.#n)c!==t&&Cd(this.#g,c,n,s,a,l);for(const c of this.#r)c!==t&&Cd(this.#g,c,n,s,a,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#f.get(t);return this.#f.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new n4(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class sp{#t;#e;#i;#n=0;#r=0;constructor(t,e,n){if(t instanceof sp&&t.#i===!!n)return t;this.#t=t,this.#e=e,this.#i=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,s,a,l){return this.#i||this.#t.recordClipBox(this.#e,e,n,s,a,l),this}recordBBox(t,e,n,s,a,l){return this.#i||this.#t.recordBBox(this.#e,e,n,s,a,l),this}recordCharacterBBox(t,e,n,s,a,l,c){return this.#i||this.#t.recordCharacterBBox(this.#e,e,n,s,a,l,c),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const oa={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},_s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ym(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),r.clip(s)}class L0{isModifyingCurrentTransform(){return!1}getPattern(){Cn("Abstract method `getPattern` called.")}}class s4 extends L0{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,s=this._p0,a=this._p1;if(e&&(s=s.slice(),a=a.slice(),ne.applyTransform(s,e),ne.applyTransform(a,e)),this._type==="axial")n=t.createLinearGradient(s[0],s[1],a[0],a[1]);else if(this._type==="radial"){let l=this._r0,c=this._r1;if(e){const h=new Float32Array(2);ne.singularValueDecompose2dScale(e,h),l*=h[0],c*=h[0]}n=t.createRadialGradient(s[0],s[1],l,a[0],a[1],c)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,s){let a;if(s===_s.STROKE||s===_s.FILL){if(this.isOriginBased()){let v=ne.transform(n,e.baseTransform);this.matrix&&(v=ne.transform(v,this.matrix));const b=.001,C=Math.hypot(v[0],v[1]),A=Math.hypot(v[2],v[3]),T=(v[0]*v[2]+v[1]*v[3])/(C*A);if(Math.abs(T)<b)if(this.isRadial()){if(Math.abs(C-A)<b)return this._createGradient(t,v)}else return this._createGradient(t,v)}const l=e.current.getClippedPathBoundingBox(s,di(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",c,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=ne.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Ym(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else Ym(t,this._bbox),a=this._createGradient(t);return a}}function im(r,t,e,n,s,a,l,c){const h=t.coords,f=t.colors,p=r.data,g=r.width*4;let v;h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v),h[n+1]>h[s+1]&&(v=n,n=s,s=v,v=l,l=c,c=v),h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v);const b=(h[e]+t.offsetX)*t.scaleX,C=(h[e+1]+t.offsetY)*t.scaleY,A=(h[n]+t.offsetX)*t.scaleX,T=(h[n+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,R=(h[s+1]+t.offsetY)*t.scaleY;if(C>=R)return;const M=f[a],D=f[a+1],z=f[a+2],K=f[l],Z=f[l+1],J=f[l+2],H=f[c],lt=f[c+1],P=f[c+2],G=Math.round(C),rt=Math.round(R);let Q,gt,V,et,at,wt,Rt,Y;for(let k=G;k<=rt;k++){if(k<T){const ht=k<C?0:(C-k)/(C-T);Q=b-(b-A)*ht,gt=M-(M-K)*ht,V=D-(D-Z)*ht,et=z-(z-J)*ht}else{let ht;k>R?ht=1:T===R?ht=0:ht=(T-k)/(T-R),Q=A-(A-S)*ht,gt=K-(K-H)*ht,V=Z-(Z-lt)*ht,et=J-(J-P)*ht}let U;k<C?U=0:k>R?U=1:U=(C-k)/(C-R),at=b-(b-S)*U,wt=M-(M-H)*U,Rt=D-(D-lt)*U,Y=z-(z-P)*U;const W=Math.round(Math.min(Q,at)),st=Math.round(Math.max(Q,at));let ct=g*k+W*4;for(let ht=W;ht<=st;ht++)U=(Q-ht)/(Q-at),U<0?U=0:U>1&&(U=1),p[ct++]=gt-(gt-wt)*U|0,p[ct++]=V-(V-Rt)*U|0,p[ct++]=et-(et-Y)*U|0,p[ct++]=255}}function r4(r,t,e){const n=t.coords,s=t.colors;let a,l;switch(t.type){case jm.LATTICE:const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,f=c-1;for(a=0;a<h;a++){let p=a*c;for(let g=0;g<f;g++,p++)im(r,e,n[p],n[p+1],n[p+c],s[p],s[p+1],s[p+c]),im(r,e,n[p+c+1],n[p+1],n[p+c],s[p+c+1],s[p+1],s[p+c])}break;case jm.TRIANGLES:for(a=0,l=n.length;a<l;a+=3)im(r,e,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class a4 extends L0{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),b=f/g,C=p/v,A={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-h,scaleX:1/b,scaleY:1/C},T=g+4,S=v+4,R=n.getCanvas("mesh",T,S),M=R.context,D=M.createImageData(g,v);if(e){const K=D.data;for(let Z=0,J=K.length;Z<J;Z+=4)K[Z]=e[0],K[Z+1]=e[1],K[Z+2]=e[2],K[Z+3]=255}for(const K of this._figures)r4(D,K,A);return M.putImageData(D,2,2),{canvas:R.canvas,offsetX:c-2*b,offsetY:h-2*C,scaleX:b,scaleY:C}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){Ym(t,this._bbox);const a=new Float32Array(2);if(s===_s.SHADING)ne.singularValueDecompose2dScale(di(t),a);else if(this.matrix){ne.singularValueDecompose2dScale(this.matrix,a);const[c,h]=a;ne.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=c,a[1]*=h}else ne.singularValueDecompose2dScale(e.baseTransform,a);const l=this._createMeshCanvas(a,s===_s.SHADING?null:this._background,e.cachedCanvases);return s!==_s.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class o4 extends L0{getPattern(){return"hotpink"}}function l4(r){switch(r[0]){case"RadialAxial":return new s4(r);case"Mesh":return new a4(r);case"Dummy":return new o4}throw new Error(`Unknown IR type: ${r[0]}`)}const $b={COLORED:1,UNCOLORED:2};class k0{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t,e){const{bbox:n,operatorList:s,paintType:a,tilingType:l,color:c,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),vp("TilingType: "+l);const g=n[0],v=n[1],b=n[2],C=n[3],A=b-g,T=C-v,S=new Float32Array(2);ne.singularValueDecompose2dScale(this.matrix,S);const[R,M]=S;ne.singularValueDecompose2dScale(this.baseTransform,S);const D=R*S[0],z=M*S[1];let K=A,Z=T,J=!1,H=!1;const lt=Math.ceil(f*D),P=Math.ceil(p*z),G=Math.ceil(A*D),rt=Math.ceil(T*z);lt>=G?K=f:J=!0,P>=rt?Z=p:H=!0;const Q=this.getSizeAndScale(K,this.ctx.canvas.width,D),gt=this.getSizeAndScale(Z,this.ctx.canvas.height,z),V=t.cachedCanvases.getCanvas("pattern",Q.size,gt.size),et=V.context,at=h.createCanvasGraphics(et,e);if(at.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(at,a,c),et.translate(-Q.scale*g,-gt.scale*v),at.transform(0,Q.scale,0,0,gt.scale,0,0),et.save(),at.dependencyTracker?.save(),this.clipBbox(at,g,v,b,C),at.baseTransform=di(at.ctx),at.executeOperatorList(s),at.endDrawing(),at.dependencyTracker?.restore(),et.restore(),J||H){const wt=V.canvas;J&&(K=f),H&&(Z=p);const Rt=this.getSizeAndScale(K,this.ctx.canvas.width,D),Y=this.getSizeAndScale(Z,this.ctx.canvas.height,z),k=Rt.size,U=Y.size,W=t.cachedCanvases.getCanvas("pattern-workaround",k,U),st=W.context,ct=J?Math.floor(A/f):0,ht=H?Math.floor(T/p):0;for(let Ct=0;Ct<=ct;Ct++)for(let _t=0;_t<=ht;_t++)st.drawImage(wt,k*Ct,U*_t,k,U,0,0,k,U);return{canvas:W.canvas,scaleX:Rt.scale,scaleY:Y.scale,offsetX:g,offsetY:v}}return{canvas:V.canvas,scaleX:Q.scale,scaleY:gt.scale,offsetX:g,offsetY:v}}getSizeAndScale(t,e,n){const s=Math.max(k0.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,s,a){const l=s-e,c=a-n;t.ctx.rect(e,n,l,c),ne.axialAlignedBoundingBox([e,n,s,a],di(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,a=t.current;switch(e){case $b.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;s.fillStyle=a.fillColor=l,s.strokeStyle=a.strokeColor=c;break;case $b.UNCOLORED:s.fillStyle=s.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new w3(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s,a){let l=n;s!==_s.SHADING&&(l=ne.transform(l,e.baseTransform),this.matrix&&(l=ne.transform(l,this.matrix)));const c=this.createPatternCanvas(e,a);let h=new DOMMatrix(l);h=h.translate(c.offsetX,c.offsetY),h=h.scale(1/c.scaleX,1/c.scaleY);const f=t.createPattern(c.canvas,"repeat");return f.setTransform(h),f}}function c4({src:r,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=ts.isLittleEndian?4278190080:255,[h,f]=l?[a,c]:[c,a],p=n>>3,g=n&7,v=r.length;e=new Uint32Array(e.buffer);let b=0;for(let C=0;C<s;C++){for(const T=t+p;t<T;t++){const S=t<v?r[t]:255;e[b++]=S&128?f:h,e[b++]=S&64?f:h,e[b++]=S&32?f:h,e[b++]=S&16?f:h,e[b++]=S&8?f:h,e[b++]=S&4?f:h,e[b++]=S&2?f:h,e[b++]=S&1?f:h}if(g===0)continue;const A=t<v?r[t++]:255;for(let T=0;T<g;T++)e[b++]=A&1<<7-T?f:h}return{srcPos:t,destPos:b}}const Yb=16,Xb=100,u4=15,Wb=10,mr=16,sm=new DOMMatrix,jr=new Float32Array(2),Xu=new Float32Array([1/0,1/0,-1/0,-1/0]);function h4(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},r.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},r.transform=function(e,n,s,a,l,c){t.transform(e,n,s,a,l,c),this.__originalTransform(e,n,s,a,l,c)},r.setTransform=function(e,n,s,a,l,c){t.setTransform(e,n,s,a,l,c),this.__originalSetTransform(e,n,s,a,l,c)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,s,a,l,c){t.bezierCurveTo(e,n,s,a,l,c),this.__originalBezierCurveTo(e,n,s,a,l,c)},r.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class f4{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Td(r,t,e,n,s,a,l,c,h,f){const[p,g,v,b,C,A]=di(r);if(g===0&&v===0){const R=l*p+C,M=Math.round(R),D=c*b+A,z=Math.round(D),K=(l+h)*p+C,Z=Math.abs(Math.round(K)-M)||1,J=(c+f)*b+A,H=Math.abs(Math.round(J)-z)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(b),M,z),r.drawImage(t,e,n,s,a,0,0,Z,H),r.setTransform(p,g,v,b,C,A),[Z,H]}if(p===0&&b===0){const R=c*v+C,M=Math.round(R),D=l*g+A,z=Math.round(D),K=(c+f)*v+C,Z=Math.abs(Math.round(K)-M)||1,J=(l+h)*g+A,H=Math.abs(Math.round(J)-z)||1;return r.setTransform(0,Math.sign(g),Math.sign(v),0,M,z),r.drawImage(t,e,n,s,a,0,0,H,Z),r.setTransform(p,g,v,b,C,A),[H,Z]}r.drawImage(t,e,n,s,a,l,c,h,f);const T=Math.hypot(p,g),S=Math.hypot(v,b);return[T*h,S*f]}class Kb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Fm;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Qi.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Xu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=_s.FILL,e=null){const n=this.minMax.slice();if(t===_s.STROKE){e||Cn("Stroke bounding box must include transform."),ne.singularValueDecompose2dScale(e,jr);const s=jr[0]*this.lineWidth/2,a=jr[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){const t=ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Xu,0)}getClippedPathBoundingBox(t=_s.FILL,e=null){return ne.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Zb(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%mr,a=(e-s)/mr,l=s===0?a:a+1,c=r.createImageData(n,mr);let h=0,f;const p=t.data,g=c.data;let v,b,C,A;if(t.kind===zd.GRAYSCALE_1BPP){const T=p.byteLength,S=new Uint32Array(g.buffer,0,g.byteLength>>2),R=S.length,M=n+7>>3,D=4294967295,z=ts.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(C=v<a?mr:s,f=0,b=0;b<C;b++){const K=T-h;let Z=0;const J=K>M?n:K*8-7,H=J&-8;let lt=0,P=0;for(;Z<H;Z+=8)P=p[h++],S[f++]=P&128?D:z,S[f++]=P&64?D:z,S[f++]=P&32?D:z,S[f++]=P&16?D:z,S[f++]=P&8?D:z,S[f++]=P&4?D:z,S[f++]=P&2?D:z,S[f++]=P&1?D:z;for(;Z<J;Z++)lt===0&&(P=p[h++],lt=128),S[f++]=P&lt?D:z,lt>>=1}for(;f<R;)S[f++]=0;r.putImageData(c,0,v*mr)}}else if(t.kind===zd.RGBA_32BPP){for(b=0,A=n*mr*4,v=0;v<a;v++)g.set(p.subarray(h,h+A)),h+=A,r.putImageData(c,0,b),b+=mr;v<l&&(A=n*s*4,g.set(p.subarray(h,h+A)),r.putImageData(c,0,b))}else if(t.kind===zd.RGB_24BPP)for(C=mr,A=n*C,v=0;v<l;v++){for(v>=a&&(C=s,A=n*C),f=0,b=A;b--;)g[f++]=p[h++],g[f++]=p[h++],g[f++]=p[h++],g[f++]=255;r.putImageData(c,0,v*mr)}else throw new Error(`bad image kind: ${t.kind}`)}function Jb(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%mr,a=(e-s)/mr,l=s===0?a:a+1,c=r.createImageData(n,mr);let h=0;const f=t.data,p=c.data;for(let g=0;g<l;g++){const v=g<a?mr:s;({srcPos:h}=c4({src:f,srcPos:h,dest:p,width:n,height:v,nonBlackColor:0})),r.putImageData(c,0,g*mr)}}function Kh(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Nd(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function Qb(r,t){if(t)return!0;ne.singularValueDecompose2dScale(r,jr);const e=Math.fround(Ao.pixelRatio*oh.PDF_TO_CSS_UNITS);return jr[0]<=e&&jr[1]<=e}const d4=["butt","round","square"],p4=["miter","round","bevel"],g4={},ty={};class Qu{constructor(t,e,n,s,a,{optionalContentConfig:l,markedContentStack:c=null},h,f,p){this.ctx=t,this.current=new Kb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new f4(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...di(this.compositeCtx))}this.ctx.save(),Nd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=di(this.ctx)}executeOperatorList(t,e,n,s,a){const l=t.argsArray,c=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const p=f-h>Wb&&typeof n=="function",g=p?Date.now()+u4:0;let v=0;const b=this.commonObjs,C=this.objs;let A,T;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,n),h;if(!a||a(h))if(A=c[h],T=l[h]??null,A!==df.dependency)T===null?this[A](h):this[A](h,...T);else for(const S of T){this.dependencyTracker?.recordNamedData(S,h);const R=S.startsWith("g_")?b:C;if(!R.has(S))return R.get(S,n),h}if(h++,h===f)return h;if(p&&++v>Wb){if(Date.now()>g)return n(),h;v=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=s,f="prescale1",p,g;for(;a>2&&c>1||l>2&&h>1;){let v=c,b=h;a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/v),l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/b),p=this.cachedCanvases.getCanvas(f,v,b),g=p.context,g.clearRect(0,0,v,b),g.drawImage(t,0,0,c,h,0,0,v,b),t=p.canvas,c=v,h=b,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t,e){const n=this.ctx,{width:s,height:a}=e,l=this.current.fillColor,c=this.current.patternFill,h=di(n);let f,p,g,v;if((e.bitmap||e.data)&&e.count>1){const lt=e.bitmap||e.data.buffer;p=JSON.stringify(c?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(lt),f||(f=new Map,this._cachedBitmapsMap.set(lt,f));const P=f.get(p);if(P&&!c){const G=Math.round(Math.min(h[0],h[2])+h[4]),rt=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,oa.transformAndFill),{canvas:P,offsetX:G,offsetY:rt}}g=P}g||(v=this.cachedCanvases.getCanvas("maskCanvas",s,a),Jb(v.context,e));let b=ne.transform(h,[1/s,0,0,-1/a,0,0]);b=ne.transform(b,[1,0,0,1,0,-a]);const C=Xu.slice();ne.axialAlignedBoundingBox([0,0,s,a],b,C);const[A,T,S,R]=C,M=Math.round(S-A)||1,D=Math.round(R-T)||1,z=this.cachedCanvases.getCanvas("fillCanvas",M,D),K=z.context,Z=A,J=T;K.translate(-Z,-J),K.transform(...b),g||(g=this._scaleImage(v.canvas,go(K)),g=g.img,f&&c&&f.set(p,g)),K.imageSmoothingEnabled=Qb(di(K),e.interpolate),Td(K,g,0,0,g.width,g.height,0,0,s,a),K.globalCompositeOperation="source-in";const H=ne.transform(go(K),[1,0,0,1,-Z,-J]);return K.fillStyle=c?l.getPattern(n,this,H,_s.FILL,t):l,K.fillRect(0,0,s,a),f&&!c&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,z.canvas)),this.dependencyTracker?.recordDependencies(t,oa.transformAndFill),{canvas:z.canvas,offsetX:Math.round(Z),offsetY:Math.round(J)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=d4[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=p4[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,s]of e)switch(n){case"LW":this.setLineWidth(t,s);break;case"LC":this.setLineCap(t,s);break;case"LJ":this.setLineJoin(t,s);break;case"ML":this.setMiterLimit(t,s);break;case"D":this.setDash(t,s[0],s[1]);break;case"RI":this.setRenderingIntent(t,s);break;case"FL":this.setFlatness(t,s);break;case"Font":this.setFont(t,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),Kh(this.suspendedCtx,l),h4(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Kh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const a=s[0],l=s[1],c=s[2]-a,h=s[3]-l;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,a,l,c,h,f,p,g){let v=t.canvas,b=h-p,C=f-g;if(l)if(b<0||C<0||b+n>v.width||C+s>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,s),S=T.context;S.drawImage(v,-b,-C),S.globalCompositeOperation="destination-atop",S.fillStyle=l,S.fillRect(0,0,n,s),S.globalCompositeOperation="source-over",v=T.canvas,b=C=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(b,C,n,s),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(b,C,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const A=new Path2D;A.rect(h,f,n,s),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(v,b,C,n,s,h,f,n,s),e.restore()}save(t){this.inSMaskMode&&Kh(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Kh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,a,l,c){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,s,a,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,s){let[a]=n;if(!s){a||=n[0]=new Path2D,this[e](t,a);return}if(this.dependencyTracker!==null){const l=e===df.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-l,s[2]+l,s[1]-l,s[3]+l).recordDependencies(t,["transform"])}a instanceof Path2D||(a=n[0]=n5(a)),ne.axialAlignedBoundingBox(s,di(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const l=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,go(s),_s.STROKE,t),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,oa.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(_s.STROKE,di(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const s=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const f=a.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(t),s.save(),s.fillStyle=a.getPattern(s,this,go(s),_s.FILL,t),f){const p=new Path2D;p.addPath(e,s.getTransform().invertSelf().multiplySelf(f)),e=p}c=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),this.dependencyTracker?.recordDependencies(t,oa.fill),c&&(s.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,oa.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=g4}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=ty}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,a=n.getTransform().invertSelf();for(const{transform:l,x:c,y:h,fontSize:f,path:p}of e)p&&s.addPath(p,new DOMMatrix(l).preMultiplySelf(a).translate(c,h).scale(f,-f));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),a=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=s.fontMatrix||Fm,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Ie("Invalid font matrix for font "+e),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const l=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const f=s.italic?"italic":"normal";let p=n;n<Yb?p=Yb:n>Xb&&(p=Xb),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${c}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s}paintChar(t,e,n,s,a,l){const c=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,v=p&Qi.FILL_STROKE_MASK,b=!!(p&Qi.ADD_TO_PATH_FLAG),C=h.patternFill&&!f.missingFile,A=h.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||b||C||A)&&!f.missingFile&&(T=f.getPathGenerator(this.commonObjs,e)),T&&(f.disableFontFace||C||A)){c.save(),c.translate(n,s),c.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(t,c,f);let S;if(v===Qi.FILL||v===Qi.FILL_STROKE)if(a){S=c.getTransform(),c.setTransform(...a);const R=this.#i(T,S,a);c.fill(R)}else c.fill(T);if(v===Qi.STROKE||v===Qi.FILL_STROKE)if(l){S||=c.getTransform(),c.setTransform(...l);const{a:R,b:M,c:D,d:z}=S,K=ne.inverseTransform(l),Z=ne.transform([R,M,D,z,0,0],K);ne.singularValueDecompose2dScale(Z,jr),c.lineWidth*=Math.max(jr[0],jr[1])/g,c.stroke(this.#i(T,S,l))}else c.lineWidth/=g,c.stroke(T);c.restore()}else(v===Qi.FILL||v===Qi.FILL_STROKE)&&(c.fillText(e,n,s),this.dependencyTracker?.recordCharacterBBox(t,c,f,g,n,s,()=>c.measureText(e))),(v===Qi.STROKE||v===Qi.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,c,f,g,n,s,()=>c.measureText(e)).recordDependencies(t,oa.stroke),c.strokeText(e,n,s));b&&((this.pendingTextPaths||=[]).push({transform:di(c),x:n,y:s,fontSize:g,path:T}),this.dependencyTracker?.recordCharacterBBox(t,c,f,g,n,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Fe(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,oa.showText).resetBBox(t),this.current.textRenderingMode&Qi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const a=n.fontSize;if(a===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,c=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,g=n.textHScale*p,v=e.length,b=s.vertical,C=b?1:-1,A=s.defaultVMetrics,T=a*n.fontMatrix[0],S=n.textRenderingMode===Qi.FILL&&!s.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(g,-1):l.scale(g,1);let R,M;const D=n.textRenderingMode&Qi.FILL_STROKE_MASK,z=D===Qi.FILL||D===Qi.FILL_STROKE,K=D===Qi.STROKE||D===Qi.FILL_STROKE;if(z&&n.patternFill){l.save();const P=n.fillColor.getPattern(l,this,go(l),_s.FILL,t);R=di(l),l.restore(),l.fillStyle=P}if(K&&n.patternStroke){l.save();const P=n.strokeColor.getPattern(l,this,go(l),_s.STROKE,t);M=di(l),l.restore(),l.strokeStyle=P}let Z=n.lineWidth;const J=n.textMatrixScale;if(J===0||Z===0?K&&(Z=this.getSinglePixelWidth()):Z/=J,c!==1&&(l.scale(c,c),Z/=c),l.lineWidth=Z,s.isInvalidPDFjsFont){const P=[];let G=0;for(const Q of e)P.push(Q.unicode),G+=Q.width;const rt=P.join("");if(l.fillText(rt,0,0),this.dependencyTracker!==null){const Q=l.measureText(rt);this.dependencyTracker.recordBBox(t,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=G*T*g,l.restore(),this.compose();return}let H=0,lt;for(lt=0;lt<v;++lt){const P=e[lt];if(typeof P=="number"){H+=C*P*a/1e3;continue}let G=!1;const rt=(P.isSpace?f:0)+h,Q=P.fontChar,gt=P.accent;let V,et,at=P.width;if(b){const Y=P.vmetric||A,k=-(P.vmetric?Y[1]:at*.5)*T,U=Y[2]*T;at=Y?-Y[0]:at,V=k/c,et=(H+U)/c}else V=H/c,et=0;let wt;if(s.remeasure&&at>0){wt=l.measureText(Q);const Y=wt.width*1e3/a*c;if(at<Y&&this.isFontSubpixelAAEnabled){const k=at/Y;G=!0,l.save(),l.scale(k,1),V/=k}else at!==Y&&(V+=(at-Y)/2e3*a/c)}if(this.contentVisible&&(P.isInFont||s.missingFile)){if(S&&!gt)l.fillText(Q,V,et),this.dependencyTracker?.recordCharacterBBox(t,l,wt?{bbox:null}:s,a/c,V,et,()=>wt??l.measureText(Q));else if(this.paintChar(t,Q,V,et,R,M),gt){const Y=V+a*gt.offset.x/c,k=et-a*gt.offset.y/c;this.paintChar(t,gt.fontChar,Y,k,R,M)}}const Rt=b?at*T-rt*p:at*T+rt*p;H+=Rt,G&&l.restore()}b?n.y-=H:n.x+=H*g,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,s=this.current,a=s.font,l=s.fontSize,c=s.fontDirection,h=a.vertical?1:-1,f=s.charSpacing,p=s.wordSpacing,g=s.textHScale*c,v=s.fontMatrix||Fm,b=e.length,C=s.textRenderingMode===Qi.INVISIBLE;let A,T,S,R;if(C||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(g,c);const M=this.dependencyTracker;for(this.dependencyTracker=M?new sp(M,t):null,A=0;A<b;++A){if(T=e[A],typeof T=="number"){R=h*T*l/1e3,this.ctx.translate(R,0),s.x+=R*g;continue}const D=(T.isSpace?p:0)+f,z=a.charProcOperatorList[T.operatorListId];z?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...v),this.executeOperatorList(z),this.restore()):Ie(`Type3 character "${T.operatorListId}" is not available.`);const K=[T.width,0];ne.applyTransform(K,v),S=K[0]*l+D,n.translate(S,0),s.x+=S*g}n.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,s,a,l,c){const h=new Path2D;h.rect(s,a,l-s,c-a),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,s,l,a,c).recordClipBox(t,this.ctx,s,l,a,c),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||di(this.ctx),a={createCanvasGraphics:(l,c)=>new Qu(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new sp(this.dependencyTracker,c,!0):null)};n=new k0(e,this.ctx,a,s)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=l4(this.getObject(t,e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const s=this._getPattern(t,e);n.fillStyle=s.getPattern(n,this,go(n),_s.SHADING,t);const a=go(n);if(a){const{width:l,height:c}=n.canvas,h=Xu.slice();ne.axialAlignedBoundingBox([0,0,l,c],a,h);const[f,p,g,v]=h;this.ctx.fillRect(f,p,g-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,oa.transform).recordDependencies(t,oa.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Cn("Should not call beginInlineImage")}beginImageData(){Cn("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=di(this.ctx),n)){ne.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,a,l,c]=n,h=new Path2D;h.rect(s,a,l-s,c-a),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,s,l,a,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||vp("TODO: Support non-isolated groups."),e.knockout&&Ie("Knockout groups not supported.");const s=di(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=Xu.slice();ne.axialAlignedBoundingBox(e.bbox,di(n),a);const l=[0,0,n.canvas.width,n.canvas.height];a=ne.intersect(a,l)||[0,0,0,0];const c=Math.floor(a[0]),h=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-c,1),p=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,f,p),b=v.context;b.translate(-c,-h),b.transform(...s);let C=new Path2D;const[A,T,S,R]=e.bbox;if(C.rect(A,T,S-A,R-T),e.matrix){const M=new Path2D;M.addPath(C,new DOMMatrix(e.matrix)),C=M}b.clip(C),e.smask&&this.smaskStack.push({canvas:v.canvas,context:b,offsetX:c,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,h),n.save()),Kh(n,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=di(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);const l=Xu.slice();ne.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,s,a,l){if(this.#t(),Nd(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=h,ne.singularValueDecompose2dScale(di(this.ctx),jr);const{viewportScale:f}=this,p=Math.ceil(c*this.outputScaleX*f),g=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:v,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(jr[0],0,0,-jr[1],0,h*jr[1]),Nd(this.ctx)}else{Nd(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],c,h),this.ctx.clip(f)}}this.current=new Kb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const s=this.ctx,a=this._createMaskCanvas(t,e),l=a.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+l.width,a.offsetY,a.offsetY+l.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,s=0,a=0,l,c){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=di(h);h.transform(n,s,a,l,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let g=0,v=c.length;g<v;g+=2){const b=ne.transform(f,[n,s,a,l,c[g],c[g+1]]);h.drawImage(p.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(t,this.ctx,b[4],b[4]+p.canvas.width,b[5],b[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,oa.transformAndFill);for(const l of e){const{data:c,width:h,height:f,transform:p}=l,g=this.cachedCanvases.getCanvas("maskCanvas",h,f),v=g.context;v.save();const b=this.getObject(t,c,l);Jb(v,b),v.globalCompositeOperation="source-in",v.fillStyle=a?s.getPattern(v,this,go(n),_s.FILL,t):s,v.fillRect(0,0,h,f),v.restore(),n.save(),n.transform(...p),n.scale(1,-1),Td(n,g.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,h,0,f),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,s,a){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Ie("Dependent image isn't ready yet");return}const c=l.width,h=l.height,f=[];for(let p=0,g=a.length;p<g;p+=2)f.push({transform:[n,0,0,s,a[p],a[p+1]],x:0,y:0,w:c,h});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,s=e.height,a=this.ctx;this.save(t);const{filter:l}=a;l!=="none"&&l!==""&&(a.filter="none"),a.scale(1/n,-1/s);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,s).context;Zb(p,e),c=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(c,go(a));a.imageSmoothingEnabled=Qb(di(a),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,a,0,n,-s,0).recordDependencies(t,oa.imageXObject).recordOperation(t),Td(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,n,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const s=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const l=e.width,c=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,c).context;Zb(f,e),a=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of n)s.save(),s.transform(...l.transform),s.scale(1,-1),Td(s,a,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,oa.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(s||(this.pendingClip===ty?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=di(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:a}=this.ctx.getTransform();let l,c;if(n===0&&s===0){const h=Math.abs(e),f=Math.abs(a);if(h===f)if(t===0)l=c=1/h;else{const p=h*t;l=c=p<1?1/p:1}else if(t===0)l=1/h,c=1/f;else{const p=h*t,g=f*t;l=p<1?1/p:1,c=g<1?1/g:1}}else{const h=Math.abs(e*a-n*s),f=Math.hypot(e,n),p=Math.hypot(s,a);if(t===0)l=p/h,c=f/h;else{const g=t*h;l=p>g?p/g:1,c=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(s||1)*a,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(a,l),sm.a=1/a,sm.d=1/l;const h=new Path2D;if(h.addPath(t,sm),c.length>0){const f=Math.max(a,l);n.setLineDash(c.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=s||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in df)Qu.prototype[r]!==void 0&&(Qu.prototype[df[r]]=Qu.prototype[r]);class th{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class m4{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const qu=Symbol("INTERNAL");class b4{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:n,usage:s,rbGroups:a}){this.#t=!!(t&Ir.DISPLAY),this.#e=!!(t&Ir.PRINT),this.name=e,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==qu&&Cn("Internal method `_setVisible` called."),this.#i=n,this.#n=e}}class y4{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Ir.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new b4(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(qu,!1);for(const n of t.on)this.#e.get(n)._setVisible(qu,!0);for(const n of t.off)this.#e.get(n)._setVisible(qu,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const a=t[s];let l;if(Array.isArray(a))l=this.#r(a);else if(this.#e.has(a))l=this.#e.get(a).visible;else return Ie(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return vp("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Ie(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Ie(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Ie(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Ie(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Ie(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Ie(`Unknown optional content policy ${t.policy}.`),!0}return Ie(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const s=this.#e.get(t);if(!s){Ie(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const l of a)l!==t&&this.#e.get(l)?._setVisible(qu,!1,!0);s._setVisible(qu,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=this.#e.get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new s5;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class _p{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,e,n){this._source=t,this.#t=e,this.#e=n}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Sn(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new this.#e(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){this._fullReader?.cancel(t);for(const e of new Set(this._rangeReaders))e.cancel(t)}}class Sp{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){Cn("Abstract method `read` called")}cancel(t){Cn("Abstract method `cancel` called")}}class Cp{_stream=null;constructor(t,e,n){this._stream=t}async read(){Cn("Abstract method `read` called")}cancel(t){Cn("Abstract method `cancel` called")}}function ey(r){return r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}class v4 extends _p{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,w4,x4);const{pdfDataRangeTransport:e}=t,{initialData:n,progressiveDone:s}=e;if(n?.length>0){const a=ey(n);this._queuedChunks.push(a)}this._progressiveDone=s,e.addRangeListener((a,l)=>{this.#t(a,l)}),e.addProgressListener((a,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:a,total:l})}),e.addProgressiveReadListener(a=>{this.#t(void 0,a)}),e.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),e.transportReady()}#t(t,e){const n=ey(e);if(t===void 0)this._fullReader?this._fullReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.keys().find(a=>a._begin===t);Sn(s,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),s._enqueue(n)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onDone=()=>this._rangeReaders.delete(n),this._source.pdfDataRangeTransport.requestDataRange(t,e)),n}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class w4 extends Sp{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:e,disableRange:n,disableStream:s}=t._source,{length:a,contentDispositionFilename:l}=e;this._queuedChunks=t._queuedChunks||[];for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._done=t._progressiveDone,this._contentLength=a,this._isStreamingSupported=!s,this._isRangeSupported=!n,S0(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class x4 extends Cp{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,e,n){super(t,e,n),this._begin=e}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function A4(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let p=c(e);return p=unescape(p),p=h(p),p=f(p),a(p)}if(e=l(r),e){const p=f(e);return a(p)}if(e=n("filename","i").exec(r),e){e=e[1];let p=c(e);return p=f(p),a(p)}function n(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(p,{fatal:!0}),b=wp(g);g=v.decode(b),t=!1}catch{}}return g}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),t&&(p=s("iso-8859-1",p))),p}function l(p){const g=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(p))!==null;){let[,A,T,S]=v;if(A=parseInt(A,10),A in g){if(A===0)break;continue}g[A]=[T,S]}const C=[];for(let A=0;A<g.length&&A in g;++A){let[T,S]=g[A];S=c(S),T&&(S=unescape(S),A===0&&(S=h(S))),C.push(S)}return C.join("")}function c(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let v=0;v<g.length;++v){const b=g[v].indexOf('"');b!==-1&&(g[v]=g[v].slice(0,b),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function h(p){const g=p.indexOf("'");if(g===-1)return p;const v=p.slice(0,g),C=p.slice(g+1).replace(/^[^']*'/,"");return s(v,C)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,b,C){if(b==="q"||b==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,T){return String.fromCharCode(parseInt(T,16))}),s(v,C);try{C=atob(C)}catch{}return s(v,C)})}return""}function h5(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function Ep(r){return URL.parse(r)?.origin??null}function f5({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(r.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function d5(r){const t=r.get("Content-Disposition");if(t){let e=A4(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(S0(e))return e}return null}function Tp(r,t){return new ip(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function p5(r,t){if(r!==t)throw new Error(`Expected range response-origin "${r}" to match "${t}".`)}function g5(r,t,e,n){return fetch(r,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function m5(r,t){if(r!==200&&r!==206)throw Tp(r,t)}function b5(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Ie(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class _4 extends _p{_responseOrigin=null;constructor(t){super(t,S4,C4),this.isHttp=/^https?:/i.test(t.url),this.headers=h5(this.isHttp,t.httpHeaders)}}class S4 extends Sp{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:s,rangeChunkSize:a,url:l,withCredentials:c}=t._source;this._contentLength=s,this._isStreamingSupported=!n,this._isRangeSupported=!e;const h=new Headers(t.headers);g5(l,h,c,this._abortController).then(f=>{t._responseOrigin=Ep(f.url),m5(f.status,l),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:g,suggestedLength:v}=f5({responseHeaders:p,isHttp:t.isHttp,rangeChunkSize:a,disableRange:e});this._isRangeSupported=g,this._contentLength=v||this._contentLength,this._filename=d5(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Xl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:b5(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class C4 extends Cp{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const{url:s,withCredentials:a}=t._source,l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`),g5(s,l,a,this._abortController).then(c=>{const h=Ep(c.url);p5(h,t._responseOrigin),m5(c.status,s),this._reader=c.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:b5(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const rm=200,ny=206;function E4(r){return typeof r!="string"?r:wp(r).buffer}class T4 extends _p{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,N4,L4),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=h5(this.isHttp,t.httpHeaders)}_request(t){const e=new XMLHttpRequest,n={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(e,n),e.open("GET",this.url),e.withCredentials=this._source.withCredentials;for(const[s,a]of this.headers)e.setRequestHeader(s,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.validateStatus=s=>s===ny||s===rm):n.validateStatus=s=>s===rm,e.responseType="arraybuffer",Sn(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>t.onError(e.status),e.onreadystatechange=this.#i.bind(this,e),e.onprogress=this.#e.bind(this,e),e.send(null),e}#e(t,e){this.#t.get(t)?.onProgress?.(e)}#i(t,e){const n=this.#t.get(t);if(!n||(t.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){n.onError(t.status);return}const s=t.status||rm;if(!n.validateStatus(s)){n.onError(t.status);return}const a=E4(t.response);if(s===ny){const l=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?n.onDone(a):(Ie('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone(a):n.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onClosed=()=>this._rangeReaders.delete(n)),n}}class N4 extends Sp{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:e}=t._source;this._contentLength=e,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#t(){const t=this._stream,{disableRange:e,rangeChunkSize:n}=t._source,s=this._fullRequestXhr;t._responseOrigin=Ep(s.responseURL);const a=s.getAllResponseHeaders(),l=new Headers(a?a.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...g]=f.split(": ");return[p,g.join(": ")]}):[]),{allowRangeRequests:c,suggestedLength:h}=f5({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:n,disableRange:e});c&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=d5(l),this._isRangeSupported&&t._abortRequest(s),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}#i(t){this._storedError=Tp(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class L4 extends Cp{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,e,n){super(t,e,n),this._requestXhr=t._request({begin:e,end:n,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:null})}#t(){const t=Ep(this._requestXhr?.responseURL);try{p5(t,this._stream._responseOrigin)}catch(e){this._storedError=e,this.#i(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(t){this._storedError??=Tp(t,this._stream.url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const k4=/^[a-z][a-z0-9\-+.]+:/i;function R4(r){if(k4.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}function y5(r){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(r):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(r)}function v5(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Ie(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class M4 extends _p{constructor(t){super(t,D4,P4),this.url=R4(t.url),Sn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class D4 extends Sp{_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:s,rangeChunkSize:a}=t._source;this._contentLength=s,this._isStreamingSupported=!n,this._isRangeSupported=!e;const l=t.url,c=process.getBuiltinModule("fs");c.promises.lstat(l).then(h=>{const f=c.createReadStream(l),p=y5(f);this._reader=p.getReader();const{size:g}=h;g<=2*a&&(this._isRangeSupported=!1),this._contentLength=g,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Xl("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=Tp(0,l.href)),this._headersCapability.reject(h)})}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:v5(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class P4 extends Cp{_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const s=t.url,a=process.getBuiltinModule("fs");try{const l=a.createReadStream(s,{start:e,end:n-1}),c=y5(l);this._reader=c.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:v5(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const Zh=Symbol("INITIAL_DATA");class w5{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Zh}}get(t,e=null){if(e){const s=this.#e(t);return s.promise.then(()=>e(s.data)),null}const n=this.#t[t];if(!n||n.data===Zh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Zh}delete(t){const e=this.#t[t];return!e||e.data===Zh?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Zh&&(yield[t,e])}}}const O4=1e5,iy=30;class Fr{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#f=0;#h=0;#d=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#C=new WeakMap;static#_=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=n.scale*Ao.pixelRatio,this.#f=n.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:a,pageX:l,pageY:c}=n.rawDims;this.#b=[1,0,0,-1,-l,c+a],this.#o=s,this.#s=a,Fr.#L(),e.style.setProperty("--min-font-size",Fr.#_),Ic(e,n),this.#t.promise.finally(()=>{Fr.#x.delete(this),this.#a=null,this.#d=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ts.platform;return Fe(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#d,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Fr.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Ao.pixelRatio,s=t.rotation;if(s!==this.#f&&(e?.(),this.#f=s,Ic(this.#l,{rotation:s})),n!==this.#h){e?.(),this.#h=n;const a={div:null,properties:null,ctx:Fr.#k(this.#r)};for(const l of this.#u)a.properties=this.#p.get(l),a.div=l,this.#S(a)}}cancel(){const t=new Xl("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#T(t){if(this.#i)return;this.#a.ctx??=Fr.#k(this.#r);const e=this.#u,n=this.#m;for(const s of t){if(e.length>O4){Ie("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id&&this.#e.setAttribute("id",`${s.id}`),s.tag==="Artifact"&&(this.#e.ariaHidden=!0),a.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(s.str),this.#w(s)}}#w(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const s=ne.transform(this.#b,t.transform);let a=Math.atan2(s[1],s[0]);const l=this.#d[t.fontName];l.vertical&&(a+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=Fr.fontFamilyMap.get(c)||c;const h=Math.hypot(s[2],s[3]),f=h*Fr.#I(c,l,this.#r);let p,g;a===0?(p=s[4],g=s[5]-f):(p=s[4]+f*Math.sin(a),g=s[5]-f*Math.cos(a));const v=e.style;v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*g/this.#s).toFixed(2)}%`,v.setProperty("--font-height",`${h.toFixed(2)}px`),v.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);C!==A&&Math.max(C,A)/Math.min(C,A)>1.5&&(b=!0)}if(b&&(n.canvasWidth=l.vertical?t.height:t.width),this.#p.set(e,n),this.#a.div=e,this.#a.properties=n,this.#S(this.#a),n.hasText&&this.#e.append(e),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),this.#e.append(C)}}#S(t){const{div:e,properties:n,ctx:s}=t,{style:a}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:h}=n;Fr.#N(s,h*this.#h,l);const{width:f}=s.measureText(e.textContent);f>0&&a.setProperty("--scale-x",c*this.#h/f)}n.angle!==0&&a.setProperty("--rotate",`${n.angle}deg`)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#k(t=null){let e=this.#y.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,e),this.#C.set(e,{size:0,family:""})}return e}static#N(t,e,n){const s=this.#C.get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)}static#L(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#I(t,e,n){const s=this.#v.get(t);if(s)return s;const a=this.#k(n);a.canvas.width=a.canvas.height=iy,this.#N(a,iy,t);const l=a.measureText(""),c=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let f=.8;return c?f=c/(c+h):(ts.platform.isFirefox&&Ie("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const B4=100;function x5(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new R0,{docId:e}=t,n=r.url?G3(r.url):null,s=r.data?V3(r.data):null,a=r.httpHeaders||null,l=r.withCredentials===!0,c=r.password??null,h=r.range instanceof A5?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof gf?r.worker:null;const g=r.verbosity,v=typeof r.docBaseUrl=="string"&&!xp(r.docBaseUrl)?r.docBaseUrl:null,b=_d(r.cMapUrl),C=r.cMapPacked!==!1,A=r.CMapReaderFactory||(Vs?Q3:zb),T=_d(r.iccUrl),S=_d(r.standardFontDataUrl),R=r.StandardFontDataFactory||(Vs?t4:Hb),M=_d(r.wasmUrl),D=r.WasmFactory||(Vs?e4:qb),z=r.stopAtErrors!==!0,K=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,Z=r.isEvalSupported!==!1,J=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Vs,H=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Vs&&(ts.platform.isFirefox||!globalThis.chrome),lt=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,P=typeof r.disableFontFace=="boolean"?r.disableFontFace:Vs,G=r.fontExtraProperties===!0,rt=r.enableXfa===!0,Q=r.ownerDocument||globalThis.document,gt=r.disableRange===!0,V=r.disableStream===!0,et=r.disableAutoFetch===!0,at=r.pdfBug===!0,wt=r.CanvasFactory||(Vs?J3:W3),Rt=r.FilterFactory||(Vs?Z3:K3),Y=r.enableHWA===!0,k=r.useWasm!==!1,U=h?h.length:r.length??NaN,W=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Vs&&!P,st=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(A===zb&&R===Hb&&D===qb&&b&&S&&M&&sf(b,document.baseURI)&&sf(S,document.baseURI)&&sf(M,document.baseURI)),ct=null;b3(g);const ht={canvasFactory:new wt({ownerDocument:Q,enableHWA:Y}),filterFactory:new Rt({docId:e,ownerDocument:Q}),cMapReaderFactory:st?null:new A({baseUrl:b,isCompressed:C}),standardFontDataFactory:st?null:new R({baseUrl:S}),wasmFactory:st?null:new D({baseUrl:M})};p||(p=gf.create({verbosity:g,port:th.workerPort}),t._worker=p);const Ct={docId:e,apiVersion:"5.4.624",data:s,password:c,disableAutoFetch:et,rangeChunkSize:f,length:U,docBaseUrl:v,enableXfa:rt,evaluatorOptions:{maxImageSize:K,disableFontFace:P,ignoreErrors:z,isEvalSupported:Z,isOffscreenCanvasSupported:J,isImageDecoderSupported:H,canvasMaxAreaInBytes:lt,fontExtraProperties:G,useSystemFonts:W,useWasm:k,useWorkerFetch:st,cMapUrl:b,iccUrl:T,standardFontDataUrl:S,wasmUrl:M}},_t={ownerDocument:Q,pdfBug:at,styleElement:ct,enableHWA:Y,loadingParams:{disableAutoFetch:et,enableXfa:rt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Dt=p.messageHandler.sendWithPromise("GetDocRequest",Ct,s?[s.buffer]:null);let Vt;if(h)Vt=new v4({pdfDataRangeTransport:h,disableRange:gt,disableStream:V});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Wt=sf(n)?_4:Vs?M4:T4;Vt=new Wt({url:n,length:U,httpHeaders:a,withCredentials:l,rangeChunkSize:f,disableRange:gt,disableStream:V})}return Dt.then(Wt=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Kt=new rf(e,Wt,p.port),St=new j4(Kt,t,Vt,_t,ht);t._transport=St,Kt.send("Ready",null)})}).catch(t._capability.reject),t}class R0{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${R0.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class A5{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Cn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class I4{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class F4{#t=!1;#e=An.instance;constructor(t,e,n,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new Pb:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new w5,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new Sf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:a=ql.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:v=!1,recordOperations:b=!1,operationsFilter:C=null}){this._stats?.time("Overall");const A=this._transport.getRenderingIntent(s,a,g,v),{renderingIntent:T,cacheKey:S}=A;this.#t=!1,h||=this._transport.getOptionalContentConfig(T);let R=this._intentStates.get(S);R||(R=Object.create(null),this._intentStates.set(S,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const M=!!(T&Ir.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(A));const D=!!(this._pdfBug&&globalThis.StepperManager?.enabled),z=!this.recordedBBoxes&&(b||D),K=H=>{if(R.renderTasks.delete(Z),z){const lt=Z.gfx?.dependencyTracker.take();lt&&(Z.stepper&&Z.stepper.setOperatorBBoxes(lt,Z.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=lt))}M&&(this.#t=!0),this.#i(),H?(Z.capability.reject(H),this._abortOperatorList({intentState:R,reason:H instanceof Error?H:new Error(H)})):Z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},Z=new Wu({callback:K,params:{canvas:e,canvasContext:t,dependencyTracker:z?new i4(e,R.operatorList.length,D):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:C});(R.renderTasks||=new Set).add(Z);const J=Z.task;return Promise.all([R.displayReadyCapability.promise,h]).then(([H,lt])=>{if(this.destroyed){K();return}if(this._stats?.time("Rendering"),!(lt.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");Z.initializeGraphics({transparency:H,optionalContentConfig:lt}),Z.operatorListChanged()}).catch(K),J}getOperatorList({intent:t="display",annotationMode:e=ql.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>pf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function a(){l.read().then(function({value:h,done:f}){if(f){n(c);return}c.lang??=h.lang,Object.assign(c.styles,h.styles),c.items.push(...h.items),a()},s)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#i();return t&&e&&(this._stats&&=new Pb),e}#i(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#i()}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof _0){let s=B4;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Xl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var Gl,za,sl,Dc,dp,Pc,Oc,$s,Hd,_5,S5,af,ah,qd;const ai=class ai{constructor({name:t=null,port:e=null,verbosity:n=y3()}={}){fo(this,$s);fo(this,Gl,Promise.withResolvers());fo(this,za,null);fo(this,sl,null);fo(this,Dc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(si(ai,Oc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");si(ai,Oc).set(e,this),po(this,$s,_5).call(this,e)}else po(this,$s,S5).call(this)}get promise(){return si(this,Gl).promise}get port(){return si(this,sl)}get messageHandler(){return si(this,za)}destroy(){this.destroyed=!0,si(this,Dc)?.terminate(),dr(this,Dc,null),si(ai,Oc).delete(si(this,sl)),dr(this,sl,null),si(this,za)?.destroy(),dr(this,za,null)}static create(t){const e=si(this,Oc).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ai(t)}static get workerSrc(){if(th.workerSrc)return th.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fe(this,"_setupFakeWorkerGlobal",(async()=>si(this,ah,qd)?si(this,ah,qd):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gl=new WeakMap,za=new WeakMap,sl=new WeakMap,Dc=new WeakMap,dp=new WeakMap,Pc=new WeakMap,Oc=new WeakMap,$s=new WeakSet,Hd=function(){si(this,Gl).resolve(),si(this,za).send("configure",{verbosity:this.verbosity})},_5=function(t){dr(this,sl,t),dr(this,za,new rf("main","worker",t)),si(this,za).on("ready",()=>{}),po(this,$s,Hd).call(this)},S5=function(){if(si(ai,Pc)||si(ai,ah,qd)){po(this,$s,af).call(this);return}let{workerSrc:t}=ai;try{ai._isSameOrigin(window.location,t)||(t=ai._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new rf("main","worker",e),s=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?si(this,Gl).reject(new Error("Worker was destroyed")):po(this,$s,af).call(this)},a=new AbortController;e.addEventListener("error",()=>{si(this,Dc)||s()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){s();return}dr(this,za,n),dr(this,sl,e),dr(this,Dc,e),po(this,$s,Hd).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){s();return}try{l()}catch{po(this,$s,af).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{vp("The worker has been disabled.")}po(this,$s,af).call(this)},af=function(){si(ai,Pc)||(Ie("Setting up fake worker."),dr(ai,Pc,!0)),ai._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){si(this,Gl).reject(new Error("Worker was destroyed"));return}const e=new X3;dr(this,sl,e);const n=`fake${ub(ai,dp)._++}`,s=new rf(n+"_worker",n,e);t.setup(s,e),dr(this,za,new rf(n,n+"_worker",e)),po(this,$s,Hd).call(this)}).catch(t=>{si(this,Gl).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ah=new WeakSet,qd=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},fo(ai,ah),fo(ai,dp,0),fo(ai,Pc,!1),fo(ai,Oc,new WeakMap),Vs&&(dr(ai,Pc,!0),th.workerSrc||="./pdf.worker.mjs"),ai._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},ai._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ai.fromPort=t=>{if(k3("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return ai.create(t)};let gf=ai;class j4{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#i=null;#n=new Map;#r=new Map;#a=new Map;#s=null;#o=An.instance;constructor(t,e,n,s,a){this.messageHandler=t,this.loadingTask=e,this.#i=n,this.commonObjs=new w5,this.fontLoader=new z3({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.enableHWA=s.enableHWA,this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,e=new Map;for(let n=0,s=this.#o.pagesNumber;n<s;n++){const a=this.#o.getPrevPageNumber(n+1)-1,l=this.#n.get(a);l&&t.set(n,l);const c=this.#r.get(a);c&&e.set(n,c)}this.#n=t,this.#r=e}#l(t,e=null){const n=this.#e.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,s),s}#f({loaded:t,total:e}){this.loadingTask.onProgress?.({loaded:t,total:e,percent:As(Math.round(t/e*100),0,100)})}get annotationStorage(){return Fe(this,"annotationStorage",new T0)}getRenderingIntent(t,e=ql.ENABLE,n=null,s=!1,a=!1){let l=Ir.DISPLAY,c=Gm;switch(t){case"any":l=Ir.ANY;break;case"display":break;case"print":l=Ir.PRINT;break;default:Ie(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Ir.PRINT&&n instanceof r5?n:this.annotationStorage;switch(e){case ql.DISABLE:l+=Ir.ANNOTATIONS_DISABLE;break;case ql.ENABLE:break;case ql.ENABLE_FORMS:l+=Ir.ANNOTATIONS_FORMS;break;case ql.ENABLE_STORAGE:l+=Ir.ANNOTATIONS_STORAGE,c=h.serializable;break;default:Ie(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=Ir.IS_EDITING),a&&(l+=Ir.OPLIST);const{ids:f,hash:p}=h.modifiedIds,g=[l,c.hash,p];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#n.values())t.push(n._destroy());this.#n.clear(),this.#r.clear(),this.#a.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Fr.cleanup(),this.#i?.cancelAllRequests(new Xl("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{Sn(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#i.getFullReader(),this.#t.onProgress=a=>this.#f(a),s.onPull=()=>{this.#t.read().then(function({value:a,done:l}){if(l){s.close();return}Sn(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this.#t.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this.#t.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:l}=this.#t;return s&&a&&(this.#t.onProgress=null),{isStreamingSupported:s,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{Sn(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const a=this.#i.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){s.close();return}Sn(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this.#o.pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new I4(n,this))}),t.on("DocException",n=>{e._capability.reject(pr(n))}),t.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw pr(n);const s=a=>{a instanceof Error?this.#s.reject(a):this.#s.resolve({password:a})};e.onPassword(s,n.code)}catch(s){this.#s.reject(s)}return this.#s.promise}),t.on("DataLoaded",n=>{this.#f({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#n.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in a){const g=a.error;Ie(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const l=new zn(a),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,v)=>globalThis.FontInspector.fontAdded(g,v):null,h=new H3(l,c,a.extra,a.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=a;Sn(f,"The imageRef must be defined.");for(const g of this.#n.values())for(const[,v]of g.objs)if(v?.ref===f)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new q3(a));break;case"Image":this.commonObjs.resolve(n,a);break;case"Pattern":const p=new cs(a);this.commonObjs.resolve(n,p.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,l])=>{if(this.destroyed)return;const c=this.#n.get(s);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||this.#f(n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#o.getPageId(t)-1,s=this.#r.get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#a.set(l.refStr,n);const c=new F4(e,l,this,this._params.pdfBug);return this.#n.set(e,c),c});return this.#r.set(e,a),a}async getPageIndex(t){if(!Vm(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:e})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(e=>new y4(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#e.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new m4(s[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:s[2]}));return this.#e.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#n.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Fr.cleanup()}}cachedPageNumber(t){if(!Vm(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=this.#a.get(e);return n>=0?this.#o.getPageNumber(n+1):null}}class U4{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&e?.size>0}}class Wu{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:v=null,enableHWA:b=!1,operationsFilter:C=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new U4(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=b,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=C}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Wu.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Wu.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:a,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Qu(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Wu.#e.delete(this._canvas),t||=new _0(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Wu.#e.delete(this._canvas),this.callback())))}}const z4="5.4.624",H4="384c6208b";class la{#t=null;#e=null;#i;#n=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#f=null;static get _keyboardManager(){return Fe(this,"_keyboardManager",new Ef([[["Escape","mac+Escape"],la.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],la.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],la.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],la.prototype._moveToPrevious],[["Home","mac+Home"],la.prototype._moveToBeginning],[["End","mac+End"],la.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",la.#f||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",ca,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[n,s]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",la.#f[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=s,a.ariaSelected=s===this.#i,a.addEventListener("click",this.#d.bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#d(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:cn.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#d(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#n.lastElementChild?.focus()}#m(t){la._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class mf{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,mf.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:n}=this.#e,s=this.#t=document.createElement("input");return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",mf.#n[t]),s.addEventListener("input",()=>{this.#i.updateParams(e,s.value)},{signal:this.#i._signal}),s}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function sy(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Jh(r){return Math.max(0,Math.min(255,255*r))}class ry{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Jh(t),[t,t,t]}static G_HTML([t]){const e=sy(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Jh)}static RGB_HTML(t){return`#${t.map(sy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Jh(1-Math.min(1,t+s)),Jh(1-Math.min(1,n+s)),Jh(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,a=1-e,l=1-n,c=Math.min(s,a,l);return["CMYK",s,a,l,c]}}class q4{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Cn("Abstract method `_createSVG` called.")}}class rp extends q4{_createSVG(t){return document.createElementNS(el,t)}}const G4=9,Fc=new WeakSet,V4=new Date().getTimezoneOffset()*60*1e3;class am{static create(t){switch(t.data.annotationType){case Hi.LINK:return new M0(t);case Hi.TEXT:return new Y4(t);case Hi.WIDGET:switch(t.data.fieldType){case"Tx":return new X4(t);case"Btn":return t.data.radioButton?new C5(t):t.data.checkBox?new K4(t):new Z4(t);case"Ch":return new J4(t);case"Sig":return new W4(t)}return new Hc(t);case Hi.POPUP:return new Xm(t);case Hi.FREETEXT:return new E5(t);case Hi.LINE:return new tC(t);case Hi.SQUARE:return new eC(t);case Hi.CIRCLE:return new nC(t);case Hi.POLYLINE:return new T5(t);case Hi.CARET:return new sC(t);case Hi.INK:return new D0(t);case Hi.POLYGON:return new iC(t);case Hi.HIGHLIGHT:return new N5(t);case Hi.UNDERLINE:return new rC(t);case Hi.SQUIGGLY:return new aC(t);case Hi.STRIKEOUT:return new oC(t);case Hi.STAMP:return new L5(t);case Hi.FILEATTACHMENT:return new lC(t);default:return new gi(t)}}}class gi{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return gi._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:s}=this.data;let a=-1/0,l=-1/0;if(e?.length>=8){for(let c=0;c<e.length;c+=8)e[c+1]>l?(l=e[c+1],a=e[c+2]):e[c+1]===l&&(a=Math.max(a,e[c+2]));return[a,l]}if(n?.length>=1){for(const c of n)for(let h=0,f=c.length;h<f;h+=2)c[h+1]>l?(l=c[h+1],a=c[h]):c[h+1]===l&&(a=Math.max(a,c[h]));if(a!==1/0)return[a,l]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/n,t[1]=100*(t[1]-l)/s,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${ff}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${ff}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let s=this.#i?.popup||this.popup;!s&&n?.text&&(this._createPopup(n),s=this.#i.popup),s&&(s.updateEdited(t),n?.deleted&&(s.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,s===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof Hc)&&!(this instanceof M0)&&(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Xm){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,a),a}const{width:c,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(A>0||T>0){const R=`calc(${A}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;l.borderRadius=R}else if(this instanceof C5){const R=`calc(${c}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=R}switch(e.borderStyle.style){case Hu.SOLID:l.borderStyle="solid";break;case Hu.DASHED:l.borderStyle="dashed";break;case Hu.BEVELED:Ie("Unimplemented border style: beveled");break;case Hu.INSET:Ie("Unimplemented border style: inset");break;case Hu.UNDERLINE:l.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(this.#e=!0,l.borderColor=ne.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):l.borderWidth=0}const f=ne.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:g,pageX:v,pageY:b}=s.rawDims;l.left=`${100*(f[0]-v)/p}%`,l.top=`${100*(f[1]-b)/g}%`;const{rotation:C}=e;return e.hasOwnCanvas||C===0?(l.width=`${100*c/p}%`,l.height=`${100*h/g}%`):this.setRotation(C,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:a,height:l}=this;t%180!==0&&([a,l]=[l,a]),e.style.width=`${100*a/n}%`,e.style.height=`${100*l/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const a=s.detail[e],l=a[0],c=a.slice(1);s.target.style[n]=ry[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:ry[`${l}_rgb`](c)})};return Fe(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail))(t[s]||n[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,a]of Object.entries(e)){const l=n[s];if(l){const c={detail:{[s]:a},target:t};l(c),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,a]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,T,S,R]=t.subarray(2,6);if(s===A&&a===T&&e===S&&n===R)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:A,borderWidth:T}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const h=s-e,f=a-n,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const v=p.createElement("defs");g.append(v);const b=p.createElement("clipPath"),C=`clippath_${this.data.id}`;b.setAttribute("id",C),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let A=2,T=t.length;A<T;A+=8){const S=t[A],R=t[A+1],M=t[A+2],D=t[A+3],z=p.createElement("rect"),K=(M-e)/h,Z=(a-R)/f,J=(S-M)/h,H=(R-D)/f;z.setAttribute("x",K),z.setAttribute("y",Z),z.setAttribute("width",J),z.setAttribute("height",H),b.append(z),c?.push(`<rect vector-effect="non-scaling-stroke" x="${K}" y="${Z}" width="${J}" height="${H}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(g),this.container.style.clipPath=`url(#${C})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate),this.#i=new Xm({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Cn("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:l,exportValues:c}of s){if(a===-1||l===e)continue;const h=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Fc.has(f)){Ie(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,l=s.getAttribute("data-element-id");l!==e&&Fc.has(s)&&n.push({id:l,exportValue:a,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class $4 extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class M0 extends gi{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),s=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(this.#i(n,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=n,this.container.append(n)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",s=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#t()}#i(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const a=n.get(s);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:s,refs:a,include:l}=e,c=[];if(s.length!==0||a.length!==0){const p=new Set(a);for(const g of s){const v=this._fieldObjects[g]||[];for(const{id:b}of v)p.add(b)}for(const g of Object.values(this._fieldObjects))for(const v of g)p.has(v.id)===l&&c.push(v)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,f=[];for(const p of c){const{id:g}=p;switch(f.push(g),p.type){case"text":{const b=p.defaultValue||"";h.setValue(g,{value:b});break}case"checkbox":case"radiobutton":{const b=p.defaultValue===p.exportValues;h.setValue(g,{value:b});break}case"combobox":case"listbox":{const b=p.defaultValue||"";h.setValue(g,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!Fc.has(v)){Ie(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class Y4 extends gi{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Hc extends gi{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ts.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,a){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l)}})})}_setEventListeners(t,e,n,s){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,l,s),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ne.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||G4,a=t.style;let l;const c=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(f/(Qg*s))||1,g=f/p;l=Math.min(s,h(g/Qg))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(s,h(f/Qg))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=ne.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class X4 extends Hc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[s]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=t.getValue(e,{value:this.data.fieldValue});let a=s.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=s.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Fc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:g}=this.data,v=!!p&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",C=>{t.setValue(e,{value:C.target.value}),this.setPropertyOnSiblings(n,"value",C.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",C=>{const A=this.data.defaultFieldValue??"";n.value=h.userValue=A,h.formattedValue=null});let b=C=>{const{formattedValue:A}=h;A!=null&&(C.target.value=A),C.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",A=>{if(h.focused)return;const{target:T}=A;if(v&&(T.type=p,g&&(T.step=g)),h.userValue){const S=h.userValue;if(v)if(p==="time"){const R=new Date(S),M=[R.getHours(),R.getMinutes(),R.getSeconds()];T.value=M.map(D=>D.toString().padStart(2,"0")).join(":")}else T.value=new Date(S-V4).toISOString().split(p==="date"?"T":".",1)[0];else T.value=S}h.lastCommittedValue=T.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const T={value(S){h.userValue=S.detail.value??"",v||t.setValue(e,{value:h.userValue.toString()}),S.target.value=h.userValue},formattedValue(S){const{formattedValue:R}=S.detail;h.formattedValue=R,R!=null&&S.target!==document.activeElement&&(S.target.value=R);const M={formattedValue:R};v&&(M.value=R),t.setValue(e,M)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{const{charLimit:R}=S.detail,{target:M}=S;if(R===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",R);let D=h.userValue;!D||D.length<=R||(D=D.slice(0,R),M.value=h.userValue=D,t.setValue(e,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(T,A)}),n.addEventListener("keydown",A=>{h.commitKey=1;let T=-1;if(A.key==="Escape"?T=0:A.key==="Enter"&&!this.data.multiLine?T=2:A.key==="Tab"&&(h.commitKey=3),T===-1)return;const{value:S}=A.target;h.lastCommittedValue!==S&&(h.lastCommittedValue=S,h.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:T,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const C=b;b=null,n.addEventListener("blur",A=>{if(!h.focused||!A.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:T}=A;let{value:S}=T;if(v){if(S&&p==="time"){const R=S.split(":").map(M=>parseInt(M,10));S=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),T.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();T.type="text"}h.userValue=S,h.lastCommittedValue!==S&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:h.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}),C(A)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",A=>{h.lastCommittedValue=null;const{data:T,target:S}=A,{value:R,selectionStart:M,selectionEnd:D}=S;let z=M,K=D;switch(A.inputType){case"deleteWordBackward":{const Z=R.substring(0,M).match(/\w*[^\w]*$/);Z&&(z-=Z[0].length);break}case"deleteWordForward":{const Z=R.substring(M).match(/^[^\w]*\w*/);Z&&(K+=Z[0].length);break}case"deleteContentBackward":M===D&&(z-=1);break;case"deleteContentForward":M===D&&(K+=1);break}A.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:T||"",willCommit:!1,selStart:z,selEnd:K}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${A}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class W4 extends Hc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class K4 extends Hc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Fc.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const f of this._getElementsByName(c,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class C5 extends Hc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(Fc.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const f of this._getElementsByName(c,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",c=>{const h={value:f=>{const p=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=p&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Z4 extends M0{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class J4 extends Hc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Fc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,n.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),a=!1),s.append(g)}let l=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),l=()=>{p.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const c=p=>{const g=p?"value":"textContent",{options:v,multiple:b}=s;return b?Array.prototype.filter.call(v,C=>C.selected).map(C=>C[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let h=c(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const g={value(v){l?.();const b=v.detail.value,C=new Set(Array.isArray(b)?b:[b]);for(const A of s.options)A.selected=C.has(A.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(v){s.multiple=!0},remove(v){const b=s.options,C=v.detail.remove;b[C].selected=!1,s.remove(C),b.length>0&&Array.prototype.findIndex.call(b,T=>T.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:c(!0),items:f(v)}),h=c(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(v){const{index:b,displayValue:C,exportValue:A}=v.detail.insert,T=s.children[b],S=document.createElement("option");S.textContent=C,S.value=A,T?T.before(S):s.append(S),t.setValue(e,{value:c(!0),items:f(v)}),h=c(!1)},items(v){const{items:b}=v.detail;for(;s.length!==0;)s.remove(0);for(const C of b){const{displayValue:A,exportValue:T}=C,S=document.createElement("option");S.textContent=A,S.value=T,s.append(S)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:c(!0),items:f(v)}),h=c(!1)},indices(v){const b=new Set(v.detail.indices);for(const C of v.target.options)C.selected=b.has(C.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,p)}),s.addEventListener("input",p=>{const g=c(!0),v=c(!1);t.setValue(e,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Xm extends gi{constructor(t){const{data:e,elements:n,parent:s}=t,a=!!s._commentManager;if(super(t,{isRenderable:!a&&gi._hasPopupData(e)}),this.elements=n,a&&gi._hasPopupData(e)){const l=this.popup=this.#t();for(const c of n)c.popup=l}else this.popup=null}#t(){return new Q4({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${Yu}${s}`).join(",")),this.container}}class Q4{#t=null;#e=this.#G.bind(this);#i=this.#j.bind(this);#n=this.#D.bind(this);#r=this.#A.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#f=null;#h=null;#d=!1;#m=null;#g=null;#u=null;#p=null;#b=null;#v=null;#y=null;#C=null;#_=null;#x=null;#T=!1;#w=null;#S=null;constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:a,contentsObj:l,richText:c,parent:h,rect:f,parentRect:p,open:g,commentManager:v=null}){this.#s=t,this.#_=s,this.#o=l,this.#C=c,this.#f=h,this.#a=e,this.#y=f,this.#h=p,this.#l=n,this.#t=v,this.#w=n[0],this.#c=zm.toDateObject(a),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup()),v||(this.#k(),this.#s.hidden=!0,g&&this.#A())}#k(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#N(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#b||this.#N(),!this.#b)return;const{signal:t}=this.#g=new AbortController,e=this.#w.hasOwnCommentButton,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},s=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",s,{signal:t}),l.addEventListener("pointerleave",a,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const c=this.#w.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#L(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",s,{signal:t}),l.addEventListener("pointerleave",a,{signal:t}),c.after(l)}}#L(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#b,{style:n}=this.#p;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#f._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:s,modificationDate:a}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:s,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#S||=this.#w.commentText,this.#S}set comment(t){t!==this.comment&&(this.#w.commentText=this.#S=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:n}=this.#p.getBoundingClientRect(),{x:s,y:a,width:l,height:c}=this.#w.layer.getBoundingClientRect();return[(t-s)/l,(e+n-a)/c]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#v||this.commentButtonPosition.map(f=>f/100),s=this.parentBoundingClientRect,{x:a,y:l,width:c,height:h}=s;this.#t.showDialog(null,this,a+e*c,l+n*h,{...t,parentDimensions:s})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const n=t.style.outlineColor=ne.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#_?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#_}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}e5({html:this.#M||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#M(){const t=this.#C,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#C.html||null}get#P(){return this.#M?.attributes?.style?.fontSize||0}get#F(){return this.#M?.attributes?.style?.color||null}#O(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#F,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return n}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#d)&&this.#A()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#S=null):e&&(e.deleted?this.remove():(this.#I(),this.#S=e.text)),t&&(this.#b=null,this.#N(),this.#L());return}if(n||e?.deleted){this.remove();return}this.#k(),this.#x||={contentsObj:this.#o,richText:this.#C},t&&(this.#u=null),e&&e.text&&(this.#C=this.#O(e.text),this.#c=zm.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#C}=this.#x,this.#x=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#d=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#E(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:a}}}=this.#f;let l=!!this.#h,c=l?this.#h:this.#y;for(const C of this.#l)if(!c||ne.intersect(C.data.rect,c)!==null){c=C.data.rect,l=!0;break}const h=ne.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),p=l?c[2]-c[0]+5:0,g=h[0]+p,v=h[1];this.#u=[100*(g-s)/e,100*(v-a)/n];const{style:b}=this.#s;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#A(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#d=!this.#d,this.#d?(this.#D(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#j(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#D(){this.#m||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#E(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#j(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#k(),this.#T&&(this.#m||this.#D(),this.#T=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class E5 extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=$e.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class tC extends gi{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class eC extends gi{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",e-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nC extends gi{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class T5 extends gi{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:s},width:a,height:l}=this;if(!e)return this.container;const c=this.svgFactory.create(a,l,!0);let h=[];for(let p=0,g=e.length;p<g;p+=2){const v=e[p]-t[0],b=t[3]-e[p+1];h.push(`${v},${b}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class iC extends T5{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sC extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class D0 extends gi{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?$e.HIGHLIGHT:$e.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:s,popupRef:a}}=this,{transform:l,width:c,height:h}=this.#i(e,t),f=this.svgFactory.create(c,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let g=0,v=n.length;g<v;g++){const b=this.svgFactory.createElement(this.svgElementName);this.#e.push(b),b.setAttribute("points",n[g].join(",")),p.append(b)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:s}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(s){const{transform:l,width:c,height:h}=this.#i(this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class N5 extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=$e.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class rC extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class aC extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class oC extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class L5 extends gi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=$e.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class lC extends gi{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:s}=ts.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class P0{#t=null;#e=null;#i=null;#n=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:l,structTreeLayer:c,commentManager:h,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#r=c||null,this.#a=f||null,this.#i=p||new T0,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,n=this.div;Ic(n,this.viewport);const s=new Map,a=[],l={data:null,layer:n,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new rp,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const h=c.annotationType===Hi.POPUP;if(h){const g=s.get(c.id);if(!g)continue;if(!this._commentManager){a.push(c);continue}l.elements=g}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const f=am.create(l);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),c.popupRef)){const g=s.get(c.popupRef);g?g.push(f):s.set(c.popupRef,[f])}const p=f.render();c.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const c of a){const h=l.elements=s.get(c.id);l.data=c;const f=am.create(l);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${Yu}${c.id}`,c.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:n,data:{id:s}}of this.#s){const a=n.id=`${Yu}${s}`;t.push(this.#r?.getAriaAttributes(a).then(l=>{if(l)for(const[c,h]of l)n.setAttribute(c,h)}))}}this.#s.sort(({data:{rect:[n,s,a,l]}},{data:{rect:[c,h,f,p]}})=>{if(n===a&&s===l)return 1;if(c===f&&h===p)return-1;const g=l,v=s,b=(s+l)/2,C=p,A=h,T=(h+p)/2;if(b>=C&&T<=v)return-1;if(T>=g&&b<=A)return 1;const S=(n+a)/2,R=(c+f)/2;return S-R});const e=document.createDocumentFragment();for(const n of this.#s)e.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&e.append(n.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const n of this.#s)this.#t.addPointerInTextLayer(n.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new rp,parent:this};for(const n of t){n.borderStyle||=P0._defaultBorderStyle,e.data=n;const s=am.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${Yu}${n.id}`,this.#s.push(s))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,Ic(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,s.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:s}=t,a=new $4({data:{id:n,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return a.render(),a.contentElement.id=`${Yu}${n}`,a.createOrUpdatePopup(),this.#s.push(a),a}removeAnnotation(t){const e=this.#s.findIndex(s=>s.data.id===t);if(e<0)return;const[n]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Fe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Hu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Ld=/\r\n?|\n/g;class us extends _e{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=us.prototype,e=a=>a.isEmpty(),n=Wl.TRANSLATE_SMALL,s=Wl.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Ef([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=$e.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||us._defaultColor||_e._defaultLineColor,this.#n=t.fontSize||us._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){_e.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case cn.FREETEXT_SIZE:us._defaultFontSize=e;break;case cn.FREETEXT_COLOR:us._defaultColor=e;break}}updateParams(t,e){switch(t){case cn.FREETEXT_SIZE:this.#r(e);break;case cn.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[cn.FREETEXT_SIZE,us._defaultFontSize],[cn.FREETEXT_COLOR,us._defaultColor||_e._defaultLineColor]]}get propertiesToUpdate(){return[[cn.FREETEXT_SIZE,this.#n],[cn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new mf(this),[["colorPicker",this._colorPicker]]}get colorType(){return cn.FREETEXT_COLOR}#r(t){const e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#n)*this.parentScale),this.#n=s,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=s=>{this.color=s,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-us._internalPadding*t,-(us._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(us.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const n=s=>{if(this.#t=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){us._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[f,p]=this.pageDimensions,[g,v]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=t+(l[0]-g)/f,C=e+this.height-(l[1]-v)/p;break;case 90:b=t+(l[0]-g)/f,C=e-(l[1]-v)/p,[c,h]=[h,-c];break;case 180:b=t-this.width+(l[0]-g)/f,C=e-(l[1]-v)/p,[c,h]=[-c,-h];break;case 270:b=t+(l[0]-g-this.height*p)/f,C=e+(l[1]-v-this.width*f)/p,[c,h]=[-h,c];break}this.setAt(b*s,C*a,c,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ld,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const s=us.#h(e.getData("text")||"").replaceAll(Ld,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=l,f=[],p=[];if(c.nodeType===Node.TEXT_NODE){const b=c.parentElement;if(p.push(c.nodeValue.slice(h).replaceAll(Ld,"")),b!==this.editorDiv){let C=f;for(const A of this.editorDiv.childNodes){if(A===b){C=p;continue}C.push(us.#c(A))}}f.push(c.nodeValue.slice(0,h).replaceAll(Ld,""))}else if(c===this.editorDiv){let b=f,C=0;for(const A of this.editorDiv.childNodes)C++===h&&(b=p),b.push(us.#c(A))}this.#t=`${f.join(`
`)}${s}${p.join(`
`)}`,this.#l();const g=new Range;let v=Math.sumPrecise(f.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const C=b.nodeValue.length;if(v<=C){g.setStart(b,v),g.setEnd(b,v);break}v-=C}a.removeAllRanges(),a.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#f(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=us._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let s=null;if(t instanceof E5){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:f,id:p,popupRef:g,richText:v,contentsObj:b,creationDate:C,modificationDate:A},textContent:T,textPosition:S,parent:{page:{pageNumber:R}}}=t;if(!T||T.length===0)return null;s=t={annotationType:$e.FREETEXT,color:Array.from(c),fontSize:l,value:T.join(`
`),position:S,pageIndex:R-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:b?.str||null,richText:v,creationDate:C,modificationDate:A}}const a=await super.deserialize(t,e,n);return a.#n=t.fontSize,a.color=ne.makeHexColor(...t.color),a.#t=us.#h(t.value),a._initialData=s,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=_e._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#f()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#d(n)?null:(n.id=this.annotationElementId,n)}#d(t){const{value:e,fontSize:n,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,c)=>l!==s[c])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const s of this.#t.split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),e.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class re{static PRECISION=1e-4;toSVGPath(){Cn("Abstract method `toSVGPath` must be implemented.")}get box(){Cn("Abstract getter `box` must be implemented.")}serialize(t,e){Cn("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c]*s,l[c+1]=n+t[c+1]*a;return l}static _rescaleAndSwap(t,e,n,s,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c+1]*s,l[c+1]=n+t[c]*a;return l}static _translate(t,e,n,s){s||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)s[a]=e+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,a){switch(a){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,a,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+a)/6,(5*s+l)/6,(n+a)/2,(s+l)/2]}}class Mc{#t;#e=[];#i;#n;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#f;#h;#d=[];static#m=8;static#g=2;static#u=Mc.#m+Mc.#g;constructor({x:t,y:e},n,s,a,l,c=0){this.#t=n,this.#h=a*s,this.#n=l,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=c,this.#l=Mc.#m*s,this.#c=Mc.#u*s,this.#f=s,this.#d.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[n,s,a,l]=this.#t;return[(this.#s+(t[0]-e[0])/2-n)/a,(this.#o+(t[1]-e[1])/2-s)/l,(this.#s+(e[0]-t[0])/2-n)/a,(this.#o+(e[1]-t[1])/2-s)/l]}add({x:t,y:e}){this.#s=t,this.#o=e;const[n,s,a,l]=this.#t;let[c,h,f,p]=this.#a.subarray(8,12);const g=t-f,v=e-p,b=Math.hypot(g,v);if(b<this.#c)return!1;const C=b-this.#l,A=C/b,T=A*g,S=A*v;let R=c,M=h;c=f,h=p,f+=T,p+=S,this.#d?.push(t,e);const D=-S/C,z=T/C,K=D*this.#h,Z=z*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+K,p+Z],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-K,p-Z],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([c+K,h+Z],2),this.#r.push(NaN,NaN,NaN,NaN,(c+K-n)/a,(h+Z-s)/l),this.#a.set([c-K,h-Z],14),this.#e.push(NaN,NaN,NaN,NaN,(c-K-n)/a,(h-Z-s)/l)),this.#a.set([R,M,c,h,f,p],6),!this.isEmpty()):(this.#a.set([R,M,c,h,f,p],6),Math.abs(Math.atan2(M-h,R-c)-Math.atan2(S,T))<Math.PI/2?([c,h,f,p]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+f)/2-n)/a,((h+p)/2-s)/l),[c,h,R,M]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((R+c)/2-n)/a,((M+h)/2-s)/l),!0):([R,M,c,h,f,p]=this.#a.subarray(0,6),this.#r.push(((R+5*c)/6-n)/a,((M+5*h)/6-s)/l,((5*c+f)/6-n)/a,((5*h+p)/6-s)/l,((c+f)/2-n)/a,((h+p)/2-s)/l),[f,p,c,h,R,M]=this.#a.subarray(12,18),this.#e.push(((R+5*c)/6-n)/a,((M+5*h)/6-s)/l,((5*c+f)/6-n)/a,((5*h+p)/6-s)/l,((c+f)/2-n)/a,((h+p)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#b();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#y(n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#v(n),n.join(" ")}#b(){const[t,e,n,s]=this.#t,[a,l,c,h]=this.#p();return`M${(this.#a[2]-t)/n} ${(this.#a[3]-e)/s} L${(this.#a[4]-t)/n} ${(this.#a[5]-e)/s} L${a} ${l} L${c} ${h} L${(this.#a[16]-t)/n} ${(this.#a[17]-e)/s} L${(this.#a[14]-t)/n} ${(this.#a[15]-e)/s} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#y(t){const[e,n,s,a]=this.#t,l=this.#a.subarray(4,6),c=this.#a.subarray(16,18),[h,f,p,g]=this.#p();t.push(`L${(l[0]-e)/s} ${(l[1]-n)/a} L${h} ${f} L${p} ${g} L${(c[0]-e)/s} ${(c[1]-n)/a}`)}newFreeDrawOutline(t,e,n,s,a,l){return new k5(t,e,n,s,a,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#a,[s,a,l,c]=this.#t,h=new Float32Array((this.#d?.length??0)+2);for(let g=0,v=h.length-2;g<v;g+=2)h[g]=(this.#d[g]-s)/l,h[g+1]=(this.#d[g+1]-a)/c;if(h[h.length-2]=(this.#s-s)/l,h[h.length-1]=(this.#o-a)/c,isNaN(n[6])&&!this.isEmpty())return this.#C(h);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let g=0;g<p;g+=2){if(isNaN(t[g])){f[g]=f[g+1]=NaN;continue}f[g]=t[g],f[g+1]=t[g+1]}p=this.#x(f,p);for(let g=e.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(e[g+v])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[g+v],f[p+1]=e[g+v+1],p+=2}return this.#_(f,p),this.newFreeDrawOutline(f,h,this.#t,this.#f,this.#i,this.#n)}#C(t){const e=this.#a,[n,s,a,l]=this.#t,[c,h,f,p]=this.#p(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-s)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-s)/l],0),this.newFreeDrawOutline(g,t,this.#t,this.#f,this.#i,this.#n)}#_(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#x(t,e){const n=this.#a.subarray(4,6),s=this.#a.subarray(16,18),[a,l,c,h]=this.#t,[f,p,g,v]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-l)/h],e),e+=24}}class k5 extends re{#t;#e=new Float32Array(4);#i;#n;#r;#a;#s;constructor(t,e,n,s,a,l){super(),this.#s=t,this.#r=e,this.#t=n,this.#a=s,this.#i=a,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[c,h,f,p]=this.#e;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-c)/f,t[g+1]=(t[g+1]-h)/p;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-c)/f,e[g+1]=(e[g+1]-h)/p}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,n=this.#s.length;e<n;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,s],a){const l=n-t,c=s-e;let h,f;switch(a){case 0:h=re._rescale(this.#s,t,s,l,-c),f=re._rescale(this.#r,t,s,l,-c);break;case 90:h=re._rescaleAndSwap(this.#s,t,e,l,c),f=re._rescaleAndSwap(this.#r,t,e,l,c);break;case 180:h=re._rescale(this.#s,n,e,-l,c),f=re._rescale(this.#r,n,e,-l,c);break;case 270:h=re._rescaleAndSwap(this.#s,n,s,-l,-c),f=re._rescaleAndSwap(this.#r,n,s,-l,-c);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const e=this.#s;let n=e[4],s=e[5];const a=[n,s,n,s];let l=n,c=s,h=n,f=s;const p=t?Math.max:Math.min,g=new Float32Array(4);for(let b=6,C=e.length;b<C;b+=6){const A=e[b+4],T=e[b+5];isNaN(e[b])?(ne.pointBoundingBox(A,T,a),c>T?(l=A,c=T):c===T&&(l=p(l,A)),f<T?(h=A,f=T):f===T&&(h=p(h,A))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,ne.bezierBoundingBox(n,s,...e.slice(b,b+6),g),ne.rectBoundingBox(g[0],g[1],g[2],g[3],a),c>g[1]?(l=g[0],c=g[1]):c===g[1]&&(l=p(l,g[0])),f<g[3]?(h=g[2],f=g[3]):f===g[3]&&(h=p(h,g[2]))),n=A,s=T}const v=this.#e;v[0]=a[0]-this.#i,v[1]=a[1]-this.#i,v[2]=a[2]-a[0]+2*this.#i,v[3]=a[3]-a[1]+2*this.#i,this.firstPoint=[l,c],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,e,n,s,a,l=0){return new Mc(t,e,n,s,a,l)}getNewOutline(t,e){const[n,s,a,l]=this.#e,[c,h,f,p]=this.#t,g=a*f,v=l*p,b=n*f+c,C=s*p+h,A=this.newOutliner({x:this.#r[0]*g+b,y:this.#r[1]*v+C},this.#t,this.#a,t,this.#n,e??this.#i);for(let T=2;T<this.#r.length;T+=2)A.add({x:this.#r[T]*g+b,y:this.#r[T+1]*v+C});return A.getOutlines()}}class Wm{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,n=0,s=!0){const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:A,y:T,width:S,height:R}of t){const M=Math.floor((A-e)/l)*l,D=Math.ceil((A+S+e)/l)*l,z=Math.floor((T-e)/l)*l,K=Math.ceil((T+R+e)/l)*l,Z=[M,z,K,!0],J=[D,z,K,!1];this.#n.push(Z,J),ne.rectBoundingBox(M,z,D,K,a)}const c=a[2]-a[0]+2*n,h=a[3]-a[1]+2*n,f=a[0]-n,p=a[1]-n;let g=s?-1/0:1/0,v=1/0;const b=this.#n.at(s?-1:-2),C=[b[0],b[2]];for(const A of this.#n){const[T,S,R,M]=A;!M&&s?S<v?(v=S,g=T):S===v&&(g=Math.max(g,T)):M&&!s&&(S<v?(v=S,g=T):S===v&&(g=Math.min(g,T))),A[0]=(T-f)/c,A[1]=(S-p)/h,A[2]=(R-p)/h}this.#t=new Float32Array([f,p,c,h]),this.#e=[g,v],this.#i=C}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],n=new Set;for(const l of t){const[c,h,f]=l;e.push([c,h,l],[c,f,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const s=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,h,f,p,g]=l;n.delete(l);let v=c,b=h;for(a=[c,f],s.push(a);;){let C;if(n.has(p))C=p;else if(n.has(g))C=g;else break;n.delete(C),[c,h,f,p,g]=C,v!==c&&(a.push(v,b,c,b===h?h:f),v=c),b=b===h?f:h}a.push(v,b)}return new cC(s,this.#t,this.#e,this.#i)}#s(t){const e=this.#r;let n=0,s=e.length-1;for(;n<=s;){const a=n+s>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:s=a-1}return s+1}#o([,t,e]){const n=this.#s(t);this.#r.splice(n,0,[t,e])}#c([,t,e]){const n=this.#s(t);for(let s=n;s<this.#r.length;s++){const[a,l]=this.#r[s];if(a!==t)break;if(a===t&&l===e){this.#r.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,l]=this.#r[s];if(a!==t)break;if(a===t&&l===e){this.#r.splice(s,1);return}}}#l(t){const[e,n,s]=t,a=[[e,n,s]],l=this.#s(s);for(let c=0;c<l;c++){const[h,f]=this.#r[c];for(let p=0,g=a.length;p<g;p++){const[,v,b]=a[p];if(!(f<=v||b<=h)){if(v>=h){if(b>f)a[p][1]=f;else{if(g===1)return[];a.splice(p,1),p--,g--}continue}a[p][2]=h,b>f&&a.push([e,f,b])}}}return a}}class cC extends re{#t;#e;constructor(t,e,n,s){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=s}toSVGPath(){const t=[];for(const e of this.#e){let[n,s]=e;t.push(`M${n} ${s}`);for(let a=2;a<e.length;a+=2){const l=e[a],c=e[a+1];l===n?(t.push(`V${c}`),s=c):c===s&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,s],a){const l=[],c=n-t,h=s-e;for(const f of this.#e){const p=new Array(f.length);for(let g=0;g<f.length;g+=2)p[g]=t+f[g]*c,p[g+1]=s-f[g+1]*h;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Km extends Mc{newFreeDrawOutline(t,e,n,s,a,l){return new uC(t,e,n,s,a,l)}}class uC extends k5{newOutliner(t,e,n,s,a,l=0){return new Km(t,e,n,s,a,l)}}class Ri extends _e{#t=null;#e=0;#i;#n=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#f=null;#h=!1;#d=null;#m=null;#g=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=$e.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Ri.prototype;return Fe(this,"_keyboardManager",new Ef([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Ri._defaultColor,this.#p=t.thickness||Ri._defaultThickness,this.opacity=t.opacity||Ri._defaultOpacity,this.#i=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Wm(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Wm(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:n}=this.#l;this.#d=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:s}=this.#a;this.#m=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const s=1.5;if(this.#a=t.getNewOutline(this.#p/2+s,.0025),e>=0)this.#f=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#f,{bbox:Ri.#S(this.#l.box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Ri.#S(this.#a.box,g),path:{d:this.#a.toSVGPath()}})}const[a,l,c,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=h;break;case 90:{const[g,v]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*v/g,this.height=h*g/v;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*v/g,this.height=h*g/v;break}}const{firstPoint:f}=t;this.#d=[(f[0]-a)/c,(f[1]-l)/h];const{lastPoint:p}=this.#a;this.#m=[(p[0]-a)/c,(p[1]-l)/h]}static initialize(t,e){_e.initialize(t,e),Ri._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case cn.HIGHLIGHT_COLOR:Ri._defaultColor=e;break;case cn.HIGHLIGHT_THICKNESS:Ri._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#d}updateParams(t,e){switch(t){case cn.HIGHLIGHT_COLOR:this.#C(e);break;case cn.HIGHLIGHT_THICKNESS:this.#_(e);break}}static get defaultPropertiesToUpdate(){return[[cn.HIGHLIGHT_COLOR,Ri._defaultColor],[cn.HIGHLIGHT_THICKNESS,Ri._defaultThickness]]}get propertiesToUpdate(){return[[cn.HIGHLIGHT_COLOR,this.color||Ri._defaultColor],[cn.HIGHLIGHT_THICKNESS,this.#p||Ri._defaultThickness],[cn.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#f,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(t){const e=(a,l)=>{this.color=a,this.opacity=l,this.onUpdatedColor()},n=this.color,s=this.opacity;this.addCommands({cmd:e.bind(this,t,Ri._defaultOpacity),undo:e.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#_(t){const e=this.#p,n=s=>{this.#p=s,this.#x(s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new la({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#L())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#L())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#y({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#T(){this.#f===null||!this.parent||(this.parent.drawLayer.remove(this.#f),this.#f=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#w(t=this.parent){this.#f===null&&({id:this.#f,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#S([t,e,n,s],a){switch(a){case 90:return[1-e-s,t,s,n];case 180:return[1-t-n,1-e-s,n,s];case 270:return[e,1-t-n,s,n]}return[t,e,n,s]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=Ri.#S(this.#l.box,t)):n=Ri.#S([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#f,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:Ri.#S(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),i5(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#k(t){Ri._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#N(!0);break;case 1:case 3:this.#N(!1);break}}#N(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#N(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#L(){return this.#h?this.rotation:0}#I(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,s]=this.pageTranslation,a=this.#i,l=new Float32Array(a.length*8);let c=0;for(const{x:h,y:f,width:p,height:g}of a){const v=h*t+n,b=(1-f)*e+s;l[c]=l[c+4]=v,l[c+1]=l[c+3]=b,l[c+2]=l[c+6]=v+p*t,l[c+5]=l[c+7]=b-g*e,c+=8}return l}#M(t){return this.#l.serialize(t,this.#L())}static startHighlighting(t,e,{target:n,x:s,y:a}){const{x:l,y:c,width:h,height:f}=n.getBoundingClientRect(),p=new AbortController,g=t.combinedSignal(p),v=b=>{p.abort(),this.#F(t,b)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",Ei,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ca,{signal:g}),n.addEventListener("pointermove",this.#P.bind(this,t),{signal:g}),this._freeHighlight=new Km({x:s,y:a},[l,c,h,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let s=null;if(t instanceof N5){const{data:{quadPoints:C,rect:A,rotation:T,id:S,color:R,opacity:M,popupRef:D,richText:z,contentsObj:K,creationDate:Z,modificationDate:J},parent:{page:{pageNumber:H}}}=t;s=t={annotationType:$e.HIGHLIGHT,color:Array.from(R),opacity:M,quadPoints:C,boxes:null,pageIndex:H-1,rect:A.slice(0),rotation:T,annotationElementId:S,id:S,deleted:!1,popupRef:D,richText:z,comment:K?.str||null,creationDate:Z,modificationDate:J}}else if(t instanceof D0){const{data:{inkLists:C,rect:A,rotation:T,id:S,color:R,borderStyle:{rawWidth:M},popupRef:D,richText:z,contentsObj:K,creationDate:Z,modificationDate:J},parent:{page:{pageNumber:H}}}=t;s=t={annotationType:$e.HIGHLIGHT,color:Array.from(R),thickness:M,inkLists:C,boxes:null,pageIndex:H-1,rect:A.slice(0),rotation:T,annotationElementId:S,id:S,deleted:!1,popupRef:D,richText:z,comment:K?.str||null,creationDate:Z,modificationDate:J}}const{color:a,quadPoints:l,inkLists:c,opacity:h}=t,f=await super.deserialize(t,e,n);f.color=ne.makeHexColor(...a),f.opacity=h||1,c&&(f.#p=t.thickness),f._initialData=s,t.comment&&f.setCommentData(t);const[p,g]=f.pageDimensions,[v,b]=f.pageTranslation;if(l){const C=f.#i=[];for(let A=0;A<l.length;A+=8)C.push({x:(l[A]-v)/p,y:1-(l[A+1]-b)/g,width:(l[A+2]-l[A])/p,height:(l[A+1]-l[A+5])/g});f.#v(),f.#w(),f.rotate(f.rotation)}else if(c){f.#h=!0;const C=c[0],A={x:C[0]-v,y:g-(C[1]-b)},T=new Km(A,[0,0,p,g],1,f.#p/2,!0,.001);for(let M=0,D=C.length;M<D;M+=2)A.x=C[M]-v,A.y=g-(C[M+1]-b),T.add(A);const{id:S,clipPathId:R}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);f.#y({highlightOutlines:T.getOutlines(),highlightId:S,clipPathId:R}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=_e._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#M(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#O(n)?null:(n.id=this.annotationElementId,n)}#O(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,s)=>n!==e[s])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class R5{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Cn("Not implemented")}}class xn extends _e{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:n}=e.drawLayer.draw(xn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[s,a]of Object.entries(e))n.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Cn("Not implemented")}static get typesMap(){Cn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(xn.#i.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)t.push([n,e[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,s]of this.constructor.typesMap)t.push([n,e[s]]);return t}_updateProperty(t,e,n){const s=this._drawingOptions,a=s[e],l=c=>{s.updateProperty(e,c);const h=this.#t.updateProperty(e,c);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,xn._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#f()),{bbox:this.#d()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,xn._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#f()),{bbox:this.#d()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#d()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,xn._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#d()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,n,s]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(l/a),s*(a/l)];case 180:return[1-t,1-e,n,s];case 270:return[1-e,t,n*(l/a),s*(a/l)];default:return[t,e,n,s]}}#f(){const{x:t,y:e,width:n,height:s,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(a/l),s*(l/a)];case 180:return[1-t,1-e,n,s];case 270:return[e,1-t,n*(a/l),s*(l/a)];default:return[t,e,n,s]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#d(){const{x:t,y:e,width:n,height:s,rotation:a,parentRotation:l,parentDimensions:[c,h]}=this;switch((a*4+l)/90){case 1:return[1-e-s,t,s,n];case 2:return[1-t-n,1-e-s,n,s];case 3:return[e,1-t-n,s,n];case 4:return[t,e-n*(c/h),s*(h/c),n*(c/h)];case 5:return[1-e,t,n*(c/h),s*(h/c)];case 6:return[1-t-s*(h/c),1-e,s*(h/c),n*(c/h)];case 7:return[e-n*(c/h),1-t-s*(h/c),n*(c/h),s*(h/c)];case 8:return[t-n,e-s,n,s];case 9:return[1-e,t-n,s,n];case 10:return[1-t,1-e,n,s];case 11:return[e-s,1-t,s,n];case 12:return[t-s*(h/c),e,s*(h/c),n*(c/h)];case 13:return[1-e-n*(c/h),t-s*(h/c),n*(c/h),s*(h/c)];case 14:return[1-t,1-e-n*(c/h),s*(h/c),n*(c/h)];case 15:return[e,1-t,n*(c/h),s*(h/c)];default:return[t,e,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,xn._mergeSVGProperties({bbox:this.#d()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");return n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,s,a){Cn("Not implemented")}static startDrawing(t,e,n,s){const{target:a,offsetX:l,offsetY:c,pointerId:h,pointerType:f}=s;if(_n.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:g,height:v}=a.getBoundingClientRect(),b=xn.#n=new AbortController,C=t.combinedSignal(b);if(_n.setPointer(f,h),window.addEventListener("pointerup",A=>{_n.isSamePointerIdOrRemove(A.pointerId)&&this._endDraw(A)},{signal:C}),window.addEventListener("pointercancel",A=>{_n.isSamePointerIdOrRemove(A.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",A=>{_n.isSamePointerType(A.pointerType)&&(_n.initializeAndAddPointerId(A.pointerId),xn.#i.isCancellable()&&(xn.#i.removeLastElement(),xn.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",ca,{signal:C}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),a.addEventListener("touchmove",A=>{_n.isSameTimeStamp(A.timeStamp)&&Ei(A)},{signal:C}),t.toggleDrawing(),e._editorUndoBar?.hide(),xn.#i){t.drawLayer.updateProperties(this._currentDrawId,xn.#i.startNew(l,c,g,v,p));return}e.updateUIForDefaultProperties(this),xn.#i=this.createDrawerInstance(l,c,g,v,p),xn.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(xn.#r.toSVGProperties(),xn.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(_n.isSameTimeStamp(t.timeStamp),!xn.#i)return;const{offsetX:e,offsetY:n,pointerId:s}=t;if(_n.isSamePointerId(s)){if(_n.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,xn.#i.add(e,n)),_n.setTimeStamp(t.timeStamp),Ei(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,xn.#i=null,xn.#r=null,_n.clearTimeStamp()),xn.#n&&(xn.#n.abort(),xn.#n=null,_n.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,xn.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=xn.#i,s=this._currentDrawId,a=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(s,n.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:cn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(cn.DRAW_STEP),!xn.#i.isEmpty()){const{pageDimensions:[n,s],scale:a}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:xn.#i.getOutlines(n*a,s*a,a,this._INNER_MARGIN),drawingOptions:xn.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,s,a,l){Cn("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:c}}=e.viewport,h=this.deserializeDraw(l,c,s,a,this._INNER_MARGIN,t),f=await super.deserialize(t,e,n);return f.createDrawingOptions(t),f.#a({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,n]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#t.serialize([e,n,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class hC{#t=new Float64Array(6);#e;#i;#n;#r;#a;#s="";#o=0;#c=new Tf;#l;#f;constructor(t,e,n,s,a,l){this.#l=n,this.#f=s,this.#n=a,this.#r=l,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#i=[{line:c,points:this.#a}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return re._normalizePoint(t,e,this.#l,this.#f,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,s,a,l]=this.#t.subarray(2,6),c=t-a,h=e-l;return Math.hypot(this.#l*c,this.#f*h)<=2?null:(this.#a.push(t,e),isNaN(n)?(this.#t.set([a,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,s,a,l,t,e],0),this.#e.push(...re.createBezierPoints(n,s,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,a){this.#l=n,this.#f=s,this.#n=a,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const c=this.#i.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#i.push({line:l,points:this.#a}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let t=0,e=this.#i.length;t<e;t++){const{line:n,points:s}=this.#i[t];this.#e=n,this.#a=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=re.svgRound(this.#e[4]),e=re.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const s=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,s)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const s=re.svgRound(this.#e[10]),a=re.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${s} ${a}`,this.#o=12,this.#s}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let s=this.#o,a=this.#e.length;s<a;s+=6){const[l,c,h,f,p,g]=this.#e.slice(s,s+6).map(re.svgRound);n.push(`C${l} ${c} ${h} ${f} ${p} ${g}`)}return this.#s+=n.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,n,s){const a=this.#i.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#i,t,e,n,this.#n,this.#r,s),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Tf extends re{#t;#e=0;#i;#n;#r;#a;#s;#o;#c;build(t,e,n,s,a,l,c){this.#r=e,this.#a=n,this.#s=s,this.#o=a,this.#c=l,this.#i=c??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${re.svgRound(e[4])} ${re.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${re.svgRound(e[10])} ${re.svgRound(e[11])}`);continue}for(let n=6,s=e.length;n<s;n+=6){const[a,l,c,h,f,p]=e.subarray(n,n+6).map(re.svgRound);t.push(`C${a} ${l} ${c} ${h} ${f} ${p}`)}}return t.join("")}serialize([t,e,n,s],a){const l=[],c=[],[h,f,p,g]=this.#f();let v,b,C,A,T,S,R,M,D;switch(this.#o){case 0:D=re._rescale,v=t,b=e+s,C=n,A=-s,T=t+h*n,S=e+(1-f-g)*s,R=t+(h+p)*n,M=e+(1-f)*s;break;case 90:D=re._rescaleAndSwap,v=t,b=e,C=n,A=s,T=t+f*n,S=e+h*s,R=t+(f+g)*n,M=e+(h+p)*s;break;case 180:D=re._rescale,v=t+n,b=e,C=-n,A=s,T=t+(1-h-p)*n,S=e+f*s,R=t+(1-h)*n,M=e+(f+g)*s;break;case 270:D=re._rescaleAndSwap,v=t+n,b=e+s,C=-n,A=-s,T=t+(1-f-g)*n,S=e+(1-h-p)*s,R=t+(1-f)*n,M=e+(1-h)*s;break}for(const{line:z,points:K}of this.#n)l.push(D(z,v,b,C,A,a?new Array(z.length):null)),c.push(D(K,v,b,C,A,a?new Array(K.length):null));return{lines:l,points:c,rect:[T,S,R,M]}}static deserialize(t,e,n,s,a,{paths:{lines:l,points:c},rotation:h,thickness:f}){const p=[];let g,v,b,C,A;switch(h){case 0:A=re._rescale,g=-t/n,v=e/s+1,b=1/n,C=-1/s;break;case 90:A=re._rescaleAndSwap,g=-e/s,v=-t/n,b=1/s,C=1/n;break;case 180:A=re._rescale,g=t/n+1,v=-e/s,b=-1/n,C=1/s;break;case 270:A=re._rescaleAndSwap,g=e/s+1,v=t/n+1,b=-1/s,C=-1/n;break}if(!l){l=[];for(const S of c){const R=S.length;if(R===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(R===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const M=new Float32Array(3*(R-2));l.push(M);let[D,z,K,Z]=S.subarray(0,4);M.set([NaN,NaN,NaN,NaN,D,z],0);for(let J=4;J<R;J+=2){const H=S[J],lt=S[J+1];M.set(re.createBezierPoints(D,z,K,Z,H,lt),(J-2)*3),[D,z,K,Z]=[K,Z,H,lt]}}}for(let S=0,R=l.length;S<R;S++)p.push({line:A(l[S].map(M=>M??NaN),g,v,b,C),points:A(c[S].map(M=>M??NaN),g,v,b,C)});const T=new this.prototype.constructor;return T.build(p,n,s,1,h,f,a),T}#l(t=this.#c){const e=this.#i+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#f(){const[t,e,n,s]=this.#t,[a,l]=this.#l(0);return[t+a,e+l,n-2*a,s-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let c=4,h=s.length;c<h;c+=6)ne.pointBoundingBox(s[c],s[c+1],t);continue}let a=s[4],l=s[5];for(let c=6,h=s.length;c<h;c+=6){const[f,p,g,v,b,C]=s.subarray(c,c+6);ne.bezierBoundingBox(a,l,f,p,g,v,b,C,t),a=b,l=C}}const[e,n]=this.#l();t[0]=As(t[0]-e,0,1),t[1]=As(t[1]-n,0,1),t[2]=As(t[2]+e,0,1),t[3]=As(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#d(e):null}#d(t){const[e,n]=this.#l();this.#c=t;const[s,a]=this.#l(),[l,c]=[s-e,a-n],h=this.#t;return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h}updateParentDimensions([t,e],n){const[s,a]=this.#l();this.#r=t,this.#a=e,this.#s=n;const[l,c]=this.#l(),h=l-s,f=c-a,p=this.#t;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(re.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,s=0,a=0,l=0,c=0,h=0;switch(this.#e){case 90:s=e/t,a=-t/e,c=t;break;case 180:n=-1,l=-1,c=t,h=e;break;case 270:s=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${n} ${s} ${a} ${l} ${re.svgRound(c)} ${re.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,s]){const[a,l]=this.#l(),[c,h,f,p]=this.#t;if(Math.abs(f-a)<=re.PRECISION||Math.abs(p-l)<=re.PRECISION){const A=t+n/2-(c+f/2),T=e+s/2-(h+p/2);return{path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(e)}`,transform:`${this.rotationTransform} translate(${A} ${T})`}}}const g=(n-2*a)/(f-2*a),v=(s-2*l)/(p-2*l),b=f/n,C=p/s;return{path:{"transform-origin":`${re.svgRound(c)} ${re.svgRound(h)}`,transform:`${this.rotationTransform} scale(${b} ${C}) translate(${re.svgRound(a)} ${re.svgRound(l)}) scale(${g} ${v}) translate(${re.svgRound(-a)} ${re.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,s]){const[a,l]=this.#l(),c=this.#t,[h,f,p,g]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=s,Math.abs(p-a)<=re.PRECISION||Math.abs(g-l)<=re.PRECISION){const T=t+n/2-(h+p/2),S=e+s/2-(f+g/2);for(const{line:R,points:M}of this.#n)re._translate(R,T,S,R),re._translate(M,T,S,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(n-2*a)/(p-2*a),b=(s-2*l)/(g-2*l),C=-v*(h+a)+t+a,A=-b*(f+l)+e+l;if(v!==1||b!==1||C!==0||A!==0)for(const{line:T,points:S}of this.#n)re._rescale(T,C,A,v,b,T),re._rescale(S,C,A,v,b,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[s,a]=n,l=this.#t,c=t-l[0],h=e-l[1];if(this.#r===s&&this.#a===a)for(const{line:f,points:p}of this.#n)re._translate(f,c,h,f),re._translate(p,c,h,p);else{const f=this.#r/s,p=this.#a/a;this.#r=s,this.#a=a;for(const{line:g,points:v}of this.#n)re._rescale(g,c,h,f,p,g),re._rescale(v,c,h,f,p,v);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t)} ${re.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t[0])} ${re.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Np extends R5{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:_e._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Np(this._viewParameters);return t.updateAll(this),t}}class O0 extends xn{static _type="ink";static _editorType=$e.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){_e.initialize(t,e),this._defaultDrawingOptions=new Np(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fe(this,"typesMap",new Map([[cn.INK_THICKNESS,"stroke-width"],[cn.INK_COLOR,"stroke"],[cn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,s,a){return new hC(t,e,n,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,s,a,l){return Tf.deserialize(t,e,n,s,a,l)}static async deserialize(t,e,n){let s=null;if(t instanceof D0){const{data:{inkLists:l,rect:c,rotation:h,id:f,color:p,opacity:g,borderStyle:{rawWidth:v},popupRef:b,richText:C,contentsObj:A,creationDate:T,modificationDate:S},parent:{page:{pageNumber:R}}}=t;s=t={annotationType:$e.INK,color:Array.from(p),thickness:v,opacity:g,paths:{points:l},boxes:null,pageIndex:R-1,rect:c.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:b,richText:C,comment:A?.str||null,creationDate:T,modificationDate:S}}const a=await super.deserialize(t,e,n);return a._initialData=s,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||=new mf(this),[["colorPicker",this._colorPicker]]}get colorType(){return cn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=O0.getDefaultDrawingOptions({stroke:ne.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:_e._colorManager.convert(s),opacity:a,thickness:l,paths:{lines:e,points:n}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!this.#t(c)?null:(c.id=this.annotationElementId,c)}#t(t){const{color:e,thickness:n,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==e[c])||t.thickness!==n||t.opacity!==s||t.pageIndex!==a}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Zm extends Tf{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const kd=8,Qh=3;class Gu{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,s,a,l,c){const h=this.#e(n,s,a,l);for(let f=0;f<8;f++){const p=(-f+h-c+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(t[(n+g)*e+(s+v)]!==0)return p}return-1}static#r(t,e,n,s,a,l,c){const h=this.#e(n,s,a,l);for(let f=0;f<8;f++){const p=(f+h+c+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(t[(n+g)*e+(s+v)]!==0)return p}return-1}static#a(t,e,n,s){const a=t.length,l=new Int32Array(a);for(let p=0;p<a;p++)l[p]=t[p]<=s?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let c=1,h;const f=[];for(let p=1;p<n-1;p++){h=1;for(let g=1;g<e-1;g++){const v=p*e+g,b=l[v];if(b===0)continue;let C=p,A=g;if(b===1&&l[v-1]===0)c+=1,A-=1;else if(b>=1&&l[v+1]===0)c+=1,A+=1,b>1&&(h=b);else{b!==1&&(h=Math.abs(b));continue}const T=[g,p],S=A===g+1,R={isHole:S,points:T,id:c,parent:0};f.push(R);let M;for(const P of f)if(P.id===h){M=P;break}M?M.isHole?R.parent=S?M.parent:h:R.parent=S?h:M.parent:R.parent=S?h:0;const D=this.#n(l,e,p,g,C,A,0);if(D===-1){l[v]=-c,l[v]!==1&&(h=Math.abs(l[v]));continue}let z=this.#i[2*D],K=this.#i[2*D+1];const Z=p+z,J=g+K;C=Z,A=J;let H=p,lt=g;for(;;){const P=this.#r(l,e,H,lt,C,A,1);z=this.#i[2*P],K=this.#i[2*P+1];const G=H+z,rt=lt+K;T.push(rt,G);const Q=H*e+lt;if(l[Q+1]===0?l[Q]=-c:l[Q]===1&&(l[Q]=c),G===p&&rt===g&&H===Z&&lt===J){l[v]!==1&&(h=Math.abs(l[v]));break}else C=H,A=lt,H=G,lt=rt}}}return f}static#s(t,e,n,s){if(n-e<=4){for(let Z=e;Z<n-2;Z+=2)s.push(t[Z],t[Z+1]);return}const a=t[e],l=t[e+1],c=t[n-4]-a,h=t[n-3]-l,f=Math.hypot(c,h),p=c/f,g=h/f,v=p*l-g*a,b=h/c,C=1/f,A=Math.atan(b),T=Math.cos(A),S=Math.sin(A),R=C*(Math.abs(T)+Math.abs(S)),M=C*(1-R+R**2),D=Math.max(Math.atan(Math.abs(S+T)*M),Math.atan(Math.abs(S-T)*M));let z=0,K=e;for(let Z=e+2;Z<n-2;Z+=2){const J=Math.abs(v-p*t[Z+1]+g*t[Z]);J>z&&(K=Z,z=J)}z>(f*D)**2?(this.#s(t,e,K+2,s),this.#s(t,K,n,s)):s.push(a,l)}static#o(t){const e=[],n=t.length;return this.#s(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,s,a,l){const c=new Float32Array(l**2),h=-2*s**2,f=l>>1;for(let A=0;A<l;A++){const T=(A-f)**2;for(let S=0;S<l;S++)c[A*l+S]=Math.exp((T+(S-f)**2)/h)}const p=new Float32Array(256),g=-2*a**2;for(let A=0;A<256;A++)p[A]=Math.exp(A**2/g);const v=t.length,b=new Uint8Array(v),C=new Uint32Array(256);for(let A=0;A<n;A++)for(let T=0;T<e;T++){const S=A*e+T,R=t[S];let M=0,D=0;for(let K=0;K<l;K++){const Z=A+K-f;if(!(Z<0||Z>=n))for(let J=0;J<l;J++){const H=T+J-f;if(H<0||H>=e)continue;const lt=t[Z*e+H],P=c[K*l+J]*p[Math.abs(lt-R)];M+=lt*P,D+=P}}const z=b[S]=Math.round(M/D);C[z]++}return[b,C]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#f(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,a=1/0;for(let c=0,h=n.length;c<h;c++){const f=n[c]=t[c<<2];s=Math.max(s,f),a=Math.min(a,f)}const l=255/(s-a);for(let c=0,h=n.length;c<h;c++)n[c]=(n[c]-a)*l;return n}static#h(t){let e,n=-1/0,s=-1/0;const a=t.findIndex(h=>h!==0);let l=a,c=a;for(e=a;e<256;e++){const h=t[e];h>n&&(e-l>s&&(s=e-l,c=e-1),n=h,l=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#d(t){const e=t,{width:n,height:s}=t,{maxDim:a}=this.#t;let l=n,c=s;if(n>a||s>a){let v=n,b=s,C=Math.log2(Math.max(n,s)/a);const A=Math.floor(C);C=C===A?A-1:A;for(let S=0;S<C;S++){l=Math.ceil(v/2),c=Math.ceil(b/2);const R=new OffscreenCanvas(l,c);R.getContext("2d").drawImage(t,0,0,v,b,0,0,l,c),v=l,b=c,t!==e&&t.close(),t=R.transferToImageBitmap()}const T=Math.min(a/l,a/c);l=Math.round(l*T),c=Math.round(c*T)}const f=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,c),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,c);const p=f.getImageData(0,0,l,c).data;return[this.#f(p),l,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},a,l,c,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const g=200,v=p.font=`${n} ${s} ${g}px ${e}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:C,actualBoundingBoxAscent:A,actualBoundingBoxDescent:T,fontBoundingBoxAscent:S,fontBoundingBoxDescent:R,width:M}=p.measureText(t),D=1.5,z=Math.ceil(Math.max(Math.abs(b)+Math.abs(C)||0,M)*D),K=Math.ceil(Math.max(Math.abs(A)+Math.abs(T)||g,Math.abs(S)+Math.abs(R)||g)*D);f=new OffscreenCanvas(z,K),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,z,K),p.fillStyle="black",p.fillText(t,z*(D-1)/2,K*(3-D)/2);const Z=this.#f(p.getImageData(0,0,z,K).data),J=this.#l(Z),H=this.#h(J),lt=this.#a(Z,z,K,H);return this.processDrawnLines({lines:{curves:lt,width:z,height:K},pageWidth:a,pageHeight:l,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,a){const[l,c,h]=this.#d(t),[f,p]=this.#c(l,c,h,Math.hypot(c,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),g=this.#h(p),v=this.#a(f,c,h,g);return this.processDrawnLines({lines:{curves:v,width:c,height:h},pageWidth:e,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:l,areContours:c}){s%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:p}=t,g=t.thickness??0,v=[],b=Math.min(e/f,n/p),C=b/e,A=b/n,T=[];for(const{points:R}of h){const M=l?this.#o(R):R;if(!M)continue;T.push(M);const D=M.length,z=new Float32Array(D),K=new Float32Array(3*(D===2?2:D-2));if(v.push({line:K,points:z}),D===2){z[0]=M[0]*C,z[1]=M[1]*A,K.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[Z,J,H,lt]=M;Z*=C,J*=A,H*=C,lt*=A,z.set([Z,J,H,lt],0),K.set([NaN,NaN,NaN,NaN,Z,J],0);for(let P=4;P<D;P+=2){const G=z[P]=M[P]*C,rt=z[P+1]=M[P+1]*A;K.set(re.createBezierPoints(Z,J,H,lt,G,rt),(P-2)*3),[Z,J,H,lt]=[H,lt,G,rt]}}if(v.length===0)return null;const S=c?new Zm:new Tf;return S.build(v,e,n,1,s,c?0:g,a),{outline:S,newCurves:T,areContours:c,thickness:g,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:a}){let l=1/0,c=-1/0,h=0;for(const M of t){h+=M.length;for(let D=2,z=M.length;D<z;D++){const K=M[D]-M[D-2];l=Math.min(l,K),c=Math.max(c,K)}}let f;l>=-128&&c<=127?f=Int8Array:l>=-32768&&c<=32767?f=Int16Array:f=Int32Array;const p=t.length,g=kd+Qh*p,v=new Uint32Array(g);let b=0;v[b++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,v[b++]=0,v[b++]=s,v[b++]=a,v[b++]=e?0:1,v[b++]=Math.max(0,Math.floor(n??0)),v[b++]=p,v[b++]=f.BYTES_PER_ELEMENT;for(const M of t)v[b++]=M.length-2,v[b++]=M[0],v[b++]=M[1];const C=new CompressionStream("deflate-raw"),A=C.writable.getWriter();await A.ready,A.write(v);const T=f.prototype.constructor;for(const M of t){const D=new T(M.length-2);for(let z=2,K=M.length;z<K;z++)D[z-2]=M[z]-M[z-2];A.write(D)}A.close();const S=await new Response(C.readable).arrayBuffer();return new Uint8Array(S).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,c=0;for await(const M of n)l||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),l.set(M,c),c+=M.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],g=h[3],v=h[4]===0,b=h[5],C=h[6],A=h[7],T=[],S=(kd+Qh*C)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(A){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(l.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(l.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(l.buffer,S);break}c=0;for(let M=0;M<C;M++){const D=h[Qh*M+kd],z=new Float32Array(D+2);T.push(z);for(let K=0;K<Qh-1;K++)z[K]=h[Qh*M+kd+K+1];for(let K=0;K<D;K++)z[K+2]=z[K]+R[c++]}return{areContours:v,thickness:b,outlines:T,width:p,height:g}}catch(e){return Ie(`decompressSignature: ${e}`),null}}}class B0 extends R5{constructor(){super(),super.updateProperties({fill:_e._defaultLineColor,"stroke-width":0})}clone(){const t=new B0;return t.updateAll(this),t}}class I0 extends Np{constructor(t){super(t),super.updateProperties({stroke:_e._defaultLineColor,"stroke-width":1})}clone(){const t=new I0(this._viewParameters);return t.updateAll(this),t}}class vo extends xn{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=$e.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){_e.initialize(t,e),this._defaultDrawingOptions=new B0,this._defaultDrawnSignatureOptions=new I0(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Fe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:s,mustSmooth:a,areContours:l,description:c,uuid:h,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:g},rotation:v}=this.parent.viewport,b=Gu.processDrawnLines({lines:s,pageWidth:p,pageHeight:g,rotation:v,innerMargin:vo._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(b,f,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:s,height:a}=this.#i,l=Math.max(s,a),c=Gu.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:s,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,s){const{x:a,y:l}=this,{outline:c}=this.#i=t;this.#t=c instanceof Zm,this.description=n;let h;this.#t?h=vo.getDefaultDrawingOptions():(h=vo._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:s}=this.parent.viewport;return Gu.process(t,e,n,s,vo._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return Gu.extractContoursFromText(t,e,n,s,a,vo._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:s}=this.parent.viewport;return Gu.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:vo._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=vo.getDefaultDrawingOptions():(this._drawingOptions=vo._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:s});return this.addComment(a),t?(a.paths={lines:e,points:n},a.uuid=this.#n,a.isCopy=!0):a.lines=e,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(t,e,n,s,a,l){return l.areContours?Zm.deserialize(t,e,n,s,a,l):Tf.deserialize(t,e,n,s,a,l)}static async deserialize(t,e,n){const s=await super.deserialize(t,e,n);return s.#t=t.areContours,s.description=t.accessibilityData?.alt||"",s.#n=t.uuid,s}}class fC extends _e{#t=null;#e=null;#i=null;#n=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#f=!1;static _type="stamp";static _editorType=$e.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){_e.initialize(t,e)}static isHandlingMimeForPasting(t){return Hm.includes(t)}static paste(t,e){e.pasteEditor({mode:$e.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#d(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:s,width:a,height:l,channels:s.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#d());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#h(s)).finally(()=>this.#d());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(s=>this.#h(s)).finally(()=>this.#d());return}const t=document.createElement("input");t.type="file",t.accept=Hm.join(",");const e=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(s)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,s&&(this.#t=s),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:n}=this.#t;const[s,a]=this.pageDimensions,l=.75;if(this.width)e=this.width*s,n=this.height*a;else if(e>l*s||n>l*a){const h=Math.min(l*s/e,l*a/n);e*=h,n*=h}this._uiManager.enableWaiting(!1);const c=this.#s=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=e/s,this.height=n/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#f||(this.parent.addUndoableEditor(this),this.#f=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:s,height:a}=this.#t,l=new Ao;let c=this.#t,h=s,f=a,p=null;if(e){if(s>e||a>e){const K=Math.min(e/s,e/a);h=Math.floor(s*K),f=Math.floor(a*K)}p=document.createElement("canvas");const v=p.width=Math.ceil(h*l.sx),b=p.height=Math.ceil(f*l.sy);this.#l||(c=this.#u(v,b));const C=p.getContext("2d");C.filter=this._uiManager.hcmFilter;let A="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":D3.isDarkMode&&(A="#8f8f9d",T="#42414d");const S=15,R=S*l.sx,M=S*l.sy,D=new OffscreenCanvas(R*2,M*2),z=D.getContext("2d");z.fillStyle=A,z.fillRect(0,0,R*2,M*2),z.fillStyle=T,z.fillRect(0,0,R,M),z.fillRect(R,M,R,M),C.fillStyle=C.createPattern(D,"repeat"),C.fillRect(0,0,v,b),C.drawImage(c,0,0,c.width,c.height,0,0,v,b)}let g=null;if(n){let v,b;if(l.symmetric&&c.width<t&&c.height<t)v=c.width,b=c.height;else if(c=this.#t,s>t||a>t){const T=Math.min(t/s,t/a);v=Math.floor(s*T),b=Math.floor(a*T),this.#l||(c=this.#u(v,b))}const A=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});A.drawImage(c,0,0,c.width,c.height,0,0,v,b),g={width:v,height:b,data:A.getImageData(0,0,v,b).data}}return{canvas:p,width:h,height:f,imageData:g}}#u(t,e){const{width:n,height:s}=this.#t;let a=n,l=s,c=this.#t;for(;a>2*t||l>2*e;){const h=a,f=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(a,l);p.getContext("2d").drawImage(c,0,0,h,f,0,0,a,l),c=p.transferToImageBitmap()}return c}#p(){const[t,e]=this.parentDimensions,{width:n,height:s}=this,a=new Ao,l=Math.ceil(n*t*a.sx),c=Math.ceil(s*e*a.sy),h=this.#s;if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const f=this.#l?this.#t:this.#u(l,c),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,c)}#b(t){if(t){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,s=Math.round(this.width*e*oh.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*oh.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,a);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,a),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let s=null,a=!1;if(t instanceof L5){const{data:{rect:A,rotation:T,id:S,structParent:R,popupRef:M,richText:D,contentsObj:z,creationDate:K,modificationDate:Z},container:J,parent:{page:{pageNumber:H}},canvas:lt}=t;let P,G;lt?(delete t.canvas,{id:P,bitmap:G}=n.imageManager.getFromCanvas(J.id,lt),lt.remove()):(a=!0,t._hasNoCanvas=!0);const rt=(await e._structTree.getAriaAttributes(`${Yu}${S}`))?.get("aria-label")||"";s=t={annotationType:$e.STAMP,bitmapId:P,bitmap:G,pageIndex:H-1,rect:A.slice(0),rotation:T,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:rt},isSvg:!1,structParent:R,popupRef:M,richText:D,comment:z?.str||null,creationDate:K,modificationDate:Z}}const l=await super.deserialize(t,e,n),{rect:c,bitmap:h,bitmapUrl:f,bitmapId:p,isSvg:g,accessibilityData:v}=t;a?(n.addMissingCanvas(t.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,h&&(l.#t=h)):l.#n=f,l.#l=g;const[b,C]=l.pageDimensions;return l.width=(c[2]-c[0])/b,l.height=(c[3]-c[1])/C,v&&(l.altTextData=v),l._initialData=s,t.comment&&l.setCommentData(t),l.#f=!!s,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#b(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#v(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#b(!1);else if(this.#l){const c=e.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#b(!1))}return n}#v(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class nl{#t;#e=!1;#i=null;#n=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#f=null;#h=null;#d=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([us,O0,fC,Ri,vo].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:h,viewport:f,l10n:p}){const g=[...nl.#p.values()];if(!nl._initialized){nl._initialized=!0;for(const v of g)v.initialize(p,t)}t.registerEditorTypes(g),this.#u=t,this.pageIndex=e,this.div=n,this.#t=a,this.#i=l,this.viewport=f,this.#h=h,this.drawLayer=c,this._structTree=s,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===$e.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case $e.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case $e.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case $e.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===$e.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of nl.#p.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#b(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const n of this.#b)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#i;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:h,timeStamp:f}=a,p=this.#g;if(f-p>500){this.#g=f;return}this.#g=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const v=document.elementsFromPoint(c,h);if(g.toggle("getElements",!1),!this.div.contains(v[0]))return;let b;const C=new RegExp(`^${ff}[0-9]+$`);for(const T of v)if(C.test(T.id)){b=T.id;break}if(!b)return;const A=this.#a.get(b);A?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),A.dblclick(a))},{signal:s,capture:!0})}const t=this.#i,e=[];if(t){const s=new Map,a=new Map;for(const c of this.#b){if(c.disableEditing(),!c.annotationElementId){e.push(c);continue}if(c.serialize()!==null){s.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}const l=t.getEditableAnnotations();for(const c of l){const{id:h}=c.data;if(this.#u.isDeletedAnnotationElement(h)){c.updateEdited({deleted:!0});continue}let f=a.get(h);if(f){f.resetAnnotationElement(c),f.show(!1),c.show();continue}f=s.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(c)&&f.show(!1)),c.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of nl.#p.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#d){this.#d=new AbortController;const t=this.#u.combinedSignal(this.#d);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=ts.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),Ri.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),_e.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#y(){return nl.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#C(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:s}=this.#_(),a=this.getNextId(),l=this.#C({parent:this,id:a,x:n,y:s,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await nl.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),a=this.#C({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:t,y:e,width:n,height:s}=this.boundingClientRect,a=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+s),f=(a+c)/2-t,p=(l+h)/2-e,[g,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#_(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=ts.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===$e.STAMP||n===$e.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===$e.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=ts.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#f=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#f=e);return}this.#f&&setTimeout(()=>{this.#f?.focus(),this.#f=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#f=null,this.#y.endDrawing(t)):null}findNewParent(t,e,n){const s=this.#u.findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ic(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Ic(this.div,{rotation:n}),e!==n)for(const s of this.#a.values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class xs{#t=null;#e=new Map;#i=new Map;static#n=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Fe(this,"_svgFactory",new rp)}static#r(t,[e,n,s,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*a}%`}#a(){const t=xs._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const n=xs._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=xs._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s}#o(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)}draw(t,e=!1,n=!1){const s=xs.#n++,a=this.#a(),l=xs._svgFactory.createElement("defs");a.append(l);const c=xs._svgFactory.createElement("path");l.append(c);const h=`path_${s}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(s,c);const f=n?this.#s(l,h):null,p=xs._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(s,a),{id:s,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=xs.#n++,s=this.#a(),a=xs._svgFactory.createElement("defs");s.append(a);const l=xs._svgFactory.createElement("path");a.append(l);const c=`path_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const g=xs._svgFactory.createElement("mask");a.append(g),h=`mask_${n}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const v=xs._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=xs._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const f=xs._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${c}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return s.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#e.set(n,s),n}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:s,rootClass:a,path:l}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#o(c,n),s&&xs.#r(c,s),a){const{classList:h}=c;for(const[f,p]of Object.entries(a))h.toggle(f,p)}if(l){const f=c.firstElementChild.firstElementChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Wm};globalThis.pdfjsLib={AbortException:Xl,AnnotationEditorLayer:nl,AnnotationEditorParamsType:cn,AnnotationEditorType:$e,AnnotationEditorUIManager:Wl,AnnotationLayer:P0,AnnotationMode:ql,AnnotationType:Hi,applyOpacity:O3,build:H4,ColorPicker:la,createValidAbsoluteUrl:Zv,CSSConstants:P3,DOMSVGFactory:rp,DrawLayer:xs,FeatureTest:ts,fetchData:_f,findContrastColor:B3,getDocument:x5,getFilenameFromUrl:N3,getPdfFilenameFromUrl:L3,getRGB:Cf,getUuid:Qv,getXfaPageViewport:R3,GlobalWorkerOptions:th,ImageKind:zd,InvalidPDFException:Um,isDataScheme:xp,isPdfFile:S0,isValidExplicitDest:Y3,MathClamp:As,noContextMenu:ca,normalizeUnicode:E3,OPS:df,OutputScale:Ao,PagesMapper:An,PasswordResponses:m3,PDFDataRangeTransport:A5,PDFDateString:zm,PDFWorker:gf,PermissionFlag:g3,PixelsPerInch:oh,RenderingCancelledException:_0,renderRichText:e5,ResponseException:ip,setLayerDimensions:Ic,shadow:Fe,SignatureExtractor:Gu,stopEvent:Ei,SupportedImageMimeTypes:Hm,TextLayer:Fr,TouchManager:Ap,updateUrlHash:Jv,Util:ne,VerbosityLevel:bp,version:z4,XfaLayer:t5};const dC="/assets/pdf.worker.min-wgc6bjNh.mjs",pC=({tool:r,setTool:t,color:e,setColor:n,size:s,setSize:a,onUpload:l,onZoomIn:c,onZoomOut:h,gridMode:f,setGridMode:p,page:g,totalPages:v,onPrevPage:b,onNextPage:C,onAddPage:A,onClear:T,onUndo:S,onRedo:R})=>{const M=[{id:"pan",icon:kS,label:"Hand (Grab)"},{id:"pen",icon:zS,label:"Pen"},{id:"highlighter",icon:MS,label:"Highlighter"},{id:"text",icon:JS,label:"Text Box"},{id:"eraser",icon:SS,label:"Eraser"}],D=["#0B2545","#14B8A6","#EF4444","#F59E0B","#10B981","#FFFF00"];return ot.jsxs("div",{className:"w-20 h-full bg-white border-r border-brand-light flex flex-col items-center py-4 gap-3 shadow-lg z-20 overflow-y-auto pb-20 scrollbar-thin scrollbar-thumb-gray-300",children:[ot.jsx("div",{className:"flex flex-col gap-2 w-full px-2",children:M.map(z=>ot.jsx("button",{onClick:()=>{t(z.id),z.id==="highlighter"&&n("#FFFF00")},className:`p-3 rounded-xl transition-all flex items-center justify-center border-2 ${r===z.id?"bg-purple-100 text-purple-900 border-purple-600 shadow-md scale-105":"bg-transparent text-gray-400 border-transparent hover:bg-purple-50 hover:text-purple-700"}`,title:z.label,children:ot.jsx(z.icon,{size:24,strokeWidth:r===z.id?2.5:2})},z.id))}),ot.jsx("div",{className:"h-px w-10 bg-gray-200"}),ot.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.map(z=>ot.jsx("button",{onClick:()=>{n(z),r==="eraser"&&t("pen")},className:`w-6 h-6 rounded-full transition-all border-2 ${e===z&&r!=="eraser"?"border-brand-navy scale-125":"border-transparent hover:scale-110"}`,style:{backgroundColor:z}},z))}),ot.jsx("div",{className:"h-px w-10 bg-gray-200"}),ot.jsxs("div",{className:"flex flex-col items-center gap-1 w-full px-1",children:[ot.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400",children:"Size"}),ot.jsx("input",{type:"range",min:"1",max:"40",value:s,onChange:z=>a(Number(z.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-brand-teal",title:"Pen Size"}),ot.jsxs("span",{className:"text-xs font-bold text-brand-navy",children:[s,"px"]})]}),ot.jsx("div",{className:"h-px w-10 bg-gray-200"}),ot.jsxs("div",{className:"flex flex-col gap-2",children:[ot.jsxs("div",{className:"flex gap-2",children:[ot.jsx("button",{onClick:c,className:"p-2 text-gray-400 hover:text-brand-teal bg-gray-50 rounded",title:"Zoom In",children:ot.jsx(h3,{size:20})}),ot.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-brand-teal bg-gray-50 rounded",title:"Zoom Out",children:ot.jsx(d3,{size:20})})]}),ot.jsx("button",{onClick:()=>p(!f),className:`p-2 w-full flex justify-center transition-colors rounded ${f?"bg-brand-teal text-white":"bg-gray-50 text-gray-400"}`,title:"Toggle Grid",children:ot.jsx(NS,{size:20})})]}),ot.jsx("div",{className:"h-px w-10 bg-gray-200"}),ot.jsxs("div",{className:"flex gap-2",children:[ot.jsx("button",{onClick:S,className:"p-2 text-gray-500 hover:text-brand-navy hover:bg-gray-100 rounded",title:"Undo",children:ot.jsx(t3,{size:20})}),ot.jsx("button",{onClick:R,className:"p-2 text-gray-500 hover:text-brand-navy hover:bg-gray-100 rounded",title:"Redo",children:ot.jsx($S,{size:20})})]}),ot.jsx("div",{className:"h-px w-10 bg-gray-200"}),ot.jsxs("div",{className:"flex flex-col items-center gap-2",children:[ot.jsx("button",{onClick:T,className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Clear Page",children:ot.jsx(KS,{size:20})}),ot.jsxs("div",{className:"flex flex-col items-center gap-1 mt-2",children:[ot.jsxs("div",{className:"flex gap-1",children:[ot.jsx("button",{onClick:b,disabled:g===1,className:"p-1 text-gray-400 hover:text-brand-navy disabled:opacity-30",children:ot.jsx(mS,{size:16})}),ot.jsxs("span",{className:"text-xs font-bold text-gray-500 py-1",children:[g,"/",v]}),ot.jsx("button",{onClick:C,disabled:g===v,className:"p-1 text-gray-400 hover:text-brand-navy disabled:opacity-30",children:ot.jsx(yS,{size:16})})]}),ot.jsx("button",{onClick:A,className:"text-xs text-brand-teal border border-brand-teal rounded px-2 py-1 hover:bg-brand-teal hover:text-white transition-all",children:"+ Page"})]})]}),ot.jsxs("label",{className:"p-3 text-gray-400 hover:bg-brand-light hover:text-brand-navy rounded-xl cursor-pointer transition-all mt-auto",title:"Upload Image/PDF",children:[ot.jsx(n3,{size:24}),ot.jsx("input",{type:"file",accept:"application/pdf,image/*",className:"hidden",onChange:l})]})]})},gC=(r,t,e,n)=>{const[s,a]=bt.useState("pen"),[l,c]=bt.useState("#0B2545"),[h,f]=bt.useState(3),[p,g]=bt.useState(!1),[v,b]=bt.useState(1),[C,A]=bt.useState(1),[T,S]=bt.useState({x:-200,y:-200,scale:1}),[R,M]=bt.useState([]),[D,z]=bt.useState(-1),[K,Z]=bt.useState(null),J=bt.useRef(!1),H=bt.useRef([]),lt=bt.useRef(null),P=bt.useRef(null),G=bt.useRef({tool:s,color:l,size:h,transform:T,page:v});bt.useRef(0),bt.useEffect(()=>{G.current={tool:s,color:l,size:h,transform:T,page:v}},[s,l,h,T,v]),bt.useEffect(()=>{const St=r.current;if(St){St.width=2500,St.height=2500;const jt=St.getContext("2d",{alpha:!0});jt.lineCap="round",jt.lineJoin="round",lt.current=jt}const I=()=>{t.current&&(P.current=t.current.getBoundingClientRect())};return window.addEventListener("resize",I),setTimeout(I,100),()=>window.removeEventListener("resize",I)},[]);const rt=()=>{if(!r.current)return;const St=r.current.toDataURL(),I=R.slice(0,D+1);I.push(St),I.length>20&&I.shift(),M(I),z(I.length-1),at()},Q=(St=!0)=>{if(D>0){const I=D-1;z(I);const jt=new Image;jt.onload=()=>{const qt=lt.current;qt.clearRect(0,0,r.current.width,r.current.height),qt.drawImage(jt,0,0),at()},jt.src=R[I],St&&e&&e.open&&e.send({type:"undo"})}},gt=(St=!0)=>{if(D<R.length-1){const I=D+1;z(I);const jt=new Image;jt.onload=()=>{const qt=lt.current;qt.clearRect(0,0,r.current.width,r.current.height),qt.drawImage(jt,0,0),at()},jt.src=R[I],St&&e&&e.open&&e.send({type:"redo"})}},V=n||"default",et=St=>`tutor_wb_${V}_p${St}`,at=()=>{r.current&&(localStorage.setItem(et(v),r.current.toDataURL()),localStorage.setItem(`tutor_wb_${V}_total`,C))},wt=St=>{const I=lt.current;if(!I||!r.current)return;I.clearRect(0,0,r.current.width,r.current.height);const jt=localStorage.getItem(et(St));if(jt){const qt=new Image;qt.onload=()=>{I.drawImage(qt,0,0),M([jt]),z(0)},qt.src=jt}else{const qt=r.current.toDataURL();M([qt]),z(0)}},Rt=(St,I=!0)=>{at(),b(St),wt(St),I&&e&&e.open&&e.send({type:"change_page",page:St})},Y=(St=!0)=>{at();const I=C+1;A(I),b(I),wt(I),St&&e&&e.open&&e.send({type:"add_page"})},k=()=>Rt(Math.min(C,v+1)),U=()=>Rt(Math.max(1,v-1)),W=(St=!0)=>{const I=lt.current;I&&r.current&&(I.clearRect(0,0,r.current.width,r.current.height),rt(),St&&e&&e.open&&e.send({type:"clear_canvas"}))};bt.useEffect(()=>{if(!n)return;const St=localStorage.getItem(`tutor_wb_${V}_total`);if(St){const I=parseInt(St);A(I),wt(1)}else A(1),b(1),W(!1)},[n]);const st=()=>{if(!K||!K.text.trim()){Z(null);return}const St=lt.current;St&&(St.globalCompositeOperation="source-over",St.fillStyle=G.current.color,St.font=`bold ${G.current.size*5}px sans-serif`,St.fillText(K.text,K.x,K.y),rt(),e&&e.open&&e.send({type:"draw_text",text:K.text,x:K.x,y:K.y,color:G.current.color,size:G.current.size,page:G.current.page})),Z(null)},ct=St=>{P.current||(P.current=t.current.getBoundingClientRect());const I=P.current,{x:jt,y:qt,scale:Yt}=G.current.transform;return{x:(St.clientX-I.left-jt)/Yt,y:(St.clientY-I.top-qt)/Yt}},ht=(St,I,jt)=>{if(I.length<2)return;if(St.lineWidth=jt.size,St.lineCap="round",St.lineJoin="round",jt.isEraser?(St.globalCompositeOperation="destination-out",St.strokeStyle="rgba(0,0,0,1)"):jt.isHighlighter?(St.globalCompositeOperation="multiply",St.strokeStyle=jt.color,St.globalAlpha=.5):(St.globalCompositeOperation="source-over",St.strokeStyle=jt.color),St.beginPath(),I.length===2){St.moveTo(I[0].x,I[0].y),St.lineTo(I[1].x,I[1].y),St.stroke();return}const qt=I.length-3,Yt=I[qt],Ot=I[qt+1],Jt=I[qt+2],Xt=(Yt.x+Ot.x)/2,Qt=(Yt.y+Ot.y)/2,ie=(Ot.x+Jt.x)/2,Se=(Ot.y+Jt.y)/2;return St.moveTo(Xt,Qt),St.quadraticCurveTo(Ot.x,Ot.y,ie,Se),St.stroke(),{p0:{x:Xt,y:Qt},p1:Ot,p2:{x:ie,y:Se}}},Ct=St=>{const{tool:I,color:jt,size:qt}=G.current;if(K){st();return}const Yt=St.buttons===1&&document.body.style.cursor==="grab";if(I==="pan"||St.button===1||Yt){g(!0);return}if(I==="text"){const Qt=ct(St);console.log("Text Tool Clicked at:",Qt),Z({x:Qt.x,y:Qt.y,text:""});return}J.current=!0;const Ot=ct(St);H.current=[Ot];const Jt=lt.current,Xt={color:jt,size:I==="highlighter"?qt*3:qt,isEraser:I==="eraser",isHighlighter:I==="highlighter"};Xt.isEraser?(Jt.globalCompositeOperation="destination-out",Jt.fillStyle="rgba(0,0,0,1)"):Xt.isHighlighter?(Jt.globalCompositeOperation="multiply",Jt.fillStyle=Xt.color,Jt.globalAlpha=.5):(Jt.globalCompositeOperation="source-over",Jt.fillStyle=Xt.color),Jt.beginPath(),Jt.arc(Ot.x,Ot.y,Xt.size/2,0,Math.PI*2),Jt.fill()},_t=St=>{if(p){const{movementX:Qt,movementY:ie}=St;S(Se=>({...Se,x:Se.x+Qt,y:Se.y+ie}));return}if(!J.current)return;const I=ct(St),jt=H.current;if(jt.length>0){const Qt=jt[jt.length-1];if(Math.sqrt(Math.pow(I.x-Qt.x,2)+Math.pow(I.y-Qt.y,2))<5)return}H.current.push(I);const qt=lt.current,{tool:Yt,color:Ot,size:Jt}=G.current,Xt={color:Ot,size:Yt==="highlighter"?Jt*3:Jt,isHighlighter:Yt==="highlighter",isEraser:Yt==="eraser"};if(jt.length>2){const Qt=ht(qt,jt,Xt);e&&e.open&&Qt&&e.send({type:"draw_curve",pts:[Qt.p0,Qt.p1,Qt.p2],color:Xt.color,size:Xt.size,isHighlighter:Xt.isHighlighter,isEraser:Xt.isEraser,page:G.current.page})}},Dt=()=>{J.current&&rt(),J.current=!1,H.current=[],g(!1)},Vt=St=>{if(St.ctrlKey){St.preventDefault();const I=-St.deltaY*.001;S(jt=>({...jt,scale:Math.max(.1,Math.min(5,jt.scale+I))}))}else S(I=>({...I,y:I.y-St.deltaY}))},Wt=()=>S(St=>({...St,scale:Math.min(5,St.scale*1.2)})),Kt=()=>S(St=>({...St,scale:Math.max(.1,St.scale/1.2)}));return bt.useEffect(()=>{window.externalDraw=St=>{const I=lt.current;if(I)if(St.type==="draw_curve"){if(St.page!==void 0&&St.page!==G.current.page)return;const[jt,qt,Yt]=St.pts;I.save(),I.lineWidth=St.size,I.lineCap="round",I.lineJoin="round",St.isEraser?(I.globalCompositeOperation="destination-out",I.strokeStyle="rgba(0,0,0,1)"):St.isHighlighter?(I.globalCompositeOperation="multiply",I.strokeStyle=St.color,I.globalAlpha=.5):(I.globalCompositeOperation="source-over",I.strokeStyle=St.color),I.beginPath(),I.moveTo(jt.x,jt.y),I.quadraticCurveTo(qt.x,qt.y,Yt.x,Yt.y),I.stroke(),I.restore(),rt()}else if(St.type==="draw_text"){if(St.page!==void 0&&St.page!==G.current.page)return;I.save(),I.globalCompositeOperation="source-over",I.fillStyle=St.color,I.font=`bold ${St.size*5}px sans-serif`,I.fillText(St.text,St.x,St.y),I.restore(),rt()}else St.type==="change_page"?Rt(St.page,!1):St.type==="add_page"?Y(!1):St.type==="clear_canvas"?W(!1):St.type==="undo"?Q(!1):St.type==="redo"&&gt(!1)}},[v,C,R,D]),{tool:s,setTool:a,color:l,setColor:c,size:h,setSize:f,transform:T,setTransform:S,zoomIn:Wt,zoomOut:Kt,page:v,totalPages:C,nextPage:k,prevPage:U,addPage:Y,clearCanvas:W,undo:Q,redo:gt,activeText:K,setActiveText:Z,finalizeText:st,events:{onMouseDown:Ct,onMouseMove:_t,onMouseUp:Dt,onMouseLeave:Dt,onWheel:Vt}}},mC="modulepreload",bC=function(r){return"/"+r},ay={},om=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=h(e.map(f=>{if(f=bC(f),f in ay)return;ay[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":mC,p||(v.as="script"),v.crossOrigin="",v.href=f,c&&v.setAttribute("nonce",c),document.head.appendChild(v),p)return new Promise((b,C)=>{v.addEventListener("load",b),v.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};function Dn(r){"@babel/helpers - typeof";return Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(r)}var qa=Uint8Array,Ur=Uint16Array,F0=Int32Array,j0=new qa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),U0=new qa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),oy=new qa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M5=function(r,t){for(var e=new Ur(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var s=new F0(e[30]),n=1;n<30;++n)for(var a=e[n];a<e[n+1];++a)s[a]=a-e[n]<<5|n;return{b:e,r:s}},D5=M5(j0,2),yC=D5.b,Jm=D5.r;yC[28]=258,Jm[258]=28;var vC=M5(U0,0),ly=vC.r,Qm=new Ur(32768);for(var Qn=0;Qn<32768;++Qn){var zl=(Qn&43690)>>1|(Qn&21845)<<1;zl=(zl&52428)>>2|(zl&13107)<<2,zl=(zl&61680)>>4|(zl&3855)<<4,Qm[Qn]=((zl&65280)>>8|(zl&255)<<8)>>1}var cf=(function(r,t,e){for(var n=r.length,s=0,a=new Ur(t);s<n;++s)r[s]&&++a[r[s]-1];var l=new Ur(t);for(s=1;s<t;++s)l[s]=l[s-1]+a[s-1]<<1;var c;if(e){c=new Ur(1<<t);var h=15-t;for(s=0;s<n;++s)if(r[s])for(var f=s<<4|r[s],p=t-r[s],g=l[r[s]-1]++<<p,v=g|(1<<p)-1;g<=v;++g)c[Qm[g]>>h]=f}else for(c=new Ur(n),s=0;s<n;++s)r[s]&&(c[s]=Qm[l[r[s]-1]++]>>15-r[s]);return c}),jc=new qa(288);for(var Qn=0;Qn<144;++Qn)jc[Qn]=8;for(var Qn=144;Qn<256;++Qn)jc[Qn]=9;for(var Qn=256;Qn<280;++Qn)jc[Qn]=7;for(var Qn=280;Qn<288;++Qn)jc[Qn]=8;var ap=new qa(32);for(var Qn=0;Qn<32;++Qn)ap[Qn]=5;var wC=cf(jc,9,0),xC=cf(ap,5,0),P5=function(r){return(r+7)/8|0},AC=function(r,t,e){return(e==null||e>r.length)&&(e=r.length),new qa(r.subarray(t,e))},Qo=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},tf=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},lm=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var s=e.length,a=e.slice();if(!s)return{t:B5,l:0};if(s==1){var l=new qa(e[0].s+1);return l[e[0].s]=1,{t:l,l:1}}e.sort(function(z,K){return z.f-K.f}),e.push({s:-1,f:25001});var c=e[0],h=e[1],f=0,p=1,g=2;for(e[0]={s:-1,f:c.f+h.f,l:c,r:h};p!=s-1;)c=e[e[f].f<e[g].f?f++:g++],h=e[f!=p&&e[f].f<e[g].f?f++:g++],e[p++]={s:-1,f:c.f+h.f,l:c,r:h};for(var v=a[0].s,n=1;n<s;++n)a[n].s>v&&(v=a[n].s);var b=new Ur(v+1),C=t0(e[p-1],b,0);if(C>t){var n=0,A=0,T=C-t,S=1<<T;for(a.sort(function(K,Z){return b[Z.s]-b[K.s]||K.f-Z.f});n<s;++n){var R=a[n].s;if(b[R]>t)A+=S-(1<<C-b[R]),b[R]=t;else break}for(A>>=T;A>0;){var M=a[n].s;b[M]<t?A-=1<<t-b[M]++-1:++n}for(;n>=0&&A;--n){var D=a[n].s;b[D]==t&&(--b[D],++A)}C=t}return{t:new qa(b),l:C}},t0=function(r,t,e){return r.s==-1?Math.max(t0(r.l,t,e+1),t0(r.r,t,e+1)):t[r.s]=e},cy=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new Ur(++t),n=0,s=r[0],a=1,l=function(h){e[n++]=h},c=1;c<=t;++c)if(r[c]==s&&c!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)l(32754);a>2&&(l(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(l(s),--a;a>6;a-=6)l(8304);a>2&&(l(a-3<<5|8208),a=0)}for(;a--;)l(s);a=1,s=r[c]}return{c:e.subarray(0,n),n:t}},ef=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},O5=function(r,t,e){var n=e.length,s=P5(t+2);r[s]=n&255,r[s+1]=n>>8,r[s+2]=r[s]^255,r[s+3]=r[s+1]^255;for(var a=0;a<n;++a)r[s+a+4]=e[a];return(s+4+n)*8},uy=function(r,t,e,n,s,a,l,c,h,f,p){Qo(t,p++,e),++s[256];for(var g=lm(s,15),v=g.t,b=g.l,C=lm(a,15),A=C.t,T=C.l,S=cy(v),R=S.c,M=S.n,D=cy(A),z=D.c,K=D.n,Z=new Ur(19),J=0;J<R.length;++J)++Z[R[J]&31];for(var J=0;J<z.length;++J)++Z[z[J]&31];for(var H=lm(Z,7),lt=H.t,P=H.l,G=19;G>4&&!lt[oy[G-1]];--G);var rt=f+5<<3,Q=ef(s,jc)+ef(a,ap)+l,gt=ef(s,v)+ef(a,A)+l+14+3*G+ef(Z,lt)+2*Z[16]+3*Z[17]+7*Z[18];if(h>=0&&rt<=Q&&rt<=gt)return O5(t,p,r.subarray(h,h+f));var V,et,at,wt;if(Qo(t,p,1+(gt<Q)),p+=2,gt<Q){V=cf(v,b,0),et=v,at=cf(A,T,0),wt=A;var Rt=cf(lt,P,0);Qo(t,p,M-257),Qo(t,p+5,K-1),Qo(t,p+10,G-4),p+=14;for(var J=0;J<G;++J)Qo(t,p+3*J,lt[oy[J]]);p+=3*G;for(var Y=[R,z],k=0;k<2;++k)for(var U=Y[k],J=0;J<U.length;++J){var W=U[J]&31;Qo(t,p,Rt[W]),p+=lt[W],W>15&&(Qo(t,p,U[J]>>5&127),p+=U[J]>>12)}}else V=wC,et=jc,at=xC,wt=ap;for(var J=0;J<c;++J){var st=n[J];if(st>255){var W=st>>18&31;tf(t,p,V[W+257]),p+=et[W+257],W>7&&(Qo(t,p,st>>23&31),p+=j0[W]);var ct=st&31;tf(t,p,at[ct]),p+=wt[ct],ct>3&&(tf(t,p,st>>5&8191),p+=U0[ct])}else tf(t,p,V[st]),p+=et[st]}return tf(t,p,V[256]),p+et[256]},_C=new F0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),B5=new qa(0),SC=function(r,t,e,n,s,a){var l=a.z||r.length,c=new qa(n+l+5*(1+Math.ceil(l/7e3))+s),h=c.subarray(n,c.length-s),f=a.l,p=(a.r||0)&7;if(t){p&&(h[0]=a.r>>3);for(var g=_C[t-1],v=g>>13,b=g&8191,C=(1<<e)-1,A=a.p||new Ur(32768),T=a.h||new Ur(C+1),S=Math.ceil(e/3),R=2*S,M=function(St){return(r[St]^r[St+1]<<S^r[St+2]<<R)&C},D=new F0(25e3),z=new Ur(288),K=new Ur(32),Z=0,J=0,H=a.i||0,lt=0,P=a.w||0,G=0;H+2<l;++H){var rt=M(H),Q=H&32767,gt=T[rt];if(A[Q]=gt,T[rt]=Q,P<=H){var V=l-H;if((Z>7e3||lt>24576)&&(V>423||!f)){p=uy(r,h,0,D,z,K,J,lt,G,H-G,p),lt=Z=J=0,G=H;for(var et=0;et<286;++et)z[et]=0;for(var et=0;et<30;++et)K[et]=0}var at=2,wt=0,Rt=b,Y=Q-gt&32767;if(V>2&&rt==M(H-Y))for(var k=Math.min(v,V)-1,U=Math.min(32767,H),W=Math.min(258,V);Y<=U&&--Rt&&Q!=gt;){if(r[H+at]==r[H+at-Y]){for(var st=0;st<W&&r[H+st]==r[H+st-Y];++st);if(st>at){if(at=st,wt=Y,st>k)break;for(var ct=Math.min(Y,st-2),ht=0,et=0;et<ct;++et){var Ct=H-Y+et&32767,_t=A[Ct],Dt=Ct-_t&32767;Dt>ht&&(ht=Dt,gt=Ct)}}}Q=gt,gt=A[Q],Y+=Q-gt&32767}if(wt){D[lt++]=268435456|Jm[at]<<18|ly[wt];var Vt=Jm[at]&31,Wt=ly[wt]&31;J+=j0[Vt]+U0[Wt],++z[257+Vt],++K[Wt],P=H+at,++Z}else D[lt++]=r[H],++z[r[H]]}}for(H=Math.max(H,P);H<l;++H)D[lt++]=r[H],++z[r[H]];p=uy(r,h,f,D,z,K,J,lt,G,H-G,p),f||(a.r=p&7|h[p/8|0]<<3,p-=7,a.h=T,a.p=A,a.i=H,a.w=P)}else{for(var H=a.w||0;H<l+f;H+=65535){var Kt=H+65535;Kt>=l&&(h[p/8|0]=f,Kt=l),p=O5(h,p+1,r.subarray(H,Kt))}a.i=l}return AC(c,0,n+P5(p)+s)},I5=function(){var r=1,t=0;return{p:function(e){for(var n=r,s=t,a=e.length|0,l=0;l!=a;){for(var c=Math.min(l+2655,a);l<c;++l)s+=n+=e[l];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}r=n,t=s},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},CC=function(r,t,e,n,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),l=new qa(a.length+r.length);l.set(a),l.set(r,a.length),r=l,s.w=a.length}return SC(r,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,n,s)},F5=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},EC=function(r,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var s=I5();s.p(t.dictionary),F5(r,2,s.d())}};function e0(r,t){t||(t={});var e=I5();e.p(r);var n=CC(r,t,t.dictionary?6:2,4);return EC(n,t),F5(n,n.length-4,e.d()),n}var TC=typeof TextDecoder<"u"&&new TextDecoder,NC=0;try{TC.decode(B5,{stream:!0}),NC=1}catch{}function LC(r){if(Array.isArray(r))return r}function kC(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,s,a,l,c=[],h=!0,f=!1;try{if(a=(e=e.call(r)).next,t!==0)for(;!(h=(n=a.call(e)).done)&&(c.push(n.value),c.length!==t);h=!0);}catch(p){f=!0,s=p}finally{try{if(!h&&e.return!=null&&(l=e.return(),Object(l)!==l))return}finally{if(f)throw s}}return c}}function hy(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function RC(r,t){if(r){if(typeof r=="string")return hy(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?hy(r,t):void 0}}function MC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fy(r,t){return LC(r)||kC(r,t)||RC(r,t)||MC()}function dy(r,t="utf8"){return new TextDecoder(t).decode(r)}const DC=new TextEncoder;function PC(r){return DC.encode(r)}const OC=1024*8,BC=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),cm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class z0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=OC,e={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const s=e.offset?e.offset>>>0:0,a=t.byteLength-s;let l=s;(ArrayBuffer.isView(t)||t instanceof z0)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+s),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const n=cm[e].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,a=this.buffer.slice(s,s+n);if(this.littleEndian===BC&&e!=="uint8"&&e!=="int8"){const c=new Uint8Array(this.buffer.slice(s,s+n));c.reverse();const h=new cm[e](c.buffer);return this.offset+=n,h.reverse(),h}const l=new cm[e](a);return this.offset+=n,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let n=0;n<t;n++)e+=this.readChar();return e}readUtf8(t=1){return dy(this.readBytes(t))}decodeText(t=1,e="utf8"){return dy(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(PC(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function uh(r){let t=r.length;for(;--t>=0;)r[t]=0}const IC=3,FC=258,j5=29,jC=256,UC=jC+1+j5,U5=30,zC=512,HC=new Array((UC+2)*2);uh(HC);const qC=new Array(U5*2);uh(qC);const GC=new Array(zC);uh(GC);const VC=new Array(FC-IC+1);uh(VC);const $C=new Array(j5);uh($C);const YC=new Array(U5);uh(YC);const XC=(r,t,e,n)=>{let s=r&65535|0,a=r>>>16&65535|0,l=0;for(;e!==0;){l=e>2e3?2e3:e,e-=l;do s=s+t[n++]|0,a=a+s|0;while(--l);s%=65521,a%=65521}return s|a<<16|0};var n0=XC;const WC=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},KC=new Uint32Array(WC()),ZC=(r,t,e,n)=>{const s=KC,a=n+e;r^=-1;for(let l=n;l<a;l++)r=r>>>8^s[(r^t[l])&255];return r^-1};var bo=ZC,i0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},z5={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const JC=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var QC=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)JC(e,n)&&(r[n]=e[n])}}return r},tE=r=>{let t=0;for(let n=0,s=r.length;n<s;n++)t+=r[n].length;const e=new Uint8Array(t);for(let n=0,s=0,a=r.length;n<a;n++){let l=r[n];e.set(l,s),s+=l.length}return e},H5={assign:QC,flattenChunks:tE};let q5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{q5=!1}const bf=new Uint8Array(256);for(let r=0;r<256;r++)bf[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;bf[254]=bf[254]=1;var eE=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,s,a,l=r.length,c=0;for(s=0;s<l;s++)e=r.charCodeAt(s),(e&64512)===55296&&s+1<l&&(n=r.charCodeAt(s+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),s++)),c+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(c),a=0,s=0;a<c;s++)e=r.charCodeAt(s),(e&64512)===55296&&s+1<l&&(n=r.charCodeAt(s+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),s++)),e<128?t[a++]=e:e<2048?(t[a++]=192|e>>>6,t[a++]=128|e&63):e<65536?(t[a++]=224|e>>>12,t[a++]=128|e>>>6&63,t[a++]=128|e&63):(t[a++]=240|e>>>18,t[a++]=128|e>>>12&63,t[a++]=128|e>>>6&63,t[a++]=128|e&63);return t};const nE=(r,t)=>{if(t<65534&&r.subarray&&q5)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e};var iE=(r,t)=>{const e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,s;const a=new Array(e*2);for(s=0,n=0;n<e;){let l=r[n++];if(l<128){a[s++]=l;continue}let c=bf[l];if(c>4){a[s++]=65533,n+=c-1;continue}for(l&=c===2?31:c===3?15:7;c>1&&n<e;)l=l<<6|r[n++]&63,c--;if(c>1){a[s++]=65533;continue}l<65536?a[s++]=l:(l-=65536,a[s++]=55296|l>>10&1023,a[s++]=56320|l&1023)}return nE(a,s)},sE=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+bf[r[e]]>t?e:t},s0={string2buf:eE,buf2string:iE,utf8border:sE};function rE(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var aE=rE;const Rd=16209,oE=16191;var lE=function(t,e){let n,s,a,l,c,h,f,p,g,v,b,C,A,T,S,R,M,D,z,K,Z,J,H,lt;const P=t.state;n=t.next_in,H=t.input,s=n+(t.avail_in-5),a=t.next_out,lt=t.output,l=a-(e-t.avail_out),c=a+(t.avail_out-257),h=P.dmax,f=P.wsize,p=P.whave,g=P.wnext,v=P.window,b=P.hold,C=P.bits,A=P.lencode,T=P.distcode,S=(1<<P.lenbits)-1,R=(1<<P.distbits)-1;t:do{C<15&&(b+=H[n++]<<C,C+=8,b+=H[n++]<<C,C+=8),M=A[b&S];e:for(;;){if(D=M>>>24,b>>>=D,C-=D,D=M>>>16&255,D===0)lt[a++]=M&65535;else if(D&16){z=M&65535,D&=15,D&&(C<D&&(b+=H[n++]<<C,C+=8),z+=b&(1<<D)-1,b>>>=D,C-=D),C<15&&(b+=H[n++]<<C,C+=8,b+=H[n++]<<C,C+=8),M=T[b&R];n:for(;;){if(D=M>>>24,b>>>=D,C-=D,D=M>>>16&255,D&16){if(K=M&65535,D&=15,C<D&&(b+=H[n++]<<C,C+=8,C<D&&(b+=H[n++]<<C,C+=8)),K+=b&(1<<D)-1,K>h){t.msg="invalid distance too far back",P.mode=Rd;break t}if(b>>>=D,C-=D,D=a-l,K>D){if(D=K-D,D>p&&P.sane){t.msg="invalid distance too far back",P.mode=Rd;break t}if(Z=0,J=v,g===0){if(Z+=f-D,D<z){z-=D;do lt[a++]=v[Z++];while(--D);Z=a-K,J=lt}}else if(g<D){if(Z+=f+g-D,D-=g,D<z){z-=D;do lt[a++]=v[Z++];while(--D);if(Z=0,g<z){D=g,z-=D;do lt[a++]=v[Z++];while(--D);Z=a-K,J=lt}}}else if(Z+=g-D,D<z){z-=D;do lt[a++]=v[Z++];while(--D);Z=a-K,J=lt}for(;z>2;)lt[a++]=J[Z++],lt[a++]=J[Z++],lt[a++]=J[Z++],z-=3;z&&(lt[a++]=J[Z++],z>1&&(lt[a++]=J[Z++]))}else{Z=a-K;do lt[a++]=lt[Z++],lt[a++]=lt[Z++],lt[a++]=lt[Z++],z-=3;while(z>2);z&&(lt[a++]=lt[Z++],z>1&&(lt[a++]=lt[Z++]))}}else if((D&64)===0){M=T[(M&65535)+(b&(1<<D)-1)];continue n}else{t.msg="invalid distance code",P.mode=Rd;break t}break}}else if((D&64)===0){M=A[(M&65535)+(b&(1<<D)-1)];continue e}else if(D&32){P.mode=oE;break t}else{t.msg="invalid literal/length code",P.mode=Rd;break t}break}}while(n<s&&a<c);z=C>>3,n-=z,C-=z<<3,b&=(1<<C)-1,t.next_in=n,t.next_out=a,t.avail_in=n<s?5+(s-n):5-(n-s),t.avail_out=a<c?257+(c-a):257-(a-c),P.hold=b,P.bits=C};const ju=15,py=852,gy=592,my=0,um=1,by=2,cE=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uE=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hE=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fE=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dE=(r,t,e,n,s,a,l,c)=>{const h=c.bits;let f=0,p=0,g=0,v=0,b=0,C=0,A=0,T=0,S=0,R=0,M,D,z,K,Z,J=null,H;const lt=new Uint16Array(ju+1),P=new Uint16Array(ju+1);let G=null,rt,Q,gt;for(f=0;f<=ju;f++)lt[f]=0;for(p=0;p<n;p++)lt[t[e+p]]++;for(b=h,v=ju;v>=1&&lt[v]===0;v--);if(b>v&&(b=v),v===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,c.bits=1,0;for(g=1;g<v&&lt[g]===0;g++);for(b<g&&(b=g),T=1,f=1;f<=ju;f++)if(T<<=1,T-=lt[f],T<0)return-1;if(T>0&&(r===my||v!==1))return-1;for(P[1]=0,f=1;f<ju;f++)P[f+1]=P[f]+lt[f];for(p=0;p<n;p++)t[e+p]!==0&&(l[P[t[e+p]]++]=p);if(r===my?(J=G=l,H=20):r===um?(J=cE,G=uE,H=257):(J=hE,G=fE,H=0),R=0,p=0,f=g,Z=a,C=b,A=0,z=-1,S=1<<b,K=S-1,r===um&&S>py||r===by&&S>gy)return 1;for(;;){rt=f-A,l[p]+1<H?(Q=0,gt=l[p]):l[p]>=H?(Q=G[l[p]-H],gt=J[l[p]-H]):(Q=96,gt=0),M=1<<f-A,D=1<<C,g=D;do D-=M,s[Z+(R>>A)+D]=rt<<24|Q<<16|gt|0;while(D!==0);for(M=1<<f-1;R&M;)M>>=1;if(M!==0?(R&=M-1,R+=M):R=0,p++,--lt[f]===0){if(f===v)break;f=t[e+l[p]]}if(f>b&&(R&K)!==z){for(A===0&&(A=b),Z+=g,C=f-A,T=1<<C;C+A<v&&(T-=lt[C+A],!(T<=0));)C++,T<<=1;if(S+=1<<C,r===um&&S>py||r===by&&S>gy)return 1;z=R&K,s[z]=b<<24|C<<16|Z-a|0}}return R!==0&&(s[Z+R]=f-A<<24|64<<16|0),c.bits=b,0};var uf=dE;const pE=0,G5=1,V5=2,{Z_FINISH:yy,Z_BLOCK:gE,Z_TREES:Md,Z_OK:Uc,Z_STREAM_END:mE,Z_NEED_DICT:bE,Z_STREAM_ERROR:ua,Z_DATA_ERROR:$5,Z_MEM_ERROR:Y5,Z_BUF_ERROR:yE,Z_DEFLATED:vy}=z5,Lp=16180,wy=16181,xy=16182,Ay=16183,_y=16184,Sy=16185,Cy=16186,Ey=16187,Ty=16188,Ny=16189,op=16190,tl=16191,hm=16192,Ly=16193,fm=16194,ky=16195,Ry=16196,My=16197,Dy=16198,Dd=16199,Pd=16200,Py=16201,Oy=16202,By=16203,Iy=16204,Fy=16205,dm=16206,jy=16207,Uy=16208,ri=16209,X5=16210,W5=16211,vE=852,wE=592,xE=15,AE=xE,zy=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function _E(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qc=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<Lp||t.mode>W5?1:0},K5=r=>{if(qc(r))return ua;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Lp,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(vE),t.distcode=t.distdyn=new Int32Array(wE),t.sane=1,t.back=-1,Uc},Z5=r=>{if(qc(r))return ua;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,K5(r)},J5=(r,t)=>{let e;if(qc(r))return ua;const n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ua:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,Z5(r))},Q5=(r,t)=>{if(!r)return ua;const e=new _E;r.state=e,e.strm=r,e.window=null,e.mode=Lp;const n=J5(r,t);return n!==Uc&&(r.state=null),n},SE=r=>Q5(r,AE);let Hy=!0,pm,gm;const CE=r=>{if(Hy){pm=new Int32Array(512),gm=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(uf(G5,r.lens,0,288,pm,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;uf(V5,r.lens,0,32,gm,0,r.work,{bits:5}),Hy=!1}r.lencode=pm,r.lenbits=9,r.distcode=gm,r.distbits=5},tw=(r,t,e,n)=>{let s;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(t.subarray(e-n,e-n+s),a.wnext),n-=s,n?(a.window.set(t.subarray(e-n,e),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},EE=(r,t)=>{let e,n,s,a,l,c,h,f,p,g,v,b,C,A,T=0,S,R,M,D,z,K,Z,J;const H=new Uint8Array(4);let lt,P;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qc(r)||!r.output||!r.input&&r.avail_in!==0)return ua;e=r.state,e.mode===tl&&(e.mode=hm),l=r.next_out,s=r.output,h=r.avail_out,a=r.next_in,n=r.input,c=r.avail_in,f=e.hold,p=e.bits,g=c,v=h,J=Uc;t:for(;;)switch(e.mode){case Lp:if(e.wrap===0){e.mode=hm;break}for(;p<16;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(e.wrap&2&&f===35615){e.wbits===0&&(e.wbits=15),e.check=0,H[0]=f&255,H[1]=f>>>8&255,e.check=bo(e.check,H,2,0),f=0,p=0,e.mode=wy;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((f&255)<<8)+(f>>8))%31){r.msg="incorrect header check",e.mode=ri;break}if((f&15)!==vy){r.msg="unknown compression method",e.mode=ri;break}if(f>>>=4,p-=4,Z=(f&15)+8,e.wbits===0&&(e.wbits=Z),Z>15||Z>e.wbits){r.msg="invalid window size",e.mode=ri;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=f&512?Ny:tl,f=0,p=0;break;case wy:for(;p<16;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(e.flags=f,(e.flags&255)!==vy){r.msg="unknown compression method",e.mode=ri;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=ri;break}e.head&&(e.head.text=f>>8&1),e.flags&512&&e.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,e.check=bo(e.check,H,2,0)),f=0,p=0,e.mode=xy;case xy:for(;p<32;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}e.head&&(e.head.time=f),e.flags&512&&e.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,H[2]=f>>>16&255,H[3]=f>>>24&255,e.check=bo(e.check,H,4,0)),f=0,p=0,e.mode=Ay;case Ay:for(;p<16;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}e.head&&(e.head.xflags=f&255,e.head.os=f>>8),e.flags&512&&e.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,e.check=bo(e.check,H,2,0)),f=0,p=0,e.mode=_y;case _y:if(e.flags&1024){for(;p<16;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}e.length=f,e.head&&(e.head.extra_len=f),e.flags&512&&e.wrap&4&&(H[0]=f&255,H[1]=f>>>8&255,e.check=bo(e.check,H,2,0)),f=0,p=0}else e.head&&(e.head.extra=null);e.mode=Sy;case Sy:if(e.flags&1024&&(b=e.length,b>c&&(b=c),b&&(e.head&&(Z=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(a,a+b),Z)),e.flags&512&&e.wrap&4&&(e.check=bo(e.check,n,b,a)),c-=b,a+=b,e.length-=b),e.length))break t;e.length=0,e.mode=Cy;case Cy:if(e.flags&2048){if(c===0)break t;b=0;do Z=n[a+b++],e.head&&Z&&e.length<65536&&(e.head.name+=String.fromCharCode(Z));while(Z&&b<c);if(e.flags&512&&e.wrap&4&&(e.check=bo(e.check,n,b,a)),c-=b,a+=b,Z)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=Ey;case Ey:if(e.flags&4096){if(c===0)break t;b=0;do Z=n[a+b++],e.head&&Z&&e.length<65536&&(e.head.comment+=String.fromCharCode(Z));while(Z&&b<c);if(e.flags&512&&e.wrap&4&&(e.check=bo(e.check,n,b,a)),c-=b,a+=b,Z)break t}else e.head&&(e.head.comment=null);e.mode=Ty;case Ty:if(e.flags&512){for(;p<16;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(e.wrap&4&&f!==(e.check&65535)){r.msg="header crc mismatch",e.mode=ri;break}f=0,p=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=tl;break;case Ny:for(;p<32;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}r.adler=e.check=zy(f),f=0,p=0,e.mode=op;case op:if(e.havedict===0)return r.next_out=l,r.avail_out=h,r.next_in=a,r.avail_in=c,e.hold=f,e.bits=p,bE;r.adler=e.check=1,e.mode=tl;case tl:if(t===gE||t===Md)break t;case hm:if(e.last){f>>>=p&7,p-=p&7,e.mode=dm;break}for(;p<3;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}switch(e.last=f&1,f>>>=1,p-=1,f&3){case 0:e.mode=Ly;break;case 1:if(CE(e),e.mode=Dd,t===Md){f>>>=2,p-=2;break t}break;case 2:e.mode=Ry;break;case 3:r.msg="invalid block type",e.mode=ri}f>>>=2,p-=2;break;case Ly:for(f>>>=p&7,p-=p&7;p<32;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){r.msg="invalid stored block lengths",e.mode=ri;break}if(e.length=f&65535,f=0,p=0,e.mode=fm,t===Md)break t;case fm:e.mode=ky;case ky:if(b=e.length,b){if(b>c&&(b=c),b>h&&(b=h),b===0)break t;s.set(n.subarray(a,a+b),l),c-=b,a+=b,h-=b,l+=b,e.length-=b;break}e.mode=tl;break;case Ry:for(;p<14;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(e.nlen=(f&31)+257,f>>>=5,p-=5,e.ndist=(f&31)+1,f>>>=5,p-=5,e.ncode=(f&15)+4,f>>>=4,p-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=ri;break}e.have=0,e.mode=My;case My:for(;e.have<e.ncode;){for(;p<3;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}e.lens[G[e.have++]]=f&7,f>>>=3,p-=3}for(;e.have<19;)e.lens[G[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,lt={bits:e.lenbits},J=uf(pE,e.lens,0,19,e.lencode,0,e.work,lt),e.lenbits=lt.bits,J){r.msg="invalid code lengths set",e.mode=ri;break}e.have=0,e.mode=Dy;case Dy:for(;e.have<e.nlen+e.ndist;){for(;T=e.lencode[f&(1<<e.lenbits)-1],S=T>>>24,R=T>>>16&255,M=T&65535,!(S<=p);){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(M<16)f>>>=S,p-=S,e.lens[e.have++]=M;else{if(M===16){for(P=S+2;p<P;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(f>>>=S,p-=S,e.have===0){r.msg="invalid bit length repeat",e.mode=ri;break}Z=e.lens[e.have-1],b=3+(f&3),f>>>=2,p-=2}else if(M===17){for(P=S+3;p<P;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}f>>>=S,p-=S,Z=0,b=3+(f&7),f>>>=3,p-=3}else{for(P=S+7;p<P;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}f>>>=S,p-=S,Z=0,b=11+(f&127),f>>>=7,p-=7}if(e.have+b>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=ri;break}for(;b--;)e.lens[e.have++]=Z}}if(e.mode===ri)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=ri;break}if(e.lenbits=9,lt={bits:e.lenbits},J=uf(G5,e.lens,0,e.nlen,e.lencode,0,e.work,lt),e.lenbits=lt.bits,J){r.msg="invalid literal/lengths set",e.mode=ri;break}if(e.distbits=6,e.distcode=e.distdyn,lt={bits:e.distbits},J=uf(V5,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,lt),e.distbits=lt.bits,J){r.msg="invalid distances set",e.mode=ri;break}if(e.mode=Dd,t===Md)break t;case Dd:e.mode=Pd;case Pd:if(c>=6&&h>=258){r.next_out=l,r.avail_out=h,r.next_in=a,r.avail_in=c,e.hold=f,e.bits=p,lE(r,v),l=r.next_out,s=r.output,h=r.avail_out,a=r.next_in,n=r.input,c=r.avail_in,f=e.hold,p=e.bits,e.mode===tl&&(e.back=-1);break}for(e.back=0;T=e.lencode[f&(1<<e.lenbits)-1],S=T>>>24,R=T>>>16&255,M=T&65535,!(S<=p);){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(R&&(R&240)===0){for(D=S,z=R,K=M;T=e.lencode[K+((f&(1<<D+z)-1)>>D)],S=T>>>24,R=T>>>16&255,M=T&65535,!(D+S<=p);){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}f>>>=D,p-=D,e.back+=D}if(f>>>=S,p-=S,e.back+=S,e.length=M,R===0){e.mode=Fy;break}if(R&32){e.back=-1,e.mode=tl;break}if(R&64){r.msg="invalid literal/length code",e.mode=ri;break}e.extra=R&15,e.mode=Py;case Py:if(e.extra){for(P=e.extra;p<P;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}e.length+=f&(1<<e.extra)-1,f>>>=e.extra,p-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Oy;case Oy:for(;T=e.distcode[f&(1<<e.distbits)-1],S=T>>>24,R=T>>>16&255,M=T&65535,!(S<=p);){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if((R&240)===0){for(D=S,z=R,K=M;T=e.distcode[K+((f&(1<<D+z)-1)>>D)],S=T>>>24,R=T>>>16&255,M=T&65535,!(D+S<=p);){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}f>>>=D,p-=D,e.back+=D}if(f>>>=S,p-=S,e.back+=S,R&64){r.msg="invalid distance code",e.mode=ri;break}e.offset=M,e.extra=R&15,e.mode=By;case By:if(e.extra){for(P=e.extra;p<P;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}e.offset+=f&(1<<e.extra)-1,f>>>=e.extra,p-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=ri;break}e.mode=Iy;case Iy:if(h===0)break t;if(b=v-h,e.offset>b){if(b=e.offset-b,b>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=ri;break}b>e.wnext?(b-=e.wnext,C=e.wsize-b):C=e.wnext-b,b>e.length&&(b=e.length),A=e.window}else A=s,C=l-e.offset,b=e.length;b>h&&(b=h),h-=b,e.length-=b;do s[l++]=A[C++];while(--b);e.length===0&&(e.mode=Pd);break;case Fy:if(h===0)break t;s[l++]=e.length,h--,e.mode=Pd;break;case dm:if(e.wrap){for(;p<32;){if(c===0)break t;c--,f|=n[a++]<<p,p+=8}if(v-=h,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?bo(e.check,s,v,l-v):n0(e.check,s,v,l-v)),v=h,e.wrap&4&&(e.flags?f:zy(f))!==e.check){r.msg="incorrect data check",e.mode=ri;break}f=0,p=0}e.mode=jy;case jy:if(e.wrap&&e.flags){for(;p<32;){if(c===0)break t;c--,f+=n[a++]<<p,p+=8}if(e.wrap&4&&f!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=ri;break}f=0,p=0}e.mode=Uy;case Uy:J=mE;break t;case ri:J=$5;break t;case X5:return Y5;case W5:default:return ua}return r.next_out=l,r.avail_out=h,r.next_in=a,r.avail_in=c,e.hold=f,e.bits=p,(e.wsize||v!==r.avail_out&&e.mode<ri&&(e.mode<dm||t!==yy))&&tw(r,r.output,r.next_out,v-r.avail_out),g-=r.avail_in,v-=r.avail_out,r.total_in+=g,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?bo(e.check,s,v,r.next_out-v):n0(e.check,s,v,r.next_out-v)),r.data_type=e.bits+(e.last?64:0)+(e.mode===tl?128:0)+(e.mode===Dd||e.mode===fm?256:0),(g===0&&v===0||t===yy)&&J===Uc&&(J=yE),J},TE=r=>{if(qc(r))return ua;let t=r.state;return t.window&&(t.window=null),r.state=null,Uc},NE=(r,t)=>{if(qc(r))return ua;const e=r.state;return(e.wrap&2)===0?ua:(e.head=t,t.done=!1,Uc)},LE=(r,t)=>{const e=t.length;let n,s,a;return qc(r)||(n=r.state,n.wrap!==0&&n.mode!==op)?ua:n.mode===op&&(s=1,s=n0(s,t,e,0),s!==n.check)?$5:(a=tw(r,t,e,e),a?(n.mode=X5,Y5):(n.havedict=1,Uc))};var kE=Z5,RE=J5,ME=K5,DE=SE,PE=Q5,OE=EE,BE=TE,IE=NE,FE=LE,jE="pako inflate (from Nodeca project)",il={inflateReset:kE,inflateReset2:RE,inflateResetKeep:ME,inflateInit:DE,inflateInit2:PE,inflate:OE,inflateEnd:BE,inflateGetHeader:IE,inflateSetDictionary:FE,inflateInfo:jE};function UE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zE=UE;const ew=Object.prototype.toString,{Z_NO_FLUSH:HE,Z_FINISH:qE,Z_OK:yf,Z_STREAM_END:mm,Z_NEED_DICT:bm,Z_STREAM_ERROR:GE,Z_DATA_ERROR:qy,Z_MEM_ERROR:VE}=z5;function Nf(r){this.options=H5.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new aE,this.strm.avail_out=0;let e=il.inflateInit2(this.strm,t.windowBits);if(e!==yf)throw new Error(i0[e]);if(this.header=new zE,il.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=s0.string2buf(t.dictionary):ew.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=il.inflateSetDictionary(this.strm,t.dictionary),e!==yf)))throw new Error(i0[e])}Nf.prototype.push=function(r,t){const e=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let a,l,c;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?qE:HE,ew.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),a=il.inflate(e,l),a===bm&&s&&(a=il.inflateSetDictionary(e,s),a===yf?a=il.inflate(e,l):a===qy&&(a=bm));e.avail_in>0&&a===mm&&e.state.wrap>0&&r[e.next_in]!==0;)il.inflateReset(e),a=il.inflate(e,l);switch(a){case GE:case qy:case bm:case VE:return this.onEnd(a),this.ended=!0,!1}if(c=e.avail_out,e.next_out&&(e.avail_out===0||a===mm))if(this.options.to==="string"){let h=s0.utf8border(e.output,e.next_out),f=e.next_out-h,p=s0.buf2string(e.output,h);e.next_out=f,e.avail_out=n-f,f&&e.output.set(e.output.subarray(h,h+f),0),this.onData(p)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(a===yf&&c===0)){if(a===mm)return a=il.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Nf.prototype.onData=function(r){this.chunks.push(r)};Nf.prototype.onEnd=function(r){r===yf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=H5.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function $E(r,t){const e=new Nf(t);if(e.push(r),e.err)throw e.msg||i0[e.err];return e.result}var YE=Nf,XE=$E,WE={Inflate:YE,inflate:XE};const{Inflate:KE,inflate:ZE}=WE;var Gy=KE,JE=ZE;const nw=[];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;nw[r]=t}const Vy=4294967295;function QE(r,t,e){let n=r;for(let s=0;s<e;s++)n=nw[(n^t[s])&255]^n>>>8;return n}function t6(r,t){return(QE(Vy,r,t)^Vy)>>>0}function $y(r,t,e){const n=r.readUint32(),s=t6(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(s!==n)throw new Error(`CRC mismatch for chunk ${e}. Expected ${n}, found ${s}`)}function iw(r,t,e){for(let n=0;n<e;n++)t[n]=r[n]}function sw(r,t,e,n){let s=0;for(;s<n;s++)t[s]=r[s];for(;s<e;s++)t[s]=r[s]+t[s-n]&255}function rw(r,t,e,n){let s=0;if(e.length===0)for(;s<n;s++)t[s]=r[s];else for(;s<n;s++)t[s]=r[s]+e[s]&255}function aw(r,t,e,n,s){let a=0;if(e.length===0){for(;a<s;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+(t[a-s]>>1)&255}else{for(;a<s;a++)t[a]=r[a]+(e[a]>>1)&255;for(;a<n;a++)t[a]=r[a]+(t[a-s]+e[a]>>1)&255}}function ow(r,t,e,n,s){let a=0;if(e.length===0){for(;a<s;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+t[a-s]&255}else{for(;a<s;a++)t[a]=r[a]+e[a]&255;for(;a<n;a++)t[a]=r[a]+e6(t[a-s],e[a],e[a-s])&255}}function e6(r,t,e){const n=r+t-e,s=Math.abs(n-r),a=Math.abs(n-t),l=Math.abs(n-e);return s<=a&&s<=l?r:a<=l?t:e}function n6(r,t,e,n,s,a){switch(r){case 0:iw(t,e,s);break;case 1:sw(t,e,s,a);break;case 2:rw(t,e,n,s);break;case 3:aw(t,e,n,s,a);break;case 4:ow(t,e,n,s,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const i6=new Uint16Array([255]),s6=new Uint8Array(i6.buffer),r6=s6[0]===255;function a6(r){const{data:t,width:e,height:n,channels:s,depth:a}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(a/8)*s,h=new Uint8Array(n*e*c);let f=0;for(let p=0;p<7;p++){const g=l[p],v=Math.ceil((e-g.x)/g.xStep),b=Math.ceil((n-g.y)/g.yStep);if(v<=0||b<=0)continue;const C=v*c,A=new Uint8Array(C);for(let T=0;T<b;T++){const S=t[f++],R=t.subarray(f,f+C);f+=C;const M=new Uint8Array(C);n6(S,R,M,A,C,c),A.set(M);for(let D=0;D<v;D++){const z=g.x+D*g.xStep,K=g.y+T*g.yStep;if(!(z>=e||K>=n))for(let Z=0;Z<c;Z++)h[(K*e+z)*c+Z]=M[D*c+Z]}}}if(a===16){const p=new Uint16Array(h.buffer);if(r6)for(let g=0;g<p.length;g++)p[g]=o6(p[g]);return p}else return h}function o6(r){return(r&255)<<8|r>>8&255}const l6=new Uint16Array([255]),c6=new Uint8Array(l6.buffer),u6=c6[0]===255,h6=new Uint8Array(0);function Yy(r){const{data:t,width:e,height:n,channels:s,depth:a}=r,l=Math.ceil(a/8)*s,c=Math.ceil(a/8*s*e),h=new Uint8Array(n*c);let f=h6,p=0,g,v;for(let b=0;b<n;b++){switch(g=t.subarray(p+1,p+1+c),v=h.subarray(b*c,(b+1)*c),t[p]){case 0:iw(g,v,c);break;case 1:sw(g,v,c,l);break;case 2:rw(g,v,f,c);break;case 3:aw(g,v,f,c,l);break;case 4:ow(g,v,f,c,l);break;default:throw new Error(`Unsupported filter: ${t[p]}`)}f=v,p+=c+1}if(a===16){const b=new Uint16Array(h.buffer);if(u6)for(let C=0;C<b.length;C++)b[C]=f6(b[C]);return b}else return h}function f6(r){return(r&255)<<8|r>>8&255}const Gd=Uint8Array.of(137,80,78,71,13,10,26,10);function Xy(r){if(!d6(r.readBytes(Gd.length)))throw new Error("wrong PNG signature")}function d6(r){if(r.length<Gd.length)return!1;for(let t=0;t<Gd.length;t++)if(r[t]!==Gd[t])return!1;return!0}const p6="tEXt",g6=0,lw=new TextDecoder("latin1");function m6(r){if(y6(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const b6=/^[\u0000-\u00FF]*$/;function y6(r){if(!b6.test(r))throw new Error("invalid latin1 text")}function v6(r,t,e){const n=cw(t);r[n]=w6(t,e-n.length-1)}function cw(r){for(r.mark();r.readByte()!==g6;);const t=r.offset;r.reset();const e=lw.decode(r.readBytes(t-r.offset-1));return r.skip(1),m6(e),e}function w6(r,t){return lw.decode(r.readBytes(t))}const Br={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},ym={UNKNOWN:-1,DEFLATE:0},Wy={UNKNOWN:-1,ADAPTIVE:0},vm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Od={NONE:0,BACKGROUND:1,PREVIOUS:2},wm={SOURCE:0,OVER:1};class x6 extends z0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,e={}){super(t);const{checkCrc:n=!1}=e;this._checkCrc=n,this._inflator=new Gy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=ym.UNKNOWN,this._filterMethod=Wy.UNKNOWN,this._interlaceMethod=vm.UNKNOWN,this._colorType=Br.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Xy(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeChunk(t,e)}return this.decodeImage(),this._png}decodeApng(){for(Xy(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeApngChunk(t,e)}return this.decodeApngImage(),this._apng}decodeChunk(t,e){const n=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case p6:v6(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?$y(this,t+4,e):this.skip(4)}decodeApngChunk(t,e){const n=this.offset;switch(e!=="fdAT"&&e!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),e){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,e),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?$y(this,t+4,e):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=A6(this.readUint8());const e=this.readUint8();this._colorType=e;let n;switch(e){case Br.GREYSCALE:n=1;break;case Br.TRUECOLOUR:n=3;break;case Br.INDEXED_COLOUR:n=1;break;case Br.GREYSCALE_ALPHA:n=2;break;case Br.TRUECOLOUR_ALPHA:n=4;break;case Br.UNKNOWN:default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==ym.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const e=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let s=0;s<e;s++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const e=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let e=t,n=this.offset+this.byteOffset;if(n+=4,e-=4,this._inflator.push(new Uint8Array(this.buffer,n,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Br.GREYSCALE:case Br.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let e=0;e<t/2;e++)this._transparency[e]=this.readUint16();break}case Br.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let e=0;for(;e<t;e++){const n=this.readByte();this._palette[e].push(n)}for(;e<this._palette.length;e++)this._palette[e].push(255);break}case Br.UNKNOWN:case Br.GREYSCALE_ALPHA:case Br.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const e=cw(this),n=this.readUint8();if(n!==ym.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const s=this.readBytes(t-e.length-2);this._png.iccEmbeddedProfile={name:e,profile:JE(s)}}decodepHYs(){const t=this.readUint32(),e=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:e,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const e={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=Yy({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)e.data=n.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(n,s,e),this.addFrameDataToCanvas(e,n)}this._apng.frames.push(e)}}return this._apng}disposeFrame(t,e,n){switch(t.disposeOp){case Od.NONE:break;case Od.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const l=(s*t.width+a)*this._png.channels;for(let c=0;c<this._png.channels;c++)n.data[l+c]=0}break;case Od.PREVIOUS:n.data.set(e.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,e){const n=1<<this._png.depth,s=(a,l)=>{const c=((a+e.yOffset)*this._png.width+e.xOffset+l)*this._png.channels,h=(a*e.width+l)*this._png.channels;return{index:c,frameIndex:h}};switch(e.blendOp){case wm.SOURCE:for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){const{index:c,frameIndex:h}=s(a,l);for(let f=0;f<this._png.channels;f++)t.data[c+f]=e.data[h+f]}break;case wm.OVER:for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){const{index:c,frameIndex:h}=s(a,l);for(let f=0;f<this._png.channels;f++){const p=e.data[h+this._png.channels-1]/n,g=f%(this._png.channels-1)===0?1:e.data[h+f],v=Math.floor(p*g+(1-p)*t.data[c+f]);t.data[c+f]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Wy.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===vm.NO_INTERLACE)this._png.data=Yy({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===vm.ADAM7)this._png.data=a6({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,e=this._frames.at(-1);e?e.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Od.NONE,blendOp:wm.SOURCE,data:t}),this._inflator=new Gy,this._writingDataChunks=!1}}function A6(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Ky;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Ky||(Ky={}));function _6(r,t){return new x6(r,t).decode()}var Be=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function xm(){Be.console&&typeof Be.console.log=="function"&&Be.console.log.apply(Be.console,arguments)}var Vn={log:xm,warn:function(r){Be.console&&(typeof Be.console.warn=="function"?Be.console.warn.apply(Be.console,arguments):xm.call(null,arguments))},error:function(r){Be.console&&(typeof Be.console.error=="function"?Be.console.error.apply(Be.console,arguments):xm(r))}};function Am(r,t,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){kc(n.response,t,e)},n.onerror=function(){Vn.error("could not download file")},n.send()}function Zy(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Bd(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var kc=Be.saveAs||((typeof window>"u"?"undefined":Dn(window))!=="object"||window!==Be?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var n=Be.URL||Be.webkitURL,s=document.createElement("a");t=t||r.name||"download",s.download=t,s.rel="noopener",typeof r=="string"?(s.href=r,s.origin!==location.origin?Zy(s.href)?Am(r,t,e):Bd(s,s.target="_blank"):Bd(s)):(s.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Bd(s)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(Zy(r))Am(r,t,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Bd(n)})}else navigator.msSaveOrOpenBlob((function(s,a){return a===void 0?a={autoBom:!1}:Dn(a)!=="object"&&(Vn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(r,e),t)}:function(r,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Am(r,t,e);var s=r.type==="application/octet-stream",a=/constructor/i.test(Be.HTMLElement)||Be.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&a)&&(typeof FileReader>"u"?"undefined":Dn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=l?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},c.readAsDataURL(r)}else{var h=Be.URL||Be.webkitURL,f=h.createObjectURL(r);n?n.location=f:location.href=f,n=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function uw(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],n=0;n<e.length;n++){var s=e[n].re,a=e[n].process,l=s.exec(r);l&&(t=a(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+c+h+f}}var Vd=Be.atob.bind(Be),Jy=Be.btoa.bind(Be);function _m(r,t){var e=r[0],n=r[1],s=r[2],a=r[3];e=Ns(e,n,s,a,t[0],7,-680876936),a=Ns(a,e,n,s,t[1],12,-389564586),s=Ns(s,a,e,n,t[2],17,606105819),n=Ns(n,s,a,e,t[3],22,-1044525330),e=Ns(e,n,s,a,t[4],7,-176418897),a=Ns(a,e,n,s,t[5],12,1200080426),s=Ns(s,a,e,n,t[6],17,-1473231341),n=Ns(n,s,a,e,t[7],22,-45705983),e=Ns(e,n,s,a,t[8],7,1770035416),a=Ns(a,e,n,s,t[9],12,-1958414417),s=Ns(s,a,e,n,t[10],17,-42063),n=Ns(n,s,a,e,t[11],22,-1990404162),e=Ns(e,n,s,a,t[12],7,1804603682),a=Ns(a,e,n,s,t[13],12,-40341101),s=Ns(s,a,e,n,t[14],17,-1502002290),e=Ls(e,n=Ns(n,s,a,e,t[15],22,1236535329),s,a,t[1],5,-165796510),a=Ls(a,e,n,s,t[6],9,-1069501632),s=Ls(s,a,e,n,t[11],14,643717713),n=Ls(n,s,a,e,t[0],20,-373897302),e=Ls(e,n,s,a,t[5],5,-701558691),a=Ls(a,e,n,s,t[10],9,38016083),s=Ls(s,a,e,n,t[15],14,-660478335),n=Ls(n,s,a,e,t[4],20,-405537848),e=Ls(e,n,s,a,t[9],5,568446438),a=Ls(a,e,n,s,t[14],9,-1019803690),s=Ls(s,a,e,n,t[3],14,-187363961),n=Ls(n,s,a,e,t[8],20,1163531501),e=Ls(e,n,s,a,t[13],5,-1444681467),a=Ls(a,e,n,s,t[2],9,-51403784),s=Ls(s,a,e,n,t[7],14,1735328473),e=ks(e,n=Ls(n,s,a,e,t[12],20,-1926607734),s,a,t[5],4,-378558),a=ks(a,e,n,s,t[8],11,-2022574463),s=ks(s,a,e,n,t[11],16,1839030562),n=ks(n,s,a,e,t[14],23,-35309556),e=ks(e,n,s,a,t[1],4,-1530992060),a=ks(a,e,n,s,t[4],11,1272893353),s=ks(s,a,e,n,t[7],16,-155497632),n=ks(n,s,a,e,t[10],23,-1094730640),e=ks(e,n,s,a,t[13],4,681279174),a=ks(a,e,n,s,t[0],11,-358537222),s=ks(s,a,e,n,t[3],16,-722521979),n=ks(n,s,a,e,t[6],23,76029189),e=ks(e,n,s,a,t[9],4,-640364487),a=ks(a,e,n,s,t[12],11,-421815835),s=ks(s,a,e,n,t[15],16,530742520),e=Rs(e,n=ks(n,s,a,e,t[2],23,-995338651),s,a,t[0],6,-198630844),a=Rs(a,e,n,s,t[7],10,1126891415),s=Rs(s,a,e,n,t[14],15,-1416354905),n=Rs(n,s,a,e,t[5],21,-57434055),e=Rs(e,n,s,a,t[12],6,1700485571),a=Rs(a,e,n,s,t[3],10,-1894986606),s=Rs(s,a,e,n,t[10],15,-1051523),n=Rs(n,s,a,e,t[1],21,-2054922799),e=Rs(e,n,s,a,t[8],6,1873313359),a=Rs(a,e,n,s,t[15],10,-30611744),s=Rs(s,a,e,n,t[6],15,-1560198380),n=Rs(n,s,a,e,t[13],21,1309151649),e=Rs(e,n,s,a,t[4],6,-145523070),a=Rs(a,e,n,s,t[11],10,-1120210379),s=Rs(s,a,e,n,t[2],15,718787259),n=Rs(n,s,a,e,t[9],21,-343485551),r[0]=Vl(e,r[0]),r[1]=Vl(n,r[1]),r[2]=Vl(s,r[2]),r[3]=Vl(a,r[3])}function kp(r,t,e,n,s,a){return t=Vl(Vl(t,r),Vl(n,a)),Vl(t<<s|t>>>32-s,e)}function Ns(r,t,e,n,s,a,l){return kp(t&e|~t&n,r,t,s,a,l)}function Ls(r,t,e,n,s,a,l){return kp(t&n|e&~n,r,t,s,a,l)}function ks(r,t,e,n,s,a,l){return kp(t^e^n,r,t,s,a,l)}function Rs(r,t,e,n,s,a,l){return kp(e^(t|~n),r,t,s,a,l)}function hw(r){var t,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)_m(n,S6(r.substring(t-64,t)));r=r.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)s[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(_m(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*e,_m(n,s),n}function S6(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}var Qy="0123456789abcdef".split("");function C6(r){for(var t="",e=0;e<4;e++)t+=Qy[r>>8*e+4&15]+Qy[r>>8*e&15];return t}function E6(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function r0(r){return hw(r).map(E6).join("")}var T6=(function(r){for(var t=0;t<r.length;t++)r[t]=C6(r[t]);return r.join("")})(hw("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vl(r,t){if(T6){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}function a0(r,t){var e,n,s,a;if(r!==e){for(var l=(s=r,a=1+(256/r.length|0),new Array(a+1).join(s)),c=[],h=0;h<256;h++)c[h]=h;var f=0;for(h=0;h<256;h++){var p=c[h];f=(f+p+l.charCodeAt(h))%256,c[h]=c[f],c[f]=p}e=r,n=c}else c=n;var g=t.length,v=0,b=0,C="";for(h=0;h<g;h++)b=(b+(p=c[v=(v+1)%256]))%256,c[v]=c[b],c[b]=p,l=c[(c[v]+c[b])%256],C+=String.fromCharCode(t.charCodeAt(h)^l);return C}var tv={print:4,modify:8,copy:16,"annot-forms":32};function Vu(r,t,e,n){this.v=1,this.r=2;var s=192;r.forEach(function(c){if(tv.perm!==void 0)throw new Error("Invalid permission: "+c);s+=tv[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),l=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,l),this.P=-(1+(255^s)),this.encryptionKey=r0(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=a0(this.encryptionKey,this.padding)}function $u(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,n=0;n<e;n++){var s=r.charCodeAt(n);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):r[n]}return t}function ev(r){if(Dn(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,s){if(s=s||!1,typeof e!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[n,!!s],a},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[e]){var l=t[e][a];try{l[0].apply(r,n)}catch(c){Be.console&&Vn.error("jsPDF PubSub Error",c.message,c)}l[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function lp(r){if(!(this instanceof lp))return new lp(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function fw(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function Rc(r,t,e,n,s){if(!(this instanceof Rc))return new Rc(r,t,e,n,s);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,fw.call(this,n,s)}function Ku(r,t,e,n,s){if(!(this instanceof Ku))return new Ku(r,t,e,n,s);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,fw.call(this,n,s)}function me(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],a=arguments[3],l=[],c=1,h=16,f="S",p=null;Dn(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,s=r.format||s,a=r.compress||r.compressPdf||a,(p=r.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),f=r.defaultPathOperation||"S"),l=r.filters||(a===!0?["FlateEncode"]:l),n=n||"mm",e=(""+(e||"P")).toLowerCase();var g=r.putOnlyUsedFonts||!1,v={},b={internal:{},__private__:{}};b.__private__.PubSub=ev;var C="1.3",A=b.__private__.getPdfVersion=function(){return C};b.__private__.setPdfVersion=function(_){C=_};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return T};var S=b.__private__.getPageFormat=function(_){return T[_]};s=s||"a4";var R="compat",M="advanced",D=R;function z(){this.saveGraphicsState(),I(new be(ke,0,0,-ke,0,xa()*ke).toString()+" cm"),this.setFontSize(this.getFontSize()/ke),f="n",D=M}function K(){this.restoreGraphicsState(),f="S",D=R}var Z=b.__private__.combineFontStyleAndFontWeight=function(_,O){if(_=="bold"&&O=="normal"||_=="bold"&&O==400||_=="normal"&&O=="italic"||_=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(_=O==400||O==="normal"?_==="italic"?"italic":"normal":O!=700&&O!=="bold"||_!=="normal"?(O==700?"bold":O)+""+_:"bold"),_};b.advancedAPI=function(_){var O=D===R;return O&&z.call(this),typeof _!="function"||(_(this),O&&K.call(this)),this},b.compatAPI=function(_){var O=D===M;return O&&K.call(this),typeof _!="function"||(_(this),O&&z.call(this)),this},b.isAdvancedAPI=function(){return D===M};var J,H=function(_){if(D!==M)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},lt=b.roundToPrecision=b.__private__.roundToPrecision=function(_,O){var it=t||O;if(isNaN(_)||isNaN(it))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(it).replace(/0+$/,"")};J=b.hpf=b.__private__.hpf=typeof h=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return lt(_,h)}:h==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return lt(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return lt(_,16)};var P=b.f2=b.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return lt(_,2)},G=b.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return lt(_,3)},rt=b.scale=b.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return D===R?_*ke:D===M?_:void 0},Q=function(_){return rt((function(O){return D===R?xa()-O:D===M?O:void 0})(_))};b.__private__.setPrecision=b.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(t=parseInt(_,10))};var gt,V="00000000000000000000000000000000",et=b.__private__.getFileId=function(){return V},at=b.__private__.setFileId=function(_){return V=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Ti=new Vu(p.userPermissions,p.userPassword,p.ownerPassword,V)),V};b.setFileId=function(_){return at(_),this},b.getFileId=function(){return et()};var wt=b.__private__.convertDateToPDFDate=function(_){var O=_.getTimezoneOffset(),it=O<0?"+":"-",ft=Math.floor(Math.abs(O/60)),yt=Math.abs(O%60),It=[it,W(ft),"'",W(yt),"'"].join("");return["D:",_.getFullYear(),W(_.getMonth()+1),W(_.getDate()),W(_.getHours()),W(_.getMinutes()),W(_.getSeconds()),It].join("")},Rt=b.__private__.convertPDFDateToDate=function(_){var O=parseInt(_.substr(2,4),10),it=parseInt(_.substr(6,2),10)-1,ft=parseInt(_.substr(8,2),10),yt=parseInt(_.substr(10,2),10),It=parseInt(_.substr(12,2),10),Gt=parseInt(_.substr(14,2),10);return new Date(O,it,ft,yt,It,Gt,0)},Y=b.__private__.setCreationDate=function(_){var O;if(_===void 0&&(_=new Date),_ instanceof Date)O=wt(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=_}return gt=O},k=b.__private__.getCreationDate=function(_){var O=gt;return _==="jsDate"&&(O=Rt(gt)),O};b.setCreationDate=function(_){return Y(_),this},b.getCreationDate=function(_){return k(_)};var U,W=b.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},st=b.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},ct=0,ht=[],Ct=[],_t=0,Dt=[],Vt=[],Wt=!1,Kt=Ct;b.__private__.setCustomOutputDestination=function(_){Wt=!0,Kt=_};var St=function(_){Wt||(Kt=_)};b.__private__.resetCustomOutputDestination=function(){Wt=!1,Kt=Ct};var I=b.__private__.out=function(_){return _=_.toString(),_t+=_.length+1,Kt.push(_),Kt},jt=b.__private__.write=function(_){return I(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},qt=b.__private__.getArrayBuffer=function(_){for(var O=_.length,it=new ArrayBuffer(O),ft=new Uint8Array(it);O--;)ft[O]=_.charCodeAt(O);return it},Yt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Yt};var Ot=r.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(_){return Ot=D===M?_/ke:_,this};var Jt,Xt=b.__private__.getFontSize=b.getFontSize=function(){return D===R?Ot:Ot*ke},Qt=r.R2L||!1;b.__private__.setR2L=b.setR2L=function(_){return Qt=_,this},b.__private__.getR2L=b.getR2L=function(){return Qt};var ie,Se=b.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Jt=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Jt=_}else Jt=parseInt(_,10)};b.__private__.getZoomMode=function(){return Jt};var Xe,Pe=b.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');ie=_};b.__private__.getPageMode=function(){return ie};var We=b.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Xe=_};b.__private__.getLayoutMode=function(){return Xe},b.__private__.setDisplayMode=b.setDisplayMode=function(_,O,it){return Se(_),We(O),Pe(it),this};var je={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(_){if(Object.keys(je).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return je[_]},b.__private__.getDocumentProperties=function(){return je},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(_){for(var O in je)je.hasOwnProperty(O)&&_[O]&&(je[O]=_[O]);return this},b.__private__.setDocumentProperty=function(_,O){if(Object.keys(je).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return je[_]=O};var ue,ke,he,Tn,Re,ve={},Me={},Ze=[],we={},Pn={},Te={},De={},Nn=null,Ge=0,ge=[],rn=new ev(b),yr=r.hotfixes||[],es={},zr={},Xs=[],be=function _(O,it,ft,yt,It,Gt){if(!(this instanceof _))return new _(O,it,ft,yt,It,Gt);isNaN(O)&&(O=1),isNaN(it)&&(it=0),isNaN(ft)&&(ft=0),isNaN(yt)&&(yt=1),isNaN(It)&&(It=0),isNaN(Gt)&&(Gt=0),this._matrix=[O,it,ft,yt,It,Gt]};Object.defineProperty(be.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(be.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(be.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(be.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(be.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(be.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(be.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(be.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(be.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(be.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(be.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(be.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(be.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(be.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(be.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(be.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),be.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(J).join(_)},be.prototype.multiply=function(_){var O=_.sx*this.sx+_.shy*this.shx,it=_.sx*this.shy+_.shy*this.sy,ft=_.shx*this.sx+_.sy*this.shx,yt=_.shx*this.shy+_.sy*this.sy,It=_.tx*this.sx+_.ty*this.shx+this.tx,Gt=_.tx*this.shy+_.ty*this.sy+this.ty;return new be(O,it,ft,yt,It,Gt)},be.prototype.decompose=function(){var _=this.sx,O=this.shy,it=this.shx,ft=this.sy,yt=this.tx,It=this.ty,Gt=Math.sqrt(_*_+O*O),ae=(_/=Gt)*it+(O/=Gt)*ft;it-=_*ae,ft-=O*ae;var de=Math.sqrt(it*it+ft*ft);return ae/=de,_*(ft/=de)<O*(it/=de)&&(_=-_,O=-O,ae=-ae,Gt=-Gt),{scale:new be(Gt,0,0,de,0,0),translate:new be(1,0,0,1,yt,It),rotate:new be(_,O,-O,_,0,0),skew:new be(1,0,ae,1,0,0)}},be.prototype.toString=function(_){return this.join(" ")},be.prototype.inversed=function(){var _=this.sx,O=this.shy,it=this.shx,ft=this.sy,yt=this.tx,It=this.ty,Gt=1/(_*ft-O*it),ae=ft*Gt,de=-O*Gt,Le=-it*Gt,Ue=_*Gt;return new be(ae,de,Le,Ue,-ae*yt-Le*It,-de*yt-Ue*It)},be.prototype.applyToPoint=function(_){var O=_.x*this.sx+_.y*this.shx+this.tx,it=_.x*this.shy+_.y*this.sy+this.ty;return new Zs(O,it)},be.prototype.applyToRectangle=function(_){var O=this.applyToPoint(_),it=this.applyToPoint(new Zs(_.x+_.w,_.y+_.h));return new ma(O.x,O.y,it.x-O.x,it.y-O.y)},be.prototype.clone=function(){var _=this.sx,O=this.shy,it=this.shx,ft=this.sy,yt=this.tx,It=this.ty;return new be(_,O,it,ft,yt,It)},b.Matrix=be;var fa=b.matrixMult=function(_,O){return O.multiply(_)},Hr=new be(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Hr;var Ps=function(_,O){if(!Pn[_]){var it=(O instanceof Rc?"Sh":"P")+(Object.keys(we).length+1).toString(10);O.id=it,Pn[_]=it,we[it]=O,rn.publish("addPattern",O)}};b.ShadingPattern=Rc,b.TilingPattern=Ku,b.addShadingPattern=function(_,O){return H("addShadingPattern()"),Ps(_,O),this},b.beginTilingPattern=function(_){H("beginTilingPattern()"),Ro(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},b.endTilingPattern=function(_,O){H("endTilingPattern()"),O.stream=Vt[U].join(`
`),Ps(_,O),rn.publish("endTilingPattern",O),Xs.pop().restore()};var Os,$n=b.__private__.newObject=function(){var _=mi();return Oi(_,!0),_},mi=b.__private__.newObjectDeferred=function(){return ct++,ht[ct]=function(){return _t},ct},Oi=function(_,O){return O=typeof O=="boolean"&&O,ht[_]=_t,O&&I(_+" 0 obj"),_},$a=b.__private__.newAdditionalObject=function(){var _={objId:mi(),content:""};return Dt.push(_),_},fs=mi(),Ln=mi(),Yn=b.__private__.decodeColorString=function(_){var O=_.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var it=parseFloat(O[0]);O=[it,it,it,"r"]}for(var ft="#",yt=0;yt<3;yt++)ft+=("0"+Math.floor(255*parseFloat(O[yt])).toString(16)).slice(-2);return ft},ns=b.__private__.encodeColorString=function(_){var O;typeof _=="string"&&(_={ch1:_});var it=_.ch1,ft=_.ch2,yt=_.ch3,It=_.ch4,Gt=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof it=="string"&&it.charAt(0)!=="#"){var ae=new uw(it);if(ae.ok)it=ae.toHex();else if(!/^\d*\.?\d*$/.test(it))throw new Error('Invalid color "'+it+'" passed to jsPDF.encodeColorString.')}if(typeof it=="string"&&/^#[0-9A-Fa-f]{3}$/.test(it)&&(it="#"+it[1]+it[1]+it[2]+it[2]+it[3]+it[3]),typeof it=="string"&&/^#[0-9A-Fa-f]{6}$/.test(it)){var de=parseInt(it.substr(1),16);it=de>>16&255,ft=de>>8&255,yt=255&de}if(ft===void 0||It===void 0&&it===ft&&ft===yt)O=typeof it=="string"?it+" "+Gt[0]:_.precision===2?P(it/255)+" "+Gt[0]:G(it/255)+" "+Gt[0];else if(It===void 0||Dn(It)==="object"){if(It&&!isNaN(It.a)&&It.a===0)return["1.","1.","1.",Gt[1]].join(" ");O=typeof it=="string"?[it,ft,yt,Gt[1]].join(" "):_.precision===2?[P(it/255),P(ft/255),P(yt/255),Gt[1]].join(" "):[G(it/255),G(ft/255),G(yt/255),Gt[1]].join(" ")}else O=typeof it=="string"?[it,ft,yt,It,Gt[2]].join(" "):_.precision===2?[P(it),P(ft),P(yt),P(It),Gt[2]].join(" "):[G(it),G(ft),G(yt),G(It),Gt[2]].join(" ");return O},Bs=b.__private__.getFilters=function(){return l},Ws=b.__private__.putStream=function(_){var O=(_=_||{}).data||"",it=_.filters||Bs(),ft=_.alreadyAppliedFilters||[],yt=_.addLength1||!1,It=O.length,Gt=_.objectId,ae=function(Ni){return Ni};if(p!==null&&Gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ae=Ti.encryptor(Gt,0));var de={};it===!0&&(it=["FlateEncode"]);var Le=_.additionalKeyValues||[],Ue=(de=me.API.processDataByFilters!==void 0?me.API.processDataByFilters(O,it):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(ft)?ft.join(" "):ft.toString());if(de.data.length!==0&&(Le.push({key:"Length",value:de.data.length}),yt===!0&&Le.push({key:"Length1",value:It})),Ue.length!=0)if(Ue.split("/").length-1==1)Le.push({key:"Filter",value:Ue});else{Le.push({key:"Filter",value:"["+Ue+"]"});for(var an=0;an<Le.length;an+=1)if(Le[an].key==="DecodeParms"){for(var Xn=[],li=0;li<de.reverseChain.split("/").length-1;li+=1)Xn.push("null");Xn.push(Le[an].value),Le[an].value="["+Xn.join(" ")+"]"}}I("<<");for(var On=0;On<Le.length;On++)I("/"+Le[On].key+" "+Le[On].value);I(">>"),de.data.length!==0&&(I("stream"),I(ae(de.data)),I("endstream"))},Co=b.__private__.putPage=function(_){var O=_.number,it=_.data,ft=_.objId,yt=_.contentsObjId;Oi(ft,!0),I("<</Type /Page"),I("/Parent "+_.rootDictionaryObjId+" 0 R"),I("/Resources "+_.resourceDictionaryObjId+" 0 R"),I("/MediaBox ["+parseFloat(J(_.mediaBox.bottomLeftX))+" "+parseFloat(J(_.mediaBox.bottomLeftY))+" "+J(_.mediaBox.topRightX)+" "+J(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&I("/CropBox ["+J(_.cropBox.bottomLeftX)+" "+J(_.cropBox.bottomLeftY)+" "+J(_.cropBox.topRightX)+" "+J(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&I("/BleedBox ["+J(_.bleedBox.bottomLeftX)+" "+J(_.bleedBox.bottomLeftY)+" "+J(_.bleedBox.topRightX)+" "+J(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&I("/TrimBox ["+J(_.trimBox.bottomLeftX)+" "+J(_.trimBox.bottomLeftY)+" "+J(_.trimBox.topRightX)+" "+J(_.trimBox.topRightY)+"]"),_.artBox!==null&&I("/ArtBox ["+J(_.artBox.bottomLeftX)+" "+J(_.artBox.bottomLeftY)+" "+J(_.artBox.topRightX)+" "+J(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&I("/UserUnit "+_.userUnit),rn.publish("putPage",{objId:ft,pageContext:ge[O],pageNumber:O,page:it}),I("/Contents "+yt+" 0 R"),I(">>"),I("endobj");var It=it.join(`
`);return D===M&&(It+=`
Q`),Oi(yt,!0),Ws({data:It,filters:Bs(),objectId:yt}),I("endobj"),ft},vr=b.__private__.putPages=function(){var _,O,it=[];for(_=1;_<=Ge;_++)ge[_].objId=mi(),ge[_].contentsObjId=mi();for(_=1;_<=Ge;_++)it.push(Co({number:_,data:Vt[_],objId:ge[_].objId,contentsObjId:ge[_].contentsObjId,mediaBox:ge[_].mediaBox,cropBox:ge[_].cropBox,bleedBox:ge[_].bleedBox,trimBox:ge[_].trimBox,artBox:ge[_].artBox,userUnit:ge[_].userUnit,rootDictionaryObjId:fs,resourceDictionaryObjId:Ln}));Oi(fs,!0),I("<</Type /Pages");var ft="/Kids [";for(O=0;O<Ge;O++)ft+=it[O]+" 0 R ";I(ft+"]"),I("/Count "+Ge),I(">>"),I("endobj"),rn.publish("postPutPages")},wr=function(_){rn.publish("putFont",{font:_,out:I,newObject:$n,putStream:Ws}),_.isAlreadyPutted!==!0&&(_.objectNumber=$n(),I("<<"),I("/Type /Font"),I("/BaseFont /"+$u(_.postScriptName)),I("/Subtype /Type1"),typeof _.encoding=="string"&&I("/Encoding /"+_.encoding),I("/FirstChar 32"),I("/LastChar 255"),I(">>"),I("endobj"))},Ya=function(_){_.objectNumber=$n();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[J(_.x),J(_.y),J(_.x+_.width),J(_.y+_.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var it=_.pages[1].join(`
`);Ws({data:it,additionalKeyValues:O,objectId:_.objectNumber}),I("endobj")},xr=function(_,O){O||(O=21);var it=$n(),ft=(function(Gt,ae){var de,Le=[],Ue=1/(ae-1);for(de=0;de<1;de+=Ue)Le.push(de);if(Le.push(1),Gt[0].offset!=0){var an={offset:0,color:Gt[0].color};Gt.unshift(an)}if(Gt[Gt.length-1].offset!=1){var Xn={offset:1,color:Gt[Gt.length-1].color};Gt.push(Xn)}for(var li="",On=0,Ni=0;Ni<Le.length;Ni++){for(de=Le[Ni];de>Gt[On+1].offset;)On++;var yi=Gt[On].offset,Vi=(de-yi)/(Gt[On+1].offset-yi),Aa=Gt[On].color,Tr=Gt[On+1].color;li+=st(Math.round((1-Vi)*Aa[0]+Vi*Tr[0]).toString(16))+st(Math.round((1-Vi)*Aa[1]+Vi*Tr[1]).toString(16))+st(Math.round((1-Vi)*Aa[2]+Vi*Tr[2]).toString(16))}return li.trim()})(_.colors,O),yt=[];yt.push({key:"FunctionType",value:"0"}),yt.push({key:"Domain",value:"[0.0 1.0]"}),yt.push({key:"Size",value:"["+O+"]"}),yt.push({key:"BitsPerSample",value:"8"}),yt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ws({data:ft,additionalKeyValues:yt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:it}),I("endobj"),_.objectNumber=$n(),I("<< /ShadingType "+_.type),I("/ColorSpace /DeviceRGB");var It="/Coords ["+J(parseFloat(_.coords[0]))+" "+J(parseFloat(_.coords[1]))+" ";_.type===2?It+=J(parseFloat(_.coords[2]))+" "+J(parseFloat(_.coords[3])):It+=J(parseFloat(_.coords[2]))+" "+J(parseFloat(_.coords[3]))+" "+J(parseFloat(_.coords[4]))+" "+J(parseFloat(_.coords[5])),I(It+="]"),_.matrix&&I("/Matrix ["+_.matrix.toString()+"]"),I("/Function "+it+" 0 R"),I("/Extend [true true]"),I(">>"),I("endobj")},Ar=function(_,O){var it=mi(),ft=$n();O.push({resourcesOid:it,objectOid:ft}),_.objectNumber=ft;var yt=[];yt.push({key:"Type",value:"/Pattern"}),yt.push({key:"PatternType",value:"1"}),yt.push({key:"PaintType",value:"1"}),yt.push({key:"TilingType",value:"1"}),yt.push({key:"BBox",value:"["+_.boundingBox.map(J).join(" ")+"]"}),yt.push({key:"XStep",value:J(_.xStep)}),yt.push({key:"YStep",value:J(_.yStep)}),yt.push({key:"Resources",value:it+" 0 R"}),_.matrix&&yt.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Ws({data:_.stream,additionalKeyValues:yt,objectId:_.objectNumber}),I("endobj")},Eo=function(_){for(var O in _.objectNumber=$n(),I("<<"),_)switch(O){case"opacity":I("/ca "+P(_[O]));break;case"stroke-opacity":I("/CA "+P(_[O]))}I(">>"),I("endobj")},qr=function(_){Oi(_.resourcesOid,!0),I("<<"),I("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var O in I("/Font <<"),ve)ve.hasOwnProperty(O)&&(g===!1||g===!0&&v.hasOwnProperty(O))&&I("/"+O+" "+ve[O].objectNumber+" 0 R");I(">>")})(),(function(){if(Object.keys(we).length>0){for(var O in I("/Shading <<"),we)we.hasOwnProperty(O)&&we[O]instanceof Rc&&we[O].objectNumber>=0&&I("/"+O+" "+we[O].objectNumber+" 0 R");rn.publish("putShadingPatternDict"),I(">>")}})(),(function(O){if(Object.keys(we).length>0){for(var it in I("/Pattern <<"),we)we.hasOwnProperty(it)&&we[it]instanceof b.TilingPattern&&we[it].objectNumber>=0&&we[it].objectNumber<O&&I("/"+it+" "+we[it].objectNumber+" 0 R");rn.publish("putTilingPatternDict"),I(">>")}})(_.objectOid),(function(){if(Object.keys(Te).length>0){var O;for(O in I("/ExtGState <<"),Te)Te.hasOwnProperty(O)&&Te[O].objectNumber>=0&&I("/"+O+" "+Te[O].objectNumber+" 0 R");rn.publish("putGStateDict"),I(">>")}})(),(function(){for(var O in I("/XObject <<"),es)es.hasOwnProperty(O)&&es[O].objectNumber>=0&&I("/"+O+" "+es[O].objectNumber+" 0 R");rn.publish("putXobjectDict"),I(">>")})(),I(">>"),I("endobj")},oi=function(_){Me[_.fontName]=Me[_.fontName]||{},Me[_.fontName][_.fontStyle]=_.id},Jl=function(_,O,it,ft,yt){var It={id:"F"+(Object.keys(ve).length+1).toString(10),postScriptName:_,fontName:O,fontStyle:it,encoding:ft,isStandardFont:yt||!1,metadata:{}};return rn.publish("addFont",{font:It,instance:this}),ve[It.id]=It,oi(It),It.id},Is=b.__private__.pdfEscape=b.pdfEscape=function(_,O){return(function(it,ft){var yt,It,Gt,ae,de,Le,Ue,an,Xn;if(Gt=(ft=ft||{}).sourceEncoding||"Unicode",de=ft.outputEncoding,(ft.autoencode||de)&&ve[ue].metadata&&ve[ue].metadata[Gt]&&ve[ue].metadata[Gt].encoding&&(ae=ve[ue].metadata[Gt].encoding,!de&&ve[ue].encoding&&(de=ve[ue].encoding),!de&&ae.codePages&&(de=ae.codePages[0]),typeof de=="string"&&(de=ae[de]),de)){for(Ue=!1,Le=[],yt=0,It=it.length;yt<It;yt++)(an=de[it.charCodeAt(yt)])?Le.push(String.fromCharCode(an)):Le.push(it[yt]),Le[yt].charCodeAt(0)>>8&&(Ue=!0);it=Le.join("")}for(yt=it.length;Ue===void 0&&yt!==0;)it.charCodeAt(yt-1)>>8&&(Ue=!0),yt--;if(!Ue)return it;for(Le=ft.noBOM?[]:[254,255],yt=0,It=it.length;yt<It;yt++){if((Xn=(an=it.charCodeAt(yt))>>8)>>8)throw new Error("Character at position "+yt+" of string '"+it+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Le.push(Xn),Le.push(an-(Xn<<8))}return String.fromCharCode.apply(void 0,Le)})(_,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_r=b.__private__.beginPage=function(_){Vt[++Ge]=[],ge[Ge]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},tc(Ge),St(Vt[U])},da=function(_,O){var it,ft,yt;switch(e=O||e,typeof _=="string"&&(it=S(_.toLowerCase()),Array.isArray(it)&&(ft=it[0],yt=it[1])),Array.isArray(_)&&(ft=_[0]*ke,yt=_[1]*ke),isNaN(ft)&&(ft=s[0],yt=s[1]),(ft>14400||yt>14400)&&(Vn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ft=Math.min(14400,ft),yt=Math.min(14400,yt)),s=[ft,yt],e.substr(0,1)){case"l":yt>ft&&(s=[yt,ft]);break;case"p":ft>yt&&(s=[yt,ft])}_r(s),Ce(No),I(Us),cl!==0&&I(cl+" J"),Bi!==0&&I(Bi+" j"),rn.publish("addPage",{pageNumber:Ge})},Ql=function(_){_>0&&_<=Ge&&(Vt.splice(_,1),ge.splice(_,1),Ge--,U>Ge&&(U=Ge),this.setPage(U))},tc=function(_){_>0&&_<=Ge&&(U=_)},ec=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Vt.length-1},Xc=function(_,O,it){var ft,yt=void 0;return it=it||{},_=_!==void 0?_:ve[ue].fontName,O=O!==void 0?O:ve[ue].fontStyle,ft=_.toLowerCase(),Me[ft]!==void 0&&Me[ft][O]!==void 0?yt=Me[ft][O]:Me[_]!==void 0&&Me[_][O]!==void 0?yt=Me[_][O]:it.disableWarning===!1&&Vn.warn("Unable to look up font label for font '"+_+"', '"+O+"'. Refer to getFontList() for available fonts."),yt||it.noFallback||(yt=Me.times[O])==null&&(yt=Me.times.normal),yt},Fs=b.__private__.putInfo=function(){var _=$n(),O=function(ft){return ft};for(var it in p!==null&&(O=Ti.encryptor(_,0)),I("<<"),I("/Producer ("+Is(O("jsPDF "+me.version))+")"),je)je.hasOwnProperty(it)&&je[it]&&I("/"+it.substr(0,1).toUpperCase()+it.substr(1)+" ("+Is(O(je[it]))+")");I("/CreationDate ("+Is(O(gt))+")"),I(">>"),I("endobj")},pa=b.__private__.putCatalog=function(_){var O=(_=_||{}).rootDictionaryObjId||fs;switch($n(),I("<<"),I("/Type /Catalog"),I("/Pages "+O+" 0 R"),Jt||(Jt="fullwidth"),Jt){case"fullwidth":I("/OpenAction [3 0 R /FitH null]");break;case"fullheight":I("/OpenAction [3 0 R /FitV null]");break;case"fullpage":I("/OpenAction [3 0 R /Fit]");break;case"original":I("/OpenAction [3 0 R /XYZ null null 1]");break;default:var it=""+Jt;it.substr(it.length-1)==="%"&&(Jt=parseInt(Jt)/100),typeof Jt=="number"&&I("/OpenAction [3 0 R /XYZ null null "+P(Jt)+"]")}switch(Xe||(Xe="continuous"),Xe){case"continuous":I("/PageLayout /OneColumn");break;case"single":I("/PageLayout /SinglePage");break;case"two":case"twoleft":I("/PageLayout /TwoColumnLeft");break;case"tworight":I("/PageLayout /TwoColumnRight")}ie&&I("/PageMode /"+ie),rn.publish("putCatalog"),I(">>"),I("endobj")},Sr=b.__private__.putTrailer=function(){I("trailer"),I("<<"),I("/Size "+(ct+1)),I("/Root "+ct+" 0 R"),I("/Info "+(ct-1)+" 0 R"),p!==null&&I("/Encrypt "+Ti.oid+" 0 R"),I("/ID [ <"+V+"> <"+V+"> ]"),I(">>")},dn=b.__private__.putHeader=function(){I("%PDF-"+C),I("%")},nc=b.__private__.putXRef=function(){var _="0000000000";I("xref"),I("0 "+(ct+1)),I("0000000000 65535 f ");for(var O=1;O<=ct;O++)typeof ht[O]=="function"?I((_+ht[O]()).slice(-10)+" 00000 n "):ht[O]!==void 0?I((_+ht[O]).slice(-10)+" 00000 n "):I("0000000000 00000 n ")},Gr=b.__private__.buildDocument=function(){var _;ct=0,_t=0,Ct=[],ht=[],Dt=[],fs=mi(),Ln=mi(),St(Ct),rn.publish("buildDocument"),dn(),vr(),(function(){rn.publish("putAdditionalObjects");for(var it=0;it<Dt.length;it++){var ft=Dt[it];Oi(ft.objId,!0),I(ft.content),I("endobj")}rn.publish("postPutAdditionalObjects")})(),_=[],(function(){for(var it in ve)ve.hasOwnProperty(it)&&(g===!1||g===!0&&v.hasOwnProperty(it))&&wr(ve[it])})(),(function(){var it;for(it in Te)Te.hasOwnProperty(it)&&Eo(Te[it])})(),(function(){for(var it in es)es.hasOwnProperty(it)&&Ya(es[it])})(),(function(it){var ft;for(ft in we)we.hasOwnProperty(ft)&&(we[ft]instanceof Rc?xr(we[ft]):we[ft]instanceof Ku&&Ar(we[ft],it))})(_),rn.publish("putResources"),_.forEach(qr),qr({resourcesOid:Ln,objectOid:Number.MAX_SAFE_INTEGER}),rn.publish("postPutResources"),p!==null&&(Ti.oid=$n(),I("<<"),I("/Filter /Standard"),I("/V "+Ti.v),I("/R "+Ti.r),I("/U <"+Ti.toHexString(Ti.U)+">"),I("/O <"+Ti.toHexString(Ti.O)+">"),I("/P "+Ti.P),I(">>"),I("endobj")),Fs(),pa();var O=_t;return nc(),Sr(),I("startxref"),I(""+O),I("%%EOF"),St(Vt[U]),Ct.join(`
`)},Xa=b.__private__.getBlob=function(_){return new Blob([qt(_)],{type:"application/pdf"})},ic=b.output=b.__private__.output=(Os=function(_,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",_){case void 0:return Gr();case"save":b.save(O.filename);break;case"arraybuffer":return qt(Gr());case"blob":return Xa(Gr());case"bloburi":case"bloburl":if(Be.URL!==void 0&&typeof Be.URL.createObjectURL=="function")return Be.URL&&Be.URL.createObjectURL(Xa(Gr()))||void 0;Vn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var it="",ft=Gr();try{it=Jy(ft)}catch{it=Jy(unescape(encodeURIComponent(ft)))}return"data:application/pdf;filename="+O.filename+";base64,"+it;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Be)==="[object Window]"){var yt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",It=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(yt=O.pdfObjectUrl,It="");var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yt+'"'+It+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",ae=Be.open();return ae!==null&&ae.document.write(Gt),ae}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Be)==="[object Window]"){var de='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',Le=Be.open();if(Le!==null){Le.document.write(de);var Ue=this;Le.document.documentElement.querySelector("#pdfViewer").onload=function(){Le.document.title=O.filename,Le.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ue.output("bloburl"))}}return Le}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Be)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Xn=Be.open();if(Xn!==null&&(Xn.document.write(an),Xn.document.title=O.filename),Xn||typeof safari>"u")return Xn;break;case"datauri":case"dataurl":return Be.document.location.href=this.output("datauristring",O);default:return null}},Os.foo=function(){try{return Os.apply(this,arguments)}catch(it){var _=it.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var O="Error in function "+_.split(`
`)[0].split("<")[0]+": "+it.message;if(!Be.console)throw new Error(O);Be.console.error(O,it),Be.alert&&alert(O)}},Os.foo.bar=Os,Os.foo),ds=function(_){return Array.isArray(yr)===!0&&yr.indexOf(_)>-1};switch(n){case"pt":ke=1;break;case"mm":ke=72/25.4;break;case"cm":ke=72/2.54;break;case"in":ke=72;break;case"px":ke=ds("px_scaling")==1?.75:96/72;break;case"pc":case"em":ke=12;break;case"ex":ke=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ke=n}var Ti=null;Y(),at();var bi=b.__private__.getPageInfo=b.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ge[_].objId,pageNumber:_,pageContext:ge[_]}},ol=b.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in ge)if(ge[O].objId===_)break;return bi(O)},Wc=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:ge[U].objId,pageNumber:U,pageContext:ge[U]}};b.addPage=function(){return da.apply(this,arguments),this},b.setPage=function(){return tc.apply(this,arguments),St.call(this,Vt[U]),this},b.insertPage=function(_){return this.addPage(),this.movePage(U,_),this},b.movePage=function(_,O){var it,ft;if(_>O){it=Vt[_],ft=ge[_];for(var yt=_;yt>O;yt--)Vt[yt]=Vt[yt-1],ge[yt]=ge[yt-1];Vt[O]=it,ge[O]=ft,this.setPage(O)}else if(_<O){it=Vt[_],ft=ge[_];for(var It=_;It<O;It++)Vt[It]=Vt[It+1],ge[It]=ge[It+1];Vt[O]=it,ge[O]=ft,this.setPage(O)}return this},b.deletePage=function(){return Ql.apply(this,arguments),this},b.__private__.text=b.text=function(_,O,it,ft,yt){var It,Gt,ae,de,Le,Ue,an,Xn,li,On=(ft=ft||{}).scope||this;if(typeof _=="number"&&typeof O=="number"&&(typeof it=="string"||Array.isArray(it))){var Ni=it;it=O,O=_,_=Ni}if(arguments[3]instanceof be==0?(ae=arguments[4],de=arguments[5],Dn(an=arguments[3])==="object"&&an!==null||(typeof ae=="string"&&(de=ae,ae=null),typeof an=="string"&&(de=an,an=null),typeof an=="number"&&(ae=an,an=null),ft={flags:an,angle:ae,align:de})):(H("The transform parameter of text() with a Matrix value"),li=yt),isNaN(O)||isNaN(it)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return On;var yi,Vi="",Aa=typeof ft.lineHeightFactor=="number"?ft.lineHeightFactor:ga,Tr=On.internal.scaleFactor;function _a(pn){return pn=pn.split("	").join(Array(ft.TabLen||9).join(" ")),Is(pn,an)}function fc(pn){for(var on,Bn=pn.concat(),ui=[],ta=Bn.length;ta--;)typeof(on=Bn.shift())=="string"?ui.push(on):Array.isArray(pn)&&(on.length===1||on[1]===void 0&&on[2]===void 0)?ui.push(on[0]):ui.push([on[0],on[1],on[2]]);return ui}function hl(pn,on){var Bn;if(typeof pn=="string")Bn=on(pn)[0];else if(Array.isArray(pn)){for(var ui,ta,Rr=pn.concat(),Oo=[],gc=Rr.length;gc--;)typeof(ui=Rr.shift())=="string"?Oo.push(on(ui)[0]):Array.isArray(ui)&&typeof ui[0]=="string"&&(ta=on(ui[0],ui[1],ui[2]),Oo.push([ta[0],ta[1],ta[2]]));Bn=Oo}return Bn}var Yr=!1,Nr=!0;if(typeof _=="string")Yr=!0;else if(Array.isArray(_)){var Do=_.concat();Gt=[];for(var Sa,Ii=Do.length;Ii--;)(typeof(Sa=Do.shift())!="string"||Array.isArray(Sa)&&typeof Sa[0]!="string")&&(Nr=!1);Yr=Nr}if(Yr===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Ka=Ot/On.internal.scaleFactor,Za=Ka*(Aa-1);switch(ft.baseline){case"bottom":it-=Za;break;case"top":it+=Ka-Za;break;case"hanging":it+=Ka-2*Za;break;case"middle":it+=Ka/2-Za}if((Ue=ft.maxWidth||0)>0&&(typeof _=="string"?_=On.splitTextToSize(_,Ue):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(pn,on){return pn.concat(On.splitTextToSize(on,Ue))},[]))),It={text:_,x:O,y:it,options:ft,mutex:{pdfEscape:Is,activeFontKey:ue,fonts:ve,activeFontSize:Ot}},rn.publish("preProcessText",It),_=It.text,ae=(ft=It.options).angle,li instanceof be==0&&ae&&typeof ae=="number"){ae*=Math.PI/180,ft.rotationDirection===0&&(ae=-ae),D===M&&(ae=-ae);var fl=Math.cos(ae),Xr=Math.sin(ae);li=new be(fl,Xr,-Xr,fl,0,0)}else ae&&ae instanceof be&&(li=ae);D!==M||li||(li=Hr),(Le=ft.charSpace||Ks)!==void 0&&(Vi+=J(rt(Le))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Xn=ft.horizontalScale)!==void 0&&(Vi+=J(100*Xn)+` Tz
`),ft.lang;var gs=-1,Ca=ft.renderingMode!==void 0?ft.renderingMode:ft.stroke,dl=On.internal.getCurrentPageInfo().pageContext;switch(Ca){case 0:case!1:case"fill":gs=0;break;case 1:case!0:case"stroke":gs=1;break;case 2:case"fillThenStroke":gs=2;break;case 3:case"invisible":gs=3;break;case 4:case"fillAndAddForClipping":gs=4;break;case 5:case"strokeAndAddPathForClipping":gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gs=6;break;case 7:case"addToPathForClipping":gs=7}var dc=dl.usedRenderingMode!==void 0?dl.usedRenderingMode:-1;gs!==-1?Vi+=gs+` Tr
`:dc!==-1&&(Vi+=`0 Tr
`),gs!==-1&&(dl.usedRenderingMode=gs),de=ft.align||"left";var zs,Lr=Ot*Aa,Ea=On.internal.pageSize.getWidth(),pc=ve[ue];Le=ft.charSpace||Ks,Ue=ft.maxWidth||0,an=Object.assign({autoencode:!0,noBOM:!0},ft.flags);var kr=[],Ja=function(pn){return On.getStringUnitWidth(pn,{font:pc,charSpace:Le,fontSize:Ot,doKerning:!1})*Ot/Tr};if(Object.prototype.toString.call(_)==="[object Array]"){var Cs;Gt=fc(_),de!=="left"&&(zs=Gt.map(Ja));var ms,Wr=0;if(de==="right"){O-=zs[0],_=[],Ii=Gt.length;for(var Kr=0;Kr<Ii;Kr++)Kr===0?(ms=js(O),Cs=Gi(it)):(ms=rt(Wr-zs[Kr]),Cs=-Lr),_.push([Gt[Kr],ms,Cs]),Wr=zs[Kr]}else if(de==="center"){O-=zs[0]/2,_=[],Ii=Gt.length;for(var Ta=0;Ta<Ii;Ta++)Ta===0?(ms=js(O),Cs=Gi(it)):(ms=rt((Wr-zs[Ta])/2),Cs=-Lr),_.push([Gt[Ta],ms,Cs]),Wr=zs[Ta]}else if(de==="left"){_=[],Ii=Gt.length;for(var pl=0;pl<Ii;pl++)_.push(Gt[pl])}else if(de==="justify"&&pc.encoding==="Identity-H"){_=[],Ii=Gt.length,Ue=Ue!==0?Ue:Ea;for(var gl=0,ci=0;ci<Ii;ci++)if(Cs=ci===0?Gi(it):-Lr,ms=ci===0?js(O):gl,ci<Ii-1){var su=rt((Ue-zs[ci])/(Gt[ci].split(" ").length-1)),Zr=Gt[ci].split(" ");_.push([Zr[0]+" ",ms,Cs]),gl=0;for(var Jr=1;Jr<Zr.length;Jr++){var $i=(Ja(Zr[Jr-1]+" "+Zr[Jr])-Ja(Zr[Jr]))*Tr+su;Jr==Zr.length-1?_.push([Zr[Jr],$i,0]):_.push([Zr[Jr]+" ",$i,0]),gl-=$i}}else _.push([Gt[ci],ms,Cs]);_.push(["",gl,0])}else{if(de!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],Ii=Gt.length,Ue=Ue!==0?Ue:Ea,ci=0;ci<Ii;ci++){Cs=ci===0?Gi(it):-Lr,ms=ci===0?js(O):0;var Na=Gt[ci].split(" ").length-1,ml=Na>0?(Ue-zs[ci])/Na:0;ci<Ii-1?kr.push(J(rt(ml))):kr.push(0),_.push([Gt[ci],ms,Cs])}}}(typeof ft.R2L=="boolean"?ft.R2L:Qt)===!0&&(_=hl(_,function(pn,on,Bn){return[pn.split("").reverse().join(""),on,Bn]})),It={text:_,x:O,y:it,options:ft,mutex:{pdfEscape:Is,activeFontKey:ue,fonts:ve,activeFontSize:Ot}},rn.publish("postProcessText",It),_=It.text,yi=It.mutex.isHex||!1;var bl=ve[ue].encoding;bl!=="WinAnsiEncoding"&&bl!=="StandardEncoding"||(_=hl(_,function(pn,on,Bn){return[_a(pn),on,Bn]})),Gt=fc(_),_=[];for(var La,ka,Qr,Po=Array.isArray(Gt[0])?1:0,Hs="",Ra=function(pn,on,Bn){var ui="";return Bn instanceof be?(Bn=typeof ft.angle=="number"?fa(Bn,new be(1,0,0,1,pn,on)):fa(new be(1,0,0,1,pn,on),Bn),D===M&&(Bn=fa(new be(1,0,0,-1,0,0),Bn)),ui=Bn.join(" ")+` Tm
`):ui=J(pn)+" "+J(on)+` Td
`,ui},is=0;is<Gt.length;is++){switch(Hs="",Po){case 1:Qr=(yi?"<":"(")+Gt[is][0]+(yi?">":")"),La=parseFloat(Gt[is][1]),ka=parseFloat(Gt[is][2]);break;case 0:Qr=(yi?"<":"(")+Gt[is]+(yi?">":")"),La=js(O),ka=Gi(it)}kr!==void 0&&kr[is]!==void 0&&(Hs=kr[is]+` Tw
`),is===0?_.push(Hs+Ra(La,ka,li)+Qr):Po===0?_.push(Hs+Qr):Po===1&&_.push(Hs+Ra(La,ka,li)+Qr)}_=Po===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Js=`BT
/`;return Js+=ue+" "+Ot+` Tf
`,Js+=J(Ot*Aa)+` TL
`,Js+=Vr+`
`,Js+=Vi,Js+=_,I(Js+="ET"),v[ue]=!0,On};var sc=b.__private__.clip=b.clip=function(_){return I(_==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return sc("evenodd")},b.__private__.discardPath=b.discardPath=function(){return I("n"),this};var ps=b.__private__.isValidStyle=function(_){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(O=!0),O};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(_){return ps(_)&&(f=_),this};var rc=b.__private__.getStyle=b.getStyle=function(_){var O=f;switch(_){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=_}return O},ac=b.close=function(){return I("h"),this};b.stroke=function(){return I("S"),this},b.fill=function(_){return Cr("f",_),this},b.fillEvenOdd=function(_){return Cr("f*",_),this},b.fillStroke=function(_){return Cr("B",_),this},b.fillStrokeEvenOdd=function(_){return Cr("B*",_),this};var Cr=function(_,O){Dn(O)==="object"?Zc(O,_):I(_)},To=function(_){_===null||D===M&&_===void 0||(_=rc(_),I(_))};function Kc(_,O,it,ft,yt){var It=new Ku(O||this.boundingBox,it||this.xStep,ft||this.yStep,this.gState,yt||this.matrix);It.stream=this.stream;var Gt=_+"$$"+this.cloneIndex+++"$$";return Ps(Gt,It),It}var Zc=function(_,O){var it=Pn[_.key],ft=we[it];if(ft instanceof Rc)I("q"),I(oc(O)),ft.gState&&b.setGState(ft.gState),I(_.matrix.toString()+" cm"),I("/"+it+" sh"),I("Q");else if(ft instanceof Ku){var yt=new be(1,0,0,-1,0,xa());_.matrix&&(yt=yt.multiply(_.matrix||Hr),it=Kc.call(ft,_.key,_.boundingBox,_.xStep,_.yStep,yt).id),I("q"),I("/Pattern cs"),I("/"+it+" scn"),ft.gState&&b.setGState(ft.gState),I(O),I("Q")}},oc=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},lc=b.moveTo=function(_,O){return I(J(rt(_))+" "+J(Q(O))+" m"),this},Jc=b.lineTo=function(_,O){return I(J(rt(_))+" "+J(Q(O))+" l"),this},Ss=b.curveTo=function(_,O,it,ft,yt,It){return I([J(rt(_)),J(Q(O)),J(rt(it)),J(Q(ft)),J(rt(yt)),J(Q(It)),"c"].join(" ")),this};b.__private__.line=b.line=function(_,O,it,ft,yt){if(isNaN(_)||isNaN(O)||isNaN(it)||isNaN(ft)||!ps(yt))throw new Error("Invalid arguments passed to jsPDF.line");return D===R?this.lines([[it-_,ft-O]],_,O,[1,1],yt||"S"):this.lines([[it-_,ft-O]],_,O,[1,1]).stroke()},b.__private__.lines=b.lines=function(_,O,it,ft,yt,It){var Gt,ae,de,Le,Ue,an,Xn,li,On,Ni,yi,Vi;if(typeof _=="number"&&(Vi=it,it=O,O=_,_=Vi),ft=ft||[1,1],It=It||!1,isNaN(O)||isNaN(it)||!Array.isArray(_)||!Array.isArray(ft)||!ps(yt)||typeof It!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(lc(O,it),Gt=ft[0],ae=ft[1],Le=_.length,Ni=O,yi=it,de=0;de<Le;de++)(Ue=_[de]).length===2?(Ni=Ue[0]*Gt+Ni,yi=Ue[1]*ae+yi,Jc(Ni,yi)):(an=Ue[0]*Gt+Ni,Xn=Ue[1]*ae+yi,li=Ue[2]*Gt+Ni,On=Ue[3]*ae+yi,Ni=Ue[4]*Gt+Ni,yi=Ue[5]*ae+yi,Ss(an,Xn,li,On,Ni,yi));return It&&ac(),To(yt),this},b.path=function(_){for(var O=0;O<_.length;O++){var it=_[O],ft=it.c;switch(it.op){case"m":lc(ft[0],ft[1]);break;case"l":Jc(ft[0],ft[1]);break;case"c":Ss.apply(this,ft);break;case"h":ac()}}return this},b.__private__.rect=b.rect=function(_,O,it,ft,yt){if(isNaN(_)||isNaN(O)||isNaN(it)||isNaN(ft)||!ps(yt))throw new Error("Invalid arguments passed to jsPDF.rect");return D===R&&(ft=-ft),I([J(rt(_)),J(Q(O)),J(rt(it)),J(rt(ft)),"re"].join(" ")),To(yt),this},b.__private__.triangle=b.triangle=function(_,O,it,ft,yt,It,Gt){if(isNaN(_)||isNaN(O)||isNaN(it)||isNaN(ft)||isNaN(yt)||isNaN(It)||!ps(Gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[it-_,ft-O],[yt-it,It-ft],[_-yt,O-It]],_,O,[1,1],Gt,!0),this},b.__private__.roundedRect=b.roundedRect=function(_,O,it,ft,yt,It,Gt){if(isNaN(_)||isNaN(O)||isNaN(it)||isNaN(ft)||isNaN(yt)||isNaN(It)||!ps(Gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ae=4/3*(Math.SQRT2-1);return yt=Math.min(yt,.5*it),It=Math.min(It,.5*ft),this.lines([[it-2*yt,0],[yt*ae,0,yt,It-It*ae,yt,It],[0,ft-2*It],[0,It*ae,-yt*ae,It,-yt,It],[2*yt-it,0],[-yt*ae,0,-yt,-It*ae,-yt,-It],[0,2*It-ft],[0,-It*ae,yt*ae,-It,yt,-It]],_+yt,O,[1,1],Gt,!0),this},b.__private__.ellipse=b.ellipse=function(_,O,it,ft,yt){if(isNaN(_)||isNaN(O)||isNaN(it)||isNaN(ft)||!ps(yt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var It=4/3*(Math.SQRT2-1)*it,Gt=4/3*(Math.SQRT2-1)*ft;return lc(_+it,O),Ss(_+it,O-Gt,_+It,O-ft,_,O-ft),Ss(_-It,O-ft,_-it,O-Gt,_-it,O),Ss(_-it,O+Gt,_-It,O+ft,_,O+ft),Ss(_+It,O+ft,_+it,O+Gt,_+it,O),To(yt),this},b.__private__.circle=b.circle=function(_,O,it,ft){if(isNaN(_)||isNaN(O)||isNaN(it)||!ps(ft))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,O,it,it,ft)},b.setFont=function(_,O,it){return it&&(O=Z(O,it)),ue=Xc(_,O,{disableWarning:!1}),this};var Er=b.__private__.getFont=b.getFont=function(){return ve[Xc.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var _,O,it={};for(_ in Me)if(Me.hasOwnProperty(_))for(O in it[_]=[],Me[_])Me[_].hasOwnProperty(O)&&it[_].push(O);return it},b.addFont=function(_,O,it,ft,yt){var It=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&It.indexOf(arguments[3])!==-1?yt=arguments[3]:arguments[3]&&It.indexOf(arguments[3])==-1&&(it=Z(it,ft)),Jl.call(this,_,O,it,yt=yt||"Identity-H")};var ga,No=r.lineWidth||.200025,Wa=b.__private__.getLineWidth=b.getLineWidth=function(){return No},Ce=b.__private__.setLineWidth=b.setLineWidth=function(_){return No=_,I(J(rt(_))+" w"),this};b.__private__.setLineDash=me.API.setLineDash=me.API.setLineDashPattern=function(_,O){if(_=_||[],O=O||0,isNaN(O)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(it){return J(rt(it))}).join(" "),O=J(rt(O)),I("["+_+"] "+O+" d"),this};var Qc=b.__private__.getLineHeight=b.getLineHeight=function(){return Ot*ga};b.__private__.getLineHeight=b.getLineHeight=function(){return Ot*ga};var cc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(ga=_),this},tu=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return ga};cc(r.lineHeight);var js=b.__private__.getHorizontalCoordinate=function(_){return rt(_)},Gi=b.__private__.getVerticalCoordinate=function(_){return D===M?_:ge[U].mediaBox.topRightY-ge[U].mediaBox.bottomLeftY-rt(_)},uc=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(_){return J(js(_))},Lo=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(_){return J(Gi(_))},Us=r.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Yn(Us)},b.__private__.setStrokeColor=b.setDrawColor=function(_,O,it,ft){return Us=ns({ch1:_,ch2:O,ch3:it,ch4:ft,pdfColorType:"draw",precision:2}),I(Us),this};var ko=r.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Yn(ko)},b.__private__.setFillColor=b.setFillColor=function(_,O,it,ft){return ko=ns({ch1:_,ch2:O,ch3:it,ch4:ft,pdfColorType:"fill",precision:2}),I(ko),this};var Vr=r.textColor||"0 g",eu=b.__private__.getTextColor=b.getTextColor=function(){return Yn(Vr)};b.__private__.setTextColor=b.setTextColor=function(_,O,it,ft){return Vr=ns({ch1:_,ch2:O,ch3:it,ch4:ft,pdfColorType:"text",precision:3}),this};var Ks=r.charSpace,ll=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Ks||0)};b.__private__.setCharSpace=b.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ks=_,this};var cl=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(_){var O=b.CapJoinStyles[_];if(O===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cl=O,I(O+" J"),this};var Bi=0;b.__private__.setLineJoin=b.setLineJoin=function(_){var O=b.CapJoinStyles[_];if(O===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bi=O,I(O+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return I(J(rt(_))+" M"),this},b.GState=lp,b.setGState=function(_){(_=typeof _=="string"?Te[De[_]]:$r(null,_)).equals(Nn)||(I("/"+_.id+" gs"),Nn=_)};var $r=function(_,O){if(!_||!De[_]){var it=!1;for(var ft in Te)if(Te.hasOwnProperty(ft)&&Te[ft].equals(O)){it=!0;break}if(it)O=Te[ft];else{var yt="GS"+(Object.keys(Te).length+1).toString(10);Te[yt]=O,O.id=yt}return _&&(De[_]=O.id),rn.publish("addGState",O),O}};b.addGState=function(_,O){return $r(_,O),this},b.saveGraphicsState=function(){return I("q"),Ze.push({key:ue,size:Ot,color:Vr}),this},b.restoreGraphicsState=function(){I("Q");var _=Ze.pop();return ue=_.key,Ot=_.size,Vr=_.color,Nn=null,this},b.setCurrentTransformationMatrix=function(_){return I(_.toString()+" cm"),this},b.comment=function(_){return I("#"+_),this};var Zs=function(_,O){var it=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return it},set:function(It){isNaN(It)||(it=parseFloat(It))}});var ft=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ft},set:function(It){isNaN(It)||(ft=parseFloat(It))}});var yt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yt},set:function(It){yt=It.toString()}}),this},ma=function(_,O,it,ft){Zs.call(this,_,O),this.type="rect";var yt=it||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yt},set:function(Gt){isNaN(Gt)||(yt=parseFloat(Gt))}});var It=ft||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return It},set:function(Gt){isNaN(Gt)||(It=parseFloat(Gt))}}),this},ul=function(){this.page=Ge,this.currentPage=U,this.pages=Vt.slice(0),this.pagesContext=ge.slice(0),this.x=he,this.y=Tn,this.matrix=Re,this.width=ya(U),this.height=hc(U),this.outputDestination=Kt,this.id="",this.objectNumber=-1};ul.prototype.restore=function(){Ge=this.page,U=this.currentPage,ge=this.pagesContext,Vt=this.pages,he=this.x,Tn=this.y,Re=this.matrix,Mo(U,this.width),va(U,this.height),Kt=this.outputDestination};var Ro=function(_,O,it,ft,yt){Xs.push(new ul),Ge=U=0,Vt=[],he=_,Tn=O,Re=yt,_r([it,ft])};for(var ba in b.beginFormObject=function(_,O,it,ft,yt){return Ro(_,O,it,ft,yt),this},b.endFormObject=function(_){return(function(O){if(zr[O])Xs.pop().restore();else{var it=new ul,ft="Xo"+(Object.keys(es).length+1).toString(10);it.id=ft,zr[O]=ft,es[ft]=it,rn.publish("addFormObject",it),Xs.pop().restore()}})(_),this},b.doFormObject=function(_,O){var it=es[zr[_]];return I("q"),I(O.toString()+" cm"),I("/"+it.id+" Do"),I("Q"),this},b.getFormObject=function(_){var O=es[zr[_]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},b.save=function(_,O){return _=_||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(kc(Xa(Gr()),_),typeof kc.unload=="function"&&Be.setTimeout&&setTimeout(kc.unload,911),this):new Promise(function(it,ft){try{var yt=kc(Xa(Gr()),_);typeof kc.unload=="function"&&Be.setTimeout&&setTimeout(kc.unload,911),it(yt)}catch(It){ft(It.message)}})},me.API)me.API.hasOwnProperty(ba)&&(ba==="events"&&me.API.events.length?(function(_,O){var it,ft,yt;for(yt=O.length-1;yt!==-1;yt--)it=O[yt][0],ft=O[yt][1],_.subscribe.apply(_,[it].concat(typeof ft=="function"?[ft]:ft))})(rn,me.API.events):b[ba]=me.API[ba]);function ya(_){return ge[_].mediaBox.topRightX-ge[_].mediaBox.bottomLeftX}function Mo(_,O){ge[_].mediaBox.topRightX=O+ge[_].mediaBox.bottomLeftX}function hc(_){return ge[_].mediaBox.topRightY-ge[_].mediaBox.bottomLeftY}function va(_,O){ge[_].mediaBox.topRightY=O+ge[_].mediaBox.bottomLeftY}var wa=b.getPageWidth=function(_){return ya(_=_||U)/ke},nu=b.setPageWidth=function(_,O){Mo(_,O*ke)},xa=b.getPageHeight=function(_){return hc(_=_||U)/ke},iu=b.setPageHeight=function(_,O){va(_,O*ke)};return b.internal={pdfEscape:Is,getStyle:rc,getFont:Er,getFontSize:Xt,getCharSpace:ll,getTextColor:eu,getLineHeight:Qc,getLineHeightFactor:tu,getLineWidth:Wa,write:jt,getHorizontalCoordinate:js,getVerticalCoordinate:Gi,getCoordinateString:uc,getVerticalCoordinateString:Lo,collections:{},newObject:$n,newAdditionalObject:$a,newObjectDeferred:mi,newObjectDeferredBegin:Oi,getFilters:Bs,putStream:Ws,events:rn,scaleFactor:ke,pageSize:{getWidth:function(){return wa(U)},setWidth:function(_){nu(U,_)},getHeight:function(){return xa(U)},setHeight:function(_){iu(U,_)}},encryptionOptions:p,encryption:Ti,getEncryptor:function(_){return p!==null?Ti.encryptor(_,0):function(O){return O}},output:ic,getNumberOfPages:ec,get pages(){return Vt},out:I,f2:P,f3:G,getPageInfo:bi,getPageInfoByObjId:ol,getCurrentPageInfo:Wc,getPDFVersion:A,Point:Zs,Rectangle:ma,Matrix:be,hasHotfix:ds},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return wa(U)},set:function(_){nu(U,_)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return xa(U)},set:function(_){iu(U,_)},enumerable:!0,configurable:!0}),(function(_){for(var O=0,it=Yt.length;O<it;O++){var ft=Jl.call(this,_[O][0],_[O][1],_[O][2],Yt[O][3],!0);g===!1&&(v[ft]=!0);var yt=_[O][0].split("-");oi({id:ft,fontName:yt[0],fontStyle:yt[1]||""})}rn.publish("addFonts",{fonts:ve,dictionary:Me})}).call(b,Yt),ue="F1",da(s,e),rn.publish("initialized"),b}Vu.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Vu.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vu.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},Vu.prototype.processOwnerPassword=function(r,t){return a0(r0(t).substr(0,5),r)},Vu.prototype.encryptor=function(r,t){var e=r0(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return a0(e,n)}},lp.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||Dn(r)!==Dn(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},me.API={events:[]},me.version="4.1.0";var Ci=me.API,H0=1,Gc=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uu=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cp=function(r){return r.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(t){var e=t.charCodeAt(0).toString(16).toUpperCase();return"#"+(e.length===1?"0"+e:e)})},qe=function(r){return r.toFixed(2)},Hl=function(r){return r.toFixed(5)};Ci.__acroform__={};var br=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},nv=function(r){return r*H0},yo=function(r){var t=new pw,e=ce.internal.getHeight(r)||0,n=ce.internal.getWidth(r)||0;return t.BBox=[0,0,Number(qe(n)),Number(qe(e))],t},N6=Ci.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},L6=Ci.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},k6=Ci.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},Mi=Ci.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return k6(r,t-1)},Di=Ci.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return N6(r,t-1)},Pi=Ci.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return L6(r,t-1)},R6=Ci.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=r[0],a=r[1],l=r[2],c=r[3],h={};return h.lowerLeft_X=e(s)||0,h.lowerLeft_Y=n(a+c)||0,h.upperRight_X=e(s+l)||0,h.upperRight_Y=n(a)||0,[Number(qe(h.lowerLeft_X)),Number(qe(h.lowerLeft_Y)),Number(qe(h.upperRight_X)),Number(qe(h.upperRight_Y))]},M6=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,n=o0(r,e),s=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+s+" "+qe(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=yo(r);return a.scope=r.scope,a.stream=t.join(`
`),a}},o0=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=r.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var a=e,l=ce.internal.getHeight(r)||0;l=l<0?-l:l;var c=ce.internal.getWidth(r)||0;c=c<0?-c:c;var h=function(P,G,rt){if(P+1<s.length){var Q=G+" "+s[P+1][0];return Id(Q,r,rt).width<=c-4}return!1};a++;t:for(;a>0;){t="",a--;var f,p,g=Id("3",r,a).height,v=r.multiline?l-a:(l-g)/2,b=v+=2,C=0,A=0,T=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+Id(t,r,a=12).width+", FieldWidth:"+c+`
`;break}for(var S="",R=0,M=0;M<s.length;M++)if(s.hasOwnProperty(M)){var D=!1;if(s[M].length!==1&&T!==s[M].length-1){if((g+2)*(R+2)+2>l)continue t;S+=s[M][T],D=!0,A=M,M--}else{S=(S+=s[M][T]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var z=parseInt(M),K=h(z,S,a),Z=M>=s.length-1;if(K&&!Z){S+=" ",T=0;continue}if(K||Z){if(Z)A=z;else if(r.multiline&&(g+2)*(R+2)+2>l)continue t}else{if(!r.multiline||(g+2)*(R+2)+2>l)continue t;A=z}}for(var J="",H=C;H<=A;H++){var lt=s[H];if(r.multiline){if(H===A){J+=lt[T]+" ",T=(T+1)%lt.length;continue}if(H===C){J+=lt[lt.length-1]+" ";continue}}J+=lt[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,p=Id(J,r,a).width,r.textAlign){case"right":f=c-p-2;break;case"center":f=(c-p)/2;break;default:f=2}t+=qe(f)+" "+qe(b)+` Td
`,t+="("+Gc(J)+`) Tj
`,t+=-qe(f)+` 0 Td
`,b=-(a+2),p=0,C=D?A:A+1,R++,S=""}break}return n.text=t,n.fontSize=a,n},Id=function(r,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:s}},D6={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},P6=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},O6=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Ga.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(D6)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H0=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new gw,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a.objId=void 0,a.hasAnnotation&&P6(a,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(n,s){var a=!n;for(var l in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var c=n[l],h=[],f=c.Rect;if(c.Rect&&(c.Rect=R6(c.Rect,s)),s.internal.newObjectDeferredBegin(c.objId,!0),c.DA=ce.createDefaultAppearanceStream(c),Dn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(h=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=M6(c);h.push({key:"AP",value:"<</N "+p+">>"}),s.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var g="";for(var v in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(v)){var b=c.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var l in b)if(b.hasOwnProperty(l)){var C=b[l];typeof C=="function"&&(C=C.call(s,c)),g+="/"+l+" "+C+" ",s.internal.acroformPlugin.xForms.indexOf(C)>=0||s.internal.acroformPlugin.xForms.push(C)}}else typeof(C=b)=="function"&&(C=C.call(s,c)),g+="/"+l+" "+C,s.internal.acroformPlugin.xForms.indexOf(C)>=0||s.internal.acroformPlugin.xForms.push(C);g+=">>"}h.push({key:"AP",value:`<<
`+g+">>"})}s.internal.putStream({additionalKeyValues:h,objectId:c.objId}),s.internal.out("endobj")}a&&(function(A,T){for(var S in A)if(A.hasOwnProperty(S)){var R=S,M=A[S];T.internal.newObjectDeferredBegin(M.objId,!0),Dn(M)==="object"&&typeof M.putStream=="function"&&M.putStream(),delete A[R]}})(s.internal.acroformPlugin.xForms,s)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},dw=Ci.__acroform__.arrayToPdfArray=function(r,t,e){var n=function(l){return l};if(Array.isArray(r)){for(var s="[",a=0;a<r.length;a++)switch(a!==0&&(s+=" "),Dn(r[a])){case"boolean":case"number":case"object":s+=r[a].toString();break;case"string":r[a].substr(0,1)==="/"?s+="/"+cp(r[a].substr(1)):(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),s+="("+Gc(n(r[a].toString()))+")")}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Sm=function(r,t,e){var n=function(s){return s};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(r=r||"").toString(),"("+Gc(n(r))+")"},xo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};xo.prototype.toString=function(){return this.objId+" 0 R"},xo.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},xo.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],s=this[n];s&&(Array.isArray(s)?r.push({key:n,value:dw(s,this.objId,this.scope)}):s instanceof xo?(s.scope=this.scope,r.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&r.push({key:n,value:s}))}return r};var pw=function(){xo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};br(pw,xo);var gw=function(){xo.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Gc(e(r))+")"}},set:function(e){r=e}})};br(gw,xo);var Ga=function r(){xo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Mi(t,3)},set:function(S){S?this.F=Di(t,3):this.F=Pi(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');e=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof up)return;a="FieldObject"+r.FieldNum++}var S=function(R){return R};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Gc(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(S){h=S}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/H0:f},set:function(S){f=S}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(S){p=S}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof up||this instanceof Bc))return Sm(g,this.objId,this.scope)},set:function(S){S=S.toString(),g=S}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof hs==0?Sm(v,this.objId,this.scope):v},set:function(S){S=S.toString(),v=this instanceof hs==0?S.substr(0,1)==="("?Uu(S.substr(1,S.length-2)):Uu(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof hs==1?Uu(v.substr(1,v.length-1)):v},set:function(S){S=S.toString(),v=this instanceof hs==1?"/"+cp(S):S}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof hs==0?Sm(b,this.objId,this.scope):b},set:function(S){S=S.toString(),b=this instanceof hs==0?S.substr(0,1)==="("?Uu(S.substr(1,S.length-2)):Uu(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof hs==1?Uu(b.substr(1,b.length-1)):b},set:function(S){S=S.toString(),b=this instanceof hs==1?"/"+cp(S):S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(S){S=!!S,A=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(S){C=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,1)},set:function(S){S?this.Ff=Di(this.Ff,1):this.Ff=Pi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,2)},set:function(S){S?this.Ff=Di(this.Ff,2):this.Ff=Pi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,3)},set:function(S){S?this.Ff=Di(this.Ff,3):this.Ff=Pi(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');T=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(T){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:T=2;break;case"center":case 1:T=1;break;default:T=0}}})};br(Ga,xo);var eh=function(){Ga.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dw(t,this.objId,this.scope)},set:function(e){var n,s;s=[],typeof(n=e)=="string"&&(s=(function(a,l,c){c||(c=1);for(var h,f=[];h=l.exec(a);)f.push(h[c]);return f})(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,18)},set:function(e){e?this.Ff=Di(this.Ff,18):this.Ff=Pi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Di(this.Ff,19):this.Ff=Pi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,20)},set:function(e){e?(this.Ff=Di(this.Ff,20),t.sort()):this.Ff=Pi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,22)},set:function(e){e?this.Ff=Di(this.Ff,22):this.Ff=Pi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,23)},set:function(e){e?this.Ff=Di(this.Ff,23):this.Ff=Pi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,27)},set:function(e){e?this.Ff=Di(this.Ff,27):this.Ff=Pi(this.Ff,27)}}),this.hasAppearanceStream=!1};br(eh,Ga);var nh=function(){eh.call(this),this.fontName="helvetica",this.combo=!1};br(nh,eh);var ih=function(){nh.call(this),this.combo=!0};br(ih,nh);var $d=function(){ih.call(this),this.edit=!0};br($d,ih);var hs=function(){Ga.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,15)},set:function(e){e?this.Ff=Di(this.Ff,15):this.Ff=Pi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,16)},set:function(e){e?this.Ff=Di(this.Ff,16):this.Ff=Pi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,17)},set:function(e){e?this.Ff=Di(this.Ff,17):this.Ff=Pi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,26)},set:function(e){e?this.Ff=Di(this.Ff,26):this.Ff=Pi(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(a){return a};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+Gc(e(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(e){Dn(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+cp(e)}})};br(hs,Ga);var Yd=function(){hs.call(this),this.pushButton=!0};br(Yd,hs);var sh=function(){hs.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};br(sh,hs);var up=function(){var r,t;Ga.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(c){return c};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,l=[];for(a in l.push("<<"),n)l.push("/"+a+" ("+Gc(s(n[a]))+")");return l.push(">>"),l.join(`
`)},set:function(s){Dn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ce.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};br(up,Ga),sh.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},sh.prototype.createOption=function(r){var t=new up;return t.Parent=this,t.optionName=r,this.Kids.push(t),B6.call(this.scope,t),t};var Xd=function(){hs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ce.CheckBox.createAppearanceStream()};br(Xd,hs);var Bc=function(){Ga.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,13)},set:function(t){t?this.Ff=Di(this.Ff,13):this.Ff=Pi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,21)},set:function(t){t?this.Ff=Di(this.Ff,21):this.Ff=Pi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,23)},set:function(t){t?this.Ff=Di(this.Ff,23):this.Ff=Pi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,24)},set:function(t){t?this.Ff=Di(this.Ff,24):this.Ff=Pi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,25)},set:function(t){t?this.Ff=Di(this.Ff,25):this.Ff=Pi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,26)},set:function(t){t?this.Ff=Di(this.Ff,26):this.Ff=Pi(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};br(Bc,Ga);var Wd=function(){Bc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Mi(this.Ff,14)},set:function(r){r?this.Ff=Di(this.Ff,14):this.Ff=Pi(this.Ff,14)}}),this.password=!0};br(Wd,Bc);var ce={CheckBox:{createAppearanceStream:function(){return{N:{On:ce.CheckBox.YesNormal},D:{On:ce.CheckBox.YesPushDown,Off:ce.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=yo(r);t.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),a=o0(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+qe(ce.internal.getWidth(r))+" "+qe(ce.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+qe(a.fontSize)+" Tf "+s),e.push("BT"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=yo(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),s=[],a=ce.internal.getHeight(r),l=ce.internal.getWidth(r),c=o0(r,r.caption);return s.push("1 g"),s.push("0 0 "+qe(l)+" "+qe(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+qe(l-1)+" "+qe(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+e+" "+qe(c.fontSize)+" Tf "+n),s.push(c.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(r){var t=yo(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+qe(ce.internal.getWidth(r))+" "+qe(ce.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:ce.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=ce.RadioButton.Circle.YesNormal,t.D[r]=ce.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=yo(r);t.scope=r.scope;var e=[],n=ce.internal.getWidth(r)<=ce.internal.getHeight(r)?ce.internal.getWidth(r)/4:ce.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var s=ce.internal.Bezier_C,a=Number((n*s).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Hl(ce.internal.getWidth(r)/2)+" "+Hl(ce.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),e.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),e.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),e.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=yo(r);t.scope=r.scope;var e=[],n=ce.internal.getWidth(r)<=ce.internal.getHeight(r)?ce.internal.getWidth(r)/4:ce.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*ce.internal.Bezier_C).toFixed(5)),l=Number((n*ce.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Hl(ce.internal.getWidth(r)/2)+" "+Hl(ce.internal.getHeight(r)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),e.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),e.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),e.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Hl(ce.internal.getWidth(r)/2)+" "+Hl(ce.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),e.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),e.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),e.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=yo(r);t.scope=r.scope;var e=[],n=ce.internal.getWidth(r)<=ce.internal.getHeight(r)?ce.internal.getWidth(r)/4:ce.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*ce.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Hl(ce.internal.getWidth(r)/2)+" "+Hl(ce.internal.getHeight(r)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),e.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),e.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),e.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:ce.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=ce.RadioButton.Cross.YesNormal,t.D[r]=ce.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=yo(r);t.scope=r.scope;var e=[],n=ce.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+qe(ce.internal.getWidth(r)-2)+" "+qe(ce.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(qe(n.x1.x)+" "+qe(n.x1.y)+" m"),e.push(qe(n.x2.x)+" "+qe(n.x2.y)+" l"),e.push(qe(n.x4.x)+" "+qe(n.x4.y)+" m"),e.push(qe(n.x3.x)+" "+qe(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=yo(r);t.scope=r.scope;var e=ce.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+qe(ce.internal.getWidth(r))+" "+qe(ce.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+qe(ce.internal.getWidth(r)-2)+" "+qe(ce.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(qe(e.x1.x)+" "+qe(e.x1.y)+" m"),n.push(qe(e.x2.x)+" "+qe(e.x2.y)+" l"),n.push(qe(e.x4.x)+" "+qe(e.x4.y)+" m"),n.push(qe(e.x3.x)+" "+qe(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=yo(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+qe(ce.internal.getWidth(r))+" "+qe(ce.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};ce.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=ce.internal.getWidth(r),e=ce.internal.getHeight(r),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},ce.internal.getWidth=function(r){var t=0;return Dn(r)==="object"&&(t=nv(r.Rect[2])),t},ce.internal.getHeight=function(r){var t=0;return Dn(r)==="object"&&(t=nv(r.Rect[3])),t};var B6=Ci.addField=function(r){if(O6(this,r),!(r instanceof Ga))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ci.AcroFormChoiceField=eh,Ci.AcroFormListBox=nh,Ci.AcroFormComboBox=ih,Ci.AcroFormEditBox=$d,Ci.AcroFormButton=hs,Ci.AcroFormPushButton=Yd,Ci.AcroFormRadioButton=sh,Ci.AcroFormCheckBox=Xd,Ci.AcroFormTextField=Bc,Ci.AcroFormPasswordField=Wd,Ci.AcroFormAppearance=ce,Ci.AcroForm={ChoiceField:eh,ListBox:nh,ComboBox:ih,EditBox:$d,Button:hs,PushButton:Yd,RadioButton:sh,CheckBox:Xd,TextField:Bc,PasswordField:Wd,Appearance:ce},me.AcroForm={ChoiceField:eh,ListBox:nh,ComboBox:ih,EditBox:$d,Button:hs,PushButton:Yd,RadioButton:sh,CheckBox:Xd,TextField:Bc,PasswordField:Wd,Appearance:ce};me.AcroForm;function mw(r){return r.reduce(function(t,e,n){return t[e]=n,t},{})}(function(r){var t="addImage_";r.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=r.__addimage__.getImageFileTypeByImageData=function(P,G){var rt,Q,gt,V,et,at=e;if((G=G||e)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(K(P))for(et in n)for(gt=n[et],rt=0;rt<gt.length;rt+=1){for(V=!0,Q=0;Q<gt[rt].length;Q+=1)if(gt[rt][Q]!==void 0&&gt[rt][Q]!==P[Q]){V=!1;break}if(V===!0){at=et;break}}else for(et in n)for(gt=n[et],rt=0;rt<gt.length;rt+=1){for(V=!0,Q=0;Q<gt[rt].length;Q+=1)if(gt[rt][Q]!==void 0&&gt[rt][Q]!==P.charCodeAt(Q)){V=!1;break}if(V===!0){at=et;break}}return at===e&&G!==e&&(at=G),at},a=function P(G){for(var rt=this.internal.write,Q=this.internal.putStream,gt=(0,this.internal.getFilters)();gt.indexOf("FlateEncode")!==-1;)gt.splice(gt.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:G.width}),V.push({key:"Height",value:G.height}),G.colorSpace===S.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===S.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)&&G.transparency.length>0){for(var et="",at=0,wt=G.transparency.length;at<wt;at++)et+=G.transparency[at]+" "+G.transparency[at]+" ";V.push({key:"Mask",value:"["+et+"]"})}G.sMask!==void 0&&V.push({key:"SMask",value:G.objectId+1+" 0 R"});var Rt=G.filter!==void 0?["/"+G.filter]:void 0;if(Q({data:G.data,additionalKeyValues:V,alreadyAppliedFilters:Rt,objectId:G.objectId}),rt("endobj"),"sMask"in G&&G.sMask!==void 0){var Y,k=(Y=G.sMaskBitsPerComponent)!==null&&Y!==void 0?Y:G.bitsPerComponent,U={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:G.sMask};"filter"in G&&(U.decodeParameters="/Predictor ".concat(G.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(G.width),U.filter=G.filter),P.call(this,U)}if(G.colorSpace===S.INDEXED){var W=this.internal.newObject();Q({data:J(new Uint8Array(G.palette)),objectId:W}),rt("endobj")}},l=function(){var P=this.internal.collections[t+"images"];for(var G in P)a.call(this,P[G])},c=function(){var P,G=this.internal.collections[t+"images"],rt=this.internal.write;for(var Q in G)rt("/I"+(P=G[Q]).index,P.objectId,"0","R")},h=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var P=this.internal.collections[t+"images"];return h.call(this),P},p=function(){return Object.keys(this.internal.collections[t+"images"]).length},g=function(P){return typeof r["process"+P.toUpperCase()]=="function"},v=function(P){return Dn(P)==="object"&&P.nodeType===1},b=function(P,G){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var rt=""+P.getAttribute("src");if(rt.indexOf("data:image/")===0)return Vd(unescape(rt).split("base64,").pop());var Q=r.loadFile(rt,!0);if(Q!==void 0)return Q}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var gt;switch(G){case"PNG":gt="image/png";break;case"WEBP":gt="image/webp";break;default:gt="image/jpeg"}return Vd(P.toDataURL(gt,1).split("base64,").pop())}},C=function(P){var G=this.internal.collections[t+"images"];if(G){for(var rt in G)if(P===G[rt].alias)return G[rt]}},A=function(P,G,rt){return P||G||(P=-96,G=-96),P<0&&(P=-1*rt.width*72/P/this.internal.scaleFactor),G<0&&(G=-1*rt.height*72/G/this.internal.scaleFactor),P===0&&(P=G*rt.width/rt.height),G===0&&(G=P*rt.height/rt.width),[P,G]},T=function(P,G,rt,Q,gt,V){var et=A.call(this,rt,Q,gt),at=this.internal.getCoordinateString,wt=this.internal.getVerticalCoordinateString,Rt=f.call(this);if(rt=et[0],Q=et[1],Rt[gt.index]=gt,V){V*=Math.PI/180;var Y=Math.cos(V),k=Math.sin(V),U=function(st){return st.toFixed(4)},W=[U(Y),U(k),U(-1*k),U(Y),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,at(P),wt(G+Q),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([at(rt),"0","0",at(Q),"0","0","cm"].join(" "))):this.internal.write([at(rt),"0","0",at(Q),at(P),wt(G+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+gt.index+" Do"),this.internal.write("Q")},S=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=r.__addimage__.sHashCode=function(P){var G,rt,Q=0;if(typeof P=="string")for(rt=P.length,G=0;G<rt;G++)Q=(Q<<5)-Q+P.charCodeAt(G),Q|=0;else if(K(P))for(rt=P.byteLength/2,G=0;G<rt;G++)Q=(Q<<5)-Q+P[G],Q|=0;return Q},D=r.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var G=!0;return P.length===0&&(G=!1),P.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(G=!1),G},z=r.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var G=P.indexOf(",");return G<0?null:P.substring(0,G).trim().endsWith("base64")?P.substring(G+1):null};r.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var K=r.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},Z=r.__addimage__.binaryStringToUint8Array=function(P){for(var G=P.length,rt=new Uint8Array(G),Q=0;Q<G;Q++)rt[Q]=P.charCodeAt(Q);return rt},J=r.__addimage__.arrayBufferToBinaryString=function(P){for(var G="",rt=K(P)?P:new Uint8Array(P),Q=0;Q<rt.length;Q+=8192)G+=String.fromCharCode.apply(null,rt.subarray(Q,Q+8192));return G};r.addImage=function(){var P,G,rt,Q,gt,V,et,at,wt;if(typeof arguments[1]=="number"?(G=e,rt=arguments[1],Q=arguments[2],gt=arguments[3],V=arguments[4],et=arguments[5],at=arguments[6],wt=arguments[7]):(G=arguments[1],rt=arguments[2],Q=arguments[3],gt=arguments[4],V=arguments[5],et=arguments[6],at=arguments[7],wt=arguments[8]),Dn(P=arguments[0])==="object"&&!v(P)&&"imageData"in P){var Rt=P;P=Rt.imageData,G=Rt.format||G||e,rt=Rt.x||rt||0,Q=Rt.y||Q||0,gt=Rt.w||Rt.width||gt,V=Rt.h||Rt.height||V,et=Rt.alias||et,at=Rt.compression||at,wt=Rt.rotation||Rt.angle||wt}var Y=this.internal.getFilters();if(at===void 0&&Y.indexOf("FlateEncode")!==-1&&(at="SLOW"),isNaN(rt)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var k=H.call(this,P,G,et,at);return T.call(this,rt,Q,gt,V,k,wt),this};var H=function(P,G,rt,Q){var gt,V,et;if(typeof P=="string"&&s(P)===e){P=unescape(P);var at=lt(P,!1);(at!==""||(at=r.loadFile(P,!0))!==void 0)&&(P=at)}if(v(P)&&(P=b(P,G)),G=s(P,G),!g(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((et=rt)==null||et.length===0)&&(rt=(function(wt){return typeof wt=="string"||K(wt)?M(wt):K(wt.data)?M(wt.data):null})(P)),(gt=C.call(this,rt))||(P instanceof Uint8Array||G==="RGBA"||(V=P,P=Z(P)),gt=this["process"+G.toUpperCase()](P,p.call(this),rt,(function(wt){return wt&&typeof wt=="string"&&(wt=wt.toUpperCase()),wt in r.image_compression?wt:R.NONE})(Q),V)),!gt)throw new Error("An unknown error occurred whilst processing the image.");return gt},lt=r.__addimage__.convertBase64ToBinaryString=function(P,G){G=typeof G!="boolean"||G;var rt,Q="";if(typeof P=="string"){var gt;rt=(gt=z(P))!==null&&gt!==void 0?gt:P;try{Q=Vd(rt)}catch(V){if(G)throw D(rt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};r.getImageProperties=function(P){var G,rt,Q="";if(v(P)&&(P=b(P)),typeof P=="string"&&s(P)===e&&((Q=lt(P,!1))===""&&(Q=r.loadFile(P)||""),P=Q),rt=s(P),!g(rt))throw new Error("addImage does not support files of type '"+rt+"', please ensure that a plugin for '"+rt+"' support is added.");if(P instanceof Uint8Array||(P=Z(P)),!(G=this["process"+rt.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=rt,G}})(me.API),(function(r){var t=function(e){if(e!==void 0&&e!="")return!0};me.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,s,a,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(e.objId),f=e.pageContext.annotations,p=!1,g=0;g<f.length&&!p;g++)switch((n=f[g]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var v=0;v<f.length;v++){n=f[v];var b=this.internal.pdfEscape,C=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(A.objId),R=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(n.bounds.x)+" "+c(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y)+"] ")+"/Contents ("+b(S(n.contents))+")",a+=" /Popup "+T.objId+" 0 R",a+=" /P "+h.objId+" 0 R",a+=" /T ("+b(S(R))+") >>",A.content=a;var M=A.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(n.bounds.x+30)+" "+c(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+c(n.bounds.y)+"] ")+" /Parent "+M,n.open&&(a+=" /Open true"),a+=" >>",T.content=a,this.internal.write(A.objId,"0 R",T.objId,"0 R");break;case"freetext":s="/Rect ["+l(n.bounds.x)+" "+c(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+b(C(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var z=this.annotations._nameMap[n.options.name];n.options.pageNumber=z.page,n.options.top=z.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+b(C(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var K=c(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+K+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,s,a,l){var c=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:h(e),y:f(n),w:h(e+s),h:f(n+a)},options:l,type:"link"})},r.textWithLink=function(e,n,s,a){var l,c,h=this.getTextWidth(e),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){c=a.maxWidth;var p=this.splitTextToSize(e,c).length;l=Math.ceil(f*p)}else c=h,l=f;return this.text(e,n,s,a),s+=.2*f,a.align==="center"&&(n-=h/2),a.align==="right"&&(n-=h),this.link(n,s-f,c,l,a),h},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}})(me.API),(function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(A){return t[A.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},c=r.__arabicParser__.isArabicEndLetter=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(A){return l(A)&&s.indexOf(A.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length>=1};var f=r.__arabicParser__.arabicLetterHasFinalForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length>=3};var p=r.__arabicParser__.arabicLetterHasMedialForm=function(A){return l(A)&&a(A)&&t[A.charCodeAt(0)].length==4},g=r.__arabicParser__.resolveLigatures=function(A){var T=0,S=e,R="",M=0;for(T=0;T<A.length;T+=1)S[A.charCodeAt(T)]!==void 0?(M++,typeof(S=S[A.charCodeAt(T)])=="number"&&(R+=String.fromCharCode(S),S=e,M=0),T===A.length-1&&(S=e,R+=A.charAt(T-(M-1)),T-=M-1,M=0)):(S=e,R+=A.charAt(T-M),T-=M,M=0);return R};r.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&n[A.charCodeAt(0)]!==void 0};var v=r.__arabicParser__.getCorrectForm=function(A,T,S){return l(A)?a(A)===!1?-1:!f(A)||!l(T)&&!l(S)||!l(S)&&c(T)||c(A)&&!l(T)||c(A)&&h(T)||c(A)&&c(T)?0:p(A)&&l(T)&&!c(T)&&l(S)&&f(S)?3:c(A)||!l(S)?1:2:-1},b=function(A){var T=0,S=0,R=0,M="",D="",z="",K=(A=A||"").split("\\s+"),Z=[];for(T=0;T<K.length;T+=1){for(Z.push(""),S=0;S<K[T].length;S+=1)M=K[T][S],D=K[T][S-1],z=K[T][S+1],l(M)?(R=v(M,D,z),Z[T]+=R!==-1?String.fromCharCode(t[M.charCodeAt(0)][R]):M):Z[T]+=M;Z[T]=g(Z[T])}return Z.join(" ")},C=r.__arabicParser__.processArabic=r.processArabic=function(){var A,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(T)){var R=0;for(S=[],R=0;R<T.length;R+=1)Array.isArray(T[R])?S.push([b(T[R][0]),T[R][1],T[R][2]]):S.push([b(T[R])]);A=S}else A=b(T);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};r.events.push(["preProcessText",C])})(me.API),me.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(c){e=c}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(c){a=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var s;if((e=e||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(me.API),(function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(A){h=A}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(A){f=A}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(A){p=A}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(A){g=A}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(A){b=A}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(A){C=A}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,f){n.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),g=f.font||this.getFont(),v=f.scaleFactor||this.internal.scaleFactor,b=0,C=0,A=0,T=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var S=f.maxWidth;S>0?typeof h=="string"?h=this.splitTextToSize(h,S):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(M,D){return M.concat(T.splitTextToSize(D,S))},[])):h=Array.isArray(h)?h:[h];for(var R=0;R<h.length;R++)b<(A=this.getStringUnitWidth(h[R],{font:g})*p)&&(b=A);return b!==0&&(C=h.length),{w:b/=v,h:Math.max((C*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/v,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var h;h=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=g.top,b&&v&&(this.printHeaderRow(h.lineNumber,!0),h.y+=v[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,e===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};r.table=function(h,f,p,g,v){if(n.call(this),!p)throw new Error("No data for PDF table.");var b,C,A,T,S=[],R=[],M=[],D={},z={},K=[],Z=[],J=(v=v||{}).autoSize||!1,H=v.printHeaders!==!1,lt=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,P=v.margins||Object.assign({width:this.getPageWidth()},t),G=typeof v.padding=="number"?v.padding:3,rt=v.headerBackgroundColor||"#c8c8c8",Q=v.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=H,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=lt,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=rt,this.internal.__cell__.headerTextColor=Q,this.setFontSize(lt),g==null)R=S=Object.keys(p[0]),M=S.map(function(){return"left"});else if(Array.isArray(g)&&Dn(g[0])==="object")for(S=g.map(function(Rt){return Rt.name}),R=g.map(function(Rt){return Rt.prompt||Rt.name||""}),M=g.map(function(Rt){return Rt.align||"left"}),b=0;b<g.length;b+=1)z[g[b].name]=.7499990551181103*g[b].width;else Array.isArray(g)&&typeof g[0]=="string"&&(R=S=g,M=S.map(function(){return"left"}));if(J||Array.isArray(g)&&typeof g[0]=="string")for(b=0;b<S.length;b+=1){for(D[T=S[b]]=p.map(function(Rt){return Rt[T]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(R[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=D[T],this.setFont(void 0,"normal"),A=0;A<C.length;A+=1)K.push(this.getTextDimensions(C[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[T]=Math.max.apply(null,K)+G+G,K=[]}if(H){var gt={};for(b=0;b<S.length;b+=1)gt[S[b]]={},gt[S[b]].text=R[b],gt[S[b]].align=M[b];var V=c.call(this,gt,z);Z=S.map(function(Rt){return new a(h,f,z[Rt],V,gt[Rt].text,void 0,gt[Rt].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var et=g.reduce(function(Rt,Y){return Rt[Y.name]=Y.align,Rt},{});for(b=0;b<p.length;b+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:b,data:p[b]},this);var at=c.call(this,p[b],z);for(A=0;A<S.length;A+=1){var wt=p[b][S[A]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:b,col:A,data:wt},this),l.call(this,new a(h,f,z[S[A]],at,wt,b+2,et[S[A]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var c=function(h,f){var p=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(h).map(function(b){var C=h[b];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,f[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*g/v+p+p},this).reduce(function(b,C){return Math.max(b,C)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,f){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,v.push(p)),p.lineNumber=h;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,p),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),e=!1}})(me.API);var bw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},yw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],l0=mw(yw),vw=[100,200,300,400,500,600,700,800,900],I6=mw(vw);function Cm(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=(function(a){return bw[a=a||"normal"]?a:"normal"})(r.style),n=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(r.weight),s=(function(a){return typeof l0[a=a||"normal"]=="number"?a:"normal"})(r.stretch);return{family:t,style:e,weight:n,stretch:s,src:r.src||[],ref:r.ref||{name:t,style:[s,e,n].join(" ")}}}function iv(r,t,e,n){var s;for(s=e;s>=0&&s<t.length;s+=n)if(r[t[s]])return r[t[s]];for(s=e;s>=0&&s<t.length;s-=n)if(r[t[s]])return r[t[s]]}var F6={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rv(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function av(r){return r.trimLeft()}function j6(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function U6(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var zu,Fd,ov,lv,cv,Em=["times"];function uv(r,t,e,n,s){var a=4,l=fv;switch(s){case me.API.image_compression.FAST:a=1,l=hv;break;case me.API.image_compression.MEDIUM:a=6,l=dv;break;case me.API.image_compression.SLOW:a=9,l=pv}r=(function(h,f,p,g){for(var v,b=h.length/f,C=new Uint8Array(h.length+b),A=[z6,hv,fv,dv,pv],T=0;T<b;T+=1){var S=T*f,R=h.subarray(S,S+f);if(g)C.set(g(R,p,v),S+T);else{for(var M=A.length,D=[],z=0;z<M;z+=1)D[z]=A[z](R,p,v);var K=q6(D.concat());C.set(D[K],S+T)}v=R}return C})(r,t,Math.ceil(e*n/8),l);var c=e0(r,{level:a});return me.API.__addimage__.arrayBufferToBinaryString(c)}function z6(r){var t=Array.apply([],r);return t.unshift(0),t}function hv(r,t){var e=r.length,n=[];n[0]=1;for(var s=0;s<e;s+=1){var a=r[s-t]||0;n[s+1]=r[s]-a+256&255}return n}function fv(r,t,e){var n=r.length,s=[];s[0]=2;for(var a=0;a<n;a+=1){var l=e&&e[a]||0;s[a+1]=r[a]-l+256&255}return s}function dv(r,t,e){var n=r.length,s=[];s[0]=3;for(var a=0;a<n;a+=1){var l=r[a-t]||0,c=e&&e[a]||0;s[a+1]=r[a]+256-(l+c>>>1)&255}return s}function pv(r,t,e){var n=r.length,s=[];s[0]=4;for(var a=0;a<n;a+=1){var l=H6(r[a-t]||0,e&&e[a]||0,e&&e[a-t]||0);s[a+1]=r[a]-l+256&255}return s}function H6(r,t,e){if(r===t&&t===e)return r;var n=Math.abs(t-e),s=Math.abs(r-e),a=Math.abs(r+t-e-e);return n<=s&&n<=a?r:s<=a?t:e}function q6(r){var t=r.map(function(e){return e.reduce(function(n,s){return n+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function Tm(r,t,e){var n=t*e,s=Math.floor(n/8),a=16-(n-8*s+e),l=(1<<e)-1;return ww(r,s)>>a&l}function gv(r,t,e,n){var s=e*n,a=Math.floor(s/8),l=16-(s-8*a+n),c=(1<<n)-1,h=(t&c)<<l;(function(f,p,g){if(p+1<f.byteLength)f.setUint16(p,g,!1);else{var v=g>>8&255;f.setUint8(p,v)}})(r,a,ww(r,a)&~(c<<l)&65535|h)}function ww(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function G6(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,s=r[t++],a=s>>7,l=1<<1+(7&s);r[t++],r[t++];var c=null,h=null;a&&(c=t,h=l,t+=3*l);var f=!0,p=[],g=0,v=null,b=0,C=null;for(this.width=e,this.height=n;f&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,C=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((P=r[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var A=r[t++];g=r[t++]|r[t++]<<8,v=r[t++],1&A||(v=null),b=A>>2&7,t++;break;case 254:for(;;){if(!((P=r[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var T=r[t++]|r[t++]<<8,S=r[t++]|r[t++]<<8,R=r[t++]|r[t++]<<8,M=r[t++]|r[t++]<<8,D=r[t++],z=D>>6&1,K=1<<1+(7&D),Z=c,J=h,H=!1;D>>7&&(H=!0,Z=t,J=K,t+=3*K);var lt=t;for(t++;;){var P;if(!((P=r[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}p.push({x:T,y:S,width:R,height:M,has_local_palette:H,palette_offset:Z,palette_size:J,data_offset:lt,data_length:t-lt,transparent_index:v,interlaced:!!z,delay:g,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return C},this.frameInfo=function(G){if(G<0||G>=p.length)throw new Error("Frame index out of range.");return p[G]},this.decodeAndBlitFrameBGRA=function(G,rt){var Q=this.frameInfo(G),gt=Q.width*Q.height,V=new Uint8Array(gt);mv(r,Q.data_offset,V,gt);var et=Q.palette_offset,at=Q.transparent_index;at===null&&(at=256);var wt=Q.width,Rt=e-wt,Y=wt,k=4*(Q.y*e+Q.x),U=4*((Q.y+Q.height)*e+Q.x),W=k,st=4*Rt;Q.interlaced===!0&&(st+=4*e*7);for(var ct=8,ht=0,Ct=V.length;ht<Ct;++ht){var _t=V[ht];if(Y===0&&(Y=wt,(W+=st)>=U&&(st=4*Rt+4*e*(ct-1),W=k+(wt+Rt)*(ct<<1),ct>>=1)),_t===at)W+=4;else{var Dt=r[et+3*_t],Vt=r[et+3*_t+1],Wt=r[et+3*_t+2];rt[W++]=Wt,rt[W++]=Vt,rt[W++]=Dt,rt[W++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(G,rt){var Q=this.frameInfo(G),gt=Q.width*Q.height,V=new Uint8Array(gt);mv(r,Q.data_offset,V,gt);var et=Q.palette_offset,at=Q.transparent_index;at===null&&(at=256);var wt=Q.width,Rt=e-wt,Y=wt,k=4*(Q.y*e+Q.x),U=4*((Q.y+Q.height)*e+Q.x),W=k,st=4*Rt;Q.interlaced===!0&&(st+=4*e*7);for(var ct=8,ht=0,Ct=V.length;ht<Ct;++ht){var _t=V[ht];if(Y===0&&(Y=wt,(W+=st)>=U&&(st=4*Rt+4*e*(ct-1),W=k+(wt+Rt)*(ct<<1),ct>>=1)),_t===at)W+=4;else{var Dt=r[et+3*_t],Vt=r[et+3*_t+1],Wt=r[et+3*_t+2];rt[W++]=Dt,rt[W++]=Vt,rt[W++]=Wt,rt[W++]=255}--Y}}}function mv(r,t,e,n){for(var s=r[t++],a=1<<s,l=a+1,c=l+1,h=s+1,f=(1<<h)-1,p=0,g=0,v=0,b=r[t++],C=new Int32Array(4096),A=null;;){for(;p<16&&b!==0;)g|=r[t++]<<p,p+=8,b===1?b=r[t++]:--b;if(p<h)break;var T=g&f;if(g>>=h,p-=h,T!==a){if(T===l)break;for(var S=T<c?T:A,R=0,M=S;M>a;)M=C[M]>>8,++R;var D=M;if(v+R+(S!==T?1:0)>n)return void Vn.log("Warning, gif stream longer than expected.");e[v++]=D;var z=v+=R;for(S!==T&&(e[v++]=D),M=S;R--;)M=C[M],e[--z]=255&M,M>>=8;A!==null&&c<4096&&(C[c++]=A<<8|D,c>=f+1&&h<12&&(++h,f=f<<1|1)),A=T}else c=l+1,f=(1<<(h=s+1))-1,A=null}return v!==n&&Vn.log("Warning, gif stream shorter than expected."),e}function Nm(r){var t,e,n,s,a,l=Math.floor,c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),g=new Array(65535),v=new Array(65535),b=new Array(64),C=new Array(64),A=[],T=0,S=7,R=new Array(64),M=new Array(64),D=new Array(64),z=new Array(256),K=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],lt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],rt=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],gt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(k,U){for(var W=0,st=0,ct=new Array,ht=1;ht<=16;ht++){for(var Ct=1;Ct<=k[ht];Ct++)ct[U[st]]=[],ct[U[st]][0]=W,ct[U[st]][1]=ht,st++,W++;W*=2}return ct}function et(k){for(var U=k[0],W=k[1]-1;W>=0;)U&1<<W&&(T|=1<<S),W--,--S<0&&(T==255?(at(255),at(0)):at(T),S=7,T=0)}function at(k){A.push(k)}function wt(k){at(k>>8&255),at(255&k)}function Rt(k,U,W,st,ct){for(var ht,Ct=ct[0],_t=ct[240],Dt=(function(Ot,Jt){var Xt,Qt,ie,Se,Xe,Pe,We,je,ue,ke,he=0;for(ue=0;ue<8;++ue){Xt=Ot[he],Qt=Ot[he+1],ie=Ot[he+2],Se=Ot[he+3],Xe=Ot[he+4],Pe=Ot[he+5],We=Ot[he+6];var Tn=Xt+(je=Ot[he+7]),Re=Xt-je,ve=Qt+We,Me=Qt-We,Ze=ie+Pe,we=ie-Pe,Pn=Se+Xe,Te=Se-Xe,De=Tn+Pn,Nn=Tn-Pn,Ge=ve+Ze,ge=ve-Ze;Ot[he]=De+Ge,Ot[he+4]=De-Ge;var rn=.707106781*(ge+Nn);Ot[he+2]=Nn+rn,Ot[he+6]=Nn-rn;var yr=.382683433*((De=Te+we)-(ge=Me+Re)),es=.5411961*De+yr,zr=1.306562965*ge+yr,Xs=.707106781*(Ge=we+Me),be=Re+Xs,fa=Re-Xs;Ot[he+5]=fa+es,Ot[he+3]=fa-es,Ot[he+1]=be+zr,Ot[he+7]=be-zr,he+=8}for(he=0,ue=0;ue<8;++ue){Xt=Ot[he],Qt=Ot[he+8],ie=Ot[he+16],Se=Ot[he+24],Xe=Ot[he+32],Pe=Ot[he+40],We=Ot[he+48];var Hr=Xt+(je=Ot[he+56]),Ps=Xt-je,Os=Qt+We,$n=Qt-We,mi=ie+Pe,Oi=ie-Pe,$a=Se+Xe,fs=Se-Xe,Ln=Hr+$a,Yn=Hr-$a,ns=Os+mi,Bs=Os-mi;Ot[he]=Ln+ns,Ot[he+32]=Ln-ns;var Ws=.707106781*(Bs+Yn);Ot[he+16]=Yn+Ws,Ot[he+48]=Yn-Ws;var Co=.382683433*((Ln=fs+Oi)-(Bs=$n+Ps)),vr=.5411961*Ln+Co,wr=1.306562965*Bs+Co,Ya=.707106781*(ns=Oi+$n),xr=Ps+Ya,Ar=Ps-Ya;Ot[he+40]=Ar+vr,Ot[he+24]=Ar-vr,Ot[he+8]=xr+wr,Ot[he+56]=xr-wr,he++}for(ue=0;ue<64;++ue)ke=Ot[ue]*Jt[ue],b[ue]=ke>0?ke+.5|0:ke-.5|0;return b})(k,U),Vt=0;Vt<64;++Vt)C[Z[Vt]]=Dt[Vt];var Wt=C[0]-W;W=C[0],Wt==0?et(st[0]):(et(st[v[ht=32767+Wt]]),et(g[ht]));for(var Kt=63;Kt>0&&C[Kt]==0;)Kt--;if(Kt==0)return et(Ct),W;for(var St,I=1;I<=Kt;){for(var jt=I;C[I]==0&&I<=Kt;)++I;var qt=I-jt;if(qt>=16){St=qt>>4;for(var Yt=1;Yt<=St;++Yt)et(_t);qt&=15}ht=32767+C[I],et(ct[(qt<<4)+v[ht]]),et(g[ht]),I++}return Kt!=63&&et(Ct),W}function Y(k){k=Math.min(Math.max(k,1),100),a!=k&&((function(U){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],st=0;st<64;st++){var ct=l((W[st]*U+50)/100);ct=Math.min(Math.max(ct,1),255),c[Z[st]]=ct}for(var ht=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ct=0;Ct<64;Ct++){var _t=l((ht[Ct]*U+50)/100);_t=Math.min(Math.max(_t,1),255),h[Z[Ct]]=_t}for(var Dt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Vt=0,Wt=0;Wt<8;Wt++)for(var Kt=0;Kt<8;Kt++)f[Vt]=1/(c[Z[Vt]]*Dt[Wt]*Dt[Kt]*8),p[Vt]=1/(h[Z[Vt]]*Dt[Wt]*Dt[Kt]*8),Vt++})(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),a=k)}this.encode=function(k,U){U&&Y(U),A=new Array,T=0,S=7,wt(65496),wt(65504),wt(16),at(74),at(70),at(73),at(70),at(0),at(1),at(1),at(0),wt(1),wt(1),at(0),at(0),(function(){wt(65499),wt(132),at(0);for(var Qt=0;Qt<64;Qt++)at(c[Qt]);at(1);for(var ie=0;ie<64;ie++)at(h[ie])})(),(function(Qt,ie){wt(65472),wt(17),at(8),wt(ie),wt(Qt),at(3),at(1),at(17),at(0),at(2),at(17),at(1),at(3),at(17),at(1)})(k.width,k.height),(function(){wt(65476),wt(418),at(0);for(var Qt=0;Qt<16;Qt++)at(J[Qt+1]);for(var ie=0;ie<=11;ie++)at(H[ie]);at(16);for(var Se=0;Se<16;Se++)at(lt[Se+1]);for(var Xe=0;Xe<=161;Xe++)at(P[Xe]);at(1);for(var Pe=0;Pe<16;Pe++)at(G[Pe+1]);for(var We=0;We<=11;We++)at(rt[We]);at(17);for(var je=0;je<16;je++)at(Q[je+1]);for(var ue=0;ue<=161;ue++)at(gt[ue])})(),wt(65498),wt(12),at(3),at(1),at(0),at(2),at(17),at(3),at(17),at(0),at(63),at(0);var W=0,st=0,ct=0;T=0,S=7,this.encode.displayName="_encode_";for(var ht,Ct,_t,Dt,Vt,Wt,Kt,St,I,jt=k.data,qt=k.width,Yt=k.height,Ot=4*qt,Jt=0;Jt<Yt;){for(ht=0;ht<Ot;){for(Vt=Ot*Jt+ht,Kt=-1,St=0,I=0;I<64;I++)Wt=Vt+(St=I>>3)*Ot+(Kt=4*(7&I)),Jt+St>=Yt&&(Wt-=Ot*(Jt+1+St-Yt)),ht+Kt>=Ot&&(Wt-=ht+Kt-Ot+4),Ct=jt[Wt++],_t=jt[Wt++],Dt=jt[Wt++],R[I]=(K[Ct]+K[_t+256|0]+K[Dt+512|0]>>16)-128,M[I]=(K[Ct+768|0]+K[_t+1024|0]+K[Dt+1280|0]>>16)-128,D[I]=(K[Ct+1280|0]+K[_t+1536|0]+K[Dt+1792|0]>>16)-128;W=Rt(R,f,W,t,n),st=Rt(M,p,st,e,s),ct=Rt(D,p,ct,e,s),ht+=32}Jt+=8}if(S>=0){var Xt=[];Xt[1]=S+1,Xt[0]=(1<<S+1)-1,et(Xt)}return wt(65497),new Uint8Array(A)},r=r||50,(function(){for(var k=String.fromCharCode,U=0;U<256;U++)z[U]=k(U)})(),t=V(J,H),e=V(G,rt),n=V(lt,P),s=V(Q,gt),(function(){for(var k=1,U=2,W=1;W<=15;W++){for(var st=k;st<U;st++)v[32767+st]=W,g[32767+st]=[],g[32767+st][1]=W,g[32767+st][0]=st;for(var ct=-(U-1);ct<=-k;ct++)v[32767+ct]=W,g[32767+ct]=[],g[32767+ct][1]=W,g[32767+ct][0]=U-1+ct;k<<=1,U<<=1}})(),(function(){for(var k=0;k<256;k++)K[k]=19595*k,K[k+256|0]=38470*k,K[k+512|0]=7471*k+32768,K[k+768|0]=-11059*k,K[k+1024|0]=-21709*k,K[k+1280|0]=32768*k+8421375,K[k+1536|0]=-27439*k,K[k+1792|0]=-5329*k})(),Y(r)}function Ua(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bv(r){function t(H){if(!H)throw Error("assert :P")}function e(H,lt,P){for(var G=0;4>G;G++)if(H[lt+G]!=P.charCodeAt(G))return!0;return!1}function n(H,lt,P,G,rt){for(var Q=0;Q<rt;Q++)H[lt+Q]=P[G+Q]}function s(H,lt,P,G){for(var rt=0;rt<G;rt++)H[lt+rt]=P}function a(H){return new Int32Array(H)}function l(H,lt){for(var P=[],G=0;G<H;G++)P.push(new lt);return P}function c(H,lt){var P=[];return(function G(rt,Q,gt){for(var V=gt[Q],et=0;et<V&&(rt.push(gt.length>Q+1?[]:new lt),!(gt.length<Q+1));et++)G(rt[et],Q+1,gt)})(P,0,H),P}var h=function(){var H=this;function lt(m,w){for(var E=1<<w-1>>>0;m&E;)E>>>=1;return E?(m&E-1)+E:m}function P(m,w,E,N,B){t(!(N%E));do m[w+(N-=E)]=B;while(0<N)}function G(m,w,E,N,B){if(t(2328>=B),512>=B)var F=a(512);else if((F=a(B))==null)return 0;return(function(j,$,X,nt,dt,Et){var tt,mt,xt=$,Pt=1<<X,At=a(16),Mt=a(16);for(t(dt!=0),t(nt!=null),t(j!=null),t(0<X),mt=0;mt<dt;++mt){if(15<nt[mt])return 0;++At[nt[mt]]}if(At[0]==dt)return 0;for(Mt[1]=0,tt=1;15>tt;++tt){if(At[tt]>1<<tt)return 0;Mt[tt+1]=Mt[tt]+At[tt]}for(mt=0;mt<dt;++mt)tt=nt[mt],0<nt[mt]&&(Et[Mt[tt]++]=mt);if(Mt[15]==1)return(nt=new rt).g=0,nt.value=Et[0],P(j,xt,1,Pt,nt),Pt;var Ft,$t=-1,Ht=Pt-1,le=0,te=1,Oe=1,se=1<<X;for(mt=0,tt=1,dt=2;tt<=X;++tt,dt<<=1){if(te+=Oe<<=1,0>(Oe-=At[tt]))return 0;for(;0<At[tt];--At[tt])(nt=new rt).g=tt,nt.value=Et[mt++],P(j,xt+le,dt,se,nt),le=lt(le,tt)}for(tt=X+1,dt=2;15>=tt;++tt,dt<<=1){if(te+=Oe<<=1,0>(Oe-=At[tt]))return 0;for(;0<At[tt];--At[tt]){if(nt=new rt,(le&Ht)!=$t){for(xt+=se,Ft=1<<($t=tt)-X;15>$t&&!(0>=(Ft-=At[$t]));)++$t,Ft<<=1;Pt+=se=1<<(Ft=$t-X),j[$+($t=le&Ht)].g=Ft+X,j[$+$t].value=xt-$-$t}nt.g=tt-X,nt.value=Et[mt++],P(j,xt+(le>>X),dt,se,nt),le=lt(le,tt)}}return te!=2*Mt[15]-1?0:Pt})(m,w,E,N,B,F)}function rt(){this.value=this.g=0}function Q(){this.value=this.g=0}function gt(){this.G=l(5,rt),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Ja,Q)}function V(m,w,E,N){t(m!=null),t(w!=null),t(2147483648>N),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=w,m.pa=E,m.Jd=w,m.Yc=E+N,m.Zc=4<=N?E+N-4+1:E,Ct(m)}function et(m,w){for(var E=0;0<w--;)E|=Dt(m,128)<<w;return E}function at(m,w){var E=et(m,w);return _t(m)?-E:E}function wt(m,w,E,N){var B,F=0;for(t(m!=null),t(w!=null),t(4294967288>N),m.Sb=N,m.Ra=0,m.u=0,m.h=0,4<N&&(N=4),B=0;B<N;++B)F+=w[E+B]<<8*B;m.Ra=F,m.bb=N,m.oa=w,m.pa=E}function Rt(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Wr-8>>>0,++m.bb,m.u-=8;st(m)&&(m.h=1,m.u=0)}function Y(m,w){if(t(0<=w),!m.h&&w<=ms){var E=W(m)&Cs[w];return m.u+=w,Rt(m),E}return m.h=1,m.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(m){return m.Ra>>>(m.u&Wr-1)>>>0}function st(m){return t(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Wr}function ct(m,w){m.u=w,m.h=st(m)}function ht(m){m.u>=Kr&&(t(m.u>=Kr),Rt(m))}function Ct(m){t(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(t(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function _t(m){return et(m,1)}function Dt(m,w){var E=m.Ca;0>m.b&&Ct(m);var N=m.b,B=E*w>>>8,F=(m.I>>>N>B)+0;for(F?(E-=B,m.I-=B+1<<N>>>0):E=B+1,N=E,B=0;256<=N;)B+=8,N>>=8;return N=7^B+Ta[N],m.b-=N,m.Ca=(E<<N)-1,F}function Vt(m,w,E){m[w+0]=E>>24&255,m[w+1]=E>>16&255,m[w+2]=E>>8&255,m[w+3]=255&E}function Wt(m,w){return m[w+0]|m[w+1]<<8}function Kt(m,w){return Wt(m,w)|m[w+2]<<16}function St(m,w){return Wt(m,w)|Wt(m,w+2)<<16}function I(m,w){var E=1<<w;return t(m!=null),t(0<w),m.X=a(E),m.X==null?0:(m.Mb=32-w,m.Xa=w,1)}function jt(m,w){t(m!=null),t(w!=null),t(m.Xa==w.Xa),n(w.X,0,m.X,0,1<<w.Xa)}function qt(){this.X=[],this.Xa=this.Mb=0}function Yt(m,w,E,N){t(E!=null),t(N!=null);var B=E[0],F=N[0];return B==0&&(B=(m*F+w/2)/w),F==0&&(F=(w*B+m/2)/m),0>=B||0>=F?0:(E[0]=B,N[0]=F,1)}function Ot(m,w){return m+(1<<w)-1>>>w}function Jt(m,w){return((4278255360&m)+(4278255360&w)>>>0&4278255360)+((16711935&m)+(16711935&w)>>>0&16711935)>>>0}function Xt(m,w){H[w]=function(E,N,B,F,j,$,X){var nt;for(nt=0;nt<j;++nt){var dt=H[m]($[X+nt-1],B,F+nt);$[X+nt]=Jt(E[N+nt],dt)}}}function Qt(){this.ud=this.hd=this.jd=0}function ie(m,w){return((4278124286&(m^w))>>>1)+(m&w)>>>0}function Se(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Xe(m,w){return Se(m+(m-w+.5>>1))}function Pe(m,w,E){return Math.abs(w-E)-Math.abs(m-E)}function We(m,w,E,N,B,F,j){for(N=F[j-1],E=0;E<B;++E)F[j+E]=N=Jt(m[w+E],N)}function je(m,w,E,N,B){var F;for(F=0;F<E;++F){var j=m[w+F],$=j>>8&255,X=16711935&(X=(X=16711935&j)+(($<<16)+$));N[B+F]=(4278255360&j)+X>>>0}}function ue(m,w){w.jd=255&m,w.hd=m>>8&255,w.ud=m>>16&255}function ke(m,w,E,N,B,F){var j;for(j=0;j<N;++j){var $=w[E+j],X=$>>>8,nt=$,dt=255&(dt=(dt=$>>>16)+((m.jd<<24>>24)*(X<<24>>24)>>>5));nt=255&(nt=(nt+=(m.hd<<24>>24)*(X<<24>>24)>>>5)+((m.ud<<24>>24)*(dt<<24>>24)>>>5)),B[F+j]=(4278255360&$)+(dt<<16)+nt}}function he(m,w,E,N,B){H[w]=function(F,j,$,X,nt,dt,Et,tt,mt){for(X=Et;X<tt;++X)for(Et=0;Et<mt;++Et)nt[dt++]=B($[N(F[j++])])},H[m]=function(F,j,$,X,nt,dt,Et){var tt=8>>F.b,mt=F.Ea,xt=F.K[0],Pt=F.w;if(8>tt)for(F=(1<<F.b)-1,Pt=(1<<tt)-1;j<$;++j){var At,Mt=0;for(At=0;At<mt;++At)At&F||(Mt=N(X[nt++])),dt[Et++]=B(xt[Mt&Pt]),Mt>>=tt}else H["VP8LMapColor"+E](X,nt,xt,Pt,dt,Et,j,$,mt)}}function Tn(m,w,E,N,B){for(E=w+E;w<E;){var F=m[w++];N[B++]=F>>16&255,N[B++]=F>>8&255,N[B++]=255&F}}function Re(m,w,E,N,B){for(E=w+E;w<E;){var F=m[w++];N[B++]=F>>16&255,N[B++]=F>>8&255,N[B++]=255&F,N[B++]=F>>24&255}}function ve(m,w,E,N,B){for(E=w+E;w<E;){var F=(j=m[w++])>>16&240|j>>12&15,j=240&j|j>>28&15;N[B++]=F,N[B++]=j}}function Me(m,w,E,N,B){for(E=w+E;w<E;){var F=(j=m[w++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;N[B++]=F,N[B++]=j}}function Ze(m,w,E,N,B){for(E=w+E;w<E;){var F=m[w++];N[B++]=255&F,N[B++]=F>>8&255,N[B++]=F>>16&255}}function we(m,w,E,N,B,F){if(F==0)for(E=w+E;w<E;)Vt(N,((F=m[w++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),B+=32;else n(N,B,m,w,E)}function Pn(m,w){H[w][0]=H[m+"0"],H[w][1]=H[m+"1"],H[w][2]=H[m+"2"],H[w][3]=H[m+"3"],H[w][4]=H[m+"4"],H[w][5]=H[m+"5"],H[w][6]=H[m+"6"],H[w][7]=H[m+"7"],H[w][8]=H[m+"8"],H[w][9]=H[m+"9"],H[w][10]=H[m+"10"],H[w][11]=H[m+"11"],H[w][12]=H[m+"12"],H[w][13]=H[m+"13"],H[w][14]=H[m+"0"],H[w][15]=H[m+"0"]}function Te(m){return m==xc||m==cu||m==vl||m==uu}function De(){this.eb=[],this.size=this.A=this.fb=0}function Nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ge(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new De,this.f.kb=new Nn,this.sd=null}function ge(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yr(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function es(m,w){var E=m.T,N=w.ba.f.RGBA,B=N.eb,F=N.fb+m.ka*N.A,j=Wi[w.ba.S],$=m.y,X=m.O,nt=m.f,dt=m.N,Et=m.ea,tt=m.W,mt=w.cc,xt=w.dc,Pt=w.Mc,At=w.Nc,Mt=m.ka,Ft=m.ka+m.T,$t=m.U,Ht=$t+1>>1;for(Mt==0?j($,X,null,null,nt,dt,Et,tt,nt,dt,Et,tt,B,F,null,null,$t):(j(w.ec,w.fc,$,X,mt,xt,Pt,At,nt,dt,Et,tt,B,F-N.A,B,F,$t),++E);Mt+2<Ft;Mt+=2)mt=nt,xt=dt,Pt=Et,At=tt,dt+=m.Rc,tt+=m.Rc,F+=2*N.A,j($,(X+=2*m.fa)-m.fa,$,X,mt,xt,Pt,At,nt,dt,Et,tt,B,F-N.A,B,F,$t);return X+=m.fa,m.j+Ft<m.o?(n(w.ec,w.fc,$,X,$t),n(w.cc,w.dc,nt,dt,Ht),n(w.Mc,w.Nc,Et,tt,Ht),E--):1&Ft||j($,X,null,null,nt,dt,Et,tt,nt,dt,Et,tt,B,F+N.A,null,null,$t),E}function zr(m,w,E){var N=m.F,B=[m.J];if(N!=null){var F=m.U,j=w.ba.S,$=j==wc||j==vl;w=w.ba.f.RGBA;var X=[0],nt=m.ka;X[0]=m.T,m.Kb&&(nt==0?--X[0]:(--nt,B[0]-=m.width),m.j+m.ka+m.T==m.o&&(X[0]=m.o-m.j-nt));var dt=w.eb;nt=w.fb+nt*w.A,m=mc(N,B[0],m.width,F,X,dt,nt+($?0:3),w.A),t(E==X),m&&Te(j)&&Bo(dt,nt,$,F,X,w.A)}return 0}function Xs(m){var w=m.ma,E=w.ba.S,N=11>E,B=E==rs||E==tr||E==wc||E==yl||E==12||Te(E);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Ea(w.Oa,m,B?11:12))return 0;if(B&&Te(E)&&fc(),m.da)alert("todo:use_scaling");else{if(N){if(w.Ib=yr,m.Kb){if(E=m.U+1>>1,w.memory=a(m.U+2*E),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+m.U,w.Mc=w.cc,w.Nc=w.dc+E,w.Ib=es,fc()}}else alert("todo:EmitYUV");B&&(w.Jb=zr,N&&Tr())}if(N&&!ro){for(m=0;256>m;++m)Ki[m]=89858*(m-128)+Al>>ar,Mp[m]=-22014*(m-128)+Al,Pf[m]=-45773*(m-128),gu[m]=113618*(m-128)+Al>>ar;for(m=Uo;m<so;++m)w=76283*(m-16)+Al>>ar,Dp[m-Uo]=Fs(w,255),Pp[m-Uo]=Fs(w+8>>4,15);ro=1}return 1}function be(m){var w=m.ma,E=m.U,N=m.T;return t(!(1&m.ka)),0>=E||0>=N?0:(E=w.Ib(m,w),w.Jb!=null&&w.Jb(m,w,E),w.Dc+=E,1)}function fa(m){m.ma.memory=null}function Hr(m,w,E,N){return Y(m,8)!=47?0:(w[0]=Y(m,14)+1,E[0]=Y(m,14)+1,N[0]=Y(m,1),Y(m,3)!=0?0:!m.h)}function Ps(m,w){if(4>m)return m+1;var E=m-2>>1;return(2+(1&m)<<E)+Y(w,E)+1}function Os(m,w){return 120<w?w-120:1<=(E=((E=nr[w-1])>>4)*m+(8-(15&E)))?E:1;var E}function $n(m,w,E){var N=W(E),B=m[w+=255&N].g-8;return 0<B&&(ct(E,E.u+8),N=W(E),w+=m[w].value,w+=N&(1<<B)-1),ct(E,E.u+m[w].g),m[w].value}function mi(m,w,E){return E.g+=m.g,E.value+=m.value<<w>>>0,t(8>=E.g),m.g}function Oi(m,w,E){var N=m.xc;return t((w=N==0?0:m.vc[m.md*(E>>N)+(w>>N)])<m.Wb),m.Ya[w]}function $a(m,w,E,N){var B=m.ab,F=m.c*w,j=m.C;w=j+w;var $=E,X=N;for(N=m.Ta,E=m.Ua;0<B--;){var nt=m.gc[B],dt=j,Et=w,tt=$,mt=X,xt=(X=N,$=E,nt.Ea);switch(t(dt<Et),t(Et<=nt.nc),nt.hc){case 2:ci(tt,mt,(Et-dt)*xt,X,$);break;case 0:var Pt=dt,At=Et,Mt=X,Ft=$,$t=(se=nt).Ea;Pt==0&&(pl(tt,mt,null,null,1,Mt,Ft),We(tt,mt+1,0,0,$t-1,Mt,Ft+1),mt+=$t,Ft+=$t,++Pt);for(var Ht=1<<se.b,le=Ht-1,te=Ot($t,se.b),Oe=se.K,se=se.w+(Pt>>se.b)*te;Pt<At;){var Je=Oe,qn=se,ze=1;for(gl(tt,mt,Mt,Ft-$t,1,Mt,Ft);ze<$t;){var ee=(ze&~le)+Ht;ee>$t&&(ee=$t),(0,Na[Je[qn++]>>8&15])(tt,mt+ +ze,Mt,Ft+ze-$t,ee-ze,Mt,Ft+ze),ze=ee}mt+=$t,Ft+=$t,++Pt&le||(se+=te)}Et!=nt.nc&&n(X,$-xt,X,$+(Et-dt-1)*xt,xt);break;case 1:for(xt=tt,At=mt,$t=(tt=nt.Ea)-(Ft=tt&~(Mt=(mt=1<<nt.b)-1)),Pt=Ot(tt,nt.b),Ht=nt.K,nt=nt.w+(dt>>nt.b)*Pt;dt<Et;){for(le=Ht,te=nt,Oe=new Qt,se=At+Ft,Je=At+tt;At<se;)ue(le[te++],Oe),ml(Oe,xt,At,mt,X,$),At+=mt,$+=mt;At<Je&&(ue(le[te++],Oe),ml(Oe,xt,At,$t,X,$),At+=$t,$+=$t),++dt&Mt||(nt+=Pt)}break;case 3:if(tt==X&&mt==$&&0<nt.b){for(At=X,tt=xt=$+(Et-dt)*xt-(Ft=(Et-dt)*Ot(nt.Ea,nt.b)),mt=X,Mt=$,Pt=[],Ft=($t=Ft)-1;0<=Ft;--Ft)Pt[Ft]=mt[Mt+Ft];for(Ft=$t-1;0<=Ft;--Ft)At[tt+Ft]=Pt[Ft];su(nt,dt,Et,X,xt,X,$)}else su(nt,dt,Et,tt,mt,X,$)}$=N,X=E}X!=E&&n(N,E,$,X,F)}function fs(m,w){var E=m.V,N=m.Ba+m.c*m.C,B=w-m.C;if(t(w<=m.l.o),t(16>=B),0<B){var F=m.l,j=m.Ta,$=m.Ua,X=F.width;if($a(m,B,E,N),B=$=[$],t((E=m.C)<(N=w)),t(F.v<F.va),N>F.o&&(N=F.o),E<F.j){var nt=F.j-E;E=F.j,B[0]+=nt*X}if(E>=N?E=0:(B[0]+=4*F.v,F.ka=E-F.j,F.U=F.va-F.v,F.T=N-E,E=1),E){if($=$[0],11>(E=m.ca).S){var dt=E.f.RGBA,Et=(N=E.S,B=F.U,F=F.T,nt=dt.eb,dt.A),tt=F;for(dt=dt.fb+m.Ma*dt.A;0<tt--;){var mt=j,xt=$,Pt=B,At=nt,Mt=dt;switch(N){case ou:bl(mt,xt,Pt,At,Mt);break;case rs:La(mt,xt,Pt,At,Mt);break;case xc:La(mt,xt,Pt,At,Mt),Bo(At,Mt,0,Pt,1,0);break;case lu:Po(mt,xt,Pt,At,Mt);break;case tr:we(mt,xt,Pt,At,Mt,1);break;case cu:we(mt,xt,Pt,At,Mt,1),Bo(At,Mt,0,Pt,1,0);break;case wc:we(mt,xt,Pt,At,Mt,0);break;case vl:we(mt,xt,Pt,At,Mt,0),Bo(At,Mt,1,Pt,1,0);break;case yl:ka(mt,xt,Pt,At,Mt);break;case uu:ka(mt,xt,Pt,At,Mt),Qs(At,Mt,Pt,1,0);break;case Qa:Qr(mt,xt,Pt,At,Mt);break;default:t(0)}$+=X,dt+=Et}m.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");t(m.Ma<=E.height)}}m.C=w,t(m.C<=m.i)}function Ln(m){var w;if(0<m.ua)return 0;for(w=0;w<m.Wb;++w){var E=m.Ya[w].G,N=m.Ya[w].H;if(0<E[1][N[1]+0].g||0<E[2][N[2]+0].g||0<E[3][N[3]+0].g)return 0}return 1}function Yn(m,w,E,N,B,F){if(m.Z!=0){var j=m.qd,$=m.rd;for(t(Da[m.Z]!=null);w<E;++w)Da[m.Z](j,$,N,B,N,B,F),j=N,$=B,B+=F;m.qd=j,m.rd=$}}function ns(m,w){var E=m.l.ma,N=E.Z==0||E.Z==1?m.l.j:m.C;if(N=m.C<N?N:m.C,t(w<=m.l.o),w>N){var B=m.l.width,F=E.ca,j=E.tb+B*N,$=m.V,X=m.Ba+m.c*N,nt=m.gc;t(m.ab==1),t(nt[0].hc==3),Jr(nt[0],N,w,$,X,F,j),Yn(E,N,w,F,j,B)}m.C=m.Ma=w}function Bs(m,w,E,N,B,F,j){var $=m.$/N,X=m.$%N,nt=m.m,dt=m.s,Et=E+m.$,tt=Et;B=E+N*B;var mt=E+N*F,xt=280+dt.ua,Pt=m.Pb?$:16777216,At=0<dt.ua?dt.Wa:null,Mt=dt.wc,Ft=Et<mt?Oi(dt,X,$):null;t(m.C<F),t(mt<=B);var $t=!1;t:for(;;){for(;$t||Et<mt;){var Ht=0;if($>=Pt){var le=Et-E;t((Pt=m).Pb),Pt.wd=Pt.m,Pt.xd=le,0<Pt.s.ua&&jt(Pt.s.Wa,Pt.s.vb),Pt=$+to}if(X&Mt||(Ft=Oi(dt,X,$)),t(Ft!=null),Ft.Qb&&(w[Et]=Ft.qb,$t=!0),!$t)if(ht(nt),Ft.jc){Ht=nt,le=w;var te=Et,Oe=Ft.pd[W(Ht)&Ja-1];t(Ft.jc),256>Oe.g?(ct(Ht,Ht.u+Oe.g),le[te]=Oe.value,Ht=0):(ct(Ht,Ht.u+Oe.g-256),t(256<=Oe.value),Ht=Oe.value),Ht==0&&($t=!0)}else Ht=$n(Ft.G[0],Ft.H[0],nt);if(nt.h)break;if($t||256>Ht){if(!$t)if(Ft.nd)w[Et]=(Ft.qb|Ht<<8)>>>0;else{if(ht(nt),$t=$n(Ft.G[1],Ft.H[1],nt),ht(nt),le=$n(Ft.G[2],Ft.H[2],nt),te=$n(Ft.G[3],Ft.H[3],nt),nt.h)break;w[Et]=(te<<24|$t<<16|Ht<<8|le)>>>0}if($t=!1,++Et,++X>=N&&(X=0,++$,j!=null&&$<=F&&!($%16)&&j(m,$),At!=null))for(;tt<Et;)Ht=w[tt++],At.X[(506832829*Ht&4294967295)>>>At.Mb]=Ht}else if(280>Ht){if(Ht=Ps(Ht-256,nt),le=$n(Ft.G[4],Ft.H[4],nt),ht(nt),le=Os(N,le=Ps(le,nt)),nt.h)break;if(Et-E<le||B-Et<Ht)break t;for(te=0;te<Ht;++te)w[Et+te]=w[Et+te-le];for(Et+=Ht,X+=Ht;X>=N;)X-=N,++$,j!=null&&$<=F&&!($%16)&&j(m,$);if(t(Et<=B),X&Mt&&(Ft=Oi(dt,X,$)),At!=null)for(;tt<Et;)Ht=w[tt++],At.X[(506832829*Ht&4294967295)>>>At.Mb]=Ht}else{if(!(Ht<xt))break t;for($t=Ht-280,t(At!=null);tt<Et;)Ht=w[tt++],At.X[(506832829*Ht&4294967295)>>>At.Mb]=Ht;Ht=Et,t(!($t>>>(le=At).Xa)),w[Ht]=le.X[$t],$t=!0}$t||t(nt.h==st(nt))}if(m.Pb&&nt.h&&Et<B)t(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&jt(m.s.vb,m.s.Wa);else{if(nt.h)break t;j?.(m,$>F?F:$),m.a=0,m.$=Et-E}return 1}return m.a=3,0}function Ws(m){t(m!=null),m.vc=null,m.yc=null,m.Ya=null;var w=m.Wa;w!=null&&(w.X=null),m.vb=null,t(m!=null)}function Co(){var m=new Le;return m==null?null:(m.a=0,m.xb=gh,Pn("Predictor","VP8LPredictors"),Pn("Predictor","VP8LPredictors_C"),Pn("PredictorAdd","VP8LPredictorsAdd"),Pn("PredictorAdd","VP8LPredictorsAdd_C"),ci=je,ml=ke,bl=Tn,La=Re,ka=ve,Qr=Me,Po=Ze,H.VP8LMapColor32b=Zr,H.VP8LMapColor8b=$i,m)}function vr(m,w,E,N,B){var F=1,j=[m],$=[w],X=N.m,nt=N.s,dt=null,Et=0;t:for(;;){if(E)for(;F&&Y(X,1);){var tt=j,mt=$,xt=N,Pt=1,At=xt.m,Mt=xt.gc[xt.ab],Ft=Y(At,2);if(xt.Oc&1<<Ft)F=0;else{switch(xt.Oc|=1<<Ft,Mt.hc=Ft,Mt.Ea=tt[0],Mt.nc=mt[0],Mt.K=[null],++xt.ab,t(4>=xt.ab),Ft){case 0:case 1:Mt.b=Y(At,3)+2,Pt=vr(Ot(Mt.Ea,Mt.b),Ot(Mt.nc,Mt.b),0,xt,Mt.K),Mt.K=Mt.K[0];break;case 3:var $t,Ht=Y(At,8)+1,le=16<Ht?0:4<Ht?1:2<Ht?2:3;if(tt[0]=Ot(Mt.Ea,le),Mt.b=le,$t=Pt=vr(Ht,1,0,xt,Mt.K)){var te,Oe=Ht,se=Mt,Je=1<<(8>>se.b),qn=a(Je);if(qn==null)$t=0;else{var ze=se.K[0],ee=se.w;for(qn[0]=se.K[0][0],te=1;te<1*Oe;++te)qn[te]=Jt(ze[ee+te],qn[te-1]);for(;te<4*Je;++te)qn[te]=0;se.K[0]=null,se.K[0]=qn,$t=1}}Pt=$t;break;case 2:break;default:t(0)}F=Pt}}if(j=j[0],$=$[0],F&&Y(X,1)&&!(F=1<=(Et=Y(X,4))&&11>=Et)){N.a=3;break t}var Zt;if(Zt=F)e:{var Wn,Ee,Ve,yn=N,Li=j,Zi=$,In=Et,vi=E,as=yn.m,wi=yn.s,Ke=[null],un=1,Kn=0,gn=ir[In];n:for(;;){if(vi&&Y(as,1)){var ki=Y(as,3)+2,Zn=Ot(Li,ki),hn=Ot(Zi,ki),fi=Zn*hn;if(!vr(Zn,hn,0,yn,Ke))break n;for(Ke=Ke[0],wi.xc=ki,Wn=0;Wn<fi;++Wn){var vn=Ke[Wn]>>8&65535;Ke[Wn]=vn,vn>=un&&(un=vn+1)}}if(as.h)break n;for(Ee=0;5>Ee;++Ee){var xi=Fo[Ee];!Ee&&0<In&&(xi+=1<<In),Kn<xi&&(Kn=xi)}var Ai=l(un*gn,rt),kn=un,ln=l(kn,gt);if(ln==null)var os=null;else t(65536>=kn),os=ln;var ei=a(Kn);if(os==null||ei==null||Ai==null){yn.a=1;break n}var ye=Ai;for(Wn=Ve=0;Wn<un;++Wn){var xe=os[Wn],fn=xe.G,Es=xe.H,or=0,ys=1,_i=0;for(Ee=0;5>Ee;++Ee){xi=Fo[Ee],fn[Ee]=ye,Es[Ee]=Ve,!Ee&&0<In&&(xi+=1<<In);s:{var ao,oo=xi,bu=yn,Fn=ei,bh=ye,yh=Ve,yu=0,Pa=bu.m,Op=Y(Pa,1);if(s(Fn,0,0,oo),Op){var vh=Y(Pa,1)+1,wh=Y(Pa,1),vu=Y(Pa,wh==0?1:8);Fn[vu]=1,vh==2&&(Fn[vu=Y(Pa,8)]=1);var Fi=1}else{var ni=a(19),Cc=Y(Pa,4)+4;if(19<Cc){bu.a=3;var lo=0;break s}for(ao=0;ao<Cc;++ao)ni[Ac[ao]]=Y(Pa,3);var Sl=void 0,zo=void 0,na=bu,wu=ni,Cl=oo,xu=Fn,Au=0,Oa=na.m,xh=8,Ah=l(128,rt);i:for(;G(Ah,0,7,wu,19);){if(Y(Oa,1)){var Of=2+2*Y(Oa,3);if((Sl=2+Y(Oa,Of))>Cl)break i}else Sl=Cl;for(zo=0;zo<Cl&&Sl--;){ht(Oa);var _h=Ah[0+(127&W(Oa))];ct(Oa,Oa.u+_h.g);var co=_h.value;if(16>co)xu[zo++]=co,co!=0&&(xh=co);else{var Bf=co==16,If=co-16,Ff=wl[If],Sh=Y(Oa,er[If])+Ff;if(zo+Sh>Cl)break i;for(var jf=Bf?xh:0;0<Sh--;)xu[zo++]=jf}}Au=1;break i}Au||(na.a=3),Fi=Au}(Fi=Fi&&!Pa.h)&&(yu=G(bh,yh,8,Fn,oo)),Fi&&yu!=0?lo=yu:(bu.a=3,lo=0)}if(lo==0)break n;if(ys&&hu[Ee]==1&&(ys=ye[Ve].g==0),or+=ye[Ve].g,Ve+=lo,3>=Ee){var Ho,_u=ei[0];for(Ho=1;Ho<xi;++Ho)ei[Ho]>_u&&(_u=ei[Ho]);_i+=_u}}if(xe.nd=ys,xe.Qb=0,ys&&(xe.qb=(fn[3][Es[3]+0].value<<24|fn[1][Es[1]+0].value<<16|fn[2][Es[2]+0].value)>>>0,or==0&&256>fn[0][Es[0]+0].value&&(xe.Qb=1,xe.qb+=fn[0][Es[0]+0].value<<8)),xe.jc=!xe.Qb&&6>_i,xe.jc){var Ec,ia=xe;for(Ec=0;Ec<Ja;++Ec){var Ba=Ec,Ia=ia.pd[Ba],Su=ia.G[0][ia.H[0]+Ba];256<=Su.value?(Ia.g=Su.g+256,Ia.value=Su.value):(Ia.g=0,Ia.value=0,Ba>>=mi(Su,8,Ia),Ba>>=mi(ia.G[1][ia.H[1]+Ba],16,Ia),Ba>>=mi(ia.G[2][ia.H[2]+Ba],0,Ia),mi(ia.G[3][ia.H[3]+Ba],24,Ia))}}}wi.vc=Ke,wi.Wb=un,wi.Ya=os,wi.yc=Ai,Zt=1;break e}Zt=0}if(!(F=Zt)){N.a=3;break t}if(0<Et){if(nt.ua=1<<Et,!I(nt.Wa,Et)){N.a=1,F=0;break t}}else nt.ua=0;var Cu=N,qo=j,Uf=$,El=Cu.s,Tl=El.xc;if(Cu.c=qo,Cu.i=Uf,El.md=Ot(qo,Tl),El.wc=Tl==0?-1:(1<<Tl)-1,E){N.xb=eo;break t}if((dt=a(j*$))==null){N.a=1,F=0;break t}F=(F=Bs(N,dt,0,j,$,$,null))&&!X.h;break t}return F?(B!=null?B[0]=dt:(t(dt==null),t(E)),N.$=0,E||Ws(nt)):Ws(nt),F}function wr(m,w){var E=m.c*m.i,N=E+w+16*w;return t(m.c<=w),m.V=a(N),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+E+w,1)}function Ya(m,w){var E=m.C,N=w-E,B=m.V,F=m.Ba+m.c*E;for(t(w<=m.l.o);0<N;){var j=16<N?16:N,$=m.l.ma,X=m.l.width,nt=X*j,dt=$.ca,Et=$.tb+X*E,tt=m.Ta,mt=m.Ua;$a(m,j,B,F),qs(tt,mt,dt,Et,nt),Yn($,E,E+j,dt,Et,X),N-=j,B+=j*m.c,E+=j}t(E==w),m.C=m.Ma=w}function xr(){this.ub=this.yd=this.td=this.Rb=0}function Ar(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Eo(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function qr(){this.Yb=(function(){var m=[];return(function w(E,N,B){for(var F=B[N],j=0;j<F&&(E.push(B.length>N+1?[]:0),!(B.length<N+1));j++)w(E[j],N+1,B)})(m,0,[3,11]),m})()}function oi(){this.jb=a(3),this.Wc=c([4,8],qr),this.Xc=c([4,17],qr)}function Jl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Is(){this.ld=this.La=this.dd=this.tc=0}function _r(){this.Na=this.la=0}function da(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ql(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Is),this.Y=0,this.ya=Array(new Ql),this.aa=0,this.l=new pa}function ec(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Xc(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new xr,this.Kc=new Ar,this.ed=new Jl,this.Qa=new Eo,this.Ic=this.$c=this.Aa=0,this.D=new tc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,k),this.ia=0,this.pb=l(4,da),this.Pa=new oi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ec),this.Hd=0,this.rb=Array(new _r),this.sb=0,this.wa=Array(new Is),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ql),this.L=this.aa=0,this.gd=c([4,2],Is),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fs(m,w){return 0>m?0:m>w?w:m}function pa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Sr(){var m=new Xc;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Gs||(Gs=Xa)),m}function dn(m,w,E){return m.a==0&&(m.a=w,m.sc=E,m.cb=0),0}function nc(m,w,E){return 3<=E&&m[w+0]==157&&m[w+1]==1&&m[w+2]==42}function Gr(m,w){if(m==null)return 0;if(m.a=0,m.sc="OK",w==null)return dn(m,2,"null VP8Io passed to VP8GetHeaders()");var E=w.data,N=w.w,B=w.ha;if(4>B)return dn(m,7,"Truncated header.");var F=E[N+0]|E[N+1]<<8|E[N+2]<<16,j=m.Od;if(j.Rb=!(1&F),j.td=F>>1&7,j.yd=F>>4&1,j.ub=F>>5,3<j.td)return dn(m,3,"Incorrect keyframe parameters.");if(!j.yd)return dn(m,4,"Frame not displayable.");N+=3,B-=3;var $=m.Kc;if(j.Rb){if(7>B)return dn(m,7,"cannot parse picture header");if(!nc(E,N,B))return dn(m,3,"Bad code word");$.c=16383&(E[N+4]<<8|E[N+3]),$.Td=E[N+4]>>6,$.i=16383&(E[N+6]<<8|E[N+5]),$.Ud=E[N+6]>>6,N+=7,B-=7,m.za=$.c+15>>4,m.Ub=$.i+15>>4,w.width=$.c,w.height=$.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,s((F=m.Pa).jb,0,255,F.jb.length),t((F=m.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,s(F.Zb,0,0,F.Zb.length),s(F.Lb,0,0,F.Lb)}if(j.ub>B)return dn(m,7,"bad partition length");V(F=m.m,E,N,j.ub),N+=j.ub,B-=j.ub,j.Rb&&($.Ld=_t(F),$.Kd=_t(F)),$=m.Qa;var X,nt=m.Pa;if(t(F!=null),t($!=null),$.Cb=_t(F),$.Cb){if($.Bb=_t(F),_t(F)){for($.Fb=_t(F),X=0;4>X;++X)$.Zb[X]=_t(F)?at(F,7):0;for(X=0;4>X;++X)$.Lb[X]=_t(F)?at(F,6):0}if($.Bb)for(X=0;3>X;++X)nt.jb[X]=_t(F)?et(F,8):255}else $.Bb=0;if(F.Ka)return dn(m,3,"cannot parse segment header");if(($=m.ed).zd=_t(F),$.Tb=et(F,6),$.wb=et(F,3),$.Pc=_t(F),$.Pc&&_t(F)){for(nt=0;4>nt;++nt)_t(F)&&($.vd[nt]=at(F,6));for(nt=0;4>nt;++nt)_t(F)&&($.od[nt]=at(F,6))}if(m.L=$.Tb==0?0:$.zd?1:2,F.Ka)return dn(m,3,"cannot parse filter header");var dt=B;if(B=X=N,N=X+dt,$=dt,m.Xb=(1<<et(m.m,2))-1,dt<3*(nt=m.Xb))E=7;else{for(X+=3*nt,$-=3*nt,dt=0;dt<nt;++dt){var Et=E[B+0]|E[B+1]<<8|E[B+2]<<16;Et>$&&(Et=$),V(m.Jc[+dt],E,X,Et),X+=Et,$-=Et,B+=3}V(m.Jc[+nt],E,X,$),E=X<N?0:5}if(E!=0)return dn(m,E,"cannot parse partitions");for(E=et(X=m.m,7),B=_t(X)?at(X,4):0,N=_t(X)?at(X,4):0,$=_t(X)?at(X,4):0,nt=_t(X)?at(X,4):0,X=_t(X)?at(X,4):0,dt=m.Qa,Et=0;4>Et;++Et){if(dt.Cb){var tt=dt.Zb[Et];dt.Fb||(tt+=E)}else{if(0<Et){m.pb[Et]=m.pb[0];continue}tt=E}var mt=m.pb[Et];mt.Sc[0]=sr[Fs(tt+B,127)],mt.Sc[1]=rr[Fs(tt+0,127)],mt.Eb[0]=2*sr[Fs(tt+N,127)],mt.Eb[1]=101581*rr[Fs(tt+$,127)]>>16,8>mt.Eb[1]&&(mt.Eb[1]=8),mt.Qc[0]=sr[Fs(tt+nt,117)],mt.Qc[1]=rr[Fs(tt+X,127)],mt.lc=tt+X}if(!j.Rb)return dn(m,4,"Not a key frame.");for(_t(F),j=m.Pa,E=0;4>E;++E){for(B=0;8>B;++B)for(N=0;3>N;++N)for($=0;11>$;++$)nt=Dt(F,Hn[E][B][N][$])?et(F,8):Df[E][B][N][$],j.Wc[E][B].Yb[N][$]=nt;for(B=0;17>B;++B)j.Xc[E][B]=j.Wc[E][Qe[B]]}return m.kc=_t(F),m.kc&&(m.Bd=et(F,8)),m.cb=1}function Xa(m,w,E,N,B,F,j){var $=w[B].Yb[E];for(E=0;16>B;++B){if(!Dt(m,$[E+0]))return B;for(;!Dt(m,$[E+1]);)if($=w[++B].Yb[0],E=0,B==16)return 16;var X=w[B+1].Yb;if(Dt(m,$[E+2])){var nt=m,dt=0;if(Dt(nt,(tt=$)[(Et=E)+3]))if(Dt(nt,tt[Et+6])){for($=0,Et=2*(dt=Dt(nt,tt[Et+8]))+(tt=Dt(nt,tt[Et+9+dt])),dt=0,tt=Mf[Et];tt[$];++$)dt+=dt+Dt(nt,tt[$]);dt+=3+(8<<Et)}else Dt(nt,tt[Et+7])?(dt=7+2*Dt(nt,165),dt+=Dt(nt,145)):dt=5+Dt(nt,159);else dt=Dt(nt,tt[Et+4])?3+Dt(nt,tt[Et+5]):2;$=X[2]}else dt=1,$=X[1];X=j+ph[B],0>(nt=m).b&&Ct(nt);var Et,tt=nt.b,mt=(Et=nt.Ca>>1)-(nt.I>>tt)>>31;--nt.b,nt.Ca+=mt,nt.Ca|=1,nt.I-=(Et+1&mt)<<tt,F[X]=((dt^mt)-mt)*N[(0<B)+0]}return 16}function ic(m){var w=m.rb[m.sb-1];w.la=0,w.Na=0,s(m.zc,0,0,m.zc.length),m.ja=0}function ds(m,w,E,N,B){B=m[w+E+32*N]+(B>>3),m[w+E+32*N]=-256&B?0>B?0:255:B}function Ti(m,w,E,N,B,F){ds(m,w,0,E,N+B),ds(m,w,1,E,N+F),ds(m,w,2,E,N-F),ds(m,w,3,E,N-B)}function bi(m){return(20091*m>>16)+m}function ol(m,w,E,N){var B,F=0,j=a(16);for(B=0;4>B;++B){var $=m[w+0]+m[w+8],X=m[w+0]-m[w+8],nt=(35468*m[w+4]>>16)-bi(m[w+12]),dt=bi(m[w+4])+(35468*m[w+12]>>16);j[F+0]=$+dt,j[F+1]=X+nt,j[F+2]=X-nt,j[F+3]=$-dt,F+=4,w++}for(B=F=0;4>B;++B)$=(m=j[F+0]+4)+j[F+8],X=m-j[F+8],nt=(35468*j[F+4]>>16)-bi(j[F+12]),ds(E,N,0,0,$+(dt=bi(j[F+4])+(35468*j[F+12]>>16))),ds(E,N,1,0,X+nt),ds(E,N,2,0,X-nt),ds(E,N,3,0,$-dt),F++,N+=32}function Wc(m,w,E,N){var B=m[w+0]+4,F=35468*m[w+4]>>16,j=bi(m[w+4]),$=35468*m[w+1]>>16;Ti(E,N,0,B+j,m=bi(m[w+1]),$),Ti(E,N,1,B+F,m,$),Ti(E,N,2,B-F,m,$),Ti(E,N,3,B-j,m,$)}function sc(m,w,E,N,B){ol(m,w,E,N),B&&ol(m,w+16,E,N+4)}function ps(m,w,E,N){Ra(m,w+0,E,N,1),Ra(m,w+32,E,N+128,1)}function rc(m,w,E,N){var B;for(m=m[w+0]+4,B=0;4>B;++B)for(w=0;4>w;++w)ds(E,N,w,B,m)}function ac(m,w,E,N){m[w+0]&&pn(m,w+0,E,N),m[w+16]&&pn(m,w+16,E,N+4),m[w+32]&&pn(m,w+32,E,N+128),m[w+48]&&pn(m,w+48,E,N+128+4)}function Cr(m,w,E,N){var B,F=a(16);for(B=0;4>B;++B){var j=m[w+0+B]+m[w+12+B],$=m[w+4+B]+m[w+8+B],X=m[w+4+B]-m[w+8+B],nt=m[w+0+B]-m[w+12+B];F[0+B]=j+$,F[8+B]=j-$,F[4+B]=nt+X,F[12+B]=nt-X}for(B=0;4>B;++B)j=(m=F[0+4*B]+3)+F[3+4*B],$=F[1+4*B]+F[2+4*B],X=F[1+4*B]-F[2+4*B],nt=m-F[3+4*B],E[N+0]=j+$>>3,E[N+16]=nt+X>>3,E[N+32]=j-$>>3,E[N+48]=nt-X>>3,N+=64}function To(m,w,E){var N,B=w-32,F=ss,j=255-m[B-1];for(N=0;N<E;++N){var $,X=F,nt=j+m[w-1];for($=0;$<E;++$)m[w+$]=X[nt+m[B+$]];w+=32}}function Kc(m,w){To(m,w,4)}function Zc(m,w){To(m,w,8)}function oc(m,w){To(m,w,16)}function lc(m,w){var E;for(E=0;16>E;++E)n(m,w+32*E,m,w-32,16)}function Jc(m,w){var E;for(E=16;0<E;--E)s(m,w,m[w-1],16),w+=32}function Ss(m,w,E){var N;for(N=0;16>N;++N)s(w,E+32*N,m,16)}function Er(m,w){var E,N=16;for(E=0;16>E;++E)N+=m[w-1+32*E]+m[w+E-32];Ss(N>>5,m,w)}function ga(m,w){var E,N=8;for(E=0;16>E;++E)N+=m[w-1+32*E];Ss(N>>4,m,w)}function No(m,w){var E,N=8;for(E=0;16>E;++E)N+=m[w+E-32];Ss(N>>4,m,w)}function Wa(m,w){Ss(128,m,w)}function Ce(m,w,E){return m+2*w+E+2>>2}function Qc(m,w){var E,N=w-32;for(N=new Uint8Array([Ce(m[N-1],m[N+0],m[N+1]),Ce(m[N+0],m[N+1],m[N+2]),Ce(m[N+1],m[N+2],m[N+3]),Ce(m[N+2],m[N+3],m[N+4])]),E=0;4>E;++E)n(m,w+32*E,N,0,N.length)}function cc(m,w){var E=m[w-1],N=m[w-1+32],B=m[w-1+64],F=m[w-1+96];Vt(m,w+0,16843009*Ce(m[w-1-32],E,N)),Vt(m,w+32,16843009*Ce(E,N,B)),Vt(m,w+64,16843009*Ce(N,B,F)),Vt(m,w+96,16843009*Ce(B,F,F))}function tu(m,w){var E,N=4;for(E=0;4>E;++E)N+=m[w+E-32]+m[w-1+32*E];for(N>>=3,E=0;4>E;++E)s(m,w+32*E,N,4)}function js(m,w){var E=m[w-1+0],N=m[w-1+32],B=m[w-1+64],F=m[w-1-32],j=m[w+0-32],$=m[w+1-32],X=m[w+2-32],nt=m[w+3-32];m[w+0+96]=Ce(N,B,m[w-1+96]),m[w+1+96]=m[w+0+64]=Ce(E,N,B),m[w+2+96]=m[w+1+64]=m[w+0+32]=Ce(F,E,N),m[w+3+96]=m[w+2+64]=m[w+1+32]=m[w+0+0]=Ce(j,F,E),m[w+3+64]=m[w+2+32]=m[w+1+0]=Ce($,j,F),m[w+3+32]=m[w+2+0]=Ce(X,$,j),m[w+3+0]=Ce(nt,X,$)}function Gi(m,w){var E=m[w+1-32],N=m[w+2-32],B=m[w+3-32],F=m[w+4-32],j=m[w+5-32],$=m[w+6-32],X=m[w+7-32];m[w+0+0]=Ce(m[w+0-32],E,N),m[w+1+0]=m[w+0+32]=Ce(E,N,B),m[w+2+0]=m[w+1+32]=m[w+0+64]=Ce(N,B,F),m[w+3+0]=m[w+2+32]=m[w+1+64]=m[w+0+96]=Ce(B,F,j),m[w+3+32]=m[w+2+64]=m[w+1+96]=Ce(F,j,$),m[w+3+64]=m[w+2+96]=Ce(j,$,X),m[w+3+96]=Ce($,X,X)}function uc(m,w){var E=m[w-1+0],N=m[w-1+32],B=m[w-1+64],F=m[w-1-32],j=m[w+0-32],$=m[w+1-32],X=m[w+2-32],nt=m[w+3-32];m[w+0+0]=m[w+1+64]=F+j+1>>1,m[w+1+0]=m[w+2+64]=j+$+1>>1,m[w+2+0]=m[w+3+64]=$+X+1>>1,m[w+3+0]=X+nt+1>>1,m[w+0+96]=Ce(B,N,E),m[w+0+64]=Ce(N,E,F),m[w+0+32]=m[w+1+96]=Ce(E,F,j),m[w+1+32]=m[w+2+96]=Ce(F,j,$),m[w+2+32]=m[w+3+96]=Ce(j,$,X),m[w+3+32]=Ce($,X,nt)}function Lo(m,w){var E=m[w+0-32],N=m[w+1-32],B=m[w+2-32],F=m[w+3-32],j=m[w+4-32],$=m[w+5-32],X=m[w+6-32],nt=m[w+7-32];m[w+0+0]=E+N+1>>1,m[w+1+0]=m[w+0+64]=N+B+1>>1,m[w+2+0]=m[w+1+64]=B+F+1>>1,m[w+3+0]=m[w+2+64]=F+j+1>>1,m[w+0+32]=Ce(E,N,B),m[w+1+32]=m[w+0+96]=Ce(N,B,F),m[w+2+32]=m[w+1+96]=Ce(B,F,j),m[w+3+32]=m[w+2+96]=Ce(F,j,$),m[w+3+64]=Ce(j,$,X),m[w+3+96]=Ce($,X,nt)}function Us(m,w){var E=m[w-1+0],N=m[w-1+32],B=m[w-1+64],F=m[w-1+96];m[w+0+0]=E+N+1>>1,m[w+2+0]=m[w+0+32]=N+B+1>>1,m[w+2+32]=m[w+0+64]=B+F+1>>1,m[w+1+0]=Ce(E,N,B),m[w+3+0]=m[w+1+32]=Ce(N,B,F),m[w+3+32]=m[w+1+64]=Ce(B,F,F),m[w+3+64]=m[w+2+64]=m[w+0+96]=m[w+1+96]=m[w+2+96]=m[w+3+96]=F}function ko(m,w){var E=m[w-1+0],N=m[w-1+32],B=m[w-1+64],F=m[w-1+96],j=m[w-1-32],$=m[w+0-32],X=m[w+1-32],nt=m[w+2-32];m[w+0+0]=m[w+2+32]=E+j+1>>1,m[w+0+32]=m[w+2+64]=N+E+1>>1,m[w+0+64]=m[w+2+96]=B+N+1>>1,m[w+0+96]=F+B+1>>1,m[w+3+0]=Ce($,X,nt),m[w+2+0]=Ce(j,$,X),m[w+1+0]=m[w+3+32]=Ce(E,j,$),m[w+1+32]=m[w+3+64]=Ce(N,E,j),m[w+1+64]=m[w+3+96]=Ce(B,N,E),m[w+1+96]=Ce(F,B,N)}function Vr(m,w){var E;for(E=0;8>E;++E)n(m,w+32*E,m,w-32,8)}function eu(m,w){var E;for(E=0;8>E;++E)s(m,w,m[w-1],8),w+=32}function Ks(m,w,E){var N;for(N=0;8>N;++N)s(w,E+32*N,m,8)}function ll(m,w){var E,N=8;for(E=0;8>E;++E)N+=m[w+E-32]+m[w-1+32*E];Ks(N>>4,m,w)}function cl(m,w){var E,N=4;for(E=0;8>E;++E)N+=m[w+E-32];Ks(N>>3,m,w)}function Bi(m,w){var E,N=4;for(E=0;8>E;++E)N+=m[w-1+32*E];Ks(N>>3,m,w)}function $r(m,w){Ks(128,m,w)}function Zs(m,w,E){var N=m[w-E],B=m[w+0],F=3*(B-N)+Ma[1020+m[w-2*E]-m[w+E]],j=vc[112+(F+4>>3)];m[w-E]=ss[255+N+vc[112+(F+3>>3)]],m[w+0]=ss[255+B-j]}function ma(m,w,E,N){var B=m[w+0],F=m[w+E];return Yi[255+m[w-2*E]-m[w-E]]>N||Yi[255+F-B]>N}function ul(m,w,E,N){return 4*Yi[255+m[w-E]-m[w+0]]+Yi[255+m[w-2*E]-m[w+E]]<=N}function Ro(m,w,E,N,B){var F=m[w-3*E],j=m[w-2*E],$=m[w-E],X=m[w+0],nt=m[w+E],dt=m[w+2*E],Et=m[w+3*E];return 4*Yi[255+$-X]+Yi[255+j-nt]>N?0:Yi[255+m[w-4*E]-F]<=B&&Yi[255+F-j]<=B&&Yi[255+j-$]<=B&&Yi[255+Et-dt]<=B&&Yi[255+dt-nt]<=B&&Yi[255+nt-X]<=B}function ba(m,w,E,N){var B=2*N+1;for(N=0;16>N;++N)ul(m,w+N,E,B)&&Zs(m,w+N,E)}function ya(m,w,E,N){var B=2*N+1;for(N=0;16>N;++N)ul(m,w+N*E,1,B)&&Zs(m,w+N*E,1)}function Mo(m,w,E,N){var B;for(B=3;0<B;--B)ba(m,w+=4*E,E,N)}function hc(m,w,E,N){var B;for(B=3;0<B;--B)ya(m,w+=4,E,N)}function va(m,w,E,N,B,F,j,$){for(F=2*F+1;0<B--;){if(Ro(m,w,E,F,j))if(ma(m,w,E,$))Zs(m,w,E);else{var X=m,nt=w,dt=E,Et=X[nt-2*dt],tt=X[nt-dt],mt=X[nt+0],xt=X[nt+dt],Pt=X[nt+2*dt],At=27*(Ft=Ma[1020+3*(mt-tt)+Ma[1020+Et-xt]])+63>>7,Mt=18*Ft+63>>7,Ft=9*Ft+63>>7;X[nt-3*dt]=ss[255+X[nt-3*dt]+Ft],X[nt-2*dt]=ss[255+Et+Mt],X[nt-dt]=ss[255+tt+At],X[nt+0]=ss[255+mt-At],X[nt+dt]=ss[255+xt-Mt],X[nt+2*dt]=ss[255+Pt-Ft]}w+=N}}function wa(m,w,E,N,B,F,j,$){for(F=2*F+1;0<B--;){if(Ro(m,w,E,F,j))if(ma(m,w,E,$))Zs(m,w,E);else{var X=m,nt=w,dt=E,Et=X[nt-dt],tt=X[nt+0],mt=X[nt+dt],xt=vc[112+(4+(Pt=3*(tt-Et))>>3)],Pt=vc[112+(Pt+3>>3)],At=xt+1>>1;X[nt-2*dt]=ss[255+X[nt-2*dt]+At],X[nt-dt]=ss[255+Et+Pt],X[nt+0]=ss[255+tt-xt],X[nt+dt]=ss[255+mt-At]}w+=N}}function nu(m,w,E,N,B,F){va(m,w,E,1,16,N,B,F)}function xa(m,w,E,N,B,F){va(m,w,1,E,16,N,B,F)}function iu(m,w,E,N,B,F){var j;for(j=3;0<j;--j)wa(m,w+=4*E,E,1,16,N,B,F)}function _(m,w,E,N,B,F){var j;for(j=3;0<j;--j)wa(m,w+=4,1,E,16,N,B,F)}function O(m,w,E,N,B,F,j,$){va(m,w,B,1,8,F,j,$),va(E,N,B,1,8,F,j,$)}function it(m,w,E,N,B,F,j,$){va(m,w,1,B,8,F,j,$),va(E,N,1,B,8,F,j,$)}function ft(m,w,E,N,B,F,j,$){wa(m,w+4*B,B,1,8,F,j,$),wa(E,N+4*B,B,1,8,F,j,$)}function yt(m,w,E,N,B,F,j,$){wa(m,w+4,1,B,8,F,j,$),wa(E,N+4,1,B,8,F,j,$)}function It(){this.ba=new Ge,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ae(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function de(){this.ua=0,this.Wa=new qt,this.vb=new qt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new gt,this.yc=new rt}function Le(){this.xb=this.a=0,this.l=new pa,this.ca=new Ge,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new de,this.ab=0,this.gc=l(4,ae),this.Oc=0}function Ue(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function an(m,w,E,N,B,F,j){for(m=m==null?0:m[w+0],w=0;w<j;++w)B[F+w]=m+E[N+w]&255,m=B[F+w]}function Xn(m,w,E,N,B,F,j){var $;if(m==null)an(null,null,E,N,B,F,j);else for($=0;$<j;++$)B[F+$]=m[w+$]+E[N+$]&255}function li(m,w,E,N,B,F,j){if(m==null)an(null,null,E,N,B,F,j);else{var $,X=m[w+0],nt=X,dt=X;for($=0;$<j;++$)nt=dt+(X=m[w+$])-nt,dt=E[N+$]+(-256&nt?0>nt?0:255:nt)&255,nt=X,B[F+$]=dt}}function On(m,w,E,N){var B=w.width,F=w.o;if(t(m!=null&&w!=null),0>E||0>=N||E+N>F)return null;if(!m.Cc){if(m.ga==null){var j;if(m.ga=new Ue,(j=m.ga==null)||(j=w.width*w.o,t(m.Gb.length==0),m.Gb=a(j),m.Uc=0,m.Gb==null?j=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,j=1),j=!j),!j){j=m.ga;var $=m.Fa,X=m.P,nt=m.qc,dt=m.mb,Et=m.nb,tt=X+1,mt=nt-1,xt=j.l;if(t($!=null&&dt!=null&&w!=null),Da[0]=null,Da[1]=an,Da[2]=Xn,Da[3]=li,j.ca=dt,j.tb=Et,j.c=w.width,j.i=w.height,t(0<j.c&&0<j.i),1>=nt)w=0;else if(j.$a=3&$[X+0],j.Z=$[X+0]>>2&3,j.Lc=$[X+0]>>4&3,X=$[X+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||X)w=0;else if(xt.put=be,xt.ac=Xs,xt.bc=fa,xt.ma=j,xt.width=w.width,xt.height=w.height,xt.Da=w.Da,xt.v=w.v,xt.va=w.va,xt.j=w.j,xt.o=w.o,j.$a)t:{t(j.$a==1),w=Co();e:for(;;){if(w==null){w=0;break t}if(t(j!=null),j.mc=w,w.c=j.c,w.i=j.i,w.l=j.l,w.l.ma=j,w.l.width=j.c,w.l.height=j.i,w.a=0,wt(w.m,$,tt,mt),!vr(j.c,j.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Ln(w.s)?(j.ic=1,$=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a($),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(j.ic=0,w=wr(w,j.c)),!w))break e;w=1;break t}j.mc=null,w=0}else w=mt>=j.c*j.i;j=!w}if(j)return null;m.ga.Lc!=1?m.Ga=0:N=F-E}t(m.ga!=null),t(E+N<=F);t:{if(w=($=m.ga).c,F=$.l.o,$.$a==0){if(tt=m.rc,mt=m.Vc,xt=m.Fa,X=m.P+1+E*w,nt=m.mb,dt=m.nb+E*w,t(X<=m.P+m.qc),$.Z!=0)for(t(Da[$.Z]!=null),j=0;j<N;++j)Da[$.Z](tt,mt,xt,X,nt,dt,w),tt=nt,mt=dt,dt+=w,X+=w;else for(j=0;j<N;++j)n(nt,dt,xt,X,w),tt=nt,mt=dt,dt+=w,X+=w;m.rc=tt,m.Vc=mt}else{if(t($.mc!=null),w=E+N,t((j=$.mc)!=null),t(w<=j.i),j.C>=w)w=1;else if($.ic||Tr(),$.ic){$=j.V,tt=j.Ba,mt=j.c;var Pt=j.i,At=(xt=1,X=j.$/mt,nt=j.$%mt,dt=j.m,Et=j.s,j.$),Mt=mt*Pt,Ft=mt*w,$t=Et.wc,Ht=At<Ft?Oi(Et,nt,X):null;t(At<=Mt),t(w<=Pt),t(Ln(Et));e:for(;;){for(;!dt.h&&At<Ft;){if(nt&$t||(Ht=Oi(Et,nt,X)),t(Ht!=null),ht(dt),256>(Pt=$n(Ht.G[0],Ht.H[0],dt)))$[tt+At]=Pt,++At,++nt>=mt&&(nt=0,++X<=w&&!(X%16)&&ns(j,X));else{if(!(280>Pt)){xt=0;break e}Pt=Ps(Pt-256,dt);var le,te=$n(Ht.G[4],Ht.H[4],dt);if(ht(dt),!(At>=(te=Os(mt,te=Ps(te,dt)))&&Mt-At>=Pt)){xt=0;break e}for(le=0;le<Pt;++le)$[tt+At+le]=$[tt+At+le-te];for(At+=Pt,nt+=Pt;nt>=mt;)nt-=mt,++X<=w&&!(X%16)&&ns(j,X);At<Ft&&nt&$t&&(Ht=Oi(Et,nt,X))}t(dt.h==st(dt))}ns(j,X>w?w:X);break e}!xt||dt.h&&At<Mt?(xt=0,j.a=dt.h?5:3):j.$=At,w=xt}else w=Bs(j,j.V,j.Ba,j.c,j.i,w,Ya);if(!w){N=0;break t}}E+N>=F&&(m.Cc=1),N=1}if(!N)return null;if(m.Cc&&((N=m.ga)!=null&&(N.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+E*B}function Ni(m,w,E,N,B,F){for(;0<B--;){var j,$=m,X=w+(E?1:0),nt=m,dt=w+(E?0:3);for(j=0;j<N;++j){var Et=nt[dt+4*j];Et!=255&&(Et*=32897,$[X+4*j+0]=$[X+4*j+0]*Et>>23,$[X+4*j+1]=$[X+4*j+1]*Et>>23,$[X+4*j+2]=$[X+4*j+2]*Et>>23)}w+=F}}function yi(m,w,E,N,B){for(;0<N--;){var F;for(F=0;F<E;++F){var j=m[w+2*F+0],$=15&(nt=m[w+2*F+1]),X=4369*$,nt=(240&nt|nt>>4)*X>>16;m[w+2*F+0]=(240&j|j>>4)*X>>16&240|(15&j|j<<4)*X>>16>>4&15,m[w+2*F+1]=240&nt|$}w+=B}}function Vi(m,w,E,N,B,F,j,$){var X,nt,dt=255;for(nt=0;nt<B;++nt){for(X=0;X<N;++X){var Et=m[w+X];F[j+4*X]=Et,dt&=Et}w+=E,j+=$}return dt!=255}function Aa(m,w,E,N,B){var F;for(F=0;F<B;++F)E[N+F]=m[w+F]>>8}function Tr(){Bo=Ni,Qs=yi,mc=Vi,qs=Aa}function _a(m,w,E){H[m]=function(N,B,F,j,$,X,nt,dt,Et,tt,mt,xt,Pt,At,Mt,Ft,$t){var Ht,le=$t-1>>1,te=$[X+0]|nt[dt+0]<<16,Oe=Et[tt+0]|mt[xt+0]<<16;t(N!=null);var se=3*te+Oe+131074>>2;for(w(N[B+0],255&se,se>>16,Pt,At),F!=null&&(se=3*Oe+te+131074>>2,w(F[j+0],255&se,se>>16,Mt,Ft)),Ht=1;Ht<=le;++Ht){var Je=$[X+Ht]|nt[dt+Ht]<<16,qn=Et[tt+Ht]|mt[xt+Ht]<<16,ze=te+Je+Oe+qn+524296,ee=ze+2*(Je+Oe)>>3;se=ee+te>>1,te=(ze=ze+2*(te+qn)>>3)+Je>>1,w(N[B+2*Ht-1],255&se,se>>16,Pt,At+(2*Ht-1)*E),w(N[B+2*Ht-0],255&te,te>>16,Pt,At+(2*Ht-0)*E),F!=null&&(se=ze+Oe>>1,te=ee+qn>>1,w(F[j+2*Ht-1],255&se,se>>16,Mt,Ft+(2*Ht-1)*E),w(F[j+2*Ht+0],255&te,te>>16,Mt,Ft+(2*Ht+0)*E)),te=Je,Oe=qn}1&$t||(se=3*te+Oe+131074>>2,w(N[B+$t-1],255&se,se>>16,Pt,At+($t-1)*E),F!=null&&(se=3*Oe+te+131074>>2,w(F[j+$t-1],255&se,se>>16,Mt,Ft+($t-1)*E)))}}function fc(){Wi[ou]=jo,Wi[rs]=xl,Wi[lu]=mh,Wi[tr]=du,Wi[wc]=no,Wi[yl]=ea,Wi[Qa]=io,Wi[xc]=xl,Wi[cu]=du,Wi[vl]=no,Wi[uu]=ea}function hl(m){return m&-16384?0>m?0:255:m>>pu}function Yr(m,w){return hl((19077*m>>8)+(26149*w>>8)-14234)}function Nr(m,w,E){return hl((19077*m>>8)-(6419*w>>8)-(13320*E>>8)+8708)}function Do(m,w){return hl((19077*m>>8)+(33050*w>>8)-17685)}function Sa(m,w,E,N,B){N[B+0]=Yr(m,E),N[B+1]=Nr(m,w,E),N[B+2]=Do(m,w)}function Ii(m,w,E,N,B){N[B+0]=Do(m,w),N[B+1]=Nr(m,w,E),N[B+2]=Yr(m,E)}function Ka(m,w,E,N,B){var F=Nr(m,w,E);w=F<<3&224|Do(m,w)>>3,N[B+0]=248&Yr(m,E)|F>>5,N[B+1]=w}function Za(m,w,E,N,B){var F=240&Do(m,w)|15;N[B+0]=240&Yr(m,E)|Nr(m,w,E)>>4,N[B+1]=F}function fl(m,w,E,N,B){N[B+0]=255,Sa(m,w,E,N,B+1)}function Xr(m,w,E,N,B){Ii(m,w,E,N,B),N[B+3]=255}function gs(m,w,E,N,B){Sa(m,w,E,N,B),N[B+3]=255}function Ca(m,w,E){H[m]=function(N,B,F,j,$,X,nt,dt,Et){for(var tt=dt+(-2&Et)*E;dt!=tt;)w(N[B+0],F[j+0],$[X+0],nt,dt),w(N[B+1],F[j+0],$[X+0],nt,dt+E),B+=2,++j,++X,dt+=2*E;1&Et&&w(N[B+0],F[j+0],$[X+0],nt,dt)}}function dl(m,w,E){return E==0?m==0?w==0?6:5:w==0?4:0:E}function dc(m,w,E,N,B){switch(m>>>30){case 3:Ra(w,E,N,B,0);break;case 2:is(w,E,N,B);break;case 1:pn(w,E,N,B)}}function zs(m,w){var E,N,B=w.M,F=w.Nb,j=m.oc,$=m.pc+40,X=m.oc,nt=m.pc+584,dt=m.oc,Et=m.pc+600;for(E=0;16>E;++E)j[$+32*E-1]=129;for(E=0;8>E;++E)X[nt+32*E-1]=129,dt[Et+32*E-1]=129;for(0<B?j[$-1-32]=X[nt-1-32]=dt[Et-1-32]=129:(s(j,$-32-1,127,21),s(X,nt-32-1,127,9),s(dt,Et-32-1,127,9)),N=0;N<m.za;++N){var tt=w.ya[w.aa+N];if(0<N){for(E=-1;16>E;++E)n(j,$+32*E-4,j,$+32*E+12,4);for(E=-1;8>E;++E)n(X,nt+32*E-4,X,nt+32*E+4,4),n(dt,Et+32*E-4,dt,Et+32*E+4,4)}var mt=m.Gd,xt=m.Hd+N,Pt=tt.ad,At=tt.Hc;if(0<B&&(n(j,$-32,mt[xt].y,0,16),n(X,nt-32,mt[xt].f,0,8),n(dt,Et-32,mt[xt].ea,0,8)),tt.Za){var Mt=j,Ft=$-32+16;for(0<B&&(N>=m.za-1?s(Mt,Ft,mt[xt].y[15],4):n(Mt,Ft,mt[xt+1].y,0,4)),E=0;4>E;E++)Mt[Ft+128+E]=Mt[Ft+256+E]=Mt[Ft+384+E]=Mt[Ft+0+E];for(E=0;16>E;++E,At<<=2)Mt=j,Ft=$+hi[E],ti[tt.Ob[E]](Mt,Ft),dc(At,Pt,16*+E,Mt,Ft)}else if(Mt=dl(N,B,tt.Ob[0]),bs[Mt](j,$),At!=0)for(E=0;16>E;++E,At<<=2)dc(At,Pt,16*+E,j,$+hi[E]);for(E=tt.Gc,Mt=dl(N,B,tt.Dd),Mr[Mt](X,nt),Mr[Mt](dt,Et),At=Pt,Mt=X,Ft=nt,255&(tt=0|E)&&(170&tt?Js(At,256,Mt,Ft):on(At,256,Mt,Ft)),tt=dt,At=Et,255&(E>>=8)&&(170&E?Js(Pt,320,tt,At):on(Pt,320,tt,At)),B<m.Ub-1&&(n(mt[xt].y,0,j,$+480,16),n(mt[xt].f,0,X,nt+224,8),n(mt[xt].ea,0,dt,Et+224,8)),E=8*F*m.B,mt=m.sa,xt=m.ta+16*N+16*F*m.R,Pt=m.qa,tt=m.ra+8*N+E,At=m.Ha,Mt=m.Ia+8*N+E,E=0;16>E;++E)n(mt,xt+E*m.R,j,$+32*E,16);for(E=0;8>E;++E)n(Pt,tt+E*m.B,X,nt+32*E,8),n(At,Mt+E*m.B,dt,Et+32*E,8)}}function Lr(m,w,E,N,B,F,j,$,X){var nt=[0],dt=[0],Et=0,tt=X!=null?X.kd:0,mt=X??new Gt;if(m==null||12>E)return 7;mt.data=m,mt.w=w,mt.ha=E,w=[w],E=[E],mt.gb=[mt.gb];t:{var xt=w,Pt=E,At=mt.gb;if(t(m!=null),t(Pt!=null),t(At!=null),At[0]=0,12<=Pt[0]&&!e(m,xt[0],"RIFF")){if(e(m,xt[0]+8,"WEBP")){At=3;break t}var Mt=St(m,xt[0]+4);if(12>Mt||4294967286<Mt){At=3;break t}if(tt&&Mt>Pt[0]-8){At=7;break t}At[0]=Mt,xt[0]+=12,Pt[0]-=12}At=0}if(At!=0)return At;for(Mt=0<mt.gb[0],E=E[0];;){t:{var Ft=m;Pt=w,At=E;var $t=nt,Ht=dt,le=xt=[0];if((se=Et=[Et])[0]=0,8>At[0])At=7;else{if(!e(Ft,Pt[0],"VP8X")){if(St(Ft,Pt[0]+4)!=10){At=3;break t}if(18>At[0]){At=7;break t}var te=St(Ft,Pt[0]+8),Oe=1+Kt(Ft,Pt[0]+12);if(2147483648<=Oe*(Ft=1+Kt(Ft,Pt[0]+15))){At=3;break t}le!=null&&(le[0]=te),$t!=null&&($t[0]=Oe),Ht!=null&&(Ht[0]=Ft),Pt[0]+=18,At[0]-=18,se[0]=1}At=0}}if(Et=Et[0],xt=xt[0],At!=0)return At;if(Pt=!!(2&xt),!Mt&&Et)return 3;if(F!=null&&(F[0]=!!(16&xt)),j!=null&&(j[0]=Pt),$!=null&&($[0]=0),j=nt[0],xt=dt[0],Et&&Pt&&X==null){At=0;break}if(4>E){At=7;break}if(Mt&&Et||!Mt&&!Et&&!e(m,w[0],"ALPH")){E=[E],mt.na=[mt.na],mt.P=[mt.P],mt.Sa=[mt.Sa];t:{te=m,At=w,Mt=E;var se=mt.gb;$t=mt.na,Ht=mt.P,le=mt.Sa,Oe=22,t(te!=null),t(Mt!=null),Ft=At[0];var Je=Mt[0];for(t($t!=null),t(le!=null),$t[0]=null,Ht[0]=null,le[0]=0;;){if(At[0]=Ft,Mt[0]=Je,8>Je){At=7;break t}var qn=St(te,Ft+4);if(4294967286<qn){At=3;break t}var ze=8+qn+1&-2;if(Oe+=ze,0<se&&Oe>se){At=3;break t}if(!e(te,Ft,"VP8 ")||!e(te,Ft,"VP8L")){At=0;break t}if(Je[0]<ze){At=7;break t}e(te,Ft,"ALPH")||($t[0]=te,Ht[0]=Ft+8,le[0]=qn),Ft+=ze,Je-=ze}}if(E=E[0],mt.na=mt.na[0],mt.P=mt.P[0],mt.Sa=mt.Sa[0],At!=0)break}E=[E],mt.Ja=[mt.Ja],mt.xa=[mt.xa];t:if(se=m,At=w,Mt=E,$t=mt.gb[0],Ht=mt.Ja,le=mt.xa,te=At[0],Ft=!e(se,te,"VP8 "),Oe=!e(se,te,"VP8L"),t(se!=null),t(Mt!=null),t(Ht!=null),t(le!=null),8>Mt[0])At=7;else{if(Ft||Oe){if(se=St(se,te+4),12<=$t&&se>$t-12){At=3;break t}if(tt&&se>Mt[0]-8){At=7;break t}Ht[0]=se,At[0]+=8,Mt[0]-=8,le[0]=Oe}else le[0]=5<=Mt[0]&&se[te+0]==47&&!(se[te+4]>>5),Ht[0]=Mt[0];At=0}if(E=E[0],mt.Ja=mt.Ja[0],mt.xa=mt.xa[0],w=w[0],At!=0)break;if(4294967286<mt.Ja)return 3;if($==null||Pt||($[0]=mt.xa?2:1),j=[j],xt=[xt],mt.xa){if(5>E){At=7;break}$=j,tt=xt,Pt=F,m==null||5>E?m=0:5<=E&&m[w+0]==47&&!(m[w+4]>>5)?(Mt=[0],se=[0],$t=[0],wt(Ht=new U,m,w,E),Hr(Ht,Mt,se,$t)?($!=null&&($[0]=Mt[0]),tt!=null&&(tt[0]=se[0]),Pt!=null&&(Pt[0]=$t[0]),m=1):m=0):m=0}else{if(10>E){At=7;break}$=xt,m==null||10>E||!nc(m,w+3,E-3)?m=0:(tt=m[w+0]|m[w+1]<<8|m[w+2]<<16,Pt=16383&(m[w+7]<<8|m[w+6]),m=16383&(m[w+9]<<8|m[w+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=mt.Ja||!Pt||!m?m=0:(j&&(j[0]=Pt),$&&($[0]=m),m=1))}if(!m||(j=j[0],xt=xt[0],Et&&(nt[0]!=j||dt[0]!=xt)))return 3;X!=null&&(X[0]=mt,X.offset=w-X.w,t(4294967286>w-X.w),t(X.offset==X.ha-E));break}return At==0||At==7&&Et&&X==null?(F!=null&&(F[0]|=mt.na!=null&&0<mt.na.length),N!=null&&(N[0]=j),B!=null&&(B[0]=xt),0):At}function Ea(m,w,E){var N=w.width,B=w.height,F=0,j=0,$=N,X=B;if(w.Da=m!=null&&0<m.Da,w.Da&&($=m.cd,X=m.bd,F=m.v,j=m.j,11>E||(F&=-2,j&=-2),0>F||0>j||0>=$||0>=X||F+$>N||j+X>B))return 0;if(w.v=F,w.j=j,w.va=F+$,w.o=j+X,w.U=$,w.T=X,w.da=m!=null&&0<m.da,w.da){if(!Yt($,X,E=[m.ib],F=[m.hb]))return 0;w.ib=E[0],w.hb=F[0]}return w.ob=m!=null&&m.ob,w.Kb=m==null||!m.Sd,w.da&&(w.ob=w.ib<3*N/4&&w.hb<3*B/4,w.Kb=0),1}function pc(m){if(m==null)return 2;if(11>m.S){var w=m.f.RGBA;w.fb+=(m.height-1)*w.A,w.A=-w.A}else w=m.f.kb,m=m.height,w.O+=(m-1)*w.fa,w.fa=-w.fa,w.N+=(m-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(m-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(m-1)*w.lb,w.lb=-w.lb);return 0}function kr(m,w,E,N){if(N==null||0>=m||0>=w)return 2;if(E!=null){if(E.Da){var B=E.cd,F=E.bd,j=-2&E.v,$=-2&E.j;if(0>j||0>$||0>=B||0>=F||j+B>m||$+F>w)return 2;m=B,w=F}if(E.da){if(!Yt(m,w,B=[E.ib],F=[E.hb]))return 2;m=B[0],w=F[0]}}N.width=m,N.height=w;t:{var X=N.width,nt=N.height;if(m=N.S,0>=X||0>=nt||!(m>=ou&&13>m))m=2;else{if(0>=N.Rd&&N.sd==null){j=F=B=w=0;var dt=($=X*mu[m])*nt;if(11>m||(F=(nt+1)/2*(w=(X+1)/2),m==12&&(j=(B=X)*nt)),(nt=a(dt+2*F+j))==null){m=1;break t}N.sd=nt,11>m?((X=N.f.RGBA).eb=nt,X.fb=0,X.A=$,X.size=dt):((X=N.f.kb).y=nt,X.O=0,X.fa=$,X.Fd=dt,X.f=nt,X.N=0+dt,X.Ab=w,X.Cd=F,X.ea=nt,X.W=0+dt+F,X.Db=w,X.Ed=F,m==12&&(X.F=nt,X.J=0+dt+2*F),X.Tc=j,X.lb=B)}if(w=1,B=N.S,F=N.width,j=N.height,B>=ou&&13>B)if(11>B)m=N.f.RGBA,w&=($=Math.abs(m.A))*(j-1)+F<=m.size,w&=$>=F*mu[B],w&=m.eb!=null;else{m=N.f.kb,$=(F+1)/2,dt=(j+1)/2,X=Math.abs(m.fa),nt=Math.abs(m.Ab);var Et=Math.abs(m.Db),tt=Math.abs(m.lb),mt=tt*(j-1)+F;w&=X*(j-1)+F<=m.Fd,w&=nt*(dt-1)+$<=m.Cd,w=(w&=Et*(dt-1)+$<=m.Ed)&X>=F&nt>=$&Et>=$,w&=m.y!=null,w&=m.f!=null,w&=m.ea!=null,B==12&&(w&=tt>=F,w&=mt<=m.Tc,w&=m.F!=null)}else w=0;m=w?0:2}}return m!=0||E!=null&&E.fd&&(m=pc(N)),m}var Ja=64,Cs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ms=24,Wr=32,Kr=8,Ta=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Xt("Predictor0","PredictorAdd0"),H.Predictor0=function(){return 4278190080},H.Predictor1=function(m){return m},H.Predictor2=function(m,w,E){return w[E+0]},H.Predictor3=function(m,w,E){return w[E+1]},H.Predictor4=function(m,w,E){return w[E-1]},H.Predictor5=function(m,w,E){return ie(ie(m,w[E+1]),w[E+0])},H.Predictor6=function(m,w,E){return ie(m,w[E-1])},H.Predictor7=function(m,w,E){return ie(m,w[E+0])},H.Predictor8=function(m,w,E){return ie(w[E-1],w[E+0])},H.Predictor9=function(m,w,E){return ie(w[E+0],w[E+1])},H.Predictor10=function(m,w,E){return ie(ie(m,w[E-1]),ie(w[E+0],w[E+1]))},H.Predictor11=function(m,w,E){var N=w[E+0];return 0>=Pe(N>>24&255,m>>24&255,(w=w[E-1])>>24&255)+Pe(N>>16&255,m>>16&255,w>>16&255)+Pe(N>>8&255,m>>8&255,w>>8&255)+Pe(255&N,255&m,255&w)?N:m},H.Predictor12=function(m,w,E){var N=w[E+0];return(Se((m>>24&255)+(N>>24&255)-((w=w[E-1])>>24&255))<<24|Se((m>>16&255)+(N>>16&255)-(w>>16&255))<<16|Se((m>>8&255)+(N>>8&255)-(w>>8&255))<<8|Se((255&m)+(255&N)-(255&w)))>>>0},H.Predictor13=function(m,w,E){var N=w[E-1];return(Xe((m=ie(m,w[E+0]))>>24&255,N>>24&255)<<24|Xe(m>>16&255,N>>16&255)<<16|Xe(m>>8&255,N>>8&255)<<8|Xe(255&m,255&N))>>>0};var pl=H.PredictorAdd0;H.PredictorAdd1=We,Xt("Predictor2","PredictorAdd2"),Xt("Predictor3","PredictorAdd3"),Xt("Predictor4","PredictorAdd4"),Xt("Predictor5","PredictorAdd5"),Xt("Predictor6","PredictorAdd6"),Xt("Predictor7","PredictorAdd7"),Xt("Predictor8","PredictorAdd8"),Xt("Predictor9","PredictorAdd9"),Xt("Predictor10","PredictorAdd10"),Xt("Predictor11","PredictorAdd11"),Xt("Predictor12","PredictorAdd12"),Xt("Predictor13","PredictorAdd13");var gl=H.PredictorAdd2;he("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),he("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var ci,su=H.ColorIndexInverseTransform,Zr=H.MapARGB,Jr=H.VP8LColorIndexInverseTransformAlpha,$i=H.MapAlpha,Na=H.VP8LPredictorsAdd=[];Na.length=16,(H.VP8LPredictors=[]).length=16,(H.VP8LPredictorsAdd_C=[]).length=16,(H.VP8LPredictors_C=[]).length=16;var ml,bl,La,ka,Qr,Po,Hs,Ra,is,Js,pn,on,Bn,ui,ta,Rr,Oo,gc,hh,Lf,kf,Rf,fh,dh,Bo,Qs,mc,qs,Io=a(511),ru=a(2041),bc=a(225),yc=a(767),au=0,Ma=ru,vc=bc,ss=yc,Yi=Io,ou=0,rs=1,lu=2,tr=3,wc=4,yl=5,Qa=6,xc=7,cu=8,vl=9,uu=10,er=[2,3,7],wl=[3,3,11],Fo=[280,256,256,256,40],hu=[0,1,1,1,0],Ac=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],nr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ir=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],to=8,sr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Gs=null,Mf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ph=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],fu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Df=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Xi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Hn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Qe=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],bs=[],ti=[],Mr=[],eo=1,gh=2,Da=[],Wi=[];_a("UpsampleRgbLinePair",Sa,3),_a("UpsampleBgrLinePair",Ii,3),_a("UpsampleRgbaLinePair",gs,4),_a("UpsampleBgraLinePair",Xr,4),_a("UpsampleArgbLinePair",fl,4),_a("UpsampleRgba4444LinePair",Za,2),_a("UpsampleRgb565LinePair",Ka,2);var jo=H.UpsampleRgbLinePair,mh=H.UpsampleBgrLinePair,xl=H.UpsampleRgbaLinePair,du=H.UpsampleBgraLinePair,no=H.UpsampleArgbLinePair,ea=H.UpsampleRgba4444LinePair,io=H.UpsampleRgb565LinePair,ar=16,Al=1<<ar-1,Uo=-227,so=482,pu=6,ro=0,Ki=a(256),gu=a(256),Pf=a(256),Mp=a(256),Dp=a(so-Uo),Pp=a(so-Uo);Ca("YuvToRgbRow",Sa,3),Ca("YuvToBgrRow",Ii,3),Ca("YuvToRgbaRow",gs,4),Ca("YuvToBgraRow",Xr,4),Ca("YuvToArgbRow",fl,4),Ca("YuvToRgba4444Row",Za,2),Ca("YuvToRgb565Row",Ka,2);var hi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_l=[0,2,8],_c=[8,7,6,4,4,2,2,2,1,1,1,1],Sc=1;this.WebPDecodeRGBA=function(m,w,E,N,B){var F=rs,j=new It,$=new Ge;j.ba=$,$.S=F,$.width=[$.width],$.height=[$.height];var X=$.width,nt=$.height,dt=new ge;if(dt==null||m==null)var Et=2;else t(dt!=null),Et=Lr(m,w,E,dt.width,dt.height,dt.Pd,dt.Qd,dt.format,null);if(Et!=0?X=0:(X!=null&&(X[0]=dt.width[0]),nt!=null&&(nt[0]=dt.height[0]),X=1),X){$.width=$.width[0],$.height=$.height[0],N!=null&&(N[0]=$.width),B!=null&&(B[0]=$.height);t:{if(N=new pa,(B=new Gt).data=m,B.w=w,B.ha=E,B.kd=1,w=[0],t(B!=null),((m=Lr(B.data,B.w,B.ha,null,null,null,w,null,B))==0||m==7)&&w[0]&&(m=4),(w=m)==0){if(t(j!=null),N.data=B.data,N.w=B.w+B.offset,N.ha=B.ha-B.offset,N.put=be,N.ac=Xs,N.bc=fa,N.ma=j,B.xa){if((m=Co())==null){j=1;break t}if((function(tt,mt){var xt=[0],Pt=[0],At=[0];e:for(;;){if(tt==null)return 0;if(mt==null)return tt.a=2,0;if(tt.l=mt,tt.a=0,wt(tt.m,mt.data,mt.w,mt.ha),!Hr(tt.m,xt,Pt,At)){tt.a=3;break e}if(tt.xb=gh,mt.width=xt[0],mt.height=Pt[0],!vr(xt[0],Pt[0],1,tt,null))break e;return 1}return t(tt.a!=0),0})(m,N)){if(N=(w=kr(N.width,N.height,j.Oa,j.ba))==0){e:{N=m;n:for(;;){if(N==null){N=0;break e}if(t(N.s.yc!=null),t(N.s.Ya!=null),t(0<N.s.Wb),t((E=N.l)!=null),t((B=E.ma)!=null),N.xb!=0){if(N.ca=B.ba,N.tb=B.tb,t(N.ca!=null),!Ea(B.Oa,E,tr)){N.a=2;break n}if(!wr(N,E.width)||E.da)break n;if((E.da||Te(N.ca.S))&&Tr(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&Tr()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!I(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!Bs(N,N.V,N.Ba,N.c,N.i,E.o,fs))break n;B.Dc=N.Ma,N=1;break e}t(N.a!=0),N=0}N=!N}N&&(w=m.a)}else w=m.a}else{if((m=new Sr)==null){j=1;break t}if(m.Fa=B.na,m.P=B.P,m.qc=B.Sa,Gr(m,N)){if((w=kr(N.width,N.height,j.Oa,j.ba))==0){if(m.Aa=0,E=j.Oa,t((B=m)!=null),E!=null){if(0<(X=0>(X=E.Md)?0:100<X?255:255*X/100)){for(nt=dt=0;4>nt;++nt)12>(Et=B.pb[nt]).lc&&(Et.ia=X*_c[0>Et.lc?0:Et.lc]>>3),dt|=Et.ia;dt&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=E.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}(function(tt,mt){if(tt==null)return 0;if(mt==null)return dn(tt,2,"NULL VP8Io parameter in VP8Decode().");if(!tt.cb&&!Gr(tt,mt))return 0;if(t(tt.cb),mt.ac==null||mt.ac(mt)){mt.ob&&(tt.L=0);var xt=_l[tt.L];if(tt.L==2?(tt.yb=0,tt.zb=0):(tt.yb=mt.v-xt>>4,tt.zb=mt.j-xt>>4,0>tt.yb&&(tt.yb=0),0>tt.zb&&(tt.zb=0)),tt.Va=mt.o+15+xt>>4,tt.Hb=mt.va+15+xt>>4,tt.Hb>tt.za&&(tt.Hb=tt.za),tt.Va>tt.Ub&&(tt.Va=tt.Ub),0<tt.L){var Pt=tt.ed;for(xt=0;4>xt;++xt){var At;if(tt.Qa.Cb){var Mt=tt.Qa.Lb[xt];tt.Qa.Fb||(Mt+=Pt.Tb)}else Mt=Pt.Tb;for(At=0;1>=At;++At){var Ft=tt.gd[xt][At],$t=Mt;if(Pt.Pc&&($t+=Pt.vd[0],At&&($t+=Pt.od[0])),0<($t=0>$t?0:63<$t?63:$t)){var Ht=$t;0<Pt.wb&&(Ht=4<Pt.wb?Ht>>2:Ht>>1)>9-Pt.wb&&(Ht=9-Pt.wb),1>Ht&&(Ht=1),Ft.dd=Ht,Ft.tc=2*$t+Ht,Ft.ld=40<=$t?2:15<=$t?1:0}else Ft.tc=0;Ft.La=At}}}xt=0}else dn(tt,6,"Frame setup failed"),xt=tt.a;if(xt=xt==0){if(xt){tt.$c=0,0<tt.Aa||(tt.Ic=Sc);e:{xt=tt.Ic,Pt=4*(Ht=tt.za);var le=32*Ht,te=Ht+1,Oe=0<tt.L?Ht*(0<tt.Aa?2:1):0,se=(tt.Aa==2?2:1)*Ht;if((Ft=Pt+832+(At=3*(16*xt+_l[tt.L])/2*le)+(Mt=tt.Fa!=null&&0<tt.Fa.length?tt.Kc.c*tt.Kc.i:0))!=Ft)xt=0;else{if(Ft>tt.Vb){if(tt.Vb=0,tt.Ec=a(Ft),tt.Fc=0,tt.Ec==null){xt=dn(tt,1,"no memory during frame initialization.");break e}tt.Vb=Ft}Ft=tt.Ec,$t=tt.Fc,tt.Ac=Ft,tt.Bc=$t,$t+=Pt,tt.Gd=l(le,ec),tt.Hd=0,tt.rb=l(te+1,_r),tt.sb=1,tt.wa=Oe?l(Oe,Is):null,tt.Y=0,tt.D.Nb=0,tt.D.wa=tt.wa,tt.D.Y=tt.Y,0<tt.Aa&&(tt.D.Y+=Ht),t(!0),tt.oc=Ft,tt.pc=$t,$t+=832,tt.ya=l(se,Ql),tt.aa=0,tt.D.ya=tt.ya,tt.D.aa=tt.aa,tt.Aa==2&&(tt.D.aa+=Ht),tt.R=16*Ht,tt.B=8*Ht,Ht=(le=_l[tt.L])*tt.R,le=le/2*tt.B,tt.sa=Ft,tt.ta=$t+Ht,tt.qa=tt.sa,tt.ra=tt.ta+16*xt*tt.R+le,tt.Ha=tt.qa,tt.Ia=tt.ra+8*xt*tt.B+le,tt.$c=0,$t+=At,tt.mb=Mt?Ft:null,tt.nb=Mt?$t:null,t($t+Mt<=tt.Fc+tt.Vb),ic(tt),s(tt.Ac,tt.Bc,0,Pt),xt=1}}if(xt){if(mt.ka=0,mt.y=tt.sa,mt.O=tt.ta,mt.f=tt.qa,mt.N=tt.ra,mt.ea=tt.Ha,mt.Vd=tt.Ia,mt.fa=tt.R,mt.Rc=tt.B,mt.F=null,mt.J=0,!au){for(xt=-255;255>=xt;++xt)Io[255+xt]=0>xt?-xt:xt;for(xt=-1020;1020>=xt;++xt)ru[1020+xt]=-128>xt?-128:127<xt?127:xt;for(xt=-112;112>=xt;++xt)bc[112+xt]=-16>xt?-16:15<xt?15:xt;for(xt=-255;510>=xt;++xt)yc[255+xt]=0>xt?0:255<xt?255:xt;au=1}Hs=Cr,Ra=sc,Js=ps,pn=rc,on=ac,is=Wc,Bn=nu,ui=xa,ta=O,Rr=it,Oo=iu,gc=_,hh=ft,Lf=yt,kf=ba,Rf=ya,fh=Mo,dh=hc,ti[0]=tu,ti[1]=Kc,ti[2]=Qc,ti[3]=cc,ti[4]=js,ti[5]=uc,ti[6]=Gi,ti[7]=Lo,ti[8]=ko,ti[9]=Us,bs[0]=Er,bs[1]=oc,bs[2]=lc,bs[3]=Jc,bs[4]=ga,bs[5]=No,bs[6]=Wa,Mr[0]=ll,Mr[1]=Zc,Mr[2]=Vr,Mr[3]=eu,Mr[4]=Bi,Mr[5]=cl,Mr[6]=$r,xt=1}else xt=0}xt&&(xt=(function(Je,qn){for(Je.M=0;Je.M<Je.Va;++Je.M){var ze,ee=Je.Jc[Je.M&Je.Xb],Zt=Je.m,Wn=Je;for(ze=0;ze<Wn.za;++ze){var Ee=Zt,Ve=Wn,yn=Ve.Ac,Li=Ve.Bc+4*ze,Zi=Ve.zc,In=Ve.ya[Ve.aa+ze];if(Ve.Qa.Bb?In.$b=Dt(Ee,Ve.Pa.jb[0])?2+Dt(Ee,Ve.Pa.jb[2]):Dt(Ee,Ve.Pa.jb[1]):In.$b=0,Ve.kc&&(In.Ad=Dt(Ee,Ve.Bd)),In.Za=!Dt(Ee,145)+0,In.Za){var vi=In.Ob,as=0;for(Ve=0;4>Ve;++Ve){var wi,Ke=Zi[0+Ve];for(wi=0;4>wi;++wi){Ke=Xi[yn[Li+wi]][Ke];for(var un=fu[Dt(Ee,Ke[0])];0<un;)un=fu[2*un+Dt(Ee,Ke[un])];Ke=-un,yn[Li+wi]=Ke}n(vi,as,yn,Li,4),as+=4,Zi[0+Ve]=Ke}}else Ke=Dt(Ee,156)?Dt(Ee,128)?1:3:Dt(Ee,163)?2:0,In.Ob[0]=Ke,s(yn,Li,Ke,4),s(Zi,0,Ke,4);In.Dd=Dt(Ee,142)?Dt(Ee,114)?Dt(Ee,183)?1:3:2:0}if(Wn.m.Ka)return dn(Je,7,"Premature end-of-partition0 encountered.");for(;Je.ja<Je.za;++Je.ja){if(Wn=ee,Ee=(Zt=Je).rb[Zt.sb-1],yn=Zt.rb[Zt.sb+Zt.ja],ze=Zt.ya[Zt.aa+Zt.ja],Li=Zt.kc?ze.Ad:0)Ee.la=yn.la=0,ze.Za||(Ee.Na=yn.Na=0),ze.Hc=0,ze.Gc=0,ze.ia=0;else{var Kn,gn;if(Ee=yn,yn=Wn,Li=Zt.Pa.Xc,Zi=Zt.ya[Zt.aa+Zt.ja],In=Zt.pb[Zi.$b],Ve=Zi.ad,vi=0,as=Zt.rb[Zt.sb-1],Ke=wi=0,s(Ve,vi,0,384),Zi.Za)var ki=0,Zn=Li[3];else{un=a(16);var hn=Ee.Na+as.Na;if(hn=Gs(yn,Li[1],hn,In.Eb,0,un,0),Ee.Na=as.Na=(0<hn)+0,1<hn)Hs(un,0,Ve,vi);else{var fi=un[0]+3>>3;for(un=0;256>un;un+=16)Ve[vi+un]=fi}ki=1,Zn=Li[0]}var vn=15&Ee.la,xi=15&as.la;for(un=0;4>un;++un){var Ai=1&xi;for(fi=gn=0;4>fi;++fi)vn=vn>>1|(Ai=(hn=Gs(yn,Zn,hn=Ai+(1&vn),In.Sc,ki,Ve,vi))>ki)<<7,gn=gn<<2|(3<hn?3:1<hn?2:Ve[vi+0]!=0),vi+=16;vn>>=4,xi=xi>>1|Ai<<7,wi=(wi<<8|gn)>>>0}for(Zn=vn,ki=xi>>4,Kn=0;4>Kn;Kn+=2){for(gn=0,vn=Ee.la>>4+Kn,xi=as.la>>4+Kn,un=0;2>un;++un){for(Ai=1&xi,fi=0;2>fi;++fi)hn=Ai+(1&vn),vn=vn>>1|(Ai=0<(hn=Gs(yn,Li[2],hn,In.Qc,0,Ve,vi)))<<3,gn=gn<<2|(3<hn?3:1<hn?2:Ve[vi+0]!=0),vi+=16;vn>>=2,xi=xi>>1|Ai<<5}Ke|=gn<<4*Kn,Zn|=vn<<4<<Kn,ki|=(240&xi)<<Kn}Ee.la=Zn,as.la=ki,Zi.Hc=wi,Zi.Gc=Ke,Zi.ia=43690&Ke?0:In.ia,Li=!(wi|Ke)}if(0<Zt.L&&(Zt.wa[Zt.Y+Zt.ja]=Zt.gd[ze.$b][ze.Za],Zt.wa[Zt.Y+Zt.ja].La|=!Li),Wn.Ka)return dn(Je,7,"Premature end-of-file encountered.")}if(ic(Je),Zt=qn,Wn=1,ze=(ee=Je).D,Ee=0<ee.L&&ee.M>=ee.zb&&ee.M<=ee.Va,ee.Aa==0)e:{if(ze.M=ee.M,ze.uc=Ee,zs(ee,ze),Wn=1,ze=(gn=ee.D).Nb,Ee=(Ke=_l[ee.L])*ee.R,yn=Ke/2*ee.B,un=16*ze*ee.R,fi=8*ze*ee.B,Li=ee.sa,Zi=ee.ta-Ee+un,In=ee.qa,Ve=ee.ra-yn+fi,vi=ee.Ha,as=ee.Ia-yn+fi,xi=(vn=gn.M)==0,wi=vn>=ee.Va-1,ee.Aa==2&&zs(ee,gn),gn.uc)for(Ai=(hn=ee).D.M,t(hn.D.uc),gn=hn.yb;gn<hn.Hb;++gn){ki=gn,Zn=Ai;var kn=(ln=(_i=hn).D).Nb;Kn=_i.R;var ln=ln.wa[ln.Y+ki],os=_i.sa,ei=_i.ta+16*kn*Kn+16*ki,ye=ln.dd,xe=ln.tc;if(xe!=0)if(t(3<=xe),_i.L==1)0<ki&&Rf(os,ei,Kn,xe+4),ln.La&&dh(os,ei,Kn,xe),0<Zn&&kf(os,ei,Kn,xe+4),ln.La&&fh(os,ei,Kn,xe);else{var fn=_i.B,Es=_i.qa,or=_i.ra+8*kn*fn+8*ki,ys=_i.Ha,_i=_i.Ia+8*kn*fn+8*ki;kn=ln.ld,0<ki&&(ui(os,ei,Kn,xe+4,ye,kn),Rr(Es,or,ys,_i,fn,xe+4,ye,kn)),ln.La&&(gc(os,ei,Kn,xe,ye,kn),Lf(Es,or,ys,_i,fn,xe,ye,kn)),0<Zn&&(Bn(os,ei,Kn,xe+4,ye,kn),ta(Es,or,ys,_i,fn,xe+4,ye,kn)),ln.La&&(Oo(os,ei,Kn,xe,ye,kn),hh(Es,or,ys,_i,fn,xe,ye,kn))}}if(ee.ia&&alert("todo:DitherRow"),Zt.put!=null){if(gn=16*vn,vn=16*(vn+1),xi?(Zt.y=ee.sa,Zt.O=ee.ta+un,Zt.f=ee.qa,Zt.N=ee.ra+fi,Zt.ea=ee.Ha,Zt.W=ee.Ia+fi):(gn-=Ke,Zt.y=Li,Zt.O=Zi,Zt.f=In,Zt.N=Ve,Zt.ea=vi,Zt.W=as),wi||(vn-=Ke),vn>Zt.o&&(vn=Zt.o),Zt.F=null,Zt.J=null,ee.Fa!=null&&0<ee.Fa.length&&gn<vn&&(Zt.J=On(ee,Zt,gn,vn-gn),Zt.F=ee.mb,Zt.F==null&&Zt.F.length==0)){Wn=dn(ee,3,"Could not decode alpha data.");break e}gn<Zt.j&&(Ke=Zt.j-gn,gn=Zt.j,t(!(1&Ke)),Zt.O+=ee.R*Ke,Zt.N+=ee.B*(Ke>>1),Zt.W+=ee.B*(Ke>>1),Zt.F!=null&&(Zt.J+=Zt.width*Ke)),gn<vn&&(Zt.O+=Zt.v,Zt.N+=Zt.v>>1,Zt.W+=Zt.v>>1,Zt.F!=null&&(Zt.J+=Zt.v),Zt.ka=gn-Zt.j,Zt.U=Zt.va-Zt.v,Zt.T=vn-gn,Wn=Zt.put(Zt))}ze+1!=ee.Ic||wi||(n(ee.sa,ee.ta-Ee,Li,Zi+16*ee.R,Ee),n(ee.qa,ee.ra-yn,In,Ve+8*ee.B,yn),n(ee.Ha,ee.Ia-yn,vi,as+8*ee.B,yn))}if(!Wn)return dn(Je,6,"Output aborted.")}return 1})(tt,mt)),mt.bc!=null&&mt.bc(mt),xt&=1}return xt?(tt.cb=0,xt):0})(m,N)||(w=m.a)}}else w=m.a}w==0&&j.Oa!=null&&j.Oa.fd&&(w=pc(j.ba))}j=w}F=j!=0?null:11>F?$.f.RGBA.eb:$.f.kb.y}else F=null;return F};var mu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(H,lt){for(var P="",G=0;G<4;G++)P+=String.fromCharCode(H[lt++]);return P}function p(H,lt){return H[lt+0]|H[lt+1]<<8}function g(H,lt){return(H[lt+0]|H[lt+1]<<8|H[lt+2]<<16)>>>0}function v(H,lt){return(H[lt+0]|H[lt+1]<<8|H[lt+2]<<16|H[lt+3]<<24)>>>0}new h;var b=[0],C=[0],A=[],T=new h,S=r,R=(function(H,lt){var P={},G=0,rt=!1,Q=0,gt=0;if(P.frames=[],!(function(k,U){for(var W=0;W<4;W++)if(k[U+W]!="RIFF".charCodeAt(W))return!0;return!1})(H,lt)){for(v(H,lt+=4),lt+=8;lt<H.length;){var V=f(H,lt),et=v(H,lt+=4);lt+=4;var at=et+(1&et);switch(V){case"VP8 ":case"VP8L":P.frames[G]===void 0&&(P.frames[G]={}),(Y=P.frames[G]).src_off=rt?gt:lt-8,Y.src_size=Q+et+8,G++,rt&&(rt=!1,Q=0,gt=0);break;case"VP8X":(Y=P.header={}).feature_flags=H[lt];var wt=lt+4;Y.canvas_width=1+g(H,wt),wt+=3,Y.canvas_height=1+g(H,wt),wt+=3;break;case"ALPH":rt=!0,Q=at+8,gt=lt-8;break;case"ANIM":(Y=P.header).bgcolor=v(H,lt),wt=lt+4,Y.loop_count=p(H,wt),wt+=2;break;case"ANMF":var Rt,Y;(Y=P.frames[G]={}).offset_x=2*g(H,lt),lt+=3,Y.offset_y=2*g(H,lt),lt+=3,Y.width=1+g(H,lt),lt+=3,Y.height=1+g(H,lt),lt+=3,Y.duration=g(H,lt),lt+=3,Rt=H[lt++],Y.dispose=1&Rt,Y.blend=Rt>>1&1}V!="ANMF"&&(lt+=at)}return P}})(S,0);R.response=S,R.rgbaoutput=!0,R.dataurl=!1;var M=R.header?R.header:null,D=R.frames?R.frames:null;if(M){M.loop_counter=M.loop_count,b=[M.canvas_height],C=[M.canvas_width];for(var z=0;z<D.length&&D[z].blend!=0;z++);}var K=D[0],Z=T.WebPDecodeRGBA(S,K.src_off,K.src_size,C,b);K.rgba=Z,K.imgwidth=C[0],K.imgheight=b[0];for(var J=0;J<C[0]*b[0]*4;J++)A[J]=Z[J];return this.width=C,this.height=b,this.data=A,this}function V6(){var r,t=this.internal.__metadata__.metadata,e=unescape(encodeURIComponent(t));r=this.internal.__metadata__.rawXml?e:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+r.length+" >>"),this.internal.write("stream"),this.internal.write(r),this.internal.write("endstream"),this.internal.write("endobj")}function $6(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(r){var t,e,n,s,a,l,c,h,f,p=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new h,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new l,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new l,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var g=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=k;Object.defineProperty(this,"pdf",{get:function(){return U}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(I){W=!!I}});var st=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return st},set:function(I){st=!!I}});var ct=0;Object.defineProperty(this,"posX",{get:function(){return ct},set:function(I){isNaN(I)||(ct=I)}});var ht=0;Object.defineProperty(this,"posY",{get:function(){return ht},set:function(I){isNaN(I)||(ht=I)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(I){var jt;typeof I=="number"?jt=[I,I,I,I]:((jt=new Array(4))[0]=I[0],jt[1]=I.length>=2?I[1]:jt[0],jt[2]=I.length>=3?I[2]:jt[0],jt[3]=I.length>=4?I[3]:jt[1]),f.margin=jt}});var Ct=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ct},set:function(I){Ct=I}});var _t=0;Object.defineProperty(this,"lastBreak",{get:function(){return _t},set:function(I){_t=I}});var Dt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Dt},set:function(I){Dt=I}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(I){I instanceof p&&(f=I)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(I){f.path=I}});var Vt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Vt},set:function(I){Vt=I}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(I){var jt;jt=v(I),this.ctx.fillStyle=jt.style,this.ctx.isFillTransparent=jt.a===0,this.ctx.fillOpacity=jt.a,this.pdf.setFillColor(jt.r,jt.g,jt.b,{a:jt.a}),this.pdf.setTextColor(jt.r,jt.g,jt.b,{a:jt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(I){var jt=v(I);this.ctx.strokeStyle=jt.style,this.ctx.isStrokeTransparent=jt.a===0,this.ctx.strokeOpacity=jt.a,jt.a===0?this.pdf.setDrawColor(255,255,255):(jt.a,this.pdf.setDrawColor(jt.r,jt.g,jt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(I){["butt","round","square"].indexOf(I)!==-1&&(this.ctx.lineCap=I,this.pdf.setLineCap(I))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(I){isNaN(I)||(this.ctx.lineWidth=I,this.pdf.setLineWidth(I))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(I){["bevel","round","miter"].indexOf(I)!==-1&&(this.ctx.lineJoin=I,this.pdf.setLineJoin(I))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(I){isNaN(I)||(this.ctx.miterLimit=I,this.pdf.setMiterLimit(I))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(I){this.ctx.textBaseline=I}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(I){["right","end","center","left","start"].indexOf(I)!==-1&&(this.ctx.textAlign=I)}});var Wt=null,Kt=null,St=null;Object.defineProperty(this,"fontFaces",{get:function(){return St},set:function(I){Wt=null,Kt=null,St=I}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(I){var jt;if(this.ctx.font=I,(jt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(I))!==null){var qt=jt[1];jt[2];var Yt=jt[3],Ot=jt[4];jt[5];var Jt=jt[6],Xt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ot)[2];Ot=Math.floor(Xt==="px"?parseFloat(Ot)*this.pdf.internal.scaleFactor:Xt==="em"?parseFloat(Ot)*this.pdf.getFontSize():parseFloat(Ot)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ot);var Qt=(function(he){var Tn,Re,ve=[],Me=he.trim();if(Me==="")return Em;if(Me in sv)return[sv[Me]];for(;Me!=="";){switch(Re=null,Tn=(Me=av(Me)).charAt(0)){case'"':case"'":Re=j6(Me.substring(1),Tn);break;default:Re=U6(Me)}if(Re===null||(ve.push(Re[0]),(Me=av(Re[1]))!==""&&Me.charAt(0)!==","))return Em;Me=Me.replace(/^,/,"")}return ve})(Jt);if(this.fontFaces){var ie=(function(he,Tn){var Re=he.getFontList(),ve=JSON.stringify(Re);if(Wt===null||Kt!==ve){var Me=(function(Ze){var we=[];return Object.keys(Ze).forEach(function(Pn){Ze[Pn].forEach(function(Te){var De=null;switch(Te){case"bold":De={family:Pn,weight:"bold"};break;case"italic":De={family:Pn,style:"italic"};break;case"bolditalic":De={family:Pn,weight:"bold",style:"italic"};break;case"":case"normal":De={family:Pn}}De!==null&&(De.ref={name:Pn,style:Te},we.push(De))})}),we})(Re);Wt=(function(Ze){for(var we={},Pn=0;Pn<Ze.length;++Pn){var Te=Cm(Ze[Pn]),De=Te.family,Nn=Te.stretch,Ge=Te.style,ge=Te.weight;we[De]=we[De]||{},we[De][Nn]=we[De][Nn]||{},we[De][Nn][Ge]=we[De][Nn][Ge]||{},we[De][Nn][Ge][ge]=Te}return we})(Me.concat(Tn)),Kt=ve}return Wt})(this.pdf,this.fontFaces),Se=Qt.map(function(he){return{family:he,stretch:"normal",weight:Yt,style:qt}}),Xe=(function(he,Tn,Re){for(var ve=(Re=Re||{}).defaultFontFamily||"times",Me=Object.assign({},F6,Re.genericFontFamilies||{}),Ze=null,we=null,Pn=0;Pn<Tn.length;++Pn)if(Me[(Ze=Cm(Tn[Pn])).family]&&(Ze.family=Me[Ze.family]),he.hasOwnProperty(Ze.family)){we=he[Ze.family];break}if(!(we=we||he[ve]))throw new Error("Could not find a font-family for the rule '"+rv(Ze)+"' and default family '"+ve+"'.");if(we=(function(Te,De){if(De[Te])return De[Te];var Nn=l0[Te],Ge=Nn<=l0.normal?-1:1,ge=iv(De,yw,Nn,Ge);if(!ge)throw new Error("Could not find a matching font-stretch value for "+Te);return ge})(Ze.stretch,we),we=(function(Te,De){if(De[Te])return De[Te];for(var Nn=bw[Te],Ge=0;Ge<Nn.length;++Ge)if(De[Nn[Ge]])return De[Nn[Ge]];throw new Error("Could not find a matching font-style for "+Te)})(Ze.style,we),!(we=(function(Te,De){if(De[Te])return De[Te];if(Te===400&&De[500])return De[500];if(Te===500&&De[400])return De[400];var Nn=I6[Te],Ge=iv(De,vw,Nn,Te<400?-1:1);if(!Ge)throw new Error("Could not find a matching font-weight for value "+Te);return Ge})(Ze.weight,we)))throw new Error("Failed to resolve a font for the rule '"+rv(Ze)+"'.");return we})(ie,Se);this.pdf.setFont(Xe.ref.name,Xe.ref.style)}else{var Pe="";(Yt==="bold"||parseInt(Yt,10)>=700||qt==="bold")&&(Pe="bold"),qt==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var We="",je={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ue=0;ue<Qt.length;ue++){if(this.pdf.internal.getFont(Qt[ue],Pe,{noFallback:!0,disableWarning:!0})!==void 0){We=Qt[ue];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(Qt[ue],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=Qt[ue],Pe="bold";else if(this.pdf.internal.getFont(Qt[ue],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=Qt[ue],Pe="normal";break}}if(We===""){for(var ke=0;ke<Qt.length;ke++)if(je[Qt[ke]]){We=je[Qt[ke]];break}}We=We===""?"Times":We,this.pdf.setFont(We,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(I){this.ctx.globalCompositeOperation=I}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(I){this.ctx.globalAlpha=I}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(I){this.ctx.lineDashOffset=I,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(I){this.ctx.lineDash=I,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(I){this.ctx.ignoreClearRect=!!I}})};g.prototype.setLineDash=function(k){this.lineDash=k},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){D.call(this,"fill",!1)},g.prototype.stroke=function(){D.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(k,U){if(isNaN(k)||isNaN(U))throw Vn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new l(k,U));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new l(k,U)},g.prototype.closePath=function(){var k=new l(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Dn(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){k=new l(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(k.x,k.y)},g.prototype.lineTo=function(k,U){if(isNaN(k)||isNaN(U))throw Vn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new l(k,U));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new l(W.x,W.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},g.prototype.quadraticCurveTo=function(k,U,W,st){if(isNaN(W)||isNaN(st)||isNaN(k)||isNaN(U))throw Vn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ct=this.ctx.transform.applyToPoint(new l(W,st)),ht=this.ctx.transform.applyToPoint(new l(k,U));this.path.push({type:"qct",x1:ht.x,y1:ht.y,x:ct.x,y:ct.y}),this.ctx.lastPoint=new l(ct.x,ct.y)},g.prototype.bezierCurveTo=function(k,U,W,st,ct,ht){if(isNaN(ct)||isNaN(ht)||isNaN(k)||isNaN(U)||isNaN(W)||isNaN(st))throw Vn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ct=this.ctx.transform.applyToPoint(new l(ct,ht)),_t=this.ctx.transform.applyToPoint(new l(k,U)),Dt=this.ctx.transform.applyToPoint(new l(W,st));this.path.push({type:"bct",x1:_t.x,y1:_t.y,x2:Dt.x,y2:Dt.y,x:Ct.x,y:Ct.y}),this.ctx.lastPoint=new l(Ct.x,Ct.y)},g.prototype.arc=function(k,U,W,st,ct,ht){if(isNaN(k)||isNaN(U)||isNaN(W)||isNaN(st)||isNaN(ct))throw Vn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ht=!!ht,!this.ctx.transform.isIdentity){var Ct=this.ctx.transform.applyToPoint(new l(k,U));k=Ct.x,U=Ct.y;var _t=this.ctx.transform.applyToPoint(new l(0,W)),Dt=this.ctx.transform.applyToPoint(new l(0,0));W=Math.sqrt(Math.pow(_t.x-Dt.x,2)+Math.pow(_t.y-Dt.y,2))}Math.abs(ct-st)>=2*Math.PI&&(st=0,ct=2*Math.PI),this.path.push({type:"arc",x:k,y:U,radius:W,startAngle:st,endAngle:ct,counterclockwise:ht})},g.prototype.arcTo=function(k,U,W,st,ct){throw new Error("arcTo not implemented.")},g.prototype.rect=function(k,U,W,st){if(isNaN(k)||isNaN(U)||isNaN(W)||isNaN(st))throw Vn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,U),this.lineTo(k+W,U),this.lineTo(k+W,U+st),this.lineTo(k,U+st),this.lineTo(k,U),this.lineTo(k+W,U),this.lineTo(k,U)},g.prototype.fillRect=function(k,U,W,st){if(isNaN(k)||isNaN(U)||isNaN(W)||isNaN(st))throw Vn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var ct={};this.lineCap!=="butt"&&(ct.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ct.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,U,W,st),this.fill(),ct.hasOwnProperty("lineCap")&&(this.lineCap=ct.lineCap),ct.hasOwnProperty("lineJoin")&&(this.lineJoin=ct.lineJoin)}},g.prototype.strokeRect=function(k,U,W,st){if(isNaN(k)||isNaN(U)||isNaN(W)||isNaN(st))throw Vn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(k,U,W,st),this.stroke())},g.prototype.clearRect=function(k,U,W,st){if(isNaN(k)||isNaN(U)||isNaN(W)||isNaN(st))throw Vn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,U,W,st))},g.prototype.save=function(k){k=typeof k!="boolean"||k;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var st=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=st}},g.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(U),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(k){var U,W,st,ct;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))U=0,W=0,st=0,ct=0;else{var ht=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(ht!==null)U=parseInt(ht[1]),W=parseInt(ht[2]),st=parseInt(ht[3]),ct=1;else if((ht=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)U=parseInt(ht[1]),W=parseInt(ht[2]),st=parseInt(ht[3]),ct=parseFloat(ht[4]);else{if(ct=1,typeof k=="string"&&k.charAt(0)!=="#"){var Ct=new uw(k);k=Ct.ok?Ct.toHex():"#000000"}k.length===4?(U=k.substring(1,2),U+=U,W=k.substring(2,3),W+=W,st=k.substring(3,4),st+=st):(U=k.substring(1,3),W=k.substring(3,5),st=k.substring(5,7)),U=parseInt(U,16),W=parseInt(W,16),st=parseInt(st,16)}}return{r:U,g:W,b:st,a:ct,style:k}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(k,U,W,st){if(isNaN(U)||isNaN(W)||typeof k!="string")throw Vn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(st=isNaN(st)?void 0:st,!b.call(this)){var ct=at(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;G.call(this,{text:k,x:U,y:W,scale:ht,angle:ct,align:this.textAlign,maxWidth:st})}},g.prototype.strokeText=function(k,U,W,st){if(isNaN(U)||isNaN(W)||typeof k!="string")throw Vn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){st=isNaN(st)?void 0:st;var ct=at(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;G.call(this,{text:k,x:U,y:W,scale:ht,renderingMode:"stroke",angle:ct,align:this.textAlign,maxWidth:st})}},g.prototype.measureText=function(k){if(typeof k!="string")throw Vn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,W=this.pdf.internal.scaleFactor,st=U.internal.getFontSize(),ct=U.getStringUnitWidth(k)*st/U.internal.scaleFactor;return new function(ht){var Ct=(ht=ht||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ct}}),this}({width:ct*=Math.round(96*W/72*1e4)/1e4})},g.prototype.scale=function(k,U){if(isNaN(k)||isNaN(U))throw Vn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new h(k,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.rotate=function(k){if(isNaN(k))throw Vn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new h(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},g.prototype.translate=function(k,U){if(isNaN(k)||isNaN(U))throw Vn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new h(1,0,0,1,k,U);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.transform=function(k,U,W,st,ct,ht){if(isNaN(k)||isNaN(U)||isNaN(W)||isNaN(st)||isNaN(ct)||isNaN(ht))throw Vn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ct=new h(k,U,W,st,ct,ht);this.ctx.transform=this.ctx.transform.multiply(Ct)},g.prototype.setTransform=function(k,U,W,st,ct,ht){k=isNaN(k)?1:k,U=isNaN(U)?0:U,W=isNaN(W)?0:W,st=isNaN(st)?1:st,ct=isNaN(ct)?0:ct,ht=isNaN(ht)?0:ht,this.ctx.transform=new h(k,U,W,st,ct,ht)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(k,U,W,st,ct,ht,Ct,_t,Dt){var Vt=this.pdf.getImageProperties(k),Wt=1,Kt=1,St=1,I=1;st!==void 0&&_t!==void 0&&(St=_t/st,I=Dt/ct,Wt=Vt.width/st*_t/st,Kt=Vt.height/ct*Dt/ct),ht===void 0&&(ht=U,Ct=W,U=0,W=0),st!==void 0&&_t===void 0&&(_t=st,Dt=ct),st===void 0&&_t===void 0&&(_t=Vt.width,Dt=Vt.height);var jt=this.ctx.transform.decompose(),qt=at(jt.rotate.shx),Yt=new h,Ot=(Yt=(Yt=(Yt=Yt.multiply(jt.translate)).multiply(jt.skew)).multiply(jt.scale)).applyToRectangle(new c(ht-U*St,Ct-W*I,st*Wt,ct*Kt));if(this.autoPaging){for(var Jt,Xt=T.call(this,Ot),Qt=[],ie=0;ie<Xt.length;ie+=1)Qt.indexOf(Xt[ie])===-1&&Qt.push(Xt[ie]);M(Qt);for(var Se=Qt[0],Xe=Qt[Qt.length-1],Pe=Se;Pe<Xe+1;Pe++){this.pdf.setPage(Pe);var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],je=Pe===1?this.posY+this.margin[0]:this.margin[0],ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],he=Pe===1?0:ue+(Pe-2)*ke;if(this.ctx.clip_path.length!==0){var Tn=this.path;Jt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Jt,this.posX+this.margin[3],-he+je+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=Tn}var Re=JSON.parse(JSON.stringify(Ot));Re=R([Re],this.posX+this.margin[3],-he+je+this.ctx.prevPageLastElemOffset)[0];var ve=(Pe>Se||Pe<Xe)&&A.call(this);ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,ke,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,qt),ve&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",Ot.x,Ot.y,Ot.w,Ot.h,null,null,qt)};var T=function(k,U,W){var st=[];U=U||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ct=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":st.push(Math.floor((k.y+ct)/W)+1);break;case"arc":st.push(Math.floor((k.y+ct-k.radius)/W)+1),st.push(Math.floor((k.y+ct+k.radius)/W)+1);break;case"qct":var ht=wt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);st.push(Math.floor((ht.y+ct)/W)+1),st.push(Math.floor((ht.y+ht.h+ct)/W)+1);break;case"bct":var Ct=Rt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);st.push(Math.floor((Ct.y+ct)/W)+1),st.push(Math.floor((Ct.y+Ct.h+ct)/W)+1);break;case"rect":st.push(Math.floor((k.y+ct)/W)+1),st.push(Math.floor((k.y+k.h+ct)/W)+1)}for(var _t=0;_t<st.length;_t+=1)for(;this.pdf.internal.getNumberOfPages()<st[_t];)S.call(this);return st},S=function(){var k=this.fillStyle,U=this.strokeStyle,W=this.font,st=this.lineCap,ct=this.lineWidth,ht=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=U,this.font=W,this.lineCap=st,this.lineWidth=ct,this.lineJoin=ht},R=function(k,U,W){for(var st=0;st<k.length;st++)switch(k[st].type){case"bct":k[st].x2+=U,k[st].y2+=W;case"qct":k[st].x1+=U,k[st].y1+=W;default:k[st].x+=U,k[st].y+=W}return k},M=function(k){return k.sort(function(U,W){return U-W})},D=function(k,U){var W=this.fillStyle,st=this.strokeStyle,ct=this.lineCap,ht=this.lineWidth,Ct=Math.abs(ht*this.ctx.transform.scaleX),_t=this.lineJoin;if(this.autoPaging){for(var Dt,Vt,Wt=JSON.parse(JSON.stringify(this.path)),Kt=JSON.parse(JSON.stringify(this.path)),St=[],I=0;I<Kt.length;I++)if(Kt[I].x!==void 0)for(var jt=T.call(this,Kt[I]),qt=0;qt<jt.length;qt+=1)St.indexOf(jt[qt])===-1&&St.push(jt[qt]);for(var Yt=0;Yt<St.length;Yt++)for(;this.pdf.internal.getNumberOfPages()<St[Yt];)S.call(this);M(St);for(var Ot=St[0],Jt=St[St.length-1],Xt=Ot;Xt<Jt+1;Xt++){this.pdf.setPage(Xt),this.fillStyle=W,this.strokeStyle=st,this.lineCap=ct,this.lineWidth=Ct,this.lineJoin=_t;var Qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ie=Xt===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pe=Xt===1?0:Se+(Xt-2)*Xe;if(this.ctx.clip_path.length!==0){var We=this.path;Dt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Dt,this.posX+this.margin[3],-Pe+ie+this.ctx.prevPageLastElemOffset),z.call(this,k,!0),this.path=We}if(Vt=JSON.parse(JSON.stringify(Wt)),this.path=R(Vt,this.posX+this.margin[3],-Pe+ie+this.ctx.prevPageLastElemOffset),U===!1||Xt===0){var je=(Xt>Ot||Xt<Jt)&&A.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,Xe,null).clip().discardPath()),z.call(this,k,U),je&&this.pdf.restoreGraphicsState()}this.lineWidth=ht}this.path=Wt}else this.lineWidth=Ct,z.call(this,k,U),this.lineWidth=ht},z=function(k,U){if((k!=="stroke"||U||!C.call(this))&&(k==="stroke"||U||!b.call(this))){for(var W,st,ct=[],ht=this.path,Ct=0;Ct<ht.length;Ct++){var _t=ht[Ct];switch(_t.type){case"begin":ct.push({begin:!0});break;case"close":ct.push({close:!0});break;case"mt":ct.push({start:_t,deltas:[],abs:[]});break;case"lt":var Dt=ct.length;if(ht[Ct-1]&&!isNaN(ht[Ct-1].x)&&(W=[_t.x-ht[Ct-1].x,_t.y-ht[Ct-1].y],Dt>0)){for(;Dt>=0;Dt--)if(ct[Dt-1].close!==!0&&ct[Dt-1].begin!==!0){ct[Dt-1].deltas.push(W),ct[Dt-1].abs.push(_t);break}}break;case"bct":W=[_t.x1-ht[Ct-1].x,_t.y1-ht[Ct-1].y,_t.x2-ht[Ct-1].x,_t.y2-ht[Ct-1].y,_t.x-ht[Ct-1].x,_t.y-ht[Ct-1].y],ct[ct.length-1].deltas.push(W);break;case"qct":var Vt=ht[Ct-1].x+2/3*(_t.x1-ht[Ct-1].x),Wt=ht[Ct-1].y+2/3*(_t.y1-ht[Ct-1].y),Kt=_t.x+2/3*(_t.x1-_t.x),St=_t.y+2/3*(_t.y1-_t.y),I=_t.x,jt=_t.y;W=[Vt-ht[Ct-1].x,Wt-ht[Ct-1].y,Kt-ht[Ct-1].x,St-ht[Ct-1].y,I-ht[Ct-1].x,jt-ht[Ct-1].y],ct[ct.length-1].deltas.push(W);break;case"arc":ct.push({deltas:[],abs:[],arc:!0}),Array.isArray(ct[ct.length-1].abs)&&ct[ct.length-1].abs.push(_t)}}st=U?null:k==="stroke"?"stroke":"fill";for(var qt=!1,Yt=0;Yt<ct.length;Yt++)if(ct[Yt].arc)for(var Ot=ct[Yt].abs,Jt=0;Jt<Ot.length;Jt++){var Xt=Ot[Jt];Xt.type==="arc"?J.call(this,Xt.x,Xt.y,Xt.radius,Xt.startAngle,Xt.endAngle,Xt.counterclockwise,void 0,U,!qt):rt.call(this,Xt.x,Xt.y),qt=!0}else if(ct[Yt].close===!0)this.pdf.internal.out("h"),qt=!1;else if(ct[Yt].begin!==!0){var Qt=ct[Yt].start.x,ie=ct[Yt].start.y;Q.call(this,ct[Yt].deltas,Qt,ie),qt=!0}st&&H.call(this,st),U&&lt.call(this)}},K=function(k){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-W;case"top":return k+U-W;case"hanging":return k+U-2*W;case"middle":return k+U/2-W;default:return k}},Z=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(U,W){this.colorStops.push([U,W])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(k,U,W,st,ct,ht,Ct,_t,Dt){for(var Vt=V.call(this,W,st,ct,ht),Wt=0;Wt<Vt.length;Wt++){var Kt=Vt[Wt];Wt===0&&(Dt?P.call(this,Kt.x1+k,Kt.y1+U):rt.call(this,Kt.x1+k,Kt.y1+U)),gt.call(this,k,U,Kt.x2,Kt.y2,Kt.x3,Kt.y3,Kt.x4,Kt.y4)}_t?lt.call(this):H.call(this,Ct)},H=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},lt=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(k,U){this.pdf.internal.out(e(k)+" "+n(U)+" m")},G=function(k){var U;switch(k.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var W,st,ct,ht=this.pdf.getTextDimensions(k.text),Ct=K.call(this,k.y),_t=Z.call(this,Ct)-ht.h,Dt=this.ctx.transform.applyToPoint(new l(k.x,Ct));if(this.autoPaging){var Vt=this.ctx.transform.decompose(),Wt=new h;Wt=(Wt=(Wt=Wt.multiply(Vt.translate)).multiply(Vt.skew)).multiply(Vt.scale);for(var Kt=this.ctx.transform.applyToRectangle(new c(k.x,Ct,ht.w,ht.h)),St=Wt.applyToRectangle(new c(k.x,_t,ht.w,ht.h)),I=T.call(this,St),jt=[],qt=0;qt<I.length;qt+=1)jt.indexOf(I[qt])===-1&&jt.push(I[qt]);M(jt);for(var Yt=jt[0],Ot=jt[jt.length-1],Jt=Yt;Jt<Ot+1;Jt++){this.pdf.setPage(Jt);var Xt=Jt===1?this.posY+this.margin[0]:this.margin[0],Qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[2],Se=ie-this.margin[0],Xe=this.pdf.internal.pageSize.width-this.margin[1],Pe=Xe-this.margin[3],We=Jt===1?0:Qt+(Jt-2)*Se;if(this.ctx.clip_path.length!==0){var je=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(W,this.posX+this.margin[3],-1*We+Xt),z.call(this,"fill",!0),this.path=je}var ue=R([JSON.parse(JSON.stringify(St))],this.posX+this.margin[3],-We+Xt+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(st=this.pdf.internal.getFontSize(),this.pdf.setFontSize(st*k.scale),ct=this.lineWidth,this.lineWidth=ct*k.scale);var ke=this.autoPaging!=="text";if(ke||ue.y+ue.h<=ie){if(ke||ue.y>=Xt&&ue.x<=Xe){var he=ke?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Xe-ue.x)[0],Tn=R([JSON.parse(JSON.stringify(Kt))],this.posX+this.margin[3],-We+Xt+this.ctx.prevPageLastElemOffset)[0],Re=ke&&(Jt>Yt||Jt<Ot)&&A.call(this);Re&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,Se,null).clip().discardPath()),this.pdf.text(he,Tn.x,Tn.y,{angle:k.angle,align:U,renderingMode:k.renderingMode}),Re&&this.pdf.restoreGraphicsState()}}else ue.y<ie&&(this.ctx.prevPageLastElemOffset+=ie-ue.y);k.scale>=.01&&(this.pdf.setFontSize(st),this.lineWidth=ct)}}else k.scale>=.01&&(st=this.pdf.internal.getFontSize(),this.pdf.setFontSize(st*k.scale),ct=this.lineWidth,this.lineWidth=ct*k.scale),this.pdf.text(k.text,Dt.x+this.posX,Dt.y+this.posY,{angle:k.angle,align:U,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(st),this.lineWidth=ct)},rt=function(k,U,W,st){W=W||0,st=st||0,this.pdf.internal.out(e(k+W)+" "+n(U+st)+" l")},Q=function(k,U,W){return this.pdf.lines(k,U,W,null,null)},gt=function(k,U,W,st,ct,ht,Ct,_t){this.pdf.internal.out([t(s(W+k)),t(a(st+U)),t(s(ct+k)),t(a(ht+U)),t(s(Ct+k)),t(a(_t+U)),"c"].join(" "))},V=function(k,U,W,st){for(var ct=2*Math.PI,ht=Math.PI/2;U>W;)U-=ct;var Ct=Math.abs(W-U);Ct<ct&&st&&(Ct=ct-Ct);for(var _t=[],Dt=st?-1:1,Vt=U;Ct>1e-5;){var Wt=Vt+Dt*Math.min(Ct,ht);_t.push(et.call(this,k,Vt,Wt)),Ct-=Math.abs(Wt-Vt),Vt=Wt}return _t},et=function(k,U,W){var st=(W-U)/2,ct=k*Math.cos(st),ht=k*Math.sin(st),Ct=ct,_t=-ht,Dt=Ct*Ct+_t*_t,Vt=Dt+Ct*ct+_t*ht,Wt=4/3*(Math.sqrt(2*Dt*Vt)-Vt)/(Ct*ht-_t*ct),Kt=Ct-Wt*_t,St=_t+Wt*Ct,I=Kt,jt=-St,qt=st+U,Yt=Math.cos(qt),Ot=Math.sin(qt);return{x1:k*Math.cos(U),y1:k*Math.sin(U),x2:Kt*Yt-St*Ot,y2:Kt*Ot+St*Yt,x3:I*Yt-jt*Ot,y3:I*Ot+jt*Yt,x4:k*Math.cos(W),y4:k*Math.sin(W)}},at=function(k){return 180*k/Math.PI},wt=function(k,U,W,st,ct,ht){var Ct=k+.5*(W-k),_t=U+.5*(st-U),Dt=ct+.5*(W-ct),Vt=ht+.5*(st-ht),Wt=Math.min(k,ct,Ct,Dt),Kt=Math.max(k,ct,Ct,Dt),St=Math.min(U,ht,_t,Vt),I=Math.max(U,ht,_t,Vt);return new c(Wt,St,Kt-Wt,I-St)},Rt=function(k,U,W,st,ct,ht,Ct,_t){var Dt,Vt,Wt,Kt,St,I,jt,qt,Yt,Ot,Jt,Xt,Qt,ie,Se=W-k,Xe=st-U,Pe=ct-W,We=ht-st,je=Ct-ct,ue=_t-ht;for(Vt=0;Vt<41;Vt++)Yt=(jt=(Wt=k+(Dt=Vt/40)*Se)+Dt*((St=W+Dt*Pe)-Wt))+Dt*(St+Dt*(ct+Dt*je-St)-jt),Ot=(qt=(Kt=U+Dt*Xe)+Dt*((I=st+Dt*We)-Kt))+Dt*(I+Dt*(ht+Dt*ue-I)-qt),Vt==0?(Jt=Yt,Xt=Ot,Qt=Yt,ie=Ot):(Jt=Math.min(Jt,Yt),Xt=Math.min(Xt,Ot),Qt=Math.max(Qt,Yt),ie=Math.max(ie,Ot));return new c(Math.round(Jt),Math.round(Xt),Math.round(Qt-Jt),Math.round(ie-Xt))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,U,W=(k=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:U}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(me.API),(function(r){var t=function(l){var c,h,f,p,g,v,b,C,A,T;for(h=[],f=0,p=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;p>f;f+=4)(g=(l.charCodeAt(f)<<24)+(l.charCodeAt(f+1)<<16)+(l.charCodeAt(f+2)<<8)+l.charCodeAt(f+3))!==0?(v=(g=((g=((g=((g=(g-(T=g%85))/85)-(A=g%85))/85)-(C=g%85))/85)-(b=g%85))/85)%85,h.push(v+33,b+33,C+33,A+33,T+33)):h.push(122);return(function(S,R){for(var M=R;M>0;M--)S.pop()})(h,c.length),String.fromCharCode.apply(String,h)+"~>"},e=function(l){var c,h,f,p,g,v=String,b="length",C=255,A="charCodeAt",T="slice",S="replace";for(l[T](-2),l=l[T](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),f=[],p=0,g=(l+=c="uuuuu"[T](l[b]%5||5))[b];g>p;p+=5)h=52200625*(l[A](p)-33)+614125*(l[A](p+1)-33)+7225*(l[A](p+2)-33)+85*(l[A](p+3)-33)+(l[A](p+4)-33),f.push(C&h>>24,C&h>>16,C&h>>8,C&h);return(function(R,M){for(var D=M;D>0;D--)R.pop()})(f,c[b]),v.fromCharCode.apply(v,f)},n=function(l){return l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var h="",f=0;f<l.length;f+=2)h+=String.fromCharCode("0x"+(l[f]+l[f+1]));return h},a=function(l){for(var c=new Uint8Array(l.length),h=l.length;h--;)c[h]=l.charCodeAt(h);return(c=e0(c)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};r.processDataByFilters=function(l,c){var h=0,f=l||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),h=0;h<c.length;h+=1)switch(c[h]){case"ASCII85Decode":case"/ASCII85Decode":f=e(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=s(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=n(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=a(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(me.API),(function(r){r.loadFile=function(t,e,n){return(function(s,a,l){a=a!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=(function(h,f,p){var g=new XMLHttpRequest,v=0,b=function(C){var A=C.length,T=[],S=String.fromCharCode;for(v=0;v<A;v+=1)T.push(S(255&C.charCodeAt(v)));return T.join("")};if(g.open("GET",h,!f),g.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(g.onload=function(){g.status===200?p(b(this.responseText)):p(void 0)}),g.send(null),f&&g.status===200)return b(g.responseText)})(s,a,l)}catch{}return c})(t,e,n)},r.allowFsRead=void 0,r.loadImageFile=r.loadFile})(me.API),(function(r){function t(){return(Be.html2canvas?Promise.resolve(Be.html2canvas):om(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function e(){return(Be.DOMPurify?Promise.resolve(Be.DOMPurify):om(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var h=Dn(c);return h==="undefined"?"undefined":h==="string"||c instanceof String?"string":h==="number"||c instanceof Number?"number":h==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":h==="object"?"object":"unknown"},s=function(c,h){var f=document.createElement(c);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},a=function c(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),g=h.firstChild;g;g=g.nextSibling)f!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(c(g,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},l=function c(h){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),f);return(p=p.setProgress(1,c,1,[c])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,h){return c.__proto__=h||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,h){return this.then(function(){switch(h=h||(function(f){switch(n(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),h){case"string":return this.then(e).then(function(f){return this.set({src:s("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var C=p[b],A=C.src.find(function(T){return T.format==="truetype"});A&&f.addFont(A.url,C.ref.name,C.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,f.context2d.save(!0),h(this.prop.container,v)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,h):this.outputPdf(c,h)},l.prototype.outputPdf=function(c,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,h)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(n(c)!=="object")return this;var h=Object.keys(c||{}).map(function(f){if(f in l.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(c,h){return this.then(function(){var f=c in l.template.prop?this.prop[c]:this.opt[c];return h?h(f):f})},l.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(c=c||me.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:h(c.inner.width,c.k),height:h(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,h,f,p){return c!=null&&(this.progress.val=c),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,h,f,p){return this.setProgress(c?this.progress.val+c:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},l.prototype.then=function(c,h){var f=this;return this.thenCore(c,h,function(p,g){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(v){return f.updateProgress(null,p),v}).then(p,g).then(function(v){return f.updateProgress(1),v})})},l.prototype.thenCore=function(c,h,f){f=f||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),h&&(h=h.bind(p));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:l.convert(Object.assign({},p),Promise.prototype),v=f.call(g,c,h);return l.convert(v,p.__proto__)},l.prototype.thenExternal=function(c,h){return Promise.prototype.then.call(this,c,h)},l.prototype.thenList=function(c){var h=this;return c.forEach(function(f){h=h.thenCore(f)}),h},l.prototype.catch=function(c){c&&(c=c.bind(this));var h=Promise.prototype.catch.call(this,c);return l.convert(h,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,me.getPageSize=function(c,h,f){if(Dn(c)==="object"){var p=c;c=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var g,v=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+h}var C,A=0,T=0;if(b.hasOwnProperty(v))A=b[v][1]/g,T=b[v][0]/g;else try{A=f[1],T=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",T>A&&(C=T,T=A,A=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",A>T&&(C=T,T=A,A=C)}return{width:T,height:A,unit:h,k:g,orientation:c}},r.html=function(c,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Cm):null;var f=new l(h);return h.worker?f:f.from(c).doCallback()}})(me.API),me.API.addJS=function(r){var t,e,n=r;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){t!==void 0&&e!==void 0&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},(function(r){var t;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=e.outline.render().split(/\r\n/),a=0;a<s.length;a++){var l=s[a],c=n.exec(l);if(c!=null){var h=c[1];e.internal.newObjectDeferredBegin(h,!1)}e.internal.write(l)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(a=0;a<f;a++){var g=e.internal.newObject();p.push(g);var v=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var b=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<p.length;a++)e.internal.write("(page_"+(a+1)+")"+p[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+b+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,s,a){var l={title:s,options:a,children:[]};return n==null&&(n=this.root),n.children.push(l),l},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var l=n.children[a];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var h=e.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var f=0;f<n.children.length;f++)this.renderItems(n.children[f])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,s){for(var a=0;a<s.children.length;a++)n.count++,this.count_r(n,s.children[a]);return n.count}}])})(me.API),(function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,s,a,l,c){var h,f=this.decode.DCT_DECODE,p=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=l||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,h=(function(g){for(var v,b=256*g.charCodeAt(4)+g.charCodeAt(5),C=g.length,A={width:0,height:0,numcomponents:1},T=4;T<C;T+=2){if(T+=b,t.indexOf(g.charCodeAt(T+1))!==-1){v=256*g.charCodeAt(T+5)+g.charCodeAt(T+6),A={width:256*g.charCodeAt(T+7)+g.charCodeAt(T+8),height:v,numcomponents:g.charCodeAt(T+9)};break}b=256*g.charCodeAt(T+2)+g.charCodeAt(T+3)}return A})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),h.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:e,width:h.width,height:h.height,colorSpace:c,bitsPerComponent:8,filter:f,index:n,alias:s}}return p}})(me.API),me.API.processPNG=function(r,t,e,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var s,a=_6(r,{checkCrc:!0}),l=a.width,c=a.height,h=a.channels,f=a.palette,p=a.depth;s=f&&h===1?(function(J){for(var H=J.width,lt=J.height,P=J.data,G=J.palette,rt=J.depth,Q=!1,gt=[],V=[],et=void 0,at=!1,wt=0,Rt=0;Rt<G.length;Rt++){var Y=fy(G[Rt],4),k=Y[0],U=Y[1],W=Y[2],st=Y[3];gt.push(k,U,W),st!=null&&(st===0?(wt++,V.length<1&&V.push(Rt)):st<255&&(at=!0))}if(at||wt>1){Q=!0,V=void 0;var ct=H*lt;et=new Uint8Array(ct);for(var ht=new DataView(P.buffer),Ct=0;Ct<ct;Ct++){var _t=Tm(ht,Ct,rt),Dt=fy(G[_t],4)[3];et[Ct]=Dt}}else wt===0&&(V=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Q?8:void 0,colorBytes:P,alphaBytes:et,needSMask:Q,palette:gt,mask:V}})(a):h===2||h===4?(function(J){for(var H=J.data,lt=J.width,P=J.height,G=J.channels,rt=J.depth,Q=G===2?"DeviceGray":"DeviceRGB",gt=G-1,V=lt*P,et=gt,at=V*et,wt=1*V,Rt=Math.ceil(at*rt/8),Y=Math.ceil(wt*rt/8),k=new Uint8Array(Rt),U=new Uint8Array(Y),W=new DataView(H.buffer),st=new DataView(k.buffer),ct=new DataView(U.buffer),ht=!1,Ct=0;Ct<V;Ct++){for(var _t=Ct*G,Dt=0;Dt<et;Dt++)gv(st,Tm(W,_t+Dt,rt),Ct*et+Dt,rt);var Vt=Tm(W,_t+et,rt);Vt<(1<<rt)-1&&(ht=!0),gv(ct,Vt,1*Ct,rt)}return{colorSpace:Q,colorsPerPixel:gt,sMaskBitsPerComponent:ht?rt:void 0,colorBytes:k,alphaBytes:U,needSMask:ht}})(a):(function(J){var H=J.data,lt=J.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:lt,colorsPerPixel:lt==="DeviceGray"?1:3,colorBytes:H instanceof Uint16Array?(function(P){for(var G=P.length,rt=new Uint8Array(2*G),Q=new DataView(rt.buffer,rt.byteOffset,rt.byteLength),gt=0;gt<G;gt++)Q.setUint16(2*gt,P[gt],!1);return rt})(H):H,needSMask:!1}})(a);var g,v,b,C=s,A=C.colorSpace,T=C.colorsPerPixel,S=C.sMaskBitsPerComponent,R=C.colorBytes,M=C.alphaBytes,D=C.needSMask,z=C.palette,K=C.mask,Z=null;return n!==me.API.image_compression.NONE&&typeof e0=="function"?(Z=(function(J){var H;switch(J){case me.API.image_compression.FAST:H=11;break;case me.API.image_compression.MEDIUM:H=13;break;case me.API.image_compression.SLOW:H=14;break;default:H=12}return H})(n),g=this.decode.FLATE_DECODE,v="/Predictor ".concat(Z," /Colors ").concat(T," /BitsPerComponent ").concat(p," /Columns ").concat(l),r=uv(R,Math.ceil(l*T*p/8),T,p,n),D&&(b=uv(M,Math.ceil(l*S/8),1,S,n))):(g=void 0,v=void 0,r=R,D&&(b=M)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:e,data:r,index:t,filter:g,decodeParameters:v,transparency:K,palette:z,sMask:b,predictor:Z,width:l,height:c,bitsPerComponent:p,sMaskBitsPerComponent:S,colorSpace:A}}},(function(r){r.processGIF89A=function(t,e,n,s){var a=new G6(t),l=a.width,c=a.height,h=[];a.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:l,height:c},p=new Nm(100).encode(f,100);return r.processJPEG.call(this,p,e,n,s)},r.processGIF87A=r.processGIF89A})(me.API),Ua.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:e,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ua.prototype.parseBGR=function(){this.pos=this.offset;var r="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[r]()}catch(e){Vn.log("bit decode error:"+e)}},Ua.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*s*4,c=0;c<8&&8*s+c<this.width;c++){var h=this.palette[a>>7-c&1];this.data[l+4*c]=h.blue,this.data[l+4*c+1]=h.green,this.data[l+4*c+2]=h.red,this.data[l+4*c+3]=255}e!==0&&(this.pos+=4-e)}},Ua.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<r;s++){var a=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*s*4,c=a>>4,h=15&a,f=this.palette[c];if(this.data[l]=f.blue,this.data[l+1]=f.green,this.data[l+2]=f.red,this.data[l+3]=255,2*s+1>=this.width)break;f=this.palette[h],this.data[l+4]=f.blue,this.data[l+4+1]=f.green,this.data[l+4+2]=f.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Ua.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;if(s<this.palette.length){var l=this.palette[s];this.data[a]=l.red,this.data[a+1]=l.green,this.data[a+2]=l.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},Ua.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,c=(a>>5&t)/t*255|0,h=(a>>10&t)/t*255|0,f=a>>15?255:0,p=n*this.width*4+4*s;this.data[p]=h,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=f}this.pos+=r}},Ua.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&t)/t*255|0,h=(l>>5&e)/e*255|0,f=(l>>11)/t*255|0,p=s*this.width*4+4*a;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=c,this.data[p+3]=255}this.pos+=r}},Ua.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*e;this.data[l]=a,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},Ua.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*e;this.data[c]=a,this.data[c+1]=s,this.data[c+2]=n,this.data[c+3]=l}},Ua.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(t,e,n,s){var a=new Ua(t,!1),l=a.width,c=a.height,h={data:a.getData(),width:l,height:c},f=new Nm(100).encode(h,100);return r.processJPEG.call(this,f,e,n,s)}})(me.API),bv.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(t,e,n,s){var a=new bv(t),l=a.width,c=a.height,h={data:a.getData(),width:l,height:c},f=new Nm(100).encode(h,100);return r.processJPEG.call(this,f,e,n,s)}})(me.API),me.API.processRGBA=function(r,t,e){for(var n=r.data,s=n.length,a=new Uint8Array(s/4*3),l=new Uint8Array(s/4),c=0,h=0,f=0;f<s;f+=4){var p=n[f],g=n[f+1],v=n[f+2],b=n[f+3];a[c++]=p,a[c++]=g,a[c++]=v,l[h++]=b}var C=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:C,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},me.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zu=me.API,Fd=zu.getCharWidthsArray=function(r,t){var e,n,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),c=t.widths?t.widths:s.metadata.Unicode.widths,h=c.fof?c.fof:1,f=t.kerning?t.kerning:s.metadata.Unicode.kerning,p=f.fof?f.fof:1,g=t.doKerning!==!1,v=0,b=r.length,C=0,A=c[0]||h,T=[];for(e=0;e<b;e++)n=r.charCodeAt(e),typeof s.metadata.widthOfString=="function"?T.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+l*(1e3/a)||0)/1e3):(v=g&&Dn(f[n])==="object"&&!isNaN(parseInt(f[n][C],10))?f[n][C]/p:0,T.push((c[n]||A)/h+v)),C=n;return T},ov=zu.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return zu.processArabic&&(r=zu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,s)/e:Fd.apply(this,arguments).reduce(function(a,l){return a+l},0)},lv=function(r,t,e,n){for(var s=[],a=0,l=r.length,c=0;a!==l&&c+t[a]<e;)c+=t[a],a++;s.push(r.slice(0,a));var h=a;for(c=0;a!==l;)c+t[a]>n&&(s.push(r.slice(h,a)),c=0,h=a),c+=t[a],a++;return h!==a&&s.push(r.slice(h,a)),s},cv=function(r,t,e){e||(e={});var n,s,a,l,c,h,f,p=[],g=[p],v=e.textIndent||0,b=0,C=0,A=r.split(" "),T=Fd.apply(this,[" ",e])[0];if(h=e.lineIndent===-1?A[0].length+2:e.lineIndent||0){var S=Array(h).join(" "),R=[];A.map(function(D){(D=D.split(/\s*\n/)).length>1?R=R.concat(D.map(function(z,K){return(K&&z.length?`
`:"")+z})):R.push(D[0])}),A=R,h=ov.apply(this,[S,e])}for(a=0,l=A.length;a<l;a++){var M=0;if(n=A[a],h&&n[0]==`
`&&(n=n.substr(1),M=1),v+b+(C=(s=Fd.apply(this,[n,e])).reduce(function(D,z){return D+z},0))>t||M){if(C>t){for(c=lv.apply(this,[n,s,t-(v+b),t]),p.push(c.shift()),p=[c.pop()];c.length;)g.push([c.shift()]);C=s.slice(n.length-(p[0]?p[0].length:0)).reduce(function(D,z){return D+z},0)}else p=[n];g.push(p),v=C+h,b=T}else p.push(n),v+=b+C,b=T}return f=h?function(D,z){return(z?S:"")+D.join(" ")}:function(D){return D.join(" ")},g.map(f)},zu.splitTextToSize=function(r,t,e){var n,s=(e=e||{}).fontSize||this.internal.getFontSize(),a=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var g=this.internal.getFont(p.fontName,p.fontStyle),v="Unicode";return g.metadata[v]?{widths:g.metadata[v].widths||{0:1},kerning:g.metadata[v].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/s;a.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=e.lineIndent;var c,h,f=[];for(c=0,h=n.length;c<h;c++)f=f.concat(cv.apply(this,[n[c],l,a]));return f},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",n={},s={},a=0;a<16;a++)n[e[a]]=t[a],s[t[a]]=e[a];var l=function(v){return"0x"+parseInt(v,10).toString(16)},c=r.__fontmetrics__.compress=function(v){var b,C,A,T,S=["{"];for(var R in v){if(b=v[R],isNaN(parseInt(R,10))?C="'"+R+"'":(R=parseInt(R,10),C=(C=l(R).slice(2)).slice(0,-1)+s[C.slice(-1)]),typeof b=="number")b<0?(A=l(b).slice(3),T="-"):(A=l(b).slice(2),T=""),A=T+A.slice(0,-1)+s[A.slice(-1)];else{if(Dn(b)!=="object")throw new Error("Don't know what to do with value type "+Dn(b)+".");A=c(b)}S.push(C+A)}return S.push("}"),S.join("")},h=r.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,C,A,T,S={},R=1,M=S,D=[],z="",K="",Z=v.length-1,J=1;J<Z;J+=1)(T=v[J])=="'"?b?(A=b.join(""),b=void 0):b=[]:b?b.push(T):T=="{"?(D.push([M,A]),M={},A=void 0):T=="}"?((C=D.pop())[0][C[1]]=M,A=void 0,M=C[0]):T=="-"?R=-1:A===void 0?n.hasOwnProperty(T)?(z+=n[T],A=parseInt(z,16)*R,R=1,z=""):z+=T:n.hasOwnProperty(T)?(K+=n[T],M[A]=parseInt(K,16)*R,R=1,A=void 0,K=""):K+=T;return S},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(v){var b=v.font,C=g.Unicode[b.postScriptName];C&&(b.metadata.Unicode={},b.metadata.Unicode.widths=C.widths,b.metadata.Unicode.kerning=C.kerning);var A=p.Unicode[b.postScriptName];A&&(b.metadata.Unicode.encoding=A,b.encoding=A.codePages[0])}])})(me.API),(function(r){var t=function(e){for(var n=e.length,s=new Uint8Array(n),a=0;a<n;a++)s[a]=e.charCodeAt(a);return s};r.API.events.push(["addFont",function(e){var n=void 0,s=e.font,a=e.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?t(c):t(Vd(c)),l.metadata=r.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,n)}}])})(me),me.API.addSvgAsImage=function(r,t,e,n,s,a,l,c){if(isNaN(t)||isNaN(e))throw Vn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Vn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=n,h.height=s;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(Be.canvg?Promise.resolve(Be.canvg):om(()=>import("./index.es-BJ42wpFa.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(f,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(p)}).then(function(){g.addImage(h.toDataURL("image/jpeg",1),t,e,n,s,l,c)})},me.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,e);return this},me.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var n,s,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),h=[],f=0,p=0,g=0;function v(C,A){var T,S=!1;for(T=0;T<C.length;T+=1)C[T]===A&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var b=c.length;for(g=0;g<b;g+=1)e[c[g]].value=e[c[g]].defaultValue,e[c[g]].explicitSet=!1}if(Dn(r)==="object"){for(s in r)if(a=r[s],v(c,s)&&a!==void 0){if(e[s].type==="boolean"&&typeof a=="boolean")e[s].value=a;else if(e[s].type==="name"&&v(e[s].valueSet,a))e[s].value=a;else if(e[s].type==="integer"&&Number.isInteger(a))e[s].value=a;else if(e[s].type==="array"){for(f=0;f<a.length;f+=1)if(n=!0,a[f].length===1&&typeof a[f][0]=="number")h.push(String(a[f]-1));else if(a[f].length>1){for(p=0;p<a[f].length;p+=1)typeof a[f][p]!="number"&&(n=!1);n===!0&&h.push([a[f][0]-1,a[f][1]-1].join(" "))}e[s].value="["+h.join(" ")+"]"}else e[s].value=e[s].defaultValue;e[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,A=[];for(C in e)e[C].explicitSet===!0&&(e[C].type==="name"?A.push("/"+C+" /"+e[C].value):A.push("/"+C+" "+e[C].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},me.API.addMetadata=function(r,t){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceUri:t??"http://jspdf.default.namespaceuri/",rawXml:typeof t=="boolean"&&t},this.internal.events.subscribe("putCatalog",$6),this.internal.events.subscribe("postPutResources",V6)),this},(function(r){var t=r.API,e=t.pdfEscape16=function(a,l){for(var c,h=l.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],g=0,v=a.length;g<v;++g){if(c=l.metadata.characterToGlyph(a.charCodeAt(g)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=a.charCodeAt(g),h.indexOf(c)==-1&&(h.push(c),h.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(f[4-c.length],c)}return p.join("")},n=function(a){var l,c,h,f,p,g,v;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],g=0,v=(c=Object.keys(a).sort(function(b,C){return b-C})).length;g<v;g++)l=c[g],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),a[l]!==void 0&&a[l]!==null&&typeof a[l].toString=="function"&&(f=("0000"+a[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(l){var c=l.font,h=l.out,f=l.newObject,p=l.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="Identity-H"){for(var g=c.metadata.Unicode.widths,v=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),b="",C=0;C<v.length;C++)b+=String.fromCharCode(v[C]);var A=f();p({data:b,addLength1:!0,objectId:A}),h("endobj");var T=f();p({data:n(c.metadata.toUnicode),addLength1:!0,objectId:T}),h("endobj");var S=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+$u(c.fontName)),h("/FontFile2 "+A+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),h("/Flags "+c.metadata.flags),h("/StemV "+c.metadata.stemV),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h(">>"),h("endobj");var R=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+$u(c.fontName)),h("/FontDescriptor "+S+" 0 R"),h("/W "+r.API.PDFObject.convert(g)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+c.encoding+")"),h(">>"),h(">>"),h("endobj"),c.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+T+" 0 R"),h("/BaseFont /"+$u(c.fontName)),h("/Encoding /"+c.encoding),h("/DescendantFonts ["+R+" 0 R]"),h(">>"),h("endobj"),c.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(l){var c=l.font,h=l.out,f=l.newObject,p=l.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var g=c.metadata.rawData,v="",b=0;b<g.length;b++)v+=String.fromCharCode(g[b]);var C=f();p({data:v,addLength1:!0,objectId:C}),h("endobj");var A=f();p({data:n(c.metadata.toUnicode),addLength1:!0,objectId:A}),h("endobj");var T=f();h("<<"),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h("/StemV "+c.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+C+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),h("/FontName /"+$u(c.fontName)),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h(">>"),h("endobj"),c.objectNumber=f();for(var S=0;S<c.metadata.hmtx.widths.length;S++)c.metadata.hmtx.widths[S]=parseInt(c.metadata.hmtx.widths[S]*(1e3/c.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+$u(c.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),h("endobj"),c.isAlreadyPutted=!0}})(a)}]);var s=function(a){var l,c=a.text||"",h=a.x,f=a.y,p=a.options||{},g=a.mutex||{},v=g.pdfEscape,b=g.activeFontKey,C=g.fonts,A=b,T="",S=0,R="",M=C[A].encoding;if(C[A].encoding!=="Identity-H")return{text:c,x:h,y:f,options:p,mutex:g};for(R=c,A=b,Array.isArray(c)&&(R=c[0]),S=0;S<R.length;S+=1)C[A].metadata.hasOwnProperty("cmap")&&(l=C[A].metadata.cmap.unicode.codeMap[R[S].charCodeAt(0)]),l||R[S].charCodeAt(0)<256&&C[A].metadata.hasOwnProperty("Unicode")?T+=R[S]:T+="";var D="";return parseInt(A.slice(1))<14||M==="WinAnsiEncoding"?D=v(T,A).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(D=e(T,C[A])),g.isHex=!0,{text:D,x:h,y:f,options:p,mutex:g}};t.events.push(["postProcessText",function(a){var l=a.text||"",c=[],h={text:l,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(l)){var f=0;for(f=0;f<l.length;f+=1)Array.isArray(l[f])&&l[f].length===3?c.push([s(Object.assign({},h,{text:l[f][0]})).text,l[f][1],l[f][2]]):c.push(s(Object.assign({},h,{text:l[f]})).text);a.text=c}else a.text=s(Object.assign({},h,{text:l})).text}])})(me),(function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(me.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var s,a,l,c,h,f,p,g=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,M=0;this.__bidiEngine__={};var D=function(P){var G=P.charCodeAt(),rt=G>>8,Q=A[rt];return Q!==void 0?g[256*Q+(255&G)]:rt===252||rt===253?"AL":S.test(rt)?"L":rt===8?"R":"N"},z=function(P){for(var G,rt=0;rt<P.length;rt++){if((G=D(P.charAt(rt)))==="L")return!1;if(G==="R")return!0}return!1},K=function(P,G,rt,Q){var gt,V,et,at,wt=G[Q];switch(wt){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(wt="AN");break;case"AL":R=!0,wt="R";break;case"WS":case"BN":wt="N";break;case"CS":Q<1||Q+1>=G.length||(gt=rt[Q-1])!=="EN"&&gt!=="AN"||(V=G[Q+1])!=="EN"&&V!=="AN"?wt="N":R&&(V="AN"),wt=V===gt?V:"N";break;case"ES":wt=(gt=Q>0?rt[Q-1]:"B")==="EN"&&Q+1<G.length&&G[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&rt[Q-1]==="EN"){wt="EN";break}if(R){wt="N";break}for(et=Q+1,at=G.length;et<at&&G[et]==="ET";)et++;wt=et<at&&G[et]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(at=G.length,et=Q+1;et<at&&G[et]==="NSM";)et++;if(et<at){var Rt=P[Q],Y=Rt>=1425&&Rt<=2303||Rt===64286;if(gt=G[et],Y&&(gt==="R"||gt==="AL")){wt="R";break}}}wt=Q<1||(gt=G[Q-1])==="B"?"N":rt[Q-1];break;case"B":R=!1,s=!0,wt=M;break;case"S":a=!0,wt="N"}return wt},Z=function(P,G,rt){var Q=P.split("");return rt&&J(Q,rt,{hiLevel:M}),Q.reverse(),G&&G.reverse(),Q.join("")},J=function(P,G,rt){var Q,gt,V,et,at,wt=-1,Rt=P.length,Y=0,k=[],U=M?b:v,W=[];for(R=!1,s=!1,a=!1,gt=0;gt<Rt;gt++)W[gt]=D(P[gt]);for(V=0;V<Rt;V++){if(at=Y,k[V]=K(P,W,k,V),Q=240&(Y=U[at][C[k[V]]]),Y&=15,G[V]=et=U[Y][5],Q>0)if(Q===16){for(gt=wt;gt<V;gt++)G[gt]=1;wt=-1}else wt=-1;if(U[Y][6])wt===-1&&(wt=V);else if(wt>-1){for(gt=wt;gt<V;gt++)G[gt]=et;wt=-1}W[V]==="B"&&(G[V]=0),rt.hiLevel|=et}a&&(function(st,ct,ht){for(var Ct=0;Ct<ht;Ct++)if(st[Ct]==="S"){ct[Ct]=M;for(var _t=Ct-1;_t>=0&&st[_t]==="WS";_t--)ct[_t]=M}})(W,G,Rt)},H=function(P,G,rt,Q,gt){if(!(gt.hiLevel<P)){if(P===1&&M===1&&!s)return G.reverse(),void(rt&&rt.reverse());for(var V,et,at,wt,Rt=G.length,Y=0;Y<Rt;){if(Q[Y]>=P){for(at=Y+1;at<Rt&&Q[at]>=P;)at++;for(wt=Y,et=at-1;wt<et;wt++,et--)V=G[wt],G[wt]=G[et],G[et]=V,rt&&(V=rt[wt],rt[wt]=rt[et],rt[et]=V);Y=at}Y++}}},lt=function(P,G,rt){var Q=P.split(""),gt={hiLevel:M};return rt||(rt=[]),J(Q,rt,gt),(function(V,et,at){if(at.hiLevel!==0&&p)for(var wt,Rt=0;Rt<V.length;Rt++)et[Rt]===1&&(wt=T.indexOf(V[Rt]))>=0&&(V[Rt]=T[wt+1])})(Q,rt,gt),H(2,Q,G,rt,gt),H(1,Q,G,rt,gt),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(P,G,rt){if((function(gt,V){if(V)for(var et=0;et<gt.length;et++)V[et]=et;c===void 0&&(c=z(gt)),f===void 0&&(f=z(gt))})(P,G),l||!h||f)if(l&&h&&c^f)M=c?1:0,P=Z(P,G,rt);else if(!l&&h&&f)M=c?1:0,P=lt(P,G,rt),P=Z(P,G);else if(!l||c||h||f){if(l&&!h&&c^f)P=Z(P,G),c?(M=0,P=lt(P,G,rt)):(M=1,P=lt(P,G,rt),P=Z(P,G));else if(l&&c&&!h&&f)M=1,P=lt(P,G,rt),P=Z(P,G);else if(!l&&!h&&c^f){var Q=p;c?(M=1,P=lt(P,G,rt),M=0,p=!1,P=lt(P,G,rt),p=Q):(M=0,P=lt(P,G,rt),P=Z(P,G),M=1,p=!1,P=lt(P,G,rt),p=Q,P=Z(P,G))}}else M=0,P=lt(P,G,rt);else M=c?1:0,P=lt(P,G,rt);return P},this.__bidiEngine__.setOptions=function(P){P&&(l=P.isInputVisual,h=P.isOutputVisual,c=P.isInputRtl,f=P.isOutputRtl,p=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var l=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,e.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var c=0;for(l=[],c=0;c<s.length;c+=1)Object.prototype.toString.call(s[c])==="[object Array]"?l.push([e.doBidiReorder(s[c][0]),s[c][1],s[c][2]]):l.push([e.doBidiReorder(s[c])]);n.text=l}else n.text=e.doBidiReorder(s);e.setOptions({isInputVisual:!0})}])})(me),me.API.TTFFont=(function(){function r(t){var e;if(this.rawData=t,e=this.contents=new Kl(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new oT(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new Y6(this.contents),this.head=new W6(this),this.name=new tT(this),this.cmap=new xw(this),this.toUnicode={},this.hhea=new K6(this),this.maxp=new eT(this),this.hmtx=new nT(this),this.post=new J6(this),this.os2=new Z6(this),this.loca=new aT(this),this.glyf=new iT(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,n,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,h,f;for(f=[],l=0,c=(h=this.bbox).length;l<c;l++)t=h[l],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(e=s>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,n){var s,a,l,c;for(l=0,a=0,c=(t=""+t).length;0<=c?a<c:a>c;a=0<=c?++a:--a)s=t.charCodeAt(a),l+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/e)||0;return l*(e/1e3)},r.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r})();var Va,Kl=(function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var e,n,s;for(s=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)s.push(this.writeByte(t.charCodeAt(e)));return s},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,n,s,a,l,c,h;return t=this.readByte(),e=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^a)+65536*(255^l)+256*(255^c)+(255^h)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*s+16777216*a+65536*l+256*c+h},r.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(t){var e,n,s,a;for(a=[],n=0,s=t.length;n<s;n++)e=t[n],a.push(this.writeByte(e));return a},r})(),Y6=(function(){var r;function t(e){var n,s,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,s,a,l,c,h,f,p,g,v,b,C,A;for(A in b=Object.keys(e).length,h=Math.log(2),g=16*Math.floor(Math.log(b)/h),l=Math.floor(g/h),p=16*b-g,(s=new Kl).writeInt(this.scalarType),s.writeShort(b),s.writeShort(g),s.writeShort(l),s.writeShort(p),a=16*b,f=s.pos+a,c=null,C=[],e)for(v=e[A],s.writeString(A),s.writeInt(r(v)),s.writeInt(f),s.writeInt(v.length),C=C.concat(v),A==="head"&&(c=f),f+=v.length;f%4;)C.push(0),f++;return s.write(C),n=2981146554-r(s.data),s.pos=c+8,s.writeUInt32(n),s.data},r=function(e){var n,s,a,l;for(e=Aw.call(e);e.length%4;)e.push(0);for(a=new Kl(e),s=0,n=0,l=e.length;n<l;n=n+=4)s+=a.readUInt32();return 4294967295&s},t})(),X6={}.hasOwnProperty,So=function(r,t){for(var e in t)X6.call(t,e)&&(r[e]=t[e]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};Va=(function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var W6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var e;return(e=new Kl).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},r})(),yv=(function(){function r(t,e){var n,s,a,l,c,h,f,p,g,v,b,C,A,T,S,R,M;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(b=t.readUInt16(),v=b/2,t.pos+=6,a=(function(){var D,z;for(z=[],h=D=0;0<=v?D<v:D>v;h=0<=v?++D:--D)z.push(t.readUInt16());return z})(),t.pos+=2,A=(function(){var D,z;for(z=[],h=D=0;0<=v?D<v:D>v;h=0<=v?++D:--D)z.push(t.readUInt16());return z})(),f=(function(){var D,z;for(z=[],h=D=0;0<=v?D<v:D>v;h=0<=v?++D:--D)z.push(t.readUInt16());return z})(),p=(function(){var D,z;for(z=[],h=D=0;0<=v?D<v:D>v;h=0<=v?++D:--D)z.push(t.readUInt16());return z})(),s=(this.length-t.pos+this.offset)/2,c=(function(){var D,z;for(z=[],h=D=0;0<=s?D<s:D>s;h=0<=s?++D:--D)z.push(t.readUInt16());return z})(),h=S=0,M=a.length;S<M;h=++S)for(T=a[h],n=R=C=A[h];C<=T?R<=T:R>=T;n=C<=T?++R:--R)p[h]===0?l=n+f[h]:(l=c[p[h]/2+(n-C)-(v-h)]||0)!==0&&(l+=f[h]),this.codeMap[n]=65535&l}t.pos=g}return r.encode=function(t,e){var n,s,a,l,c,h,f,p,g,v,b,C,A,T,S,R,M,D,z,K,Z,J,H,lt,P,G,rt,Q,gt,V,et,at,wt,Rt,Y,k,U,W,st,ct,ht,Ct,_t,Dt,Vt,Wt;switch(Q=new Kl,l=Object.keys(t).sort(function(Kt,St){return Kt-St}),e){case"macroman":for(A=0,T=(function(){var Kt=[];for(C=0;C<256;++C)Kt.push(0);return Kt})(),R={0:0},a={},gt=0,wt=l.length;gt<wt;gt++)R[_t=t[s=l[gt]]]==null&&(R[_t]=++A),a[s]={old:t[s],new:R[t[s]]},T[s]=R[t[s]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(T),{charMap:a,subtable:Q.data,maxGlyphID:A+1};case"unicode":for(G=[],g=[],M=0,R={},n={},S=f=null,V=0,Rt=l.length;V<Rt;V++)R[z=t[s=l[V]]]==null&&(R[z]=++M),n[s]={old:z,new:R[z]},c=R[z]-s,S!=null&&c===f||(S&&g.push(S),G.push(s),f=c),S=s;for(S&&g.push(S),g.push(65535),G.push(65535),lt=2*(H=G.length),J=2*Math.pow(Math.log(H)/Math.LN2,2),v=Math.log(J/2)/Math.LN2,Z=2*H-J,h=[],K=[],b=[],C=et=0,Y=G.length;et<Y;C=++et){if(P=G[C],p=g[C],P===65535){h.push(0),K.push(0);break}if(P-(rt=n[P].new)>=32768)for(h.push(0),K.push(2*(b.length+H-C)),s=at=P;P<=p?at<=p:at>=p;s=P<=p?++at:--at)b.push(n[s].new);else h.push(rt-P),K.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*H+2*b.length),Q.writeUInt16(0),Q.writeUInt16(lt),Q.writeUInt16(J),Q.writeUInt16(v),Q.writeUInt16(Z),ht=0,k=g.length;ht<k;ht++)s=g[ht],Q.writeUInt16(s);for(Q.writeUInt16(0),Ct=0,U=G.length;Ct<U;Ct++)s=G[Ct],Q.writeUInt16(s);for(Dt=0,W=h.length;Dt<W;Dt++)c=h[Dt],Q.writeUInt16(c);for(Vt=0,st=K.length;Vt<st;Vt++)D=K[Vt],Q.writeUInt16(D);for(Wt=0,ct=b.length;Wt<ct;Wt++)A=b[Wt],Q.writeUInt16(A);return{charMap:n,subtable:Q.data,maxGlyphID:M+1}}},r})(),xw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="cmap",r.prototype.parse=function(t){var e,n,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)e=new yv(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},r.encode=function(t,e){var n,s;return e==null&&(e="macroman"),n=yv.encode(t,e),(s=new Kl).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},r})(),K6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r})(),Z6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n})(),this.charRange=(function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r})(),J6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="post",r.prototype.parse=function(t){var e,n,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)e=t.readByte(),s.push(this.names.push(t.readString(e)));return s;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var l,c,h;for(h=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)h.push(t.readUInt32());return h}).call(this)}},r})(),Q6=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},tT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="name",r.prototype.parse=function(t){var e,n,s,a,l,c,h,f,p,g,v;for(t.pos=this.offset,t.readShort(),e=t.readShort(),c=t.readShort(),n=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(h={},a=p=0,g=n.length;p<g;a=++p)s=n[a],t.pos=s.offset,f=t.readString(s.length),l=new Q6(f,s),h[v=s.nameID]==null&&(h[v]=[]),h[s.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),eT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r})(),nT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="hmtx",r.prototype.parse=function(t){var e,n,s,a,l,c,h;for(t.pos=this.offset,this.metrics=[],e=0,c=this.file.hhea.numberOfMetrics;0<=c?e<c:e>c;e=0<=c?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],e=f=0;0<=s?f<s:f>s;e=0<=s?++f:--f)p.push(t.readInt16());return p})(),this.widths=(function(){var f,p,g,v;for(v=[],f=0,p=(g=this.metrics).length;f<p;f++)a=g[f],v.push(a.advance);return v}).call(this),n=this.widths[this.widths.length-1],h=[],e=l=0;0<=s?l<s:l>s;e=0<=s?++l:--l)h.push(this.widths.push(n));return h},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r})(),Aw=[].slice,iT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var e,n,s,a,l,c,h,f,p,g;return t in this.cache?this.cache[t]:(a=this.file.loca,e=this.file.contents,n=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+n,l=(c=new Kl(e.read(s))).readShort(),f=c.readShort(),g=c.readShort(),h=c.readShort(),p=c.readShort(),this.cache[t]=l===-1?new rT(c,f,g,h,p):new sT(c,l,f,g,h,p),this.cache[t]))},r.prototype.encode=function(t,e,n){var s,a,l,c,h;for(l=[],a=[],c=0,h=e.length;c<h;c++)s=t[e[c]],a.push(l.length),s&&(l=l.concat(s.encode(n)));return a.push(l.length),{table:l,offsets:a}},r})(),sT=(function(){function r(t,e,n,s,a,l){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),rT=(function(){function r(t,e,n,s,a){var l,c;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return r.prototype.encode=function(){var t,e,n;for(e=new Kl(Aw.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},r})(),aT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return So(r,Va),r.prototype.tag="loca",r.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=4)a.push(t.readUInt32());return a}).call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<n.length;++l)if(n[l]=s,a<e.length&&e[a]==l){++a,n[l]=s;var c=this.offsets[l],h=this.offsets[l+1]-c;h>0&&(s+=h)}for(var f=new Array(4*n.length),p=0;p<n.length;++p)f[4*p+3]=255&n[p],f[4*p+2]=(65280&n[p])>>8,f[4*p+1]=(16711680&n[p])>>16,f[4*p]=(4278190080&n[p])>>24;return f},r})(),oT=(function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,n,s,a;for(e in s=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[e],t[e]=s[n];return t},r.prototype.glyphsFor=function(t){var e,n,s,a,l,c,h;for(s={},l=0,c=t.length;l<c;l++)s[a=t[l]]=this.font.glyf.glyphFor(a);for(a in e=[],s)(n=s[a])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(a in h=this.glyphsFor(e))n=h[a],s[a]=n;return s},r.prototype.encode=function(t,e){var n,s,a,l,c,h,f,p,g,v,b,C,A,T,S;for(s in n=xw.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),b={0:0},S=n.charMap)b[(h=S[s]).old]=h.new;for(C in v=n.maxGlyphID,l)C in b||(b[C]=v++);return p=(function(R){var M,D;for(M in D={},R)D[R[M]]=M;return D})(b),g=Object.keys(p).sort(function(R,M){return R-M}),A=(function(){var R,M,D;for(D=[],R=0,M=g.length;R<M;R++)c=g[R],D.push(p[c]);return D})(),a=this.font.glyf.encode(l,A,b),f=this.font.loca.encode(a.offsets,A),T={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},r})();me.API.PDFObject=(function(){var r;function t(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,s,a,l;if(Array.isArray(e))return"["+(function(){var c,h,f;for(f=[],c=0,h=e.length;c<h;c++)n=e[c],f.push(t.convert(n));return f})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(s in a=["<<"],e)l=e[s],a.push("/"+s+" "+t.convert(l));return a.push(">>"),a.join(`
`)}return""+e},t})();th.workerSrc=dC;const lT=({connection:r,isHost:t,sessionId:e,studentName:n})=>{const s=gp(),a=bt.useRef(null),l=bt.useRef(null),c=bt.useRef(null),[h,f]=bt.useState(!1),[p,g]=bt.useState(!1),[v,b]=bt.useState(!1),[C,A]=bt.useState(localStorage.getItem("davina_notes")||""),[T,S]=bt.useState(3600),[R,M]=bt.useState(!1),[D,z]=bt.useState(!1);bt.useEffect(()=>{r&&r.open&&z(!0)},[r]),bt.useEffect(()=>{let qt;return D&&(qt=setInterval(()=>{S(Yt=>(Yt<=0&&M(!0),Yt-1))},1e3)),()=>clearInterval(qt)},[D]),bt.useEffect(()=>{if(r)if(t){const Yt=setInterval(()=>{r.open&&r.send({type:"sync_timer",timeLeft:T,isRunning:D})},5e3);return()=>clearInterval(Yt)}else{const qt=Yt=>{Yt.type==="sync_timer"&&(Math.abs(Yt.timeLeft-T)>2&&S(Yt.timeLeft),Yt.isRunning!==D&&z(Yt.isRunning))};return r.on("data",qt),()=>r.off("data",qt)}},[r,t,T,D]);const K=()=>{const qt=!D;z(qt),t&&r&&r.open&&r.send({type:"sync_timer",timeLeft:T,isRunning:qt})},Z=()=>{window.confirm("Are you sure you want to end the lesson?")&&(r&&r.close(),s("/"))},J=qt=>{const Yt=Math.abs(qt),Ot=Math.floor(Yt/60),Jt=Yt%60;return`${Ot}:${Jt.toString().padStart(2,"0")}`};bt.useEffect(()=>{localStorage.setItem("davina_notes",C)},[C]);const{tool:H,setTool:lt,color:P,setColor:G,size:rt,setSize:Q,transform:gt,setTransform:V,zoomIn:et,zoomOut:at,page:wt,totalPages:Rt,nextPage:Y,prevPage:k,addPage:U,clearCanvas:W,undo:st,redo:ct,activeText:ht,setActiveText:Ct,finalizeText:_t,events:Dt}=gC(a,l,r,e),Vt=async qt=>{const Yt=qt.target.files[0];if(!Yt)return;const Ot=new FileReader;Ot.onload=async Jt=>{c.current&&(c.current.innerHTML='<div class="absolute top-10 left-10 text-brand-teal animate-pulse">Loading PDF...</div>');try{const Xt=await x5(Jt.target.result).promise;c.current&&(c.current.innerHTML="");let Qt=50,ie=0;const Se=await Xt.getPage(1),Xe=Se.getViewport({scale:1}),We=Math.max(800,window.innerWidth*.9)/Xe.width;Se.cleanup();for(let ke=1;ke<=Xt.numPages;ke++){await new Promise(ve=>setTimeout(ve,10));const he=await Xt.getPage(ke),Tn=he.getViewport({scale:We}),Re=document.createElement("canvas");Re.width=Tn.width,Re.height=Tn.height,Re.style.position="absolute",Re.style.left="50px",Re.style.top=`${Qt}px`,Re.style.boxShadow="0 4px 6px -1px rgba(0,0,0,0.1)",Re.style.borderRadius="4px",c.current.appendChild(Re),await he.render({canvasContext:Re.getContext("2d"),viewport:Tn}).promise,Qt+=Tn.height+40,ie=Math.max(ie,Tn.width+100),he.cleanup()}const je=a.current.getContext("2d"),ue=je.getImageData(0,0,a.current.width,a.current.height);a.current.width=Math.max(window.innerWidth*2,ie),a.current.height=Math.max(Qt+1e3,window.innerHeight*3),je.putImageData(ue,0,0),V({x:0,y:0,scale:1})}catch(Xt){console.error("PDF Load Error",Xt),alert("Failed to load PDF. Please try another file.")}},Ot.readAsArrayBuffer(Yt)},Wt=()=>{if(!a.current)return;const qt=a.current,Yt=qt.toDataURL("image/png"),Ot=new me({orientation:"landscape",unit:"px",format:[qt.width,qt.height]});Ot.addImage(Yt,"PNG",0,0,qt.width,qt.height),Ot.save("davina-tutoring-notes.pdf")},[Kt,St]=bt.useState({x:0,y:0}),[I,jt]=bt.useState(!1);return ot.jsxs("div",{className:"flex h-screen w-screen overflow-hidden flex-col",children:[I&&H!=="pan"&&ot.jsx("div",{style:{position:"fixed",left:Kt.x,top:Kt.y,width:Math.max(20,rt*gt.scale),height:Math.max(20,rt*gt.scale),border:"3px solid black",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999999,boxShadow:"0 0 4px white"}}),ot.jsxs("div",{className:"h-14 bg-purple-600 text-white flex items-center justify-between px-6 shadow-md z-30",children:[ot.jsxs("div",{className:"flex items-center gap-3",children:[ot.jsx(Im,{size:28,className:"text-white"}),ot.jsx("h1",{className:"text-xl font-bold tracking-wide",children:"Davina's Tutoring"})]}),ot.jsxs("div",{className:`flex items-center gap-2 font-mono text-lg font-bold px-4 py-1 rounded-full ${R?"bg-red-500 animate-pulse":"bg-white/10"}`,children:[ot.jsx(Bm,{size:16}),ot.jsxs("span",{children:[R?"+":"",J(T)]}),ot.jsx("button",{onClick:K,className:"ml-2 bg-white/20 hover:bg-white/40 p-1 rounded-full text-xs",title:D?"Pause Timer":"Start Timer",children:D?"":""}),R&&ot.jsx("span",{className:"text-xs ml-1",children:"OVERTIME"})]}),ot.jsx("div",{className:"absolute top-4 left-24 flex items-center gap-4 z-30 pointer-events-auto",children:ot.jsxs("div",{className:"bg-white/90 backdrop-blur shadow-sm px-4 py-2 rounded-xl flex items-center gap-4 text-brand-navy",children:[ot.jsxs("div",{className:"flex flex-col leading-tight border-r border-gray-200 pr-4 mr-2",children:[ot.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:"Student"}),ot.jsx("span",{className:"font-bold text-purple-700",children:n})]}),ot.jsxs("div",{className:"flex flex-col leading-tight mr-4",children:[ot.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:"Session ID"}),ot.jsx("span",{className:"font-mono text-gray-600 select-all",children:e})]}),ot.jsxs("div",{className:"flex items-center gap-2 bg-brand-navy text-white px-3 py-1.5 rounded-lg font-mono font-bold",children:[ot.jsx(Bm,{size:16}),ot.jsxs("span",{children:[R?"+":"",J(T)]}),ot.jsx("button",{onClick:K,className:"ml-2 bg-white/20 hover:bg-white/40 p-1 rounded-full text-xs",title:D?"Pause Timer":"Start Timer",children:D?"":""}),R&&ot.jsx("span",{className:"text-xs ml-1",children:"OVERTIME"})]})]})}),ot.jsxs("div",{className:"flex items-center gap-4",children:[ot.jsxs("button",{onClick:()=>b(!v),className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-bold transition-all ${v?"bg-white text-purple-700":"hover:bg-purple-500"}`,children:[ot.jsx(Lb,{size:16}),ot.jsx("span",{children:"Notes"})]}),ot.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 hover:text-purple-200 transition-colors",children:[ot.jsx(Rb,{size:18}),ot.jsx("span",{children:"Pricing"})]}),ot.jsx("button",{onClick:Wt,className:"flex items-center gap-2 bg-white text-purple-700 px-3 py-1.5 rounded-full font-bold hover:bg-gray-100 transition-all",children:ot.jsx(AS,{size:16})}),ot.jsx("button",{onClick:Z,className:"flex items-center gap-2 bg-red-600 text-white px-3 py-1.5 rounded-full font-bold hover:bg-red-700 transition-all border border-red-500",children:ot.jsx("span",{children:"End Lesson"})})]})]}),p&&ot.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center backdrop-blur-sm",onClick:()=>g(!1),children:ot.jsxs("div",{className:"bg-white text-brand-navy p-8 rounded-2xl shadow-2xl max-w-md w-full relative",onClick:qt=>qt.stopPropagation(),children:[ot.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[ot.jsx(Rb,{className:"text-purple-600"})," Pricing Plans"]}),ot.jsxs("div",{className:"space-y-4",children:[ot.jsxs("div",{className:"p-4 border border-gray-200 rounded-xl hover:border-purple-600 transition-colors cursor-pointer relative overflow-hidden",children:[ot.jsx("h3",{className:"font-bold text-lg",children:"1-on-1 Session"}),ot.jsx("p",{className:"text-gray-500",children:"60 minutes personalized tutoring"}),ot.jsxs("p",{className:"text-purple-600 font-bold text-xl mt-2",children:["30",ot.jsx("span",{className:"text-sm text-gray-400",children:"/hr"})]})]}),ot.jsxs("div",{className:"p-4 border-2 border-purple-100 rounded-xl hover:border-purple-600 transition-colors cursor-pointer bg-purple-50 relative",children:[ot.jsx("div",{className:"absolute top-0 right-0 bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded-bl-lg",children:"Save 20"}),ot.jsx("h3",{className:"font-bold text-lg",children:"Bundle (10 Sessions)"}),ot.jsx("p",{className:"text-gray-500",children:"Commit to success & save"}),ot.jsxs("p",{className:"text-purple-600 font-bold text-xl mt-2",children:["280",ot.jsx("span",{className:"text-sm text-gray-400",children:" total"})]})]})]}),ot.jsxs("div",{className:"mt-6 bg-gray-50 p-4 rounded-xl border border-gray-200 text-sm text-center",children:[ot.jsx("p",{className:"font-bold text-gray-700 mb-2",children:"Ready to start?"}),ot.jsx("a",{href:"mailto:davina.potter@outlook.com?subject=Tutoring%20Payment",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800 font-bold underline text-lg",onClick:qt=>{console.log("Opening email...")},children:"Contact for Payment Details"}),ot.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"davina.potter@outlook.com"})]}),ot.jsx("button",{onClick:()=>g(!1),className:"mt-6 w-full py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})}),ot.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[ot.jsx(pC,{tool:H,setTool:lt,color:P,setColor:G,size:rt,setSize:Q,onUpload:Vt,onZoomIn:et,onZoomOut:at,gridMode:h,setGridMode:f,page:wt,totalPages:Rt,onPrevPage:k,onNextPage:Y,onAddPage:U,onClear:W,onUndo:st,onRedo:ct}),ot.jsxs("div",{ref:l,className:`flex-1 relative overflow-hidden touch-none 
                        ${h?"bg-grid bg-white":"bg-sky-50"} 
                        ${H==="pan"?"cursor-grab active:cursor-grabbing":"cursor-none"} 
                    `,...Dt,onMouseMove:qt=>{St({x:qt.clientX,y:qt.clientY}),Dt.onMouseMove&&Dt.onMouseMove(qt)},onMouseEnter:()=>jt(!0),onMouseLeave:()=>jt(!1),children:[ot.jsxs("div",{style:{transform:`translate(${gt.x}px, ${gt.y}px) scale(${gt.scale})`,transformOrigin:"0 0",position:"absolute",top:0,left:0,willChange:"transform"},children:[ot.jsx("div",{ref:c,className:"absolute inset-0 pointer-events-none"}),ot.jsx("canvas",{ref:a,className:"relative z-10 pointer-events-none"}),ht&&ot.jsxs("div",{style:{position:"absolute",left:ht.x,top:ht.y,transform:"translate(0, -50%)",zIndex:999999},onMouseDown:qt=>{qt.stopPropagation()},children:[ot.jsx("div",{className:"bg-purple-600 text-white text-[10px] px-1 rounded-t cursor-move flex items-center justify-center w-full select-none",onMouseDown:qt=>{qt.stopPropagation()},children:"Drag me"}),ot.jsx("input",{autoFocus:!0,value:ht.text,onChange:qt=>Ct({...ht,text:qt.target.value}),onMouseDown:qt=>qt.stopPropagation(),onClick:qt=>qt.stopPropagation(),onKeyDown:qt=>{qt.key==="Enter"&&!qt.shiftKey&&(qt.preventDefault(),_t()),qt.key==="Escape"&&Ct(null)},style:{background:"white",border:"2px solid #9333ea",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",outline:"none",color:P,fontSize:`${Math.max(16,rt*5)}px`,fontWeight:"bold",padding:"8px 12px",minWidth:"200px",borderRadius:"0 0 6px 6px"},className:"pointer-events-auto shadow-xl",placeholder:"Type & Enter..."})]})]}),ot.jsxs("div",{className:"absolute bottom-4 left-4 bg-white/80 backdrop-blur px-3 py-1 rounded-full shadow text-xs font-mono text-gray-500 pointer-events-none select-none",children:[Math.round(gt.scale*100),"%"]}),ot.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-brand-navy/50 text-xs pointer-events-none select-none font-bold",children:"[Scroll] to Pan Vertical  [Ctrl+Scroll] to Zoom"})]}),v&&ot.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:ot.jsxs("div",{className:"w-[500px] h-[60vh] bg-white rounded-xl shadow-2xl border border-gray-200 flex flex-col pointer-events-auto animate-in zoom-in-95 duration-200",children:[ot.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-purple-600 rounded-t-xl text-white",children:[ot.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[ot.jsx(Lb,{size:20}),ot.jsx("h3",{children:"Session Notes"})]}),ot.jsx("button",{onClick:()=>b(!1),className:"hover:bg-white/20 p-1 rounded text-white transition-colors",children:ot.jsx(Kv,{size:20})})]}),ot.jsx("textarea",{className:"flex-1 p-5 resize-none outline-none text-base leading-relaxed text-gray-700",placeholder:"Type homework assignments, lesson goals, or notes here...",value:C,onChange:qt=>A(qt.target.value),autoFocus:!0}),ot.jsx("div",{className:"p-3 bg-gray-50 text-xs text-center text-gray-400 border-t rounded-b-xl",children:"Notes are saved automatically to your browser"})]})})]})]})};class cT{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const e of this._parts)t.push(e);return uT(t).buffer}}function uT(r){let t=0;for(const s of r)t+=s.byteLength;const e=new Uint8Array(t);let n=0;for(const s of r){const a=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);e.set(a,n),n+=s.byteLength}return e}function _w(r){return new hT(r).unpack()}function Sw(r){const t=new fT,e=t.pack(r);return e instanceof Promise?e.then(()=>t.getBuffer()):t.getBuffer()}class hT{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e}unpack_uint32(){const t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e}unpack_uint64(){const t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e}unpack_string(t){const e=this.read(t);let n=0,s="",a,l;for(;n<t;)a=e[n],a<160?(l=a,n++):(a^192)<32?(l=(a&31)<<6|e[n+1]&63,n+=2):(a^224)<16?(l=(a&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=3):(l=(a&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=4),s+=String.fromCodePoint(l);return this.index+=t,s}unpack_array(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=this.unpack();return e}unpack_map(t){const e={};for(let n=0;n<t;n++){const s=this.unpack();e[s]=this.unpack()}return e}unpack_float(){const t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,s=t&8388607|8388608;return(e===0?1:-1)*s*2**(n-23)}unpack_double(){const t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,s=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(s-20)+e*2**(s-52);return(n===0?1:-1)*l}read(t){const e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")}}class fT{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const e=t.constructor;if(t instanceof Array){const n=this.pack_array(t);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const n=t;this.pack_bin(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(n=>{this.pack_bin(new Uint8Array(n)),this._bufferBuilder.flush()});if(e==Object||e.toString().startsWith("class")){const n=this.pack_object(t);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${e.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const e=t.length;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this._bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const e=this._textEncoder.encode(t),n=e.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_array(t){const e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this._bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");const n=s=>{if(s<e){const a=this.pack(t[s]);return a instanceof Promise?a.then(()=>n(s+1)):n(s+1)}};return n(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let e=0;t<0&&(e=1,t=-t);const n=Math.floor(Math.log(t)/Math.LN2),s=t/2**n-1,a=Math.floor(s*2**52),l=2**32,c=e<<31|n+1023<<20|a/l&1048575,h=a%l;this._bufferBuilder.append(203),this.pack_int32(c),this.pack_int32(h)}pack_object(t){const e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");const s=a=>{if(a<e.length){const l=e[a];if(t.hasOwnProperty(l)){this.pack(l);const c=this.pack(t[l]);if(c instanceof Promise)return c.then(()=>s(a+1))}return s(a+1)}};return s(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const e=t&4294967295;this._bufferBuilder.append((e&4278190080)>>>24),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_uint64(t){const e=t/4294967296,n=t%2**32;this._bufferBuilder.append((e&4278190080)>>>24),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const e=Math.floor(t/4294967296),n=t%2**32;this._bufferBuilder.append((e&4278190080)>>>24),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}constructor(){this._bufferBuilder=new cT,this._textEncoder=new TextEncoder}}let Cw=!0,Ew=!0;function of(r,t,e){const n=r.match(t);return n&&n.length>=e&&parseFloat(n[e],10)}function Vc(r,t,e){if(!r.RTCPeerConnection)return;const n=r.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(l,c){if(l!==t)return s.apply(this,arguments);const h=f=>{const p=e(f);p&&(c.handleEvent?c.handleEvent(p):c(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(c,h),s.apply(this,[l,h])};const a=n.removeEventListener;n.removeEventListener=function(l,c){if(l!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(c))return a.apply(this,arguments);const h=this._eventMap[t].get(c);return this._eventMap[t].delete(c),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[l,h])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function dT(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Cw=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function pT(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Ew=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Tw(){if(typeof window=="object"){if(Cw)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function q0(r,t){Ew&&console.warn(r+" is deprecated, please use "+t+" instead.")}function gT(r){const t={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:e}=r;if(e.userAgentData&&e.userAgentData.brands){const n=e.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(e.mozGetUserMedia)t.browser="firefox",t.version=parseInt(of(e.userAgent,/Firefox\/(\d+)\./,1));else if(e.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(of(e.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&e.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(of(e.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,t._safariVersion=of(e.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function vv(r){return Object.prototype.toString.call(r)==="[object Object]"}function Nw(r){return vv(r)?Object.keys(r).reduce(function(t,e){const n=vv(r[e]),s=n?Nw(r[e]):r[e],a=n&&!Object.keys(s).length;return s===void 0||a?t:Object.assign(t,{[e]:s})},{}):r}function c0(r,t,e){!t||e.has(t.id)||(e.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?c0(r,r.get(t[n]),e):n.endsWith("Ids")&&t[n].forEach(s=>{c0(r,r.get(s),e)})}))}function wv(r,t,e){const n=e?"outbound-rtp":"inbound-rtp",s=new Map;if(t===null)return s;const a=[];return r.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&a.push(l)}),a.forEach(l=>{r.forEach(c=>{c.type===n&&c.trackId===l.id&&c0(r,c,s)})}),s}const xv=Tw;function Lw(r,t){const e=r&&r.navigator;if(!e.mediaDevices)return;const n=function(c){if(typeof c!="object"||c.mandatory||c.optional)return c;const h={};return Object.keys(c).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const p=typeof c[f]=="object"?c[f]:{ideal:c[f]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const g=function(v,b){return v?v+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(p.ideal!==void 0){h.optional=h.optional||[];let v={};typeof p.ideal=="number"?(v[g("min",f)]=p.ideal,h.optional.push(v),v={},v[g("max",f)]=p.ideal,h.optional.push(v)):(v[g("",f)]=p.ideal,h.optional.push(v))}p.exact!==void 0&&typeof p.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[g("",f)]=p.exact):["min","max"].forEach(v=>{p[v]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[g(v,f)]=p[v])})}),c.advanced&&(h.optional=(h.optional||[]).concat(c.advanced)),h},s=function(c,h){if(t.version>=61)return h(c);if(c=JSON.parse(JSON.stringify(c)),c&&typeof c.audio=="object"){const f=function(p,g,v){g in p&&!(v in p)&&(p[v]=p[g],delete p[g])};c=JSON.parse(JSON.stringify(c)),f(c.audio,"autoGainControl","googAutoGainControl"),f(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=n(c.audio)}if(c&&typeof c.video=="object"){let f=c.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const p=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(e.mediaDevices.getSupportedConstraints&&e.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete c.video.facingMode;let g;if(f.exact==="environment"||f.ideal==="environment"?g=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(g=["front"]),g)return e.mediaDevices.enumerateDevices().then(v=>{v=v.filter(C=>C.kind==="videoinput");let b=v.find(C=>g.some(A=>C.label.toLowerCase().includes(A)));return!b&&v.length&&g.includes("back")&&(b=v[v.length-1]),b&&(c.video.deviceId=f.exact?{exact:b.deviceId}:{ideal:b.deviceId}),c.video=n(c.video),xv("chrome: "+JSON.stringify(c)),h(c)})}c.video=n(c.video)}return xv("chrome: "+JSON.stringify(c)),h(c)},a=function(c){return t.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(c,h,f){s(c,p=>{e.webkitGetUserMedia(p,h,g=>{f&&f(a(g))})})};if(e.getUserMedia=l.bind(e),e.mediaDevices.getUserMedia){const c=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(h){return s(h,f=>c(f).then(p=>{if(f.audio&&!p.getAudioTracks().length||f.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(a(p))))}}}function kw(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function Rw(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let a;r.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(c=>c.track&&c.track.id===s.track.id):a={track:s.track};const l=new Event("track");l.track=s.track,l.receiver=a,l.transceiver={receiver:a},l.streams=[n.stream],this.dispatchEvent(l)}),n.stream.getTracks().forEach(s=>{let a;r.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(c=>c.track&&c.track.id===s.id):a={track:s};const l=new Event("track");l.track=s,l.receiver=a,l.transceiver={receiver:a},l.streams=[n.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Vc(r,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Mw(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const t=function(s,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=s.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:s}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(c,h){let f=s.apply(this,arguments);return f||(f=t(this,c),this._senders.push(f)),f};const a=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(c){a.apply(this,arguments);const h=this._senders.indexOf(c);h!==-1&&this._senders.splice(h,1)}}const e=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],e.apply(this,[a]),a.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const n=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(l=>{const c=this._senders.find(h=>h.track===l);c&&this._senders.splice(this._senders.indexOf(c),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Dw(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),r.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>wv(l,a.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s}),Vc(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>wv(a,s.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const n=arguments[0];let s,a,l;return this.getSenders().forEach(c=>{c.track===n&&(s?l=!0:s=c)}),this.getReceivers().forEach(c=>(c.track===n&&(a?l=!0:a=c),c.track===n)),l||s&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Pw(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(l,c){if(!c)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=t.apply(this,arguments);return this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id].indexOf(h)===-1&&this._shimmedLocalStreams[c.id].push(h):this._shimmedLocalStreams[c.id]=[c,h],h};const e=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const c=this.getSenders();e.apply(this,arguments);const h=this.getSenders().filter(f=>c.indexOf(f)===-1);this._shimmedLocalStreams[l.id]=[l].concat(h)};const n=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],n.apply(this,arguments)};const s=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(c=>{const h=this._shimmedLocalStreams[c].indexOf(l);h!==-1&&this._shimmedLocalStreams[c].splice(h,1),this._shimmedLocalStreams[c].length===1&&delete this._shimmedLocalStreams[c]}),s.apply(this,arguments)}}function Ow(r,t){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Pw(r);const e=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const p=e.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(g=>this._reverseStreams[g.id])};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const g=new r.MediaStream(p.getTracks());this._streams[p.id]=g,this._reverseStreams[g.id]=p,p=g}n.apply(this,[p])};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},r.RTCPeerConnection.prototype.addTrack=function(p,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(A=>A===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const C=this._streams[g.id];if(C)C.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new r.MediaStream([p]);this._streams[g.id]=A,this._reverseStreams[A.id]=g,this.addStream(A)}return this.getSenders().find(A=>A.track===p)};function a(f,p){let g=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const b=f._reverseStreams[v],C=f._streams[b.id];g=g.replace(new RegExp(C.id,"g"),b.id)}),new RTCSessionDescription({type:p.type,sdp:g})}function l(f,p){let g=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const b=f._reverseStreams[v],C=f._streams[b.id];g=g.replace(new RegExp(b.id,"g"),C.id)}),new RTCSessionDescription({type:p.type,sdp:g})}["createOffer","createAnswer"].forEach(function(f){const p=r.RTCPeerConnection.prototype[f],g={[f](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[C=>{const A=a(this,C);v[0].apply(null,[A])},C=>{v[1]&&v[1].apply(null,C)},arguments[2]]):p.apply(this,arguments).then(C=>a(this,C))}};r.RTCPeerConnection.prototype[f]=g[f]});const c=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?c.apply(this,arguments):(arguments[0]=l(this,arguments[0]),c.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const f=h.get.apply(this);return f.type===""?f:a(this,f)}}),r.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(A=>p.track===A)&&(v=this._streams[b])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function u0(r,t){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){const n=r.RTCPeerConnection.prototype[e],s={[e](){return arguments[0]=new(e==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};r.RTCPeerConnection.prototype[e]=s[e]})}function Bw(r,t){Vc(r,"negotiationneeded",e=>{const n=e.target;if(!((t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return e})}const Av=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Bw,shimAddTrackRemoveTrack:Ow,shimAddTrackRemoveTrackWithNative:Pw,shimGetSendersWithDtmf:Mw,shimGetUserMedia:Lw,shimMediaStream:kw,shimOnTrack:Rw,shimPeerConnection:u0,shimSenderReceiverGetStats:Dw},Symbol.toStringTag,{value:"Module"}));function Iw(r,t){const e=r&&r.navigator,n=r&&r.MediaStreamTrack;if(e.getUserMedia=function(s,a,l){q0("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),e.mediaDevices.getUserMedia(s).then(a,l)},!(t.version>55&&"autoGainControl"in e.mediaDevices.getSupportedConstraints())){const s=function(l,c,h){c in l&&!(h in l)&&(l[h]=l[c],delete l[c])},a=e.mediaDevices.getUserMedia.bind(e.mediaDevices);if(e.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l.audio,"autoGainControl","mozAutoGainControl"),s(l.audio,"noiseSuppression","mozNoiseSuppression")),a(l)},n&&n.prototype.getSettings){const l=n.prototype.getSettings;n.prototype.getSettings=function(){const c=l.apply(this,arguments);return s(c,"mozAutoGainControl","autoGainControl"),s(c,"mozNoiseSuppression","noiseSuppression"),c}}if(n&&n.prototype.applyConstraints){const l=n.prototype.applyConstraints;n.prototype.applyConstraints=function(c){return this.kind==="audio"&&typeof c=="object"&&(c=JSON.parse(JSON.stringify(c)),s(c,"autoGainControl","mozAutoGainControl"),s(c,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[c])}}}}function mT(r,t){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:t}:n.video.mediaSource=t,r.navigator.mediaDevices.getUserMedia(n)})}function Fw(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function h0(r,t){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const a=r.RTCPeerConnection.prototype[s],l={[s](){return arguments[0]=new(s==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};r.RTCPeerConnection.prototype[s]=l[s]});const e={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[a,l,c]=arguments;return n.apply(this,[a||null]).then(h=>{if(t.version<53&&!l)try{h.forEach(f=>{f.type=e[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;h.forEach((p,g)=>{h.set(g,Object.assign({},p,{type:e[p.type]||p.type}))})}return h}).then(l,c)}}function jw(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(a=>a._pc=this),s});const e=r.RTCPeerConnection.prototype.addTrack;e&&(r.RTCPeerConnection.prototype.addTrack=function(){const s=e.apply(this,arguments);return s._pc=this,s}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Uw(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(s=>s._pc=this),n}),Vc(r,"track",e=>(e.receiver._pc=e.srcElement,e)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function zw(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(e){q0("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&e.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Hw(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function qw(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.addTransceiver;t&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=t.apply(this,arguments);if(s){const{sender:l}=a,c=l.getParameters();(!("encodings"in c)||c.encodings.length===1&&Object.keys(c.encodings[0]).length===0)&&(c.encodings=n,l.sendEncodings=n,this.setParametersPromises.push(l.setParameters(c).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return a})}function Gw(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const t=r.RTCRtpSender.prototype.getParameters;t&&(r.RTCRtpSender.prototype.getParameters=function(){const n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Vw(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function $w(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const _v=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:qw,shimCreateAnswer:$w,shimCreateOffer:Vw,shimGetDisplayMedia:mT,shimGetParameters:Gw,shimGetUserMedia:Iw,shimOnTrack:Fw,shimPeerConnection:h0,shimRTCDataChannel:Hw,shimReceiverGetStats:Uw,shimRemoveStream:zw,shimSenderGetStats:jw},Symbol.toStringTag,{value:"Module"}));function Yw(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>t.call(this,s,n)),n.getVideoTracks().forEach(s=>t.call(this,s,n))},r.RTCPeerConnection.prototype.addTrack=function(n,...s){return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(e);if(n===-1)return;this._localStreams.splice(n,1);const s=e.getTracks();this.getSenders().forEach(a=>{s.includes(a.track)&&this.removeTrack(a)})})}}function Xw(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,this.dispatchEvent(a)})})}});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(a=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(a)>=0)return;n._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,n.dispatchEvent(l)})}),t.apply(n,arguments)}}}function Ww(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,e=t.createOffer,n=t.createAnswer,s=t.setLocalDescription,a=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(f,p){const g=arguments.length>=2?arguments[2]:arguments[0],v=e.apply(this,[g]);return p?(v.then(f,p),Promise.resolve()):v},t.createAnswer=function(f,p){const g=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[g]);return p?(v.then(f,p),Promise.resolve()):v};let c=function(h,f,p){const g=s.apply(this,[h]);return p?(g.then(f,p),Promise.resolve()):g};t.setLocalDescription=c,c=function(h,f,p){const g=a.apply(this,[h]);return p?(g.then(f,p),Promise.resolve()):g},t.setRemoteDescription=c,c=function(h,f,p){const g=l.apply(this,[h]);return p?(g.then(f,p),Promise.resolve()):g},t.addIceCandidate=c}function Kw(r){const t=r&&r.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=s=>n(Zw(s))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(n,s,a){t.mediaDevices.getUserMedia(n).then(s,a)}).bind(t))}function Zw(r){return r&&r.video!==void 0?Object.assign({},r,{video:Nw(r.video)}):r}function Jw(r){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection;r.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const a=[];for(let l=0;l<n.iceServers.length;l++){let c=n.iceServers[l];c.urls===void 0&&c.url?(q0("RTCIceServer.url","RTCIceServer.urls"),c=JSON.parse(JSON.stringify(c)),c.urls=c.url,delete c.url,a.push(c)):a.push(n.iceServers[l])}n.iceServers=a}return new t(n,s)},r.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Qw(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function tx(r){const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const a=this.getTransceivers().find(l=>l.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ex(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Sv=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ex,shimCallbacksAPI:Ww,shimConstraints:Zw,shimCreateOfferLegacy:tx,shimGetUserMedia:Kw,shimLocalStreamsAPI:Yw,shimRTCIceServerUrls:Jw,shimRemoteStreamsAPI:Xw,shimTrackEventTransceiver:Qw},Symbol.toStringTag,{value:"Module"}));var Lm={exports:{}},Cv;function bT(){return Cv||(Cv=1,(function(r){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split(`
`).map(n=>n.trim())},t.splitSections=function(e){return e.split(`
m=`).map((s,a)=>(a>0?"m="+s:s).trim()+`\r
`)},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter(s=>s.indexOf(n)===0)},t.parseCandidate=function(e){let n;e.indexOf("a=candidate:")===0?n=e.substring(12).split(" "):n=e.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let a=8;a<n.length;a+=2)switch(n[a]){case"raddr":s.relatedAddress=n[a+1];break;case"rport":s.relatedPort=parseInt(n[a+1],10);break;case"tcptype":s.tcpType=n[a+1];break;case"ufrag":s.ufrag=n[a+1],s.usernameFragment=n[a+1];break;default:s[n[a]]===void 0&&(s[n[a]]=n[a+1]);break}return s},t.writeCandidate=function(e){const n=[];n.push(e.foundation);const s=e.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(e.protocol.toUpperCase()),n.push(e.priority),n.push(e.address||e.ip),n.push(e.port);const a=e.type;return n.push("typ"),n.push(a),a!=="host"&&e.relatedAddress&&e.relatedPort&&(n.push("raddr"),n.push(e.relatedAddress),n.push("rport"),n.push(e.relatedPort)),e.tcpType&&e.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(n.push("ufrag"),n.push(e.usernameFragment||e.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let n=e.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},t.writeRtpMap=function(e){let n=e.payloadType;e.preferredPayloadType!==void 0&&(n=e.preferredPayloadType);const s=e.channels||e.numChannels||1;return"a=rtpmap:"+n+" "+e.name+"/"+e.clockRate+(s!==1?"/"+s:"")+`\r
`},t.parseExtmap=function(e){const n=e.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&e.direction!=="sendrecv"?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+`\r
`},t.parseFmtp=function(e){const n={};let s;const a=e.substring(e.indexOf(" ")+1).split(";");for(let l=0;l<a.length;l++)s=a[l].trim().split("="),n[s[0].trim()]=s[1];return n},t.writeFmtp=function(e){let n="",s=e.payloadType;if(e.preferredPayloadType!==void 0&&(s=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const a=[];Object.keys(e.parameters).forEach(l=>{e.parameters[l]!==void 0?a.push(l+"="+e.parameters[l]):a.push(l)}),n+="a=fmtp:"+s+" "+a.join(";")+`\r
`}return n},t.parseRtcpFb=function(e){const n=e.substring(e.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(e){let n="",s=e.payloadType;return e.preferredPayloadType!==void 0&&(s=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(a=>{n+="a=rtcp-fb:"+s+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(e){const n=e.indexOf(" "),s={ssrc:parseInt(e.substring(7,n),10)},a=e.indexOf(":",n);return a>-1?(s.attribute=e.substring(n+1,a),s.value=e.substring(a+1)):s.attribute=e.substring(n+1),s},t.parseSsrcGroup=function(e){const n=e.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const n=e.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,n){let s="a=setup:"+n+`\r
`;return e.fingerprints.forEach(a=>{s+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),s},t.parseCryptoLine=function(e){const n=e.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+(typeof e.keyParams=="object"?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(e){if(e.indexOf("inline:")!==0)return null;const n=e.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const s=t.matchPrefix(e+n,"a=ice-ufrag:")[0],a=t.matchPrefix(e+n,"a=ice-pwd:")[0];return s&&a?{usernameFragment:s.substring(12),password:a.substring(10)}:null},t.writeIceParameters=function(e){let n="a=ice-ufrag:"+e.usernameFragment+`\r
a=ice-pwd:`+e.password+`\r
`;return e.iceLite&&(n+=`a=ice-lite\r
`),n},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=t.splitLines(e)[0].split(" ");n.profile=a[2];for(let c=3;c<a.length;c++){const h=a[c],f=t.matchPrefix(e,"a=rtpmap:"+h+" ")[0];if(f){const p=t.parseRtpMap(f),g=t.matchPrefix(e,"a=fmtp:"+h+" ");switch(p.parameters=g.length?t.parseFmtp(g[0]):{},p.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+h+" ").map(t.parseRtcpFb),n.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(p.name.toUpperCase());break}}}t.matchPrefix(e,"a=extmap:").forEach(c=>{n.headerExtensions.push(t.parseExtmap(c))});const l=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(c=>{l.forEach(h=>{c.rtcpFeedback.find(p=>p.type===h.type&&p.parameter===h.parameter)||c.rtcpFeedback.push(h)})}),n},t.writeRtpDescription=function(e,n){let s="";s+="m="+e+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(l=>{s+=t.writeRtpMap(l),s+=t.writeFmtp(l),s+=t.writeRtcpFb(l)});let a=0;return n.codecs.forEach(l=>{l.maxptime>a&&(a=l.maxptime)}),a>0&&(s+="a=maxptime:"+a+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(l=>{s+=t.writeExtmap(l)}),s},t.parseRtpEncodingParameters=function(e){const n=[],s=t.parseRtpParameters(e),a=s.fecMechanisms.indexOf("RED")!==-1,l=s.fecMechanisms.indexOf("ULPFEC")!==-1,c=t.matchPrefix(e,"a=ssrc:").map(v=>t.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),h=c.length>0&&c[0].ssrc;let f;const p=t.matchPrefix(e,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(C=>parseInt(C,10)));p.length>0&&p[0].length>1&&p[0][0]===h&&(f=p[0][1]),s.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let b={ssrc:h,codecPayloadType:parseInt(v.parameters.apt,10)};h&&f&&(b.rtx={ssrc:f}),n.push(b),a&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:h,mechanism:l?"red+ulpfec":"red"},n.push(b))}}),n.length===0&&h&&n.push({ssrc:h});let g=t.matchPrefix(e,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-2e3*8:g=void 0,n.forEach(v=>{v.maxBitrate=g})),n},t.parseRtcpParameters=function(e){const n={},s=t.matchPrefix(e,"a=ssrc:").map(c=>t.parseSsrcMedia(c)).filter(c=>c.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const a=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;const l=t.matchPrefix(e,"a=rtcp-mux");return n.mux=l.length>0,n},t.writeRtcpParameters=function(e){let n="";return e.reducedSize&&(n+=`a=rtcp-rsize\r
`),e.mux&&(n+=`a=rtcp-mux\r
`),e.ssrc!==void 0&&e.cname&&(n+="a=ssrc:"+e.ssrc+" cname:"+e.cname+`\r
`),n},t.parseMsid=function(e){let n;const s=t.matchPrefix(e,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const a=t.matchPrefix(e,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(a.length>0)return n=a[0].value.split(" "),{stream:n[0],track:n[1]}},t.parseSctpDescription=function(e){const n=t.parseMLine(e),s=t.matchPrefix(e,"a=max-message-size:");let a;s.length>0&&(a=parseInt(s[0].substring(19),10)),isNaN(a)&&(a=65536);const l=t.matchPrefix(e,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:n.fmt,maxMessageSize:a};const c=t.matchPrefix(e,"a=sctpmap:");if(c.length>0){const h=c[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:a}}},t.writeSctpDescription=function(e,n){let s=[];return e.protocol!=="DTLS/SCTP"?s=["m="+e.kind+" 9 "+e.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+e.kind+" 9 "+e.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,s){let a;const l=n!==void 0?n:2;return e?a=e:a=t.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+a+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(e,n){const s=t.splitLines(e);for(let a=0;a<s.length;a++)switch(s[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[a].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return e.split(" ",2)[1]==="0"},t.parseMLine=function(e){const s=t.splitLines(e)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},t.parseOLine=function(e){const s=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},t.isValidSDP=function(e){if(typeof e!="string"||e.length===0)return!1;const n=t.splitLines(e);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},r.exports=t})(Lm)),Lm.exports}var nx=bT();const rh=m0(nx),yT=bA({__proto__:null,default:rh},[nx]);function Kd(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const t=r.RTCIceCandidate;r.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new t(n),a=rh.parseCandidate(n.candidate);for(const l in a)l in s||Object.defineProperty(s,l,{value:a[l]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(n)},r.RTCIceCandidate.prototype=t.prototype,Vc(r,"icecandidate",e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new r.RTCIceCandidate(e.candidate),writable:"false"}),e))}function f0(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||Vc(r,"icecandidate",t=>{if(t.candidate){const e=rh.parseCandidate(t.candidate.candidate);e.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[e.priority>>24])}return t})}function Zd(r,t){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const e=function(c){if(!c||!c.sdp)return!1;const h=rh.splitSections(c.sdp);return h.shift(),h.some(f=>{const p=rh.parseMLine(f);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},n=function(c){const h=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const f=parseInt(h[1],10);return f!==f?-1:f},s=function(c){let h=65536;return t.browser==="firefox"&&(t.version<57?c===-1?h=16384:h=2147483637:t.version<60?h=t.version===57?65535:65536:h=2147483637),h},a=function(c,h){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const p=rh.matchPrefix(c.sdp,"a=max-message-size:");return p.length>0?f=parseInt(p[0].substring(19),10):t.browser==="firefox"&&h!==-1&&(f=2147483637),f},l=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(e(arguments[0])){const h=n(arguments[0]),f=s(h),p=a(arguments[0],h);let g;f===0&&p===0?g=Number.POSITIVE_INFINITY:f===0||p===0?g=Math.max(f,p):g=Math.min(f,p);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return g}}),this._sctp=v}return l.apply(this,arguments)}}function Jd(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function t(n,s){const a=n.send;n.send=function(){const c=arguments[0],h=c.length||c.size||c.byteLength;if(n.readyState==="open"&&s.sctp&&h>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}const e=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const s=e.apply(this,arguments);return t(s,this),s},Vc(r,"datachannel",n=>(t(n.channel,n.target),n))}function d0(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const t=r.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const a=s.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const l=new Event("connectionstatechange",s);a.dispatchEvent(l)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function p0(r,t){if(!r.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=s.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&s instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:s.type,sdp:a}):s.sdp=a}return e.apply(this,arguments)}}function Qd(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const e=r.RTCPeerConnection.prototype.addIceCandidate;!e||e.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function tp(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const e=r.RTCPeerConnection.prototype.setLocalDescription;!e||e.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return e.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?e.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>e.apply(this,[l]))})}const vT=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:p0,shimAddIceCandidateNullOrEmpty:Qd,shimConnectionState:d0,shimMaxMessageSize:Zd,shimParameterlessSetLocalDescription:tp,shimRTCIceCandidate:Kd,shimRTCIceCandidateRelayProtocol:f0,shimSendThrowTypeError:Jd},Symbol.toStringTag,{value:"Module"}));function wT({window:r}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const e=Tw,n=gT(r),s={browserDetails:n,commonShim:vT,extractVersion:of,disableLog:dT,disableWarnings:pT,sdp:yT};switch(n.browser){case"chrome":if(!Av||!u0||!t.shimChrome)return e("Chrome shim is not included in this adapter release."),s;if(n.version===null)return e("Chrome shim can not determine version, not shimming."),s;e("adapter.js shimming chrome."),s.browserShim=Av,Qd(r,n),tp(r),Lw(r,n),kw(r),u0(r,n),Rw(r),Ow(r,n),Mw(r),Dw(r),Bw(r,n),Kd(r),f0(r),d0(r),Zd(r,n),Jd(r),p0(r,n);break;case"firefox":if(!_v||!h0||!t.shimFirefox)return e("Firefox shim is not included in this adapter release."),s;e("adapter.js shimming firefox."),s.browserShim=_v,Qd(r,n),tp(r),Iw(r,n),h0(r,n),Fw(r),zw(r),jw(r),Uw(r),Hw(r),qw(r),Gw(r),Vw(r),$w(r),Kd(r),d0(r),Zd(r,n),Jd(r);break;case"safari":if(!Sv||!t.shimSafari)return e("Safari shim is not included in this adapter release."),s;e("adapter.js shimming safari."),s.browserShim=Sv,Qd(r,n),tp(r),Jw(r),tx(r),Ww(r),Yw(r),Xw(r),Qw(r),Kw(r),ex(r),Kd(r),f0(r),Zd(r,n),Jd(r),p0(r,n);break;default:e("Unsupported browser!");break}return s}const Ev=wT({window:typeof window>"u"?void 0:window});function $c(r,t,e,n){Object.defineProperty(r,t,{get:e,set:n,enumerable:!0,configurable:!0})}class ix{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const e=[],n=t.byteLength,s=Math.ceil(n/this.chunkedMTU);let a=0,l=0;for(;l<n;){const c=Math.min(n,l+this.chunkedMTU),h=t.slice(l,c),f={__peerData:this._dataCount,n:a,data:h,total:s};e.push(f),l=c,a++}return this._dataCount++,e}}}function xT(r){let t=0;for(const s of r)t+=s.byteLength;const e=new Uint8Array(t);let n=0;for(const s of r)e.set(s,n),n+=s.byteLength;return e}const km=Ev.default||Ev,nf=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return km.browserDetails.browser}getVersion(){return km.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),t=km.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let e,n=!1;try{e=new RTCPeerConnection,e.addTransceiver("audio"),n=!0}catch{}finally{e&&e.close()}return n}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},AT=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),sx=()=>Math.random().toString(36).slice(2),Tv={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class _T extends ix{noop(){}blobToArrayBuffer(t,e){const n=new FileReader;return n.onload=function(s){s.target&&e(s.target.result)},n.readAsArrayBuffer(t),n}binaryStringToArrayBuffer(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n)&255;return e.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Tv,this.browser=nf.getBrowser(),this.browserVersion=nf.getVersion(),this.pack=Sw,this.unpack=_w,this.supports=(function(){const e={browser:nf.isBrowserSupported(),webRTC:nf.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;let n;try{n=new RTCPeerConnection(Tv),e.audioVideo=!0;let s;try{s=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!s.ordered;try{s.binaryType="blob",e.binaryBlob=!nf.isIOS}catch{}}catch{}finally{s&&s.close()}}catch{}finally{n&&n.close()}return e})(),this.validateId=AT,this.randomToken=sx}}const gr=new _T,ST="PeerJS: ";class CT{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...e){const n=[ST,...e];for(const s in n)n[s]instanceof Error&&(n[s]="("+n[s].name+") "+n[s].message);t>=3?console.log(...n):t>=2?console.warn("WARNING",...n):t>=1&&console.error("ERROR",...n)}constructor(){this._logLevel=0}}var fe=new CT,G0={},ET=Object.prototype.hasOwnProperty,Ys="~";function vf(){}Object.create&&(vf.prototype=Object.create(null),new vf().__proto__||(Ys=!1));function TT(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function rx(r,t,e,n,s){if(typeof e!="function")throw new TypeError("The listener must be a function");var a=new TT(e,n||r,s),l=Ys?Ys+t:t;return r._events[l]?r._events[l].fn?r._events[l]=[r._events[l],a]:r._events[l].push(a):(r._events[l]=a,r._eventsCount++),r}function ep(r,t){--r._eventsCount===0?r._events=new vf:delete r._events[t]}function Ds(){this._events=new vf,this._eventsCount=0}Ds.prototype.eventNames=function(){var t=[],e,n;if(this._eventsCount===0)return t;for(n in e=this._events)ET.call(e,n)&&t.push(Ys?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};Ds.prototype.listeners=function(t){var e=Ys?Ys+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,a=n.length,l=new Array(a);s<a;s++)l[s]=n[s].fn;return l};Ds.prototype.listenerCount=function(t){var e=Ys?Ys+t:t,n=this._events[e];return n?n.fn?1:n.length:0};Ds.prototype.emit=function(t,e,n,s,a,l){var c=Ys?Ys+t:t;if(!this._events[c])return!1;var h=this._events[c],f=arguments.length,p,g;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),f){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,s),!0;case 5:return h.fn.call(h.context,e,n,s,a),!0;case 6:return h.fn.call(h.context,e,n,s,a,l),!0}for(g=1,p=new Array(f-1);g<f;g++)p[g-1]=arguments[g];h.fn.apply(h.context,p)}else{var v=h.length,b;for(g=0;g<v;g++)switch(h[g].once&&this.removeListener(t,h[g].fn,void 0,!0),f){case 1:h[g].fn.call(h[g].context);break;case 2:h[g].fn.call(h[g].context,e);break;case 3:h[g].fn.call(h[g].context,e,n);break;case 4:h[g].fn.call(h[g].context,e,n,s);break;default:if(!p)for(b=1,p=new Array(f-1);b<f;b++)p[b-1]=arguments[b];h[g].fn.apply(h[g].context,p)}}return!0};Ds.prototype.on=function(t,e,n){return rx(this,t,e,n,!1)};Ds.prototype.once=function(t,e,n){return rx(this,t,e,n,!0)};Ds.prototype.removeListener=function(t,e,n,s){var a=Ys?Ys+t:t;if(!this._events[a])return this;if(!e)return ep(this,a),this;var l=this._events[a];if(l.fn)l.fn===e&&(!s||l.once)&&(!n||l.context===n)&&ep(this,a);else{for(var c=0,h=[],f=l.length;c<f;c++)(l[c].fn!==e||s&&!l[c].once||n&&l[c].context!==n)&&h.push(l[c]);h.length?this._events[a]=h.length===1?h[0]:h:ep(this,a)}return this};Ds.prototype.removeAllListeners=function(t){var e;return t?(e=Ys?Ys+t:t,this._events[e]&&ep(this,e)):(this._events=new vf,this._eventsCount=0),this};Ds.prototype.off=Ds.prototype.removeListener;Ds.prototype.addListener=Ds.prototype.on;Ds.prefixed=Ys;Ds.EventEmitter=Ds;G0=Ds;var Yc={};$c(Yc,"ConnectionType",()=>Yl);$c(Yc,"PeerErrorType",()=>qi);$c(Yc,"BaseConnectionErrorType",()=>g0);$c(Yc,"DataConnectionErrorType",()=>V0);$c(Yc,"SerializationType",()=>Rp);$c(Yc,"SocketEventType",()=>$l);$c(Yc,"ServerMessageType",()=>Ms);var Yl=(function(r){return r.Data="data",r.Media="media",r})({}),qi=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),g0=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),V0=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Rp=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),$l=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),Ms=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const ax="1.5.5";class NT extends G0.EventEmitter{constructor(t,e,n,s,a,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const c=t?"wss://":"ws://";this._baseUrl=c+e+":"+n+s+"peerjs?key="+a}start(t,e){this._id=t;const n=`${this._baseUrl}&id=${t}&token=${e}`;this._socket||!this._disconnected||(this._socket=new WebSocket(n+"&version="+ax),this._disconnected=!1,this._socket.onmessage=s=>{let a;try{a=JSON.parse(s.data),fe.log("Server message received:",a)}catch{fe.log("Invalid server message",s.data);return}this.emit($l.Message,a)},this._socket.onclose=s=>{this._disconnected||(fe.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit($l.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),fe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){fe.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Ms.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const e of t)this.send(e)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit($l.Error,"Invalid message");return}if(!this._wsOpen())return;const e=JSON.stringify(t);this._socket.send(e)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class ox{constructor(t){this.connection=t}startConnection(t){const e=this._startPeerConnection();if(this.connection.peerConnection=e,this.connection.type===Yl.Media&&t._stream&&this._addTracksToConnection(t._stream,e),t.originator){const n=this.connection,s={ordered:!!t.reliable},a=e.createDataChannel(n.label,s);n._initializeDataChannel(a),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){fe.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const e=this.connection.peer,n=this.connection.connectionId,s=this.connection.type,a=this.connection.provider;fe.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(fe.log(`Received ICE candidates for ${e}:`,l.candidate),a.socket.send({type:Ms.Candidate,payload:{candidate:l.candidate,type:s,connectionId:n},dst:e}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":fe.log("iceConnectionState is failed, closing connections to "+e),this.connection.emitError(g0.NegotiationFailed,"Negotiation of connection to "+e+" failed."),this.connection.close();break;case"closed":fe.log("iceConnectionState is closed, closing connections to "+e),this.connection.emitError(g0.ConnectionClosed,"Connection to "+e+" closed."),this.connection.close();break;case"disconnected":fe.log("iceConnectionState changed to disconnected on the connection with "+e);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},fe.log("Listening for data channel"),t.ondatachannel=l=>{fe.log("Received data channel");const c=l.channel;a.getConnection(e,n)._initializeDataChannel(c)},fe.log("Listening for remote stream"),t.ontrack=l=>{fe.log("Received remote stream");const c=l.streams[0],h=a.getConnection(e,n);if(h.type===Yl.Media){const f=h;this._addStreamToMediaConnection(c,f)}}}cleanup(){fe.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const e=t.signalingState!=="closed";let n=!1;const s=this.connection.dataChannel;s&&(n=!!s.readyState&&s.readyState!=="closed"),(e||n)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,e=this.connection.provider;try{const n=await t.createOffer(this.connection.options.constraints);fe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await t.setLocalDescription(n),fe.log("Set localDescription:",n,`for:${this.connection.peer}`);let s={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Yl.Data){const a=this.connection;s={...s,label:a.label,reliable:a.reliable,serialization:a.serialization}}e.socket.send({type:Ms.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(e.emitError(qi.WebRTC,s),fe.log("Failed to setLocalDescription, ",s))}}catch(n){e.emitError(qi.WebRTC,n),fe.log("Failed to createOffer, ",n)}}async _makeAnswer(){const t=this.connection.peerConnection,e=this.connection.provider;try{const n=await t.createAnswer();fe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await t.setLocalDescription(n),fe.log("Set localDescription:",n,`for:${this.connection.peer}`),e.socket.send({type:Ms.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){e.emitError(qi.WebRTC,s),fe.log("Failed to setLocalDescription, ",s)}}catch(n){e.emitError(qi.WebRTC,n),fe.log("Failed to create answer, ",n)}}async handleSDP(t,e){e=new RTCSessionDescription(e);const n=this.connection.peerConnection,s=this.connection.provider;fe.log("Setting remote description",e);const a=this;try{await n.setRemoteDescription(e),fe.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await a._makeAnswer()}catch(l){s.emitError(qi.WebRTC,l),fe.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){fe.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),fe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(e){this.connection.provider.emitError(qi.WebRTC,e),fe.log("Failed to handleCandidate, ",e)}}_addTracksToConnection(t,e){if(fe.log(`add tracks from stream ${t.id} to peer connection`),!e.addTrack)return fe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(n=>{e.addTrack(n,t)})}_addStreamToMediaConnection(t,e){fe.log(`add stream ${t.id} to media connection ${e.connectionId}`),e.addStream(t)}}class lx extends G0.EventEmitter{emitError(t,e){fe.error("Error:",e),this.emit("error",new LT(`${t}`,e))}}class LT extends Error{constructor(t,e){typeof e=="string"?super(e):(super(),Object.assign(this,e)),this.type=t}}class cx extends lx{get open(){return this._open}constructor(t,e,n){super(),this.peer=t,this.provider=e,this.options=n,this._open=!1,this.metadata=n.metadata}}class hp extends cx{static#t=this.ID_PREFIX="mc_";get type(){return Yl.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,e,n){super(t,e,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||hp.ID_PREFIX+gr.randomToken(),this._negotiator=new ox(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{fe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{fe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){fe.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const e=t.type,n=t.payload;switch(t.type){case Ms.Answer:this._negotiator.handleSDP(e,n.sdp),this._open=!0;break;case Ms.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:fe.warn(`Unrecognized message type:${e} from peer:${this.peer}`);break}}answer(t,e={}){if(this._localStream){fe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,e&&e.sdpTransform&&(this.options.sdpTransform=e.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const n=this.provider._getMessages(this.connectionId);for(const s of n)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class kT{constructor(t){this._options=t}_buildRequest(t){const e=this._options.secure?"https":"http",{host:n,port:s,path:a,key:l}=this._options,c=new URL(`${e}://${n}:${s}${a}${l}/${t}`);return c.searchParams.set("ts",`${Date.now()}${Math.random()}`),c.searchParams.set("version",ax),fetch(c.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){fe.error("Error retrieving ID",t);let e="";throw this._options.path==="/"&&this._options.host!==gr.CLOUD_HOST&&(e=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+e)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let e="";throw this._options.host===gr.CLOUD_HOST?e="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":e="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+e)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw fe.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class fp extends cx{static#t=this.ID_PREFIX="dc_";static#e=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Yl.Data}constructor(t,e,n){super(t,e,n),this.connectionId=this.options.connectionId||fp.ID_PREFIX+sx(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new ox(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{fe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=e=>{fe.log(`DC#${this.connectionId} dc onmessage:`,e.data)},this.dataChannel.onclose=()=>{fe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,e=!1){if(!this.open){this.emitError(V0.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,e)}async handleMessage(t){const e=t.payload;switch(t.type){case Ms.Answer:await this._negotiator.handleSDP(t.type,e.sdp);break;case Ms.Candidate:await this._negotiator.handleCandidate(e.candidate);break;default:fe.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class $0 extends fp{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",e=>this._handleDataMessage(e))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>fp.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(e){return fe.error(`DC#:${this.connectionId} Error when sending:`,e),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Rm extends $0{close(t){super.close(t),this._chunkedData={}}constructor(t,e,n){super(t,e,n),this.chunker=new ix,this.serialization=Rp.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const e=_w(t),n=e.__peerData;if(n){if(n.type==="close"){this.close();return}this._handleChunk(e);return}this.emit("data",e)}_handleChunk(t){const e=t.__peerData,n=this._chunkedData[e]||{data:[],count:0,total:t.total};if(n.data[t.n]=new Uint8Array(t.data),n.count++,this._chunkedData[e]=n,n.total===n.count){delete this._chunkedData[e];const s=xT(n.data);this._handleDataMessage({data:s})}}_send(t,e){const n=Sw(t);if(n instanceof Promise)return this._send_blob(n);if(!e&&n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}async _send_blob(t){const e=await t;if(e.byteLength>this.chunker.chunkedMTU){this._sendChunks(e);return}this._bufferedSend(e)}_sendChunks(t){const e=this.chunker.chunk(t);fe.log(`DC#${this.connectionId} Try to send ${e.length} chunks...`);for(const n of e)this.send(n,!0)}}class RT extends $0{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,e){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Rp.None}}class MT extends $0{_handleDataMessage({data:t}){const e=this.parse(this.decoder.decode(t)),n=e.__peerData;if(n&&n.type==="close"){this.close();return}this.emit("data",e)}_send(t,e){const n=this.encoder.encode(this.stringify(t));if(n.byteLength>=gr.chunkedMTU){this.emitError(V0.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(n)}constructor(...t){super(...t),this.serialization=Rp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Y0 extends lx{static#t=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[e,n]of this._connections)t[e]=n;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,e){super(),this._serializers={raw:RT,json:MT,binary:Rm,"binary-utf8":Rm,default:Rm},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let n;if(t&&t.constructor==Object?e=t:t&&(n=t.toString()),e={debug:0,host:gr.CLOUD_HOST,port:gr.CLOUD_PORT,path:"/",key:Y0.DEFAULT_KEY,token:gr.randomToken(),config:gr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...e},this._options=e,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==gr.CLOUD_HOST?this._options.secure=gr.isSecure():this._options.host==gr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&fe.setLogFunction(this._options.logFunction),fe.logLevel=this._options.debug||0,this._api=new kT(e),this._socket=this._createServerConnection(),!gr.supports.audioVideo&&!gr.supports.data){this._delayedAbort(qi.BrowserIncompatible,"The current browser does not support WebRTC");return}if(n&&!gr.validateId(n)){this._delayedAbort(qi.InvalidID,`ID "${n}" is invalid`);return}n?this._initialize(n):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(qi.ServerError,s))}_createServerConnection(){const t=new NT(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on($l.Message,e=>{this._handleMessage(e)}),t.on($l.Error,e=>{this._abort(qi.SocketError,e)}),t.on($l.Disconnected,()=>{this.disconnected||(this.emitError(qi.Network,"Lost connection to server."),this.disconnect())}),t.on($l.Close,()=>{this.disconnected||this._abort(qi.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const e=t.type,n=t.payload,s=t.src;switch(e){case Ms.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ms.Error:this._abort(qi.ServerError,n.msg);break;case Ms.IdTaken:this._abort(qi.UnavailableID,`ID "${this.id}" is taken`);break;case Ms.InvalidKey:this._abort(qi.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ms.Leave:fe.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case Ms.Expire:this.emitError(qi.PeerUnavailable,`Could not connect to peer ${s}`);break;case Ms.Offer:{const a=n.connectionId;let l=this.getConnection(s,a);if(l&&(l.close(),fe.warn(`Offer received for existing Connection ID:${a}`)),n.type===Yl.Media){const h=new hp(s,this,{connectionId:a,_payload:n,metadata:n.metadata});l=h,this._addConnection(s,l),this.emit("call",h)}else if(n.type===Yl.Data){const h=new this._serializers[n.serialization](s,this,{connectionId:a,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});l=h,this._addConnection(s,l),this.emit("connection",h)}else{fe.warn(`Received malformed connection type:${n.type}`);return}const c=this._getMessages(a);for(const h of c)l.handleMessage(h);break}default:{if(!n){fe.warn(`You received a malformed message from ${s} of type ${e}`);return}const a=n.connectionId,l=this.getConnection(s,a);l&&l.peerConnection?l.handleMessage(t):a?this._storeMessage(a,t):fe.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,e){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(e)}_getMessages(t){const e=this._lostMessages.get(t);return e?(this._lostMessages.delete(t),e):[]}connect(t,e={}){if(e={serialization:"default",...e},this.disconnected){fe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(qi.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const n=new this._serializers[e.serialization](t,this,e);return this._addConnection(t,n),n}call(t,e,n={}){if(this.disconnected){fe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(qi.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!e){fe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const s=new hp(t,this,{...n,_stream:e});return this._addConnection(t,s),s}_addConnection(t,e){fe.log(`add connection ${e.type}:${e.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(e)}_removeConnection(t){const e=this._connections.get(t.peer);if(e){const n=e.indexOf(t);n!==-1&&e.splice(n,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,e){const n=this._connections.get(t);if(!n)return null;for(const s of n)if(s.connectionId===e)return s;return null}_delayedAbort(t,e){setTimeout(()=>{this._abort(t,e)},0)}_abort(t,e){fe.error("Aborting!"),this.emitError(t,e),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(fe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const e=this._connections.get(t);if(e)for(const n of e)n.close()}disconnect(){if(this.disconnected)return;const t=this.id;fe.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)fe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)fe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=e=>{}){this._api.listAllPeers().then(e=>t(e)).catch(e=>this._abort(qi.ServerError,e))}}var DT=Y0;const PT=({onConnection:r,isStudent:t,roomId:e})=>{const[n,s]=bt.useState(""),[a,l]=bt.useState(""),[c,h]=bt.useState(null),[f,p]=bt.useState(!0),[g,v]=bt.useState(!0),[b,C]=bt.useState(""),A=bt.useRef(null),T=bt.useRef(null),S=bt.useRef(null),R=bt.useRef(null);bt.useEffect(()=>{if(!e)return;S.current&&S.current.destroy();const Q=t?void 0:e;console.log(`Initializing Peer. isStudent=${t}, roomId=${e}, myId=${Q}`);const gt=new DT(Q,{debug:2});return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(V=>{h(V),R.current=V,A.current&&(A.current.srcObject=V),gt.on("call",et=>{console.log("Receiving call..."),et.answer(V),et.on("stream",at=>{console.log("Received remote stream"),T.current&&(T.current.srcObject=at)})})}).catch(V=>{console.warn("Failed to get local stream, falling back to dummy stream",V),C(`Camera not found (${V.message}). Using dummy video for testing.`);const et=document.createElement("canvas");et.width=640,et.height=480;const at=et.getContext("2d"),wt=()=>{at.fillStyle="#1e1e2e",at.fillRect(0,0,et.width,et.height);const st=Date.now()/1e3,ct=et.width/2+Math.cos(st)*100,ht=et.height/2+Math.sin(st)*100;at.beginPath(),at.arc(ct,ht,50,0,Math.PI*2),at.fillStyle="#a855f7",at.fill(),at.fillStyle="white",at.font="40px Arial",at.fillText(window.location.hash?"Student (No Cam)":"Teacher (No Cam)",50,100),requestAnimationFrame(wt)};wt();const Rt=et.captureStream(30),Y=new(window.AudioContext||window.webkitAudioContext),k=Y.createOscillator(),U=k.connect(Y.createMediaStreamDestination());k.start();const W=U.stream.getAudioTracks()[0];Rt.addTrack(W),h(Rt),R.current=Rt,A.current&&(A.current.srcObject=Rt),gt.on("call",st=>{console.log("Receiving call (dummy)..."),st.answer(Rt),st.on("stream",ct=>{T.current&&(T.current.srcObject=ct)})})}),gt.on("error",V=>{console.error("Peer error:",V),C(`Connection Error: ${V.type} - ${V.message}`)}),gt.on("open",V=>{console.log("My Peer ID:",V),s(V),t&&l(e)}),gt.on("connection",V=>{V.on("open",()=>{r&&r(V)}),V.on("data",et=>{window.externalDraw&&window.externalDraw(et)})}),S.current=gt,()=>{}},[]),bt.useEffect(()=>{c&&a&&S.current&&!S.current.disconnected&&(console.log("Stream ready, auto-connecting to",a),M(a))},[c,a]);const M=Q=>{if(!R.current||!S.current){console.warn("Cannot connect: Stream or Peer not ready");return}console.log("Calling peer:",Q),S.current.call(Q,R.current).on("stream",et=>{console.log("Received remote stream from outgoing call"),T.current&&(T.current.srcObject=et)});const V=S.current.connect(Q);V.on("open",()=>{r&&r(V)}),V.on("data",et=>{window.externalDraw&&window.externalDraw(et)})},D=()=>{c&&(c.getAudioTracks()[0].enabled=!f,p(!f))},z=()=>{c&&(c.getVideoTracks()[0].enabled=!g,v(!g))},[K,Z]=bt.useState(!1),[J,H]=bt.useState(!1),lt=()=>{const Q=`${window.location.origin}/session/${e}`;navigator.clipboard.writeText(Q),H(!0),setTimeout(()=>H(!1),2e3)},P=async()=>{C("");try{const Q=await navigator.mediaDevices.enumerateDevices();console.log("Available Devices:",Q);const gt=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});h(gt),R.current=gt,A.current&&(A.current.srcObject=gt),S.current}catch(Q){console.error("Retry failed",Q),C(`Retry Failed: ${Q.message}`)}},[G,rt]=bt.useState([]);return bt.useEffect(()=>{navigator.mediaDevices.enumerateDevices().then(Q=>{rt(Q.filter(gt=>gt.kind==="videoinput"))})},[b]),ot.jsxs("div",{className:"absolute top-20 right-4 flex flex-col gap-4 z-40 pointer-events-auto",children:[b&&ot.jsxs("div",{className:"bg-red-500/90 text-white p-4 rounded-xl shadow-lg max-w-xs backdrop-blur-sm border border-white/20 animate-in slide-in-from-right",children:[ot.jsx("p",{className:"font-bold text-sm",children:" Error"}),ot.jsx("p",{className:"text-xs mt-1 mb-2",children:b}),ot.jsxs("div",{className:"bg-black/20 p-2 rounded mb-2",children:[ot.jsx("p",{className:"text-[10px] opacity-75 uppercase font-bold",children:"Detected Cameras:"}),G.length>0?ot.jsx("ul",{className:"list-disc pl-4",children:G.map((Q,gt)=>ot.jsx("li",{className:"text-[10px]",children:Q.label||`Camera ${gt+1} (Label hidden)`},gt))}):ot.jsx("p",{className:"text-[10px] italic",children:"No cameras detected by browser."})]}),ot.jsxs("div",{className:"flex gap-2",children:[ot.jsx("button",{onClick:()=>C(""),className:"text-xs bg-white/20 hover:bg-white/30 px-2 py-1 rounded transition-colors",children:"Dismiss"}),ot.jsx("button",{onClick:P,className:"text-xs bg-white text-red-600 font-bold px-2 py-1 rounded transition-colors",children:"Try Again"})]})]}),ot.jsxs("button",{onClick:()=>Z(!0),className:"bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-xl shadow-lg font-bold text-lg animate-pulse hover:animate-none transition-all border-2 border-white/20 flex items-center gap-2",children:["Invite Student ",ot.jsx(Nb,{size:20})]}),K&&ot.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:ot.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:[ot.jsxs("div",{className:"bg-purple-600 p-6 text-white text-center",children:[ot.jsx("h3",{className:"text-2xl font-bold mb-1",children:"Invite Student"}),ot.jsx("p",{className:"text-purple-100 text-sm",children:"Share this link to start the session"})]}),ot.jsxs("div",{className:"p-6 space-y-4",children:[ot.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 flex items-center gap-3",children:[ot.jsx("span",{className:"bg-white p-2 rounded-lg shadow-sm",children:""}),ot.jsx("input",{readOnly:!0,value:`${window.location.origin}/session/${e}`,className:"bg-transparent border-none focus:ring-0 text-gray-600 text-sm flex-1 font-mono w-full overflow-hidden text-ellipsis"})]}),ot.jsx("button",{onClick:lt,className:`w-full py-3 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-2 ${J?"bg-green-500 text-white":"bg-brand-navy text-white hover:bg-opacity-90"}`,children:J?ot.jsxs(ot.Fragment,{children:[ot.jsx("span",{className:"text-xl",children:""})," Link Copied!"]}):ot.jsxs(ot.Fragment,{children:[ot.jsx(Nb,{size:20})," Copy"]})}),ot.jsx("button",{onClick:()=>{Z(!1),H(!1)},className:"w-full py-3 text-gray-400 font-bold hover:text-gray-600 transition-colors",children:"Close"})]})]})}),ot.jsxs("div",{className:"flex flex-col gap-4 bg-white/10 backdrop-blur-md p-4 rounded-2xl border border-white/20 shadow-2xl",children:[ot.jsxs("div",{className:"relative group w-64 aspect-video bg-black rounded-lg overflow-hidden shadow-inner border border-gray-600",children:[ot.jsx("video",{ref:A,autoPlay:!0,muted:!0,className:`w-full h-full object-cover ${!g&&"hidden"}`}),!g&&ot.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/50 bg-brand-navy",children:"Camera Off"}),ot.jsx("div",{className:"absolute bottom-2 left-2 text-white/50 text-xs bg-black/50 px-2 rounded",children:t?"Student":"Teacher"}),ot.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4",children:[ot.jsx("button",{onClick:D,className:`p-3 rounded-full ${f?"bg-white text-brand-navy":"bg-red-500 text-white"} hover:scale-110 transition-transform`,children:f?ot.jsx(IS,{size:18}):ot.jsx(OS,{size:18})}),ot.jsx("button",{onClick:z,className:`p-3 rounded-full ${g?"bg-white text-brand-navy":"bg-red-500 text-white"} hover:scale-110 transition-transform`,children:g?ot.jsx(l3,{size:18}):ot.jsx(a3,{size:18})}),ot.jsx("button",{onClick:P,className:"p-3 rounded-full bg-white text-brand-navy hover:scale-110 transition-transform",title:"Retry Camera",children:""})]})]}),ot.jsxs("div",{className:"relative w-64 aspect-video bg-black rounded-lg overflow-hidden shadow-inner border border-gray-600",children:[ot.jsx("video",{ref:T,autoPlay:!0,className:"w-full h-full object-cover"}),ot.jsx("div",{className:"absolute bottom-2 left-2 text-white/50 text-xs bg-black/50 px-2 rounded",children:t?"Teacher":"Student"})]})]})]})},OT=({connection:r,isStudent:t})=>{const[e,n]=bt.useState(!1),[s,a]=bt.useState(!1),[l,c]=bt.useState([]),[h,f]=bt.useState(""),p=bt.useRef(null),[g,v]=bt.useState(!1),b=()=>{p.current?.scrollIntoView({behavior:"smooth"})};bt.useEffect(()=>{b()},[l,e]),bt.useEffect(()=>{if(!r)return;const A=T=>{if(T&&T.type==="chat"){const S=T.sender||(t?"Teacher":"Student");c(R=>[...R,{sender:S,text:T.message,time:new Date}]),e||v(!0)}};return r.on("data",A),()=>{r.off("data",A)}},[r,e]);const C=A=>{if(A.preventDefault(),!h.trim())return;const T=t?"Student":"Teacher",S={sender:T,text:h,time:new Date};c(R=>[...R,S]),r&&r.open&&r.send({type:"chat",message:h,sender:T}),f("")};return ot.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex flex-col items-end pointer-events-auto",children:[!e&&ot.jsx("button",{onClick:()=>{n(!0),v(!1)},className:`p-4 rounded-full shadow-2xl transition-all transform hover:scale-110 ${g?"bg-red-500 animate-bounce":"bg-purple-700"} text-white border-2 border-white`,title:"Open Chat",children:ot.jsx(kb,{size:28})}),e&&ot.jsxs("div",{className:"bg-white w-80 h-96 rounded-2xl shadow-2xl flex flex-col overflow-hidden border-2 border-gray-200 animate-in slide-in-from-bottom-10 fade-in duration-200",children:[ot.jsxs("div",{className:"bg-slate-900 p-3 flex justify-between items-center text-white shadow-md z-10",children:[ot.jsxs("div",{className:"flex items-center gap-2",children:[ot.jsx(kb,{size:18,className:"text-purple-400"}),ot.jsx("span",{className:"font-bold text-sm",children:"Chat"})]}),ot.jsxs("div",{className:"flex items-center gap-1",children:[ot.jsx("button",{onClick:()=>n(!1),className:"hover:bg-white/20 p-1.5 rounded transition-colors",title:"Minimize",children:ot.jsx(jS,{size:18})}),ot.jsx("button",{onClick:()=>n(!1),className:"hover:bg-red-500 p-1.5 rounded transition-colors",title:"Close",children:ot.jsx(Kv,{size:18})})]})]}),ot.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50",children:[l.length===0&&ot.jsxs("div",{className:"text-center text-gray-400 text-sm mt-10",children:[ot.jsx("p",{children:"No messages yet."}),ot.jsx("p",{className:"text-xs mt-1",children:"Chat is ready!"})]}),l.map((A,T)=>ot.jsxs("div",{className:`flex flex-col ${A.sender===(t?"Student":"Teacher")?"items-end":"items-start"}`,children:[ot.jsx("div",{className:`max-w-[85%] px-3 py-2 rounded-xl text-sm shadow-sm ${A.sender===(t?"Student":"Teacher")?"bg-purple-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-200 rounded-bl-none"}`,children:A.text}),ot.jsxs("span",{className:"text-[10px] text-gray-400 mt-1 px-1",children:[A.sender,"  ",A.time.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},T)),ot.jsx("div",{ref:p})]}),ot.jsxs("form",{onSubmit:C,className:"p-3 bg-white border-t border-gray-100 flex gap-2",children:[ot.jsx("input",{type:"text",value:h,onChange:A=>f(A.target.value),placeholder:"Type a message...",className:"flex-1 bg-gray-100 text-gray-800 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 border border-transparent focus:border-purple-300"}),ot.jsx("button",{type:"submit",disabled:!h.trim(),className:"p-2 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ot.jsx(XS,{size:16})})]})]})]})},BT=()=>{const{roomId:r}=h_(),[t]=nS(),e=t.get("host")==="true",n=t.get("student")||"Guest",s=!e,[a,l]=bt.useState(null);return ot.jsxs("div",{className:"relative w-screen h-screen overflow-hidden bg-brand-light",children:[ot.jsx(lT,{connection:a,isHost:e,sessionId:r,studentName:n}),ot.jsx(PT,{roomId:r,isStudent:s,onConnection:l}),ot.jsx(OT,{connection:a,isStudent:s})]})};function IT(){return ot.jsx(Z_,{children:ot.jsxs(E_,{children:[ot.jsx(Dm,{path:"/",element:ot.jsx(p3,{})}),ot.jsx(Dm,{path:"/session/:roomId",element:ot.jsx(BT,{})})]})})}class FT extends Nv.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,e){this.setState({error:t,errorInfo:e}),console.error("Uncaught error:",t,e)}render(){return this.state.hasError?ot.jsxs("div",{className:"p-10 text-red-600 font-mono",children:[ot.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong."}),ot.jsxs("details",{className:"whitespace-pre-wrap bg-gray-100 p-4 rounded border border-red-200",children:[this.state.error&&this.state.error.toString(),ot.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),ot.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reload Page"})]}):this.props.children}}NA.createRoot(document.getElementById("root")).render(ot.jsx(Nv.StrictMode,{children:ot.jsx(FT,{children:ot.jsx(IT,{})})}));export{Dn as _,UT as c,m0 as g};
